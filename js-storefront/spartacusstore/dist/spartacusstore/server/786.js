"use strict";var __defProp=Object.defineProperty,__name=(target,value)=>__defProp(target,"name",{value,configurable:!0});exports.id=786,exports.ids=[786],exports.modules={8144:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{RulebasedConfiguratorWrapperModule:()=>RulebasedConfiguratorWrapperModule});var core=__webpack_require__(4650),spartacus_core=__webpack_require__(1742),spartacus_product_configurator_common=__webpack_require__(7436),Subscription=__webpack_require__(2654),of=__webpack_require__(1086),ReplaySubject=__webpack_require__(839),merge=__webpack_require__(6787),timer=__webpack_require__(8723),BehaviorSubject=__webpack_require__(591),combineLatest=__webpack_require__(6053),empty=__webpack_require__(8896),delayWhen=__webpack_require__(8003),filter=__webpack_require__(2198),map=__webpack_require__(4850),tap=__webpack_require__(2994),take=__webpack_require__(2986),switchMap=__webpack_require__(7545),switchMapTo=__webpack_require__(2313),delay=__webpack_require__(943),mergeMap=__webpack_require__(1709),catchError=__webpack_require__(7221),innerSubscribe=__webpack_require__(1177);function distinct(keySelector,flushes){return source=>source.lift(new DistinctOperator(keySelector,flushes))}__name(distinct,"distinct");class DistinctOperator{constructor(keySelector,flushes){this.keySelector=keySelector,this.flushes=flushes}call(subscriber,source){return source.subscribe(new DistinctSubscriber(subscriber,this.keySelector,this.flushes))}}__name(DistinctOperator,"DistinctOperator");class DistinctSubscriber extends innerSubscribe.Ds{constructor(destination,keySelector,flushes){super(destination),this.keySelector=keySelector,this.values=new Set,flushes&&this.add((0,innerSubscribe.ft)(flushes,new innerSubscribe.IY(this)))}notifyNext(){this.values.clear()}notifyError(error){this._error(error)}_next(value){this.keySelector?this._useKeySelector(value):this._finalizeNext(value,value)}_useKeySelector(value){let key;const{destination}=this;try{key=this.keySelector(value)}catch(err){return void destination.error(err)}this._finalizeNext(key,value)}_finalizeNext(key,value){const{values}=this;values.has(key)||(values.add(key),this.destination.next(value))}}__name(DistinctSubscriber,"DistinctSubscriber");var debounce=__webpack_require__(8849),distinctUntilKeyChanged=__webpack_require__(9184),distinctUntilChanged=__webpack_require__(5778),ngrx_store=__webpack_require__(8555),spartacus_cart_base_core=__webpack_require__(5973),spartacus_cart_base_root=__webpack_require__(6789),spartacus_checkout_base_root=__webpack_require__(2733),spartacus_order_root=__webpack_require__(5503),spartacus_storefront=__webpack_require__(9764),common=__webpack_require__(6895),fesm2020_forms=__webpack_require__(4006),ngrx_effects=__webpack_require__(5024),http=__webpack_require__(529),ng_select_ng_select=__webpack_require__(7039),router=__webpack_require__(610);function ConfiguratorAddToCartButtonComponent_ng_container_0_ng_container_1_Template(rf,ctx){if(1&rf){const _r7=core.EpF();core.ynx(0),core.TgZ(1,"div",3)(2,"button",4),core.NdJ("click",__name(function(){core.CHM(_r7);const container_r1=core.oxw().ngIf,ctx_r5=core.oxw();return core.KtG(ctx_r5.onAddToCart(container_r1.configuration,container_r1.routerData))},"ConfiguratorAddToCartButtonComponent_ng_container_0_ng_container_1_Template_button_click_2_listener")),core.ALo(3,"cxTranslate"),core.ALo(4,"cxTranslate"),core._uU(5),core.ALo(6,"cxTranslate"),core.qZA()(),core.BQk()}if(2&rf){const container_r1=core.oxw().ngIf,ctx_r2=core.oxw();core.xp6(2),core.uIk("aria-label",core.lcZ(3,2,ctx_r2.getButtonResourceKey(container_r1.routerData,container_r1.configuration))+" "+core.xi3(4,4,"configurator.a11y.addToCartPrices",ctx_r2.extractConfigPrices(container_r1.configuration))),core.xp6(3),core.hij(" ",core.lcZ(6,7,ctx_r2.getButtonResourceKey(container_r1.routerData,container_r1.configuration))," ")}}function ConfiguratorAddToCartButtonComponent_ng_container_0_ng_template_2_Template(rf,ctx){if(1&rf){const _r10=core.EpF();core.TgZ(0,"div",5)(1,"button",6),core.NdJ("click",__name(function(){core.CHM(_r10);const ctx_r9=core.oxw(2);return core.KtG(ctx_r9.leaveConfigurationOverview())},"ConfiguratorAddToCartButtonComponent_ng_container_0_ng_template_2_Template_button_click_1_listener")),core._uU(2),core.ALo(3,"cxTranslate"),core.qZA()()}2&rf&&(core.xp6(2),core.hij(" ",core.lcZ(3,1,"configurator.addToCart.buttonDisplayOnly")," "))}function ConfiguratorAddToCartButtonComponent_ng_container_0_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,ConfiguratorAddToCartButtonComponent_ng_container_0_ng_container_1_Template,7,9,"ng-container",1),core.YNc(2,ConfiguratorAddToCartButtonComponent_ng_container_0_ng_template_2_Template,4,3,"ng-template",null,2,core.W1O),core.BQk()),2&rf){const container_r1=ctx.ngIf,_r3=core.MAs(3);core.xp6(1),core.Q6J("ngIf",!container_r1.routerData.displayOnly)("ngIfElse",_r3)}}function ConfiguratorAttributeFooterComponent_div_0_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",1),core.ALo(1,"cxTranslate"),core._UZ(2,"cx-icon",2),core._uU(3),core.ALo(4,"cxTranslate"),core.qZA()),2&rf){const ctx_r0=core.oxw();core.s9C("id",ctx_r0.createAttributeUiKey("attribute-msg",ctx_r0.attribute.name)),core.uIk("aria-label",core.lcZ(1,4,"configurator.attribute.defaultRequiredMessage")),core.xp6(2),core.Q6J("type",ctx_r0.iconType.ERROR),core.xp6(1),core.hij(" ",core.lcZ(4,6,"configurator.attribute.defaultRequiredMessage"),"\n")}}function ConfiguratorAttributeHeaderComponent_ng_container_0_div_1_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",8),core._UZ(1,"cx-icon",9),core._uU(2),core.ALo(3,"cxTranslate"),core.qZA()),2&rf){const ctx_r8=core.oxw(2);core.xp6(1),core.Q6J("type",ctx_r8.iconTypes.WARNING),core.xp6(1),core.hij(" ",core.lcZ(3,2,"configurator.attribute.notVisibleAttributeMsg")," ")}}function ConfiguratorAttributeHeaderComponent_ng_container_0_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,ConfiguratorAttributeHeaderComponent_ng_container_0_div_1_Template,4,4,"div",7),core.BQk()),2&rf){const ctx_r0=core.oxw();core.xp6(1),core.Q6J("ngIf",!ctx_r0.attribute.visible)}}function ConfiguratorAttributeHeaderComponent_div_7_cx_icon_2_Template(rf,ctx){if(1&rf&&core._UZ(0,"cx-icon",9),2&rf){const ctx_r9=core.oxw(2);core.Q6J("type",ctx_r9.iconTypes.WARNING)}}__name(ConfiguratorAddToCartButtonComponent_ng_container_0_ng_container_1_Template,"ConfiguratorAddToCartButtonComponent_ng_container_0_ng_container_1_Template"),__name(ConfiguratorAddToCartButtonComponent_ng_container_0_ng_template_2_Template,"ConfiguratorAddToCartButtonComponent_ng_container_0_ng_template_2_Template"),__name(ConfiguratorAddToCartButtonComponent_ng_container_0_Template,"ConfiguratorAddToCartButtonComponent_ng_container_0_Template"),__name(ConfiguratorAttributeFooterComponent_div_0_Template,"ConfiguratorAttributeFooterComponent_div_0_Template"),__name(ConfiguratorAttributeHeaderComponent_ng_container_0_div_1_Template,"ConfiguratorAttributeHeaderComponent_ng_container_0_div_1_Template"),__name(ConfiguratorAttributeHeaderComponent_ng_container_0_Template,"ConfiguratorAttributeHeaderComponent_ng_container_0_Template"),__name(ConfiguratorAttributeHeaderComponent_div_7_cx_icon_2_Template,"ConfiguratorAttributeHeaderComponent_div_7_cx_icon_2_Template");const _c0=__name(function(a0){return{attribute:a0}},"_c0");function ConfiguratorAttributeHeaderComponent_div_7_ng_container_3_ng_container_1_Template(rf,ctx){if(1&rf){const _r13=core.EpF();core.ynx(0),core.TgZ(1,"a",13),core.NdJ("click",__name(function(){core.CHM(_r13);const ctx_r12=core.oxw(3);return core.KtG(ctx_r12.navigateToGroup())},"ConfiguratorAttributeHeaderComponent_div_7_ng_container_3_ng_container_1_Template_a_click_1_listener"))("keydown.enter",__name(function(){core.CHM(_r13);const ctx_r14=core.oxw(3);return core.KtG(ctx_r14.navigateToGroup())},"ConfiguratorAttributeHeaderComponent_div_7_ng_container_3_ng_container_1_Template_a_keydown_enter_1_listener")),core.ALo(2,"cxTranslate"),core._uU(3),core.ALo(4,"cxTranslate"),core.qZA(),core.BQk()}if(2&rf){const ctx_r11=core.oxw(3);core.xp6(1),core.uIk("aria-label",core.xi3(2,2,"configurator.a11y.navigateToConflict",core.VKq(7,_c0,ctx_r11.attribute.label))),core.xp6(2),core.hij(" ",core.lcZ(4,5,ctx_r11.getConflictMessageKey())," ")}}function ConfiguratorAttributeHeaderComponent_div_7_ng_container_3_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,ConfiguratorAttributeHeaderComponent_div_7_ng_container_3_ng_container_1_Template,5,9,"ng-container",12),core.BQk()),2&rf){const ctx_r10=core.oxw(2),_r6=core.MAs(14);core.xp6(1),core.Q6J("ngIf",ctx_r10.isNavigationToConflictEnabled())("ngIfElse",_r6)}}function ConfiguratorAttributeHeaderComponent_div_7_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",10),core.ALo(1,"cxTranslate"),core.YNc(2,ConfiguratorAttributeHeaderComponent_div_7_cx_icon_2_Template,1,1,"cx-icon",11),core.YNc(3,ConfiguratorAttributeHeaderComponent_div_7_ng_container_3_Template,2,2,"ng-container",12),core.qZA()),2&rf){const ctx_r1=core.oxw(),_r4=core.MAs(12);core.s9C("id",ctx_r1.createAttributeUiKey("attribute-msg",ctx_r1.attribute.name)),core.uIk("aria-live",ctx_r1.isAttributeGroup()?"assertive":"off")("aria-atomic",!!ctx_r1.isAttributeGroup())("role",ctx_r1.isAttributeGroup()?"alert":null)("aria-label",ctx_r1.isAttributeGroup()?core.lcZ(1,8,"configurator.a11y.conflictDetected"):""),core.xp6(2),core.Q6J("ngIf",ctx_r1.isAttributeGroup()),core.xp6(1),core.Q6J("ngIf",ctx_r1.isAttributeGroup())("ngIfElse",_r4)}}function ConfiguratorAttributeHeaderComponent_div_8_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",14),core.ALo(1,"cxTranslate"),core._UZ(2,"cx-icon",15),core._uU(3),core.ALo(4,"cxTranslate"),core.qZA()),2&rf){const ctx_r2=core.oxw();core.s9C("id",ctx_r2.createAttributeUiKey("attribute-msg",ctx_r2.attribute.name)),core.uIk("aria-label",core.lcZ(1,4,ctx_r2.getRequiredMessageKey())),core.xp6(2),core.Q6J("type",ctx_r2.iconTypes.ERROR),core.xp6(1),core.hij(" ",core.lcZ(4,6,ctx_r2.getRequiredMessageKey()),"\n")}}function ConfiguratorAttributeHeaderComponent_img_10_Template(rf,ctx){if(1&rf&&core._UZ(0,"img",16),2&rf){const ctx_r3=core.oxw();core.s9C("src",null==ctx_r3.image?null:ctx_r3.image.url,core.LSH),core.s9C("alt",null==ctx_r3.image?null:ctx_r3.image.altText)}}function ConfiguratorAttributeHeaderComponent_ng_template_11_Template(rf,ctx){if(1&rf){const _r16=core.EpF();core.TgZ(0,"a",13),core.NdJ("click",__name(function(){core.CHM(_r16);const ctx_r15=core.oxw();return core.KtG(ctx_r15.navigateToGroup())},"ConfiguratorAttributeHeaderComponent_ng_template_11_Template_a_click_0_listener"))("keydown.enter",__name(function(){core.CHM(_r16);const ctx_r17=core.oxw();return core.KtG(ctx_r17.navigateToGroup())},"ConfiguratorAttributeHeaderComponent_ng_template_11_Template_a_keydown_enter_0_listener")),core._uU(1),core.ALo(2,"cxTranslate"),core.qZA()}if(2&rf){const ctx_r5=core.oxw();core.xp6(1),core.hij(" ",core.lcZ(2,1,ctx_r5.getConflictMessageKey())," ")}}function ConfiguratorAttributeHeaderComponent_ng_template_13_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",17),core._uU(1),core.ALo(2,"cxTranslate"),core.qZA()),2&rf){const ctx_r7=core.oxw();core.xp6(1),core.hij(" ",core.lcZ(2,1,ctx_r7.getConflictMessageKey())," ")}}__name(ConfiguratorAttributeHeaderComponent_div_7_ng_container_3_ng_container_1_Template,"ConfiguratorAttributeHeaderComponent_div_7_ng_container_3_ng_container_1_Template"),__name(ConfiguratorAttributeHeaderComponent_div_7_ng_container_3_Template,"ConfiguratorAttributeHeaderComponent_div_7_ng_container_3_Template"),__name(ConfiguratorAttributeHeaderComponent_div_7_Template,"ConfiguratorAttributeHeaderComponent_div_7_Template"),__name(ConfiguratorAttributeHeaderComponent_div_8_Template,"ConfiguratorAttributeHeaderComponent_div_8_Template"),__name(ConfiguratorAttributeHeaderComponent_img_10_Template,"ConfiguratorAttributeHeaderComponent_img_10_Template"),__name(ConfiguratorAttributeHeaderComponent_ng_template_11_Template,"ConfiguratorAttributeHeaderComponent_ng_template_11_Template"),__name(ConfiguratorAttributeHeaderComponent_ng_template_13_Template,"ConfiguratorAttributeHeaderComponent_ng_template_13_Template");const _c1=__name(function(a0){return{param:a0}},"_c1");function ConfiguratorShowMoreComponent_ng_container_0_button_3_ng_container_1_Template(rf,ctx){1&rf&&(core.ynx(0),core._uU(1),core.ALo(2,"cxTranslate"),core.BQk()),2&rf&&(core.xp6(1),core.hij("\xa0... ",core.lcZ(2,1,"configurator.button.less"),""))}function ConfiguratorShowMoreComponent_ng_container_0_button_3_ng_template_2_Template(rf,ctx){1&rf&&(core._uU(0),core.ALo(1,"cxTranslate")),2&rf&&core.hij(" \xa0... ",core.lcZ(1,1,"configurator.button.more"),"")}function ConfiguratorShowMoreComponent_ng_container_0_button_3_Template(rf,ctx){if(1&rf){const _r6=core.EpF();core.TgZ(0,"button",3),core.NdJ("click",__name(function(){core.CHM(_r6);const ctx_r5=core.oxw(2);return core.KtG(ctx_r5.toggleShowMore())},"ConfiguratorShowMoreComponent_ng_container_0_button_3_Template_button_click_0_listener")),core.YNc(1,ConfiguratorShowMoreComponent_ng_container_0_button_3_ng_container_1_Template,3,3,"ng-container",4),core.YNc(2,ConfiguratorShowMoreComponent_ng_container_0_button_3_ng_template_2_Template,2,3,"ng-template",null,5,core.W1O),core.qZA()}if(2&rf){const _r3=core.MAs(3),ctx_r1=core.oxw(2);core.xp6(1),core.Q6J("ngIf",ctx_r1.showHiddenText)("ngIfElse",_r3)}}__name(ConfiguratorShowMoreComponent_ng_container_0_button_3_ng_container_1_Template,"ConfiguratorShowMoreComponent_ng_container_0_button_3_ng_container_1_Template"),__name(ConfiguratorShowMoreComponent_ng_container_0_button_3_ng_template_2_Template,"ConfiguratorShowMoreComponent_ng_container_0_button_3_ng_template_2_Template"),__name(ConfiguratorShowMoreComponent_ng_container_0_button_3_Template,"ConfiguratorShowMoreComponent_ng_container_0_button_3_Template");const _c2=__name(function(a0){return{item:a0}},"_c2");function ConfiguratorShowMoreComponent_ng_container_0_Template(rf,ctx){if(1&rf&&(core.ynx(0),core._UZ(1,"span",1),core.ALo(2,"cxTranslate"),core.YNc(3,ConfiguratorShowMoreComponent_ng_container_0_button_3_Template,4,2,"button",2),core.BQk()),2&rf){const ctx_r0=core.oxw();core.xp6(1),core.Q6J("innerHTML",ctx_r0.textToShow,core.oJD),core.uIk("aria-label",core.xi3(2,3,"configurator.a11y.itemDescription",core.VKq(6,_c2,ctx_r0.productName))),core.xp6(2),core.Q6J("ngIf",ctx_r0.showMore)}}function ConfiguratorPriceComponent_ng_container_0_ng_container_1_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.TgZ(1,"div",1),core.ALo(2,"cxTranslate"),core._uU(3),core.qZA(),core.BQk()),2&rf){const ctx_r1=core.oxw(2);core.xp6(1),core.Q6J("ngClass",ctx_r1.styleClass),core.uIk("aria-label",core.lcZ(2,3,"configurator.a11y.valueSurcharge")),core.xp6(2),core.hij(" ",ctx_r1.price," ")}}function ConfiguratorPriceComponent_ng_container_0_ng_container_2_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.TgZ(1,"div",2),core.ALo(2,"cxTranslate"),core._uU(3),core.ALo(4,"cxNumeric"),core.qZA(),core.TgZ(5,"div",3),core._uU(6),core.qZA(),core.BQk()),2&rf){const ctx_r2=core.oxw(2);core.xp6(1),core.uIk("aria-label",core.lcZ(2,3,"configurator.a11y.valueSurcharge")),core.xp6(2),core.hij(" ",ctx_r2.quantityWithPrice(core.lcZ(4,5,null==ctx_r2.formula?null:ctx_r2.formula.quantity))," "),core.xp6(3),core.Oqu(ctx_r2.priceTotal)}}function ConfiguratorPriceComponent_ng_container_0_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,ConfiguratorPriceComponent_ng_container_0_ng_container_1_Template,4,5,"ng-container",0),core.YNc(2,ConfiguratorPriceComponent_ng_container_0_ng_container_2_Template,7,7,"ng-container",0),core.BQk()),2&rf){const ctx_r0=core.oxw();core.xp6(1),core.Q6J("ngIf",ctx_r0.displayPriceOnly()),core.xp6(1),core.Q6J("ngIf",ctx_r0.displayQuantityAndPrice())}}function ConfiguratorAttributeProductCardComponent_ng_container_0_div_10_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",10),core._uU(1),core.ALo(2,"cxTranslate"),core.qZA()),2&rf){const product_r1=core.oxw().ngIf;core.xp6(1),core.AsE(" ",core.lcZ(2,2,"configurator.attribute.id"),": ",product_r1.code," ")}}function ConfiguratorAttributeProductCardComponent_ng_container_0_cx_configurator_show_more_11_Template(rf,ctx){if(1&rf&&core._UZ(0,"cx-configurator-show-more",11),2&rf){const product_r1=core.oxw().ngIf;core.Q6J("text",null==product_r1?null:product_r1.description)("textSize",45)("productName",product_r1.code)}}function ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_cx_configurator_attribute_quantity_3_Template(rf,ctx){if(1&rf){const _r11=core.EpF();core.TgZ(0,"cx-configurator-attribute-quantity",20),core.NdJ("changeQuantity",__name(function($event){core.CHM(_r11);const ctx_r10=core.oxw(3);return core.KtG(ctx_r10.onChangeQuantity($event))},"ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_cx_configurator_attribute_quantity_3_Template_cx_configurator_attribute_quantity_changeQuantity_0_listener")),core.qZA()}if(2&rf){const ctx_r8=core.oxw(3);core.Q6J("quantityOptions",ctx_r8.extractQuantityParameters())}}function ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_container_1_button_1_Template(rf,ctx){if(1&rf){const _r19=core.EpF();core.TgZ(0,"button",26),core.NdJ("click",__name(function(){core.CHM(_r19);const ctx_r18=core.oxw(5);return core.KtG(ctx_r18.onHandleDeselect())},"ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_container_1_button_1_Template_button_click_0_listener")),core._uU(1),core.ALo(2,"cxTranslate"),core.qZA()}if(2&rf){const product_r1=core.oxw(4).ngIf,ctx_r15=core.oxw();core.Q6J("cxFocus",ctx_r15.focusConfig),core.uIk("aria-label",ctx_r15.getAriaLabelMultiSelected(product_r1))("aria-describedby",ctx_r15.createAttributeUiKey("label",null==ctx_r15.productCardOptions?null:ctx_r15.productCardOptions.attributeName)),core.xp6(1),core.hij(" ",core.lcZ(2,4,"configurator.button.remove")," ")}}function ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_container_1_ng_template_2_Template(rf,ctx){if(1&rf){const _r22=core.EpF();core.TgZ(0,"button",27),core.NdJ("click",__name(function(){core.CHM(_r22);const ctx_r21=core.oxw(5);return core.KtG(ctx_r21.onHandleSelect())},"ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_container_1_ng_template_2_Template_button_click_0_listener")),core.ALo(1,"async"),core._uU(2),core.ALo(3,"cxTranslate"),core.qZA()}if(2&rf){const product_r1=core.oxw(4).ngIf,ctx_r17=core.oxw();core.Q6J("disabled",(null==ctx_r17.productCardOptions?null:ctx_r17.productCardOptions.disableAllButtons)||core.lcZ(1,5,ctx_r17.loading$))("cxFocus",ctx_r17.focusConfig),core.uIk("aria-label",ctx_r17.getAriaLabelMultiUnselected(product_r1))("aria-describedby",ctx_r17.createAttributeUiKey("label",null==ctx_r17.productCardOptions?null:ctx_r17.productCardOptions.attributeName)),core.xp6(2),core.hij(" ",core.lcZ(3,7,"configurator.button.add")," ")}}function ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_container_1_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_container_1_button_1_Template,3,6,"button",24),core.YNc(2,ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_container_1_ng_template_2_Template,4,9,"ng-template",null,25,core.W1O),core.BQk()),2&rf){const _r16=core.MAs(3),ctx_r12=core.oxw(4);core.xp6(1),core.Q6J("ngIf",null==ctx_r12.productCardOptions||null==ctx_r12.productCardOptions.productBoundValue?null:ctx_r12.productCardOptions.productBoundValue.selected)("ngIfElse",_r16)}}function ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_template_2_button_0_Template(rf,ctx){if(1&rf){const _r28=core.EpF();core.TgZ(0,"button",27),core.NdJ("click",__name(function(){core.CHM(_r28);const ctx_r27=core.oxw(5);return core.KtG(ctx_r27.onHandleSelect())},"ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_template_2_button_0_Template_button_click_0_listener")),core.ALo(1,"async"),core._uU(2),core.ALo(3,"cxTranslate"),core.qZA()}if(2&rf){const product_r1=core.oxw(4).ngIf,ctx_r24=core.oxw();core.Q6J("disabled",(null==ctx_r24.productCardOptions?null:ctx_r24.productCardOptions.disableAllButtons)||core.lcZ(1,5,ctx_r24.loading$))("cxFocus",ctx_r24.focusConfig),core.uIk("aria-label",ctx_r24.getAriaLabelSingleUnselected(product_r1))("aria-describedby",ctx_r24.createAttributeUiKey("label",null==ctx_r24.productCardOptions?null:ctx_r24.productCardOptions.attributeName)),core.xp6(2),core.hij(" ",core.lcZ(3,7,"configurator.button.select")," ")}}function ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_template_2_ng_template_1_ng_container_0_button_1_Template(rf,ctx){if(1&rf){const _r34=core.EpF();core.TgZ(0,"button",32),core.NdJ("click",__name(function(){core.CHM(_r34);const ctx_r33=core.oxw(7);return core.KtG(ctx_r33.onHandleDeselect())},"ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_template_2_ng_template_1_ng_container_0_button_1_Template_button_click_0_listener")),core.ALo(1,"async"),core._uU(2),core.ALo(3,"cxTranslate"),core.qZA()}if(2&rf){const product_r1=core.oxw(6).ngIf,ctx_r31=core.oxw();core.Q6J("disabled",(null==ctx_r31.productCardOptions?null:ctx_r31.productCardOptions.hideRemoveButton)||core.lcZ(1,5,ctx_r31.loading$))("cxFocus",ctx_r31.focusConfig),core.uIk("aria-label",ctx_r31.getAriaLabelSingleSelected(product_r1))("aria-describedby",ctx_r31.createAttributeUiKey("label",null==ctx_r31.productCardOptions?null:ctx_r31.productCardOptions.attributeName)),core.xp6(2),core.hij(" ",core.lcZ(3,7,"configurator.button.deselect")," ")}}function ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_template_2_ng_template_1_ng_container_0_span_2_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"span",33),core._uU(1),core.qZA()),2&rf){const product_r1=core.oxw(6).ngIf,ctx_r32=core.oxw();core.xp6(1),core.hij(" ",ctx_r32.getAriaLabelSingleSelectedNoButton(product_r1)," ")}}function ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_template_2_ng_template_1_ng_container_0_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_template_2_ng_template_1_ng_container_0_button_1_Template,4,9,"button",30),core.YNc(2,ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_template_2_ng_template_1_ng_container_0_span_2_Template,2,1,"span",31),core.BQk()),2&rf){const ctx_r30=core.oxw(6);core.xp6(1),core.Q6J("ngIf",!(null!=ctx_r30.productCardOptions&&ctx_r30.productCardOptions.hideRemoveButton)),core.xp6(1),core.Q6J("ngIf",null==ctx_r30.productCardOptions?null:ctx_r30.productCardOptions.hideRemoveButton)}}function ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_template_2_ng_template_1_Template(rf,ctx){if(1&rf&&core.YNc(0,ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_template_2_ng_template_1_ng_container_0_Template,3,2,"ng-container",0),2&rf){const ctx_r26=core.oxw(5);core.Q6J("ngIf",ctx_r26.isValueCodeDefined(null==ctx_r26.productCardOptions||null==ctx_r26.productCardOptions.productBoundValue?null:ctx_r26.productCardOptions.productBoundValue.valueCode))}}function ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_template_2_Template(rf,ctx){if(1&rf&&(core.YNc(0,ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_template_2_button_0_Template,4,9,"button",28),core.YNc(1,ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_template_2_ng_template_1_Template,1,1,"ng-template",null,29,core.W1O)),2&rf){const _r25=core.MAs(2),ctx_r14=core.oxw(4);core.Q6J("ngIf",!(null!=ctx_r14.productCardOptions&&null!=ctx_r14.productCardOptions.productBoundValue&&ctx_r14.productCardOptions.productBoundValue.selected))("ngIfElse",_r25)}}function ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",21),core.YNc(1,ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_container_1_Template,4,2,"ng-container",22),core.YNc(2,ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_template_2_Template,3,2,"ng-template",null,23,core.W1O),core.qZA()),2&rf){const _r13=core.MAs(3),ctx_r9=core.oxw(3);core.xp6(1),core.Q6J("ngIf",null==ctx_r9.productCardOptions?null:ctx_r9.productCardOptions.multiSelect)("ngIfElse",_r13)}}function ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",12)(1,"div",13)(2,"div",14),core.YNc(3,ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_cx_configurator_attribute_quantity_3_Template,1,1,"cx-configurator-attribute-quantity",15),core.qZA(),core.TgZ(4,"div",16),core._UZ(5,"cx-configurator-price",17),core.qZA()(),core.TgZ(6,"div",18),core.YNc(7,ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_Template,4,2,"div",19),core.qZA()()),2&rf){const ctx_r4=core.oxw(2);core.xp6(3),core.Q6J("ngIf",ctx_r4.showQuantity),core.xp6(2),core.Q6J("formula",ctx_r4.extractPriceFormulaParameters()),core.xp6(2),core.Q6J("ngIf",!(null!=ctx_r4.productCardOptions&&ctx_r4.productCardOptions.singleDropdown))}}function ConfiguratorAttributeProductCardComponent_ng_container_0_ng_container_13_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.TgZ(1,"div",34),core._UZ(2,"cx-icon",35),core._uU(3),core.ALo(4,"cxTranslate"),core.qZA(),core.BQk()),2&rf){const ctx_r5=core.oxw(2);core.xp6(1),core.s9C("id",ctx_r5.createAttributeUiKey("attribute-msg",null==ctx_r5.productCardOptions?null:ctx_r5.productCardOptions.attributeName)),core.xp6(2),core.hij(" ",core.lcZ(4,2,"configurator.attribute.deselectionNotPossible")," ")}}__name(ConfiguratorShowMoreComponent_ng_container_0_Template,"ConfiguratorShowMoreComponent_ng_container_0_Template"),__name(ConfiguratorPriceComponent_ng_container_0_ng_container_1_Template,"ConfiguratorPriceComponent_ng_container_0_ng_container_1_Template"),__name(ConfiguratorPriceComponent_ng_container_0_ng_container_2_Template,"ConfiguratorPriceComponent_ng_container_0_ng_container_2_Template"),__name(ConfiguratorPriceComponent_ng_container_0_Template,"ConfiguratorPriceComponent_ng_container_0_Template"),__name(ConfiguratorAttributeProductCardComponent_ng_container_0_div_10_Template,"ConfiguratorAttributeProductCardComponent_ng_container_0_div_10_Template"),__name(ConfiguratorAttributeProductCardComponent_ng_container_0_cx_configurator_show_more_11_Template,"ConfiguratorAttributeProductCardComponent_ng_container_0_cx_configurator_show_more_11_Template"),__name(ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_cx_configurator_attribute_quantity_3_Template,"ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_cx_configurator_attribute_quantity_3_Template"),__name(ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_container_1_button_1_Template,"ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_container_1_button_1_Template"),__name(ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_container_1_ng_template_2_Template,"ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_container_1_ng_template_2_Template"),__name(ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_container_1_Template,"ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_container_1_Template"),__name(ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_template_2_button_0_Template,"ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_template_2_button_0_Template"),__name(ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_template_2_ng_template_1_ng_container_0_button_1_Template,"ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_template_2_ng_template_1_ng_container_0_button_1_Template"),__name(ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_template_2_ng_template_1_ng_container_0_span_2_Template,"ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_template_2_ng_template_1_ng_container_0_span_2_Template"),__name(ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_template_2_ng_template_1_ng_container_0_Template,"ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_template_2_ng_template_1_ng_container_0_Template"),__name(ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_template_2_ng_template_1_Template,"ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_template_2_ng_template_1_Template"),__name(ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_template_2_Template,"ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_ng_template_2_Template"),__name(ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_Template,"ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_div_7_Template"),__name(ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_Template,"ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_Template"),__name(ConfiguratorAttributeProductCardComponent_ng_container_0_ng_container_13_Template,"ConfiguratorAttributeProductCardComponent_ng_container_0_ng_container_13_Template");const _c3=__name(function(a0){return{"cx-product-card-selected":a0}},"_c3");function ConfiguratorAttributeProductCardComponent_ng_container_0_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.TgZ(1,"div",1),core.ALo(2,"cxTranslate"),core.TgZ(3,"div",2)(4,"div",3),core._UZ(5,"cx-media",4),core.qZA(),core.TgZ(6,"div",5)(7,"div",6)(8,"p"),core._uU(9),core.qZA()(),core.YNc(10,ConfiguratorAttributeProductCardComponent_ng_container_0_div_10_Template,3,4,"div",7),core.YNc(11,ConfiguratorAttributeProductCardComponent_ng_container_0_cx_configurator_show_more_11_Template,1,3,"cx-configurator-show-more",8),core.qZA()(),core.YNc(12,ConfiguratorAttributeProductCardComponent_ng_container_0_div_12_Template,8,3,"div",9),core.YNc(13,ConfiguratorAttributeProductCardComponent_ng_container_0_ng_container_13_Template,5,4,"ng-container",0),core.qZA(),core.BQk()),2&rf){const product_r1=ctx.ngIf,ctx_r0=core.oxw();core.xp6(1),core.Q6J("ngClass",core.VKq(11,_c3,ctx_r0.isProductCardSelected())),core.uIk("aria-label",core.xi3(2,8,"configurator.a11y.itemOfAttribute",core.VKq(13,_c0,null==ctx_r0.productCardOptions?null:ctx_r0.productCardOptions.attributeLabel))),core.xp6(4),core.Q6J("container",null==product_r1||null==product_r1.images?null:product_r1.images.PRIMARY),core.xp6(4),core.hij(" ",product_r1.name," "),core.xp6(1),core.Q6J("ngIf",product_r1.code),core.xp6(1),core.Q6J("ngIf",null==product_r1?null:product_r1.description),core.xp6(1),core.Q6J("ngIf",!ctx_r0.productCardOptions.singleDropdown||ctx_r0.hasPriceDisplay()),core.xp6(1),core.Q6J("ngIf",ctx_r0.showDeselectionNotPossible)}}function ConfiguratorAttributeCheckBoxListComponent_div_4_Template(rf,ctx){if(1&rf){const _r3=core.EpF();core.TgZ(0,"div",4)(1,"cx-configurator-attribute-quantity",5),core.NdJ("changeQuantity",__name(function($event){core.CHM(_r3);const ctx_r2=core.oxw();return core.KtG(ctx_r2.onChangeQuantity($event))},"ConfiguratorAttributeCheckBoxListComponent_div_4_Template_cx_configurator_attribute_quantity_changeQuantity_1_listener")),core.qZA(),core._UZ(2,"cx-configurator-price",6),core.qZA()}if(2&rf){const ctx_r0=core.oxw();core.xp6(1),core.Q6J("quantityOptions",ctx_r0.extractQuantityParameters(ctx_r0.attribute.quantity,!ctx_r0.attribute.required)),core.xp6(1),core.Q6J("formula",ctx_r0.extractPriceFormulaParameters())}}function ConfiguratorAttributeCheckBoxListComponent_ng_container_5_cx_configurator_attribute_quantity_11_Template(rf,ctx){if(1&rf){const _r9=core.EpF();core.TgZ(0,"cx-configurator-attribute-quantity",5),core.NdJ("changeQuantity",__name(function($event){core.CHM(_r9);const ctx_r8=core.oxw(),value_r4=ctx_r8.$implicit,i_r5=ctx_r8.index,ctx_r7=core.oxw();return core.KtG(ctx_r7.onChangeValueQuantity($event,value_r4.valueCode,i_r5))},"ConfiguratorAttributeCheckBoxListComponent_ng_container_5_cx_configurator_attribute_quantity_11_Template_cx_configurator_attribute_quantity_changeQuantity_0_listener")),core.qZA()}if(2&rf){const value_r4=core.oxw().$implicit,ctx_r6=core.oxw();core.Q6J("quantityOptions",ctx_r6.extractQuantityParameters(value_r4.quantity,ctx_r6.allowZeroValueQuantity))}}__name(ConfiguratorAttributeProductCardComponent_ng_container_0_Template,"ConfiguratorAttributeProductCardComponent_ng_container_0_Template"),__name(ConfiguratorAttributeCheckBoxListComponent_div_4_Template,"ConfiguratorAttributeCheckBoxListComponent_div_4_Template"),__name(ConfiguratorAttributeCheckBoxListComponent_ng_container_5_cx_configurator_attribute_quantity_11_Template,"ConfiguratorAttributeCheckBoxListComponent_ng_container_5_cx_configurator_attribute_quantity_11_Template");const _c4=__name(function(a0){return{key:a0}},"_c4"),_c5=__name(function(a0,a1,a2){return{value:a0,attribute:a1,price:a2}},"_c5"),_c6=__name(function(a0,a1){return{value:a0,attribute:a1}},"_c6");function ConfiguratorAttributeCheckBoxListComponent_ng_container_5_Template(rf,ctx){if(1&rf){const _r12=core.EpF();core.ynx(0),core.TgZ(1,"div",7)(2,"div",8)(3,"input",9),core.NdJ("change",__name(function(){core.CHM(_r12);const ctx_r11=core.oxw();return core.KtG(ctx_r11.onSelect())},"ConfiguratorAttributeCheckBoxListComponent_ng_container_5_Template_input_change_3_listener")),core.ALo(4,"cxTranslate"),core.ALo(5,"cxTranslate"),core.ALo(6,"cxTranslate"),core.qZA(),core.TgZ(7,"label",10),core._uU(8),core.qZA()(),core.TgZ(9,"div",11),core._UZ(10,"cx-configurator-price",6),core.qZA()(),core.YNc(11,ConfiguratorAttributeCheckBoxListComponent_ng_container_5_cx_configurator_attribute_quantity_11_Template,1,1,"cx-configurator-attribute-quantity",12),core.BQk()}if(2&rf){const value_r4=ctx.$implicit,i_r5=ctx.index,ctx_r1=core.oxw();core.xp6(3),core.s9C("id",ctx_r1.createAttributeValueIdForConfigurator(ctx_r1.attribute,value_r4.valueCode)),core.s9C("name",ctx_r1.createAttributeIdForConfigurator(ctx_r1.attribute)),core.Q6J("cxFocus",core.VKq(21,_c4,ctx_r1.attribute.name+"-"+value_r4.name))("value",value_r4.valueCode)("formControl",ctx_r1.attributeCheckBoxForms[i_r5]),core.uIk("aria-label",value_r4.valuePrice&&0!==(null==value_r4.valuePrice?null:value_r4.valuePrice.value)?value_r4.valuePriceTotal&&0!==(null==value_r4.valuePriceTotal?null:value_r4.valuePriceTotal.value)?core.xi3(4,12,"configurator.a11y.valueOfAttributeFullWithPrice",core.kEZ(23,_c5,value_r4.valueDisplay,ctx_r1.attribute.label,value_r4.valuePriceTotal.formattedValue)):core.xi3(5,15,"configurator.a11y.valueOfAttributeFullWithPrice",core.kEZ(27,_c5,value_r4.valueDisplay,ctx_r1.attribute.label,value_r4.valuePrice.formattedValue)):core.xi3(6,18,"configurator.a11y.valueOfAttributeFull",core.WLB(31,_c6,value_r4.valueDisplay,ctx_r1.attribute.label)))("aria-describedby",ctx_r1.createAttributeUiKey("label",ctx_r1.attribute.name)),core.xp6(4),core.s9C("id",ctx_r1.createValueUiKey("label",ctx_r1.attribute.name,value_r4.valueCode)),core.s9C("for",ctx_r1.createAttributeValueIdForConfigurator(ctx_r1.attribute,value_r4.valueCode)),core.xp6(1),core.Oqu(ctx_r1.getLabel(ctx_r1.expMode,value_r4.valueDisplay,value_r4.valueCode)),core.xp6(2),core.Q6J("formula",ctx_r1.extractValuePriceFormulaParameters(value_r4)),core.xp6(1),core.Q6J("ngIf",value_r4.selected&&ctx_r1.withQuantity&&!ctx_r1.withQuantityOnAttributeLevel)}}function ConfiguratorAttributeCheckBoxComponent_ng_container_0_Template(rf,ctx){if(1&rf){const _r3=core.EpF();core.ynx(0),core.TgZ(1,"div",1)(2,"div",2)(3,"input",3),core.NdJ("change",__name(function(){core.CHM(_r3);const ctx_r2=core.oxw();return core.KtG(ctx_r2.onSelect())},"ConfiguratorAttributeCheckBoxComponent_ng_container_0_Template_input_change_3_listener")),core.ALo(4,"cxTranslate"),core.qZA(),core.TgZ(5,"label",4),core._uU(6),core.qZA()()(),core.BQk()}if(2&rf){const ctx_r0=core.oxw();core.xp6(1),core.s9C("id",ctx_r0.createAttributeIdForConfigurator(ctx_r0.attribute)),core.xp6(2),core.s9C("id",ctx_r0.createAttributeValueIdForConfigurator(ctx_r0.attribute,null==ctx_r0.attribute?null:ctx_r0.attribute.values[0].valueCode)),core.s9C("name",ctx_r0.createAttributeIdForConfigurator(ctx_r0.attribute)),core.Q6J("value",null==ctx_r0.attribute?null:ctx_r0.attribute.values[0].valueCode)("cxFocus",core.VKq(14,_c4,ctx_r0.attribute.name+"-"+(null==ctx_r0.attribute?null:ctx_r0.attribute.values[0].name)))("formControl",ctx_r0.attributeCheckBoxForm),core.uIk("aria-label",core.xi3(4,11,"configurator.a11y.valueOfAttributeFull",core.WLB(16,_c6,null==ctx_r0.attribute?null:ctx_r0.attribute.values[0].valueDisplay,ctx_r0.attribute.label)))("aria-describedby",ctx_r0.createAttributeUiKey("label",ctx_r0.attribute.name)),core.xp6(2),core.s9C("id",ctx_r0.createValueUiKey("label",ctx_r0.attribute.name,null==ctx_r0.attribute?null:ctx_r0.attribute.values[0].valueCode)),core.s9C("for",ctx_r0.createAttributeValueIdForConfigurator(ctx_r0.attribute,null==ctx_r0.attribute?null:ctx_r0.attribute.values[0].valueCode)),core.xp6(1),core.Oqu(null==ctx_r0.attribute?null:ctx_r0.attribute.values[0].valueDisplay)}}function ConfiguratorAttributeCheckBoxComponent_ng_container_1_Template(rf,ctx){if(1&rf){const _r5=core.EpF();core.ynx(0),core.TgZ(1,"fieldset")(2,"legend",5),core._uU(3),core.qZA(),core.TgZ(4,"div",1)(5,"div",2)(6,"div",6)(7,"input",3),core.NdJ("change",__name(function(){core.CHM(_r5);const ctx_r4=core.oxw();return core.KtG(ctx_r4.onSelect())},"ConfiguratorAttributeCheckBoxComponent_ng_container_1_Template_input_change_7_listener")),core.ALo(8,"cxTranslate"),core.ALo(9,"cxTranslate"),core.qZA(),core.TgZ(10,"label",4),core._uU(11),core.qZA()(),core.TgZ(12,"div",7),core._UZ(13,"cx-configurator-price",8),core.qZA()()()(),core.BQk()}if(2&rf){const ctx_r1=core.oxw();core.xp6(3),core.Oqu(ctx_r1.attribute.label),core.xp6(1),core.s9C("id",ctx_r1.createAttributeIdForConfigurator(ctx_r1.attribute)),core.xp6(3),core.s9C("id",ctx_r1.createAttributeValueIdForConfigurator(ctx_r1.attribute,null==ctx_r1.attribute?null:ctx_r1.attribute.values[0].valueCode)),core.s9C("name",ctx_r1.createAttributeIdForConfigurator(ctx_r1.attribute)),core.Q6J("value",null==ctx_r1.attribute?null:ctx_r1.attribute.values[0].valueCode)("cxFocus",core.VKq(19,_c4,ctx_r1.attribute.name+"-"+(null==ctx_r1.attribute?null:ctx_r1.attribute.values[0].name)))("formControl",ctx_r1.attributeCheckBoxForm),core.uIk("aria-label",null!=ctx_r1.attribute&&ctx_r1.attribute.values[0].valuePrice&&0!==(null==ctx_r1.attribute||null==ctx_r1.attribute.values[0].valuePrice?null:ctx_r1.attribute.values[0].valuePrice.value)?core.xi3(8,13,"configurator.a11y.valueOfAttributeFullWithPrice",core.kEZ(21,_c5,null==ctx_r1.attribute?null:ctx_r1.attribute.values[0].valueDisplay,ctx_r1.attribute.label,null==ctx_r1.attribute?null:ctx_r1.attribute.values[0].valuePrice.formattedValue)):core.xi3(9,16,"configurator.a11y.valueOfAttributeFull",core.WLB(25,_c6,null==ctx_r1.attribute?null:ctx_r1.attribute.values[0].valueDisplay,ctx_r1.attribute.label)))("aria-describedby",ctx_r1.createAttributeUiKey("label",ctx_r1.attribute.name)+" "+ctx_r1.createAttributeUiKey("attribute-msg",ctx_r1.attribute.name)),core.xp6(3),core.s9C("id",ctx_r1.createValueUiKey("label",ctx_r1.attribute.name,null==ctx_r1.attribute?null:ctx_r1.attribute.values[0].valueCode)),core.s9C("for",ctx_r1.createAttributeValueIdForConfigurator(ctx_r1.attribute,null==ctx_r1.attribute?null:ctx_r1.attribute.values[0].valueCode)),core.xp6(1),core.Oqu(ctx_r1.getLabel(ctx_r1.expMode,null==ctx_r1.attribute?null:ctx_r1.attribute.values[0].valueDisplay,null==ctx_r1.attribute?null:ctx_r1.attribute.values[0].valueCode)),core.xp6(2),core.Q6J("formula",ctx_r1.extractValuePriceFormulaParameters(null==ctx_r1.attribute?null:ctx_r1.attribute.values[0]))}}function ConfiguratorAttributeNumericInputFieldComponent_label_0_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"label",4),core._uU(1),core.qZA()),2&rf){const ctx_r0=core.oxw();core.xp6(1),core.Oqu(ctx_r0.getHelpTextForInterval())}}__name(ConfiguratorAttributeCheckBoxListComponent_ng_container_5_Template,"ConfiguratorAttributeCheckBoxListComponent_ng_container_5_Template"),__name(ConfiguratorAttributeCheckBoxComponent_ng_container_0_Template,"ConfiguratorAttributeCheckBoxComponent_ng_container_0_Template"),__name(ConfiguratorAttributeCheckBoxComponent_ng_container_1_Template,"ConfiguratorAttributeCheckBoxComponent_ng_container_1_Template"),__name(ConfiguratorAttributeNumericInputFieldComponent_label_0_Template,"ConfiguratorAttributeNumericInputFieldComponent_label_0_Template");const _c7=__name(function(a0){return{pattern:a0}},"_c7");function ConfiguratorAttributeNumericInputFieldComponent_div_3_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",5),core._UZ(1,"cx-icon",6),core._uU(2),core.ALo(3,"cxTranslate"),core.qZA()),2&rf){const ctx_r1=core.oxw();core.s9C("id",ctx_r1.createAttributeUiKey("attribute-msg",ctx_r1.attribute.name)),core.xp6(1),core.Q6J("type",ctx_r1.iconType.WARNING),core.xp6(1),core.hij(" ",core.xi3(3,3,"configurator.attribute.wrongNumericFormat",core.VKq(6,_c7,ctx_r1.numericFormatPattern)),"\n")}}function ConfiguratorAttributeDropDownComponent_div_0_option_5_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"option",9),core._uU(1),core.qZA()),2&rf){const item_r6=ctx.$implicit,ctx_r4=core.oxw(2);core.Q6J("label",ctx_r4.getLabel(ctx_r4.expMode,item_r6.valueDisplay,item_r6.valueCode))("selected",item_r6.selected)("value",item_r6.valueCode),core.uIk("aria-label",ctx_r4.getAriaLabel(item_r6,ctx_r4.attribute)),core.xp6(1),core.hij(" ",ctx_r4.getLabel(ctx_r4.expMode,item_r6.valueDisplay,item_r6.valueCode)," ")}}function ConfiguratorAttributeDropDownComponent_div_0_div_6_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",10),core._UZ(1,"cx-configurator-price",11),core.qZA()),2&rf){const ctx_r5=core.oxw(2);core.xp6(1),core.Q6J("formula",ctx_r5.extractValuePriceFormulaParameters(ctx_r5.getSelectedValue()))}}__name(ConfiguratorAttributeNumericInputFieldComponent_div_3_Template,"ConfiguratorAttributeNumericInputFieldComponent_div_3_Template"),__name(ConfiguratorAttributeDropDownComponent_div_0_option_5_Template,"ConfiguratorAttributeDropDownComponent_div_0_option_5_Template"),__name(ConfiguratorAttributeDropDownComponent_div_0_div_6_Template,"ConfiguratorAttributeDropDownComponent_div_0_div_6_Template");const _c8=__name(function(a0){return{count:a0}},"_c8");function ConfiguratorAttributeDropDownComponent_div_0_Template(rf,ctx){if(1&rf){const _r8=core.EpF();core.TgZ(0,"div",4)(1,"label",5),core._uU(2),core.ALo(3,"cxTranslate"),core.qZA(),core.TgZ(4,"select",6),core.NdJ("change",__name(function(){core.CHM(_r8);const ctx_r7=core.oxw();return core.KtG(ctx_r7.onSelect(ctx_r7.attributeDropDownForm.value))},"ConfiguratorAttributeDropDownComponent_div_0_Template_select_change_4_listener")),core.YNc(5,ConfiguratorAttributeDropDownComponent_div_0_option_5_Template,2,5,"option",7),core.qZA(),core.YNc(6,ConfiguratorAttributeDropDownComponent_div_0_div_6_Template,2,1,"div",8),core.qZA()}if(2&rf){const ctx_r0=core.oxw();let tmp_7_0;core.xp6(1),core.s9C("for",ctx_r0.createAttributeIdForConfigurator(ctx_r0.attribute)),core.xp6(1),core.hij(" ",core.xi3(3,8,"configurator.a11y.listbox",core.VKq(11,_c8,ctx_r0.attribute.values.length))," "),core.xp6(2),core.s9C("id",ctx_r0.createAttributeIdForConfigurator(ctx_r0.attribute)),core.Q6J("formControl",ctx_r0.attributeDropDownForm)("cxFocus",core.VKq(13,_c4,ctx_r0.attribute.name)),core.uIk("aria-describedby",ctx_r0.createAttributeUiKey("label",ctx_r0.attribute.name)),core.xp6(1),core.Q6J("ngForOf",ctx_r0.attribute.values),core.xp6(1),core.Q6J("ngIf",!ctx_r0.withQuantity&&(null==(tmp_7_0=ctx_r0.getSelectedValue())?null:tmp_7_0.valuePrice))}}function ConfiguratorAttributeDropDownComponent_div_1_Template(rf,ctx){if(1&rf){const _r10=core.EpF();core.TgZ(0,"div",12)(1,"cx-configurator-attribute-quantity",13),core.NdJ("changeQuantity",__name(function($event){core.CHM(_r10);const ctx_r9=core.oxw();return core.KtG(ctx_r9.onChangeQuantity($event,ctx_r9.attributeDropDownForm))},"ConfiguratorAttributeDropDownComponent_div_1_Template_cx_configurator_attribute_quantity_changeQuantity_1_listener")),core.qZA(),core._UZ(2,"cx-configurator-price",11),core.qZA()}if(2&rf){const ctx_r1=core.oxw();core.xp6(1),core.Q6J("quantityOptions",ctx_r1.extractQuantityParameters(ctx_r1.attributeDropDownForm)),core.xp6(1),core.Q6J("formula",ctx_r1.extractPriceFormulaParameters())}}function ConfiguratorAttributeDropDownComponent_cx_configurator_attribute_numeric_input_field_2_Template(rf,ctx){if(1&rf){const _r12=core.EpF();core.TgZ(0,"cx-configurator-attribute-numeric-input-field",14),core.NdJ("inputChange",__name(function($event){core.CHM(_r12);const ctx_r11=core.oxw();return core.KtG(ctx_r11.onSelectAdditionalValue($event))},"ConfiguratorAttributeDropDownComponent_cx_configurator_attribute_numeric_input_field_2_Template_cx_configurator_attribute_numeric_input_field_inputChange_0_listener")),core.ALo(1,"cxTranslate"),core.qZA()}if(2&rf){const ctx_r2=core.oxw();core.Q6J("attribute",ctx_r2.attribute)("ownerType",ctx_r2.ownerType)("ownerKey",ctx_r2.ownerKey)("language",ctx_r2.language),core.uIk("aria-label",core.lcZ(1,5,"configurator.a11y.additionalValue"))}}function ConfiguratorAttributeDropDownComponent_cx_configurator_attribute_input_field_3_Template(rf,ctx){if(1&rf){const _r14=core.EpF();core.TgZ(0,"cx-configurator-attribute-input-field",15),core.NdJ("inputChange",__name(function($event){core.CHM(_r14);const ctx_r13=core.oxw();return core.KtG(ctx_r13.onSelectAdditionalValue($event))},"ConfiguratorAttributeDropDownComponent_cx_configurator_attribute_input_field_3_Template_cx_configurator_attribute_input_field_inputChange_0_listener")),core.ALo(1,"cxTranslate"),core.qZA()}if(2&rf){const ctx_r3=core.oxw();core.Q6J("attribute",ctx_r3.attribute)("ownerType",ctx_r3.ownerType)("ownerKey",ctx_r3.ownerKey),core.uIk("aria-label",core.lcZ(1,4,"configurator.a11y.additionalValue"))}}function ConfiguratorAttributeMultiSelectionBundleComponent_div_0_div_1_Template(rf,ctx){if(1&rf){const _r4=core.EpF();core.TgZ(0,"div",4)(1,"cx-configurator-attribute-quantity",5),core.NdJ("changeQuantity",__name(function($event){core.CHM(_r4);const ctx_r3=core.oxw(2);return core.KtG(ctx_r3.onChangeAttributeQuantity($event))},"ConfiguratorAttributeMultiSelectionBundleComponent_div_0_div_1_Template_cx_configurator_attribute_quantity_changeQuantity_1_listener")),core.qZA(),core._UZ(2,"cx-configurator-price",6),core.qZA()}if(2&rf){const ctx_r1=core.oxw(2);core.xp6(1),core.Q6J("quantityOptions",ctx_r1.extractQuantityParameters(ctx_r1.attribute.quantity)),core.xp6(1),core.Q6J("formula",ctx_r1.extractPriceFormulaParameters())}}function ConfiguratorAttributeMultiSelectionBundleComponent_div_0_cx_configurator_attribute_product_card_2_Template(rf,ctx){if(1&rf){const _r8=core.EpF();core.TgZ(0,"cx-configurator-attribute-product-card",7),core.NdJ("handleDeselect",__name(function($event){core.CHM(_r8);const ctx_r7=core.oxw(2);return core.KtG(ctx_r7.onDeselect($event))},"ConfiguratorAttributeMultiSelectionBundleComponent_div_0_cx_configurator_attribute_product_card_2_Template_cx_configurator_attribute_product_card_handleDeselect_0_listener"))("handleQuantity",__name(function($event){core.CHM(_r8);const ctx_r9=core.oxw(2);return core.KtG(ctx_r9.onChangeValueQuantity($event))},"ConfiguratorAttributeMultiSelectionBundleComponent_div_0_cx_configurator_attribute_product_card_2_Template_cx_configurator_attribute_product_card_handleQuantity_0_listener"))("handleSelect",__name(function($event){core.CHM(_r8);const ctx_r10=core.oxw(2);return core.KtG(ctx_r10.onSelect($event))},"ConfiguratorAttributeMultiSelectionBundleComponent_div_0_cx_configurator_attribute_product_card_2_Template_cx_configurator_attribute_product_card_handleSelect_0_listener")),core.ALo(1,"async"),core.ALo(2,"async"),core.qZA()}if(2&rf){const value_r5=ctx.$implicit,i_r6=ctx.index,ctx_r2=core.oxw(2);core.s9C("id",ctx_r2.createAttributeValueIdForConfigurator(ctx_r2.attribute,null==value_r5?null:value_r5.valueCode)),core.Q6J("productCardOptions",ctx_r2.extractProductCardParameters(core.lcZ(1,2,ctx_r2.loading$),core.lcZ(2,4,ctx_r2.preventAction$),value_r5,i_r6))}}function ConfiguratorAttributeMultiSelectionBundleComponent_div_0_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",1),core.YNc(1,ConfiguratorAttributeMultiSelectionBundleComponent_div_0_div_1_Template,3,2,"div",2),core.YNc(2,ConfiguratorAttributeMultiSelectionBundleComponent_div_0_cx_configurator_attribute_product_card_2_Template,3,6,"cx-configurator-attribute-product-card",3),core.qZA()),2&rf){const ctx_r0=core.oxw();core.s9C("id",ctx_r0.createAttributeIdForConfigurator(ctx_r0.attribute)),core.xp6(1),core.Q6J("ngIf",ctx_r0.withQuantityOnAttributeLevel),core.xp6(1),core.Q6J("ngForOf",null==ctx_r0.attribute?null:ctx_r0.attribute.values)}}function ConfiguratorAttributeMultiSelectionImageComponent_div_1_img_6_Template(rf,ctx){if(1&rf&&core._UZ(0,"img",9),2&rf){const value_r1=core.oxw().$implicit;core.s9C("src",value_r1.images[0].url,core.LSH),core.s9C("alt",value_r1.images[0].altText)}}function ConfiguratorAttributeMultiSelectionImageComponent_div_1_div_7_Template(rf,ctx){1&rf&&core._UZ(0,"div",10)}function ConfiguratorAttributeMultiSelectionImageComponent_div_1_Template(rf,ctx){if(1&rf){const _r7=core.EpF();core.TgZ(0,"div",2)(1,"input",3),core.NdJ("click",__name(function(){const i_r2=core.CHM(_r7).index,ctx_r6=core.oxw();return core.KtG(ctx_r6.onSelect(i_r2))},"ConfiguratorAttributeMultiSelectionImageComponent_div_1_Template_input_click_1_listener")),core.ALo(2,"cxTranslate"),core.ALo(3,"cxTranslate"),core.qZA(),core.TgZ(4,"div",4)(5,"label",5),core.YNc(6,ConfiguratorAttributeMultiSelectionImageComponent_div_1_img_6_Template,1,2,"img",6),core.YNc(7,ConfiguratorAttributeMultiSelectionImageComponent_div_1_div_7_Template,1,0,"div",7),core._uU(8),core._UZ(9,"cx-configurator-price",8),core.qZA()()()}if(2&rf){const value_r1=ctx.$implicit,i_r2=ctx.index,ctx_r0=core.oxw();core.s9C("id",ctx_r0.createAttributeValueIdForConfigurator(ctx_r0.attribute,value_r1.valueCode)),core.xp6(1),core.s9C("id",ctx_r0.createAttributeValueIdForConfigurator(ctx_r0.attribute,value_r1.valueCode)+"-input"),core.s9C("name",ctx_r0.createAttributeIdForConfigurator(ctx_r0.attribute)),core.Q6J("value",value_r1.valueCode)("formControl",ctx_r0.attributeCheckBoxForms[i_r2])("cxFocus",core.VKq(21,_c4,ctx_r0.attribute.name+"-"+value_r1.name)),core.uIk("aria-label",value_r1.valuePrice&&0!==(null==value_r1.valuePrice?null:value_r1.valuePrice.value)?core.xi3(2,15,"configurator.a11y.valueOfAttributeFullWithPrice",core.kEZ(23,_c5,value_r1.valueDisplay,ctx_r0.attribute.label,value_r1.valuePrice.formattedValue)):core.xi3(3,18,"configurator.a11y.valueOfAttributeFull",core.WLB(27,_c6,value_r1.valueDisplay,ctx_r0.attribute.label)))("aria-describedby",ctx_r0.createAttributeUiKey("label",ctx_r0.attribute.name))("checked",ctx_r0.attributeCheckBoxForms[i_r2].value?"checked":null),core.xp6(4),core.s9C("id",ctx_r0.createValueUiKey("label",ctx_r0.attribute.name,value_r1.valueCode)),core.s9C("for",ctx_r0.createAttributeValueIdForConfigurator(ctx_r0.attribute,value_r1.valueCode)+"-input"),core.xp6(1),core.Q6J("ngIf",value_r1.images[0]),core.xp6(1),core.Q6J("ngIf",!value_r1.images[0]),core.xp6(1),core.hij(" ",ctx_r0.getLabel(ctx_r0.expMode,value_r1.valueDisplay,value_r1.valueCode)," "),core.xp6(1),core.Q6J("formula",ctx_r0.extractValuePriceFormulaParameters(value_r1))}}function ConfiguratorAttributeRadioButtonComponent_div_4_Template(rf,ctx){if(1&rf){const _r5=core.EpF();core.TgZ(0,"div",6)(1,"cx-configurator-attribute-quantity",7),core.NdJ("changeQuantity",__name(function($event){core.CHM(_r5);const ctx_r4=core.oxw();return core.KtG(ctx_r4.onChangeQuantity($event))},"ConfiguratorAttributeRadioButtonComponent_div_4_Template_cx_configurator_attribute_quantity_changeQuantity_1_listener")),core.qZA(),core._UZ(2,"cx-configurator-price",8),core.qZA()}if(2&rf){const ctx_r0=core.oxw();core.xp6(1),core.Q6J("quantityOptions",ctx_r0.extractQuantityParameters()),core.xp6(1),core.Q6J("formula",ctx_r0.extractPriceFormulaParameters())}}function ConfiguratorAttributeRadioButtonComponent_div_5_Template(rf,ctx){if(1&rf){const _r8=core.EpF();core.TgZ(0,"div",9)(1,"div",10)(2,"input",11),core.NdJ("change",__name(function(){const value_r6=core.CHM(_r8).$implicit,ctx_r7=core.oxw();return core.KtG(ctx_r7.onSelect(value_r6.valueCode))},"ConfiguratorAttributeRadioButtonComponent_div_5_Template_input_change_2_listener")),core.qZA(),core.TgZ(3,"label",12),core._uU(4),core.qZA()(),core.TgZ(5,"div",13),core._UZ(6,"cx-configurator-price",8),core.qZA()()}if(2&rf){const value_r6=ctx.$implicit,ctx_r1=core.oxw();core.xp6(2),core.s9C("id",ctx_r1.createAttributeValueIdForConfigurator(ctx_r1.attribute,value_r6.valueCode)),core.s9C("name",ctx_r1.createAttributeIdForConfigurator(ctx_r1.attribute)),core.Q6J("formControl",ctx_r1.attributeRadioButtonForm)("value",value_r6.valueCode)("cxFocus",core.VKq(14,_c4,ctx_r1.attribute.name+"-"+value_r6.name)),core.uIk("required",ctx_r1.attribute.required)("name",ctx_r1.createAttributeIdForConfigurator(ctx_r1.attribute))("aria-label",ctx_r1.getAriaLabel(value_r6,ctx_r1.attribute))("checked",ctx_r1.attributeRadioButtonForm.value===value_r6.valueCode?"checked":null)("aria-describedby",ctx_r1.createAttributeUiKey("label",ctx_r1.attribute.name)),core.xp6(1),core.s9C("id",ctx_r1.createValueUiKey("label",ctx_r1.attribute.name,value_r6.valueCode)),core.s9C("for",ctx_r1.createAttributeValueIdForConfigurator(ctx_r1.attribute,value_r6.valueCode)),core.xp6(1),core.Oqu(ctx_r1.getLabel(ctx_r1.expMode,value_r6.valueDisplay,value_r6.valueCode)),core.xp6(2),core.Q6J("formula",ctx_r1.extractValuePriceFormulaParameters(value_r6))}}function ConfiguratorAttributeRadioButtonComponent_cx_configurator_attribute_numeric_input_field_6_Template(rf,ctx){if(1&rf){const _r10=core.EpF();core.TgZ(0,"cx-configurator-attribute-numeric-input-field",14),core.NdJ("inputChange",__name(function($event){core.CHM(_r10);const ctx_r9=core.oxw();return core.KtG(ctx_r9.onSelectAdditionalValue($event))},"ConfiguratorAttributeRadioButtonComponent_cx_configurator_attribute_numeric_input_field_6_Template_cx_configurator_attribute_numeric_input_field_inputChange_0_listener")),core.qZA()}if(2&rf){const ctx_r2=core.oxw();core.Q6J("attribute",ctx_r2.attribute)("ownerType",ctx_r2.ownerType)("ownerKey",ctx_r2.ownerKey)("language",ctx_r2.language)}}function ConfiguratorAttributeRadioButtonComponent_cx_configurator_attribute_input_field_7_Template(rf,ctx){if(1&rf){const _r12=core.EpF();core.TgZ(0,"cx-configurator-attribute-input-field",15),core.NdJ("inputChange",__name(function($event){core.CHM(_r12);const ctx_r11=core.oxw();return core.KtG(ctx_r11.onSelectAdditionalValue($event))},"ConfiguratorAttributeRadioButtonComponent_cx_configurator_attribute_input_field_7_Template_cx_configurator_attribute_input_field_inputChange_0_listener")),core.qZA()}if(2&rf){const ctx_r3=core.oxw();core.Q6J("attribute",ctx_r3.attribute)("ownerType",ctx_r3.ownerType)("ownerKey",ctx_r3.ownerKey)}}function ConfiguratorAttributeReadOnlyComponent_div_0_ng_container_1_ng_container_1_span_1_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"span",7),core._uU(1),core.ALo(2,"cxTranslate"),core.qZA()),2&rf){const value_r5=core.oxw().$implicit,ctx_r6=core.oxw(3);core.s9C("id",ctx_r6.createValueUiKey("label",ctx_r6.attribute.name,value_r5.valueCode)),core.xp6(1),core.hij(" ",core.xi3(2,2,"configurator.a11y.readOnlyValueOfAttributeFull",core.WLB(5,_c6,value_r5.valueDisplay,ctx_r6.attribute.label))," ")}}function ConfiguratorAttributeReadOnlyComponent_div_0_ng_container_1_ng_container_1_div_2_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",8)(1,"span",9),core._uU(2),core.qZA()()),2&rf){const value_r5=core.oxw().$implicit,ctx_r7=core.oxw(3);core.xp6(2),core.Oqu(ctx_r7.getLabel(ctx_r7.expMode,value_r5.valueDisplay,value_r5.valueCode))}}function ConfiguratorAttributeReadOnlyComponent_div_0_ng_container_1_ng_container_1_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,ConfiguratorAttributeReadOnlyComponent_div_0_ng_container_1_ng_container_1_span_1_Template,3,8,"span",5),core.YNc(2,ConfiguratorAttributeReadOnlyComponent_div_0_ng_container_1_ng_container_1_div_2_Template,3,1,"div",6),core.BQk()),2&rf){const value_r5=ctx.$implicit;core.xp6(1),core.Q6J("ngIf",value_r5.selected),core.xp6(1),core.Q6J("ngIf",value_r5.selected)}}function ConfiguratorAttributeReadOnlyComponent_div_0_ng_container_1_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,ConfiguratorAttributeReadOnlyComponent_div_0_ng_container_1_ng_container_1_Template,3,2,"ng-container",4),core.BQk()),2&rf){const ctx_r1=core.oxw(2);core.xp6(1),core.Q6J("ngForOf",ctx_r1.attribute.values)}}function ConfiguratorAttributeReadOnlyComponent_div_0_ng_template_2_ng_container_0_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.TgZ(1,"span",7),core._uU(2),core.ALo(3,"cxTranslate"),core.qZA(),core.TgZ(4,"div",8)(5,"span",9),core._uU(6),core.qZA()(),core.BQk()),2&rf){const ctx_r10=core.oxw(3);core.xp6(1),core.s9C("id",ctx_r10.createValueUiKey("label",ctx_r10.attribute.name,ctx_r10.attribute.selectedSingleValue)),core.xp6(1),core.hij(" ",core.xi3(3,3,"configurator.a11y.readOnlyValueOfAttributeFull",core.WLB(6,_c6,ctx_r10.attribute.selectedSingleValue,ctx_r10.attribute.label))," "),core.xp6(4),core.Oqu(ctx_r10.attribute.selectedSingleValue)}}function ConfiguratorAttributeReadOnlyComponent_div_0_ng_template_2_ng_container_1_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.TgZ(1,"span",7),core._uU(2),core.ALo(3,"cxTranslate"),core.qZA(),core.TgZ(4,"div",8)(5,"span",9),core._uU(6),core.qZA()(),core.BQk()),2&rf){const ctx_r11=core.oxw(3);core.xp6(1),core.s9C("id",ctx_r11.createValueUiKey("label",ctx_r11.attribute.name,ctx_r11.attribute.userInput)),core.xp6(1),core.hij(" ",core.xi3(3,3,"configurator.a11y.readOnlyValueOfAttributeFull",core.WLB(6,_c6,ctx_r11.attribute.userInput,ctx_r11.attribute.label))," "),core.xp6(4),core.Oqu(ctx_r11.attribute.userInput)}}function ConfiguratorAttributeReadOnlyComponent_div_0_ng_template_2_Template(rf,ctx){if(1&rf&&(core.YNc(0,ConfiguratorAttributeReadOnlyComponent_div_0_ng_template_2_ng_container_0_Template,7,9,"ng-container",10),core.YNc(1,ConfiguratorAttributeReadOnlyComponent_div_0_ng_template_2_ng_container_1_Template,7,9,"ng-container",10)),2&rf){const ctx_r3=core.oxw(2);core.Q6J("ngIf",ctx_r3.attribute.selectedSingleValue),core.xp6(1),core.Q6J("ngIf",ctx_r3.attribute.userInput)}}function ConfiguratorAttributeReadOnlyComponent_div_0_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",1),core.YNc(1,ConfiguratorAttributeReadOnlyComponent_div_0_ng_container_1_Template,2,1,"ng-container",2),core.YNc(2,ConfiguratorAttributeReadOnlyComponent_div_0_ng_template_2_Template,2,2,"ng-template",null,3,core.W1O),core.qZA()),2&rf){const _r2=core.MAs(3),ctx_r0=core.oxw();core.s9C("id",ctx_r0.createAttributeIdForConfigurator(ctx_r0.attribute)),core.xp6(1),core.Q6J("ngIf",void 0!==ctx_r0.attribute.values&&ctx_r0.attribute.values.length>0)("ngIfElse",_r2)}}function ConfiguratorAttributeSingleSelectionBundleDropdownComponent_div_0_option_5_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"option",7),core.ALo(1,"cxTranslate"),core.ALo(2,"cxTranslate"),core.ALo(3,"cxTranslate"),core._uU(4),core.qZA()),2&rf){const item_r4=ctx.$implicit,ctx_r3=core.oxw(2);core.Q6J("label",item_r4.valueDisplay)("selected",item_r4.selected)("value",item_r4.valueCode)("value",item_r4.valueCode),core.uIk("aria-label","0"===item_r4.valueCode?core.xi3(1,6,"configurator.a11y.forAttribute",core.WLB(15,_c6,item_r4.valueDisplay,ctx_r3.attribute.label)):item_r4.valuePrice&&0!==(null==item_r4.valuePrice?null:item_r4.valuePrice.value)?core.xi3(2,9,"configurator.a11y.selectedValueOfAttributeFullWithPrice",core.kEZ(18,_c5,item_r4.valueDisplay,ctx_r3.attribute.label,item_r4.valuePriceTotal.formattedValue)):core.xi3(3,12,"configurator.a11y.selectedValueOfAttributeFull",core.WLB(22,_c6,item_r4.valueDisplay,ctx_r3.attribute.label))),core.xp6(4),core.hij(" ",item_r4.valueDisplay," ")}}function ConfiguratorAttributeSingleSelectionBundleDropdownComponent_div_0_Template(rf,ctx){if(1&rf){const _r6=core.EpF();core.TgZ(0,"div",3)(1,"label",4),core._uU(2),core.ALo(3,"cxTranslate"),core.qZA(),core.TgZ(4,"select",5),core.NdJ("change",__name(function(){core.CHM(_r6);const ctx_r5=core.oxw();return core.KtG(ctx_r5.onSelect(ctx_r5.attributeDropDownForm.value))},"ConfiguratorAttributeSingleSelectionBundleDropdownComponent_div_0_Template_select_change_4_listener")),core.YNc(5,ConfiguratorAttributeSingleSelectionBundleDropdownComponent_div_0_option_5_Template,5,25,"option",6),core.qZA()()}if(2&rf){const ctx_r0=core.oxw();core.xp6(1),core.s9C("for",ctx_r0.createAttributeIdForConfigurator(ctx_r0.attribute)),core.xp6(1),core.hij(" ",core.xi3(3,7,"configurator.a11y.listbox",core.VKq(10,_c8,null==ctx_r0.attribute.values?null:ctx_r0.attribute.values.length))," "),core.xp6(2),core.s9C("id",ctx_r0.createAttributeIdForConfigurator(ctx_r0.attribute)),core.Q6J("formControl",ctx_r0.attributeDropDownForm)("cxFocus",core.VKq(12,_c4,ctx_r0.attribute.name)),core.uIk("aria-describedby",ctx_r0.createAttributeUiKey("label",ctx_r0.attribute.name)),core.xp6(1),core.Q6J("ngForOf",ctx_r0.attribute.values)}}function ConfiguratorAttributeSingleSelectionBundleDropdownComponent_cx_configurator_attribute_product_card_1_Template(rf,ctx){if(1&rf){const _r8=core.EpF();core.TgZ(0,"cx-configurator-attribute-product-card",8),core.NdJ("handleDeselect",__name(function(){core.CHM(_r8);const ctx_r7=core.oxw();return core.KtG(ctx_r7.onSelect("0"))},"ConfiguratorAttributeSingleSelectionBundleDropdownComponent_cx_configurator_attribute_product_card_1_Template_cx_configurator_attribute_product_card_handleDeselect_0_listener")),core.qZA()}if(2&rf){const ctx_r1=core.oxw();core.s9C("id",ctx_r1.createAttributeValueIdForConfigurator(ctx_r1.attribute,ctx_r1.selectionValue.valueCode)),core.Q6J("productCardOptions",ctx_r1.extractProductCardParameters())}}function ConfiguratorAttributeSingleSelectionBundleDropdownComponent_div_2_Template(rf,ctx){if(1&rf){const _r10=core.EpF();core.TgZ(0,"div",9)(1,"cx-configurator-attribute-quantity",10),core.NdJ("changeQuantity",__name(function($event){core.CHM(_r10);const ctx_r9=core.oxw();return core.KtG(ctx_r9.onChangeQuantity($event,ctx_r9.attributeDropDownForm))},"ConfiguratorAttributeSingleSelectionBundleDropdownComponent_div_2_Template_cx_configurator_attribute_quantity_changeQuantity_1_listener")),core.qZA(),core._UZ(2,"cx-configurator-price",11),core.qZA()}if(2&rf){const ctx_r2=core.oxw();core.xp6(1),core.Q6J("quantityOptions",ctx_r2.extractQuantityParameters(ctx_r2.attributeDropDownForm)),core.xp6(1),core.Q6J("formula",ctx_r2.extractPriceFormulaParameters())}}function ConfiguratorAttributeSingleSelectionBundleComponent_div_0_div_1_Template(rf,ctx){if(1&rf){const _r4=core.EpF();core.TgZ(0,"div",4)(1,"cx-configurator-attribute-quantity",5),core.NdJ("changeQuantity",__name(function($event){core.CHM(_r4);const ctx_r3=core.oxw(2);return core.KtG(ctx_r3.onChangeQuantity($event))},"ConfiguratorAttributeSingleSelectionBundleComponent_div_0_div_1_Template_cx_configurator_attribute_quantity_changeQuantity_1_listener")),core.qZA(),core._UZ(2,"cx-configurator-price",6),core.qZA()}if(2&rf){const ctx_r1=core.oxw(2);core.xp6(1),core.Q6J("quantityOptions",ctx_r1.extractQuantityParameters()),core.xp6(1),core.Q6J("formula",ctx_r1.extractPriceFormulaParameters())}}function ConfiguratorAttributeSingleSelectionBundleComponent_div_0_cx_configurator_attribute_product_card_2_Template(rf,ctx){if(1&rf){const _r8=core.EpF();core.TgZ(0,"cx-configurator-attribute-product-card",7),core.NdJ("handleDeselect",__name(function(){core.CHM(_r8);const ctx_r7=core.oxw(2);return core.KtG(ctx_r7.onSelect(""))},"ConfiguratorAttributeSingleSelectionBundleComponent_div_0_cx_configurator_attribute_product_card_2_Template_cx_configurator_attribute_product_card_handleDeselect_0_listener"))("handleSelect",__name(function($event){core.CHM(_r8);const ctx_r9=core.oxw(2);return core.KtG(ctx_r9.onSelect($event))},"ConfiguratorAttributeSingleSelectionBundleComponent_div_0_cx_configurator_attribute_product_card_2_Template_cx_configurator_attribute_product_card_handleSelect_0_listener")),core.qZA()}if(2&rf){const value_r5=ctx.$implicit,i_r6=ctx.index,ctx_r2=core.oxw(2);core.Q6J("id",ctx_r2.createAttributeValueIdForConfigurator(ctx_r2.attribute,null==value_r5?null:value_r5.valueCode))("productCardOptions",ctx_r2.extractProductCardParameters(value_r5,i_r6))}}function ConfiguratorAttributeSingleSelectionBundleComponent_div_0_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",1),core.YNc(1,ConfiguratorAttributeSingleSelectionBundleComponent_div_0_div_1_Template,3,2,"div",2),core.YNc(2,ConfiguratorAttributeSingleSelectionBundleComponent_div_0_cx_configurator_attribute_product_card_2_Template,1,2,"cx-configurator-attribute-product-card",3),core.qZA()),2&rf){const ctx_r0=core.oxw();core.s9C("id",ctx_r0.createAttributeIdForConfigurator(ctx_r0.attribute)),core.xp6(1),core.Q6J("ngIf",ctx_r0.withQuantity),core.xp6(1),core.Q6J("ngForOf",null==ctx_r0.attribute?null:ctx_r0.attribute.values)}}function ConfiguratorAttributeSingleSelectionImageComponent_div_1_img_6_Template(rf,ctx){if(1&rf&&core._UZ(0,"img",9),2&rf){const value_r1=core.oxw().$implicit;core.s9C("src",value_r1.images[0].url,core.LSH),core.s9C("alt",value_r1.images[0].altText)}}function ConfiguratorAttributeSingleSelectionImageComponent_div_1_div_7_Template(rf,ctx){1&rf&&core._UZ(0,"div",10)}function ConfiguratorAttributeSingleSelectionImageComponent_div_1_Template(rf,ctx){if(1&rf){const _r6=core.EpF();core.TgZ(0,"div",2)(1,"input",3),core.NdJ("click",__name(function(){const value_r1=core.CHM(_r6).$implicit,ctx_r5=core.oxw();return core.KtG(ctx_r5.onClick(value_r1.valueCode))},"ConfiguratorAttributeSingleSelectionImageComponent_div_1_Template_input_click_1_listener")),core.ALo(2,"cxTranslate"),core.ALo(3,"cxTranslate"),core.qZA(),core.TgZ(4,"div",4)(5,"label",5),core.YNc(6,ConfiguratorAttributeSingleSelectionImageComponent_div_1_img_6_Template,1,2,"img",6),core.YNc(7,ConfiguratorAttributeSingleSelectionImageComponent_div_1_div_7_Template,1,0,"div",7),core._uU(8),core._UZ(9,"cx-configurator-price",8),core.qZA()()()}if(2&rf){const value_r1=ctx.$implicit,ctx_r0=core.oxw();core.s9C("id",ctx_r0.createAttributeValueIdForConfigurator(ctx_r0.attribute,value_r1.valueCode)),core.xp6(1),core.s9C("id",ctx_r0.createAttributeValueIdForConfigurator(ctx_r0.attribute,value_r1.valueCode)+"-input"),core.s9C("name",ctx_r0.createAttributeIdForConfigurator(ctx_r0.attribute)),core.Q6J("value",value_r1.valueCode)("formControl",ctx_r0.attributeRadioButtonForm)("value",value_r1.valueCode)("cxFocus",core.VKq(25,_c4,ctx_r0.attribute.name+"-"+value_r1.name)),core.uIk("name",ctx_r0.createAttributeIdForConfigurator(ctx_r0.attribute))("required",ctx_r0.attribute.required)("checked",ctx_r0.attributeRadioButtonForm.value===value_r1.valueCode?"checked":null)("aria-checked",ctx_r0.attributeRadioButtonForm.value===value_r1.valueCode?"true":"false")("aria-label",value_r1.valuePrice&&0!==(null==value_r1.valuePrice?null:value_r1.valuePrice.value)?core.xi3(2,19,"configurator.a11y.valueOfAttributeFullWithPrice",core.kEZ(27,_c5,value_r1.valueDisplay,ctx_r0.attribute.label,value_r1.valuePrice.formattedValue)):core.xi3(3,22,"configurator.a11y.valueOfAttributeFull",core.WLB(31,_c6,value_r1.valueDisplay,ctx_r0.attribute.label)))("aria-describedby",ctx_r0.createAttributeUiKey("label",ctx_r0.attribute.name)),core.xp6(4),core.s9C("id",ctx_r0.createValueUiKey("label",ctx_r0.attribute.name,value_r1.valueCode)),core.s9C("for",ctx_r0.createAttributeValueIdForConfigurator(ctx_r0.attribute,value_r1.valueCode)+"-input"),core.xp6(1),core.Q6J("ngIf",value_r1.images[0]),core.xp6(1),core.Q6J("ngIf",!value_r1.images[0]),core.xp6(1),core.hij(" ",ctx_r0.getLabel(ctx_r0.expMode,value_r1.valueDisplay,value_r1.valueCode)," "),core.xp6(1),core.Q6J("formula",ctx_r0.extractValuePriceFormulaParameters(value_r1))}}function ConfiguratorConflictDescriptionComponent_ng_container_0_Template(rf,ctx){if(1&rf&&(core.ynx(0),core._UZ(1,"cx-icon",1),core._uU(2),core.BQk()),2&rf){const ctx_r0=core.oxw();core.xp6(1),core.Q6J("type",ctx_r0.iconTypes.WARNING),core.xp6(1),core.hij(" ",ctx_r0.currentGroup.name,"\n")}}__name(ConfiguratorAttributeDropDownComponent_div_0_Template,"ConfiguratorAttributeDropDownComponent_div_0_Template"),__name(ConfiguratorAttributeDropDownComponent_div_1_Template,"ConfiguratorAttributeDropDownComponent_div_1_Template"),__name(ConfiguratorAttributeDropDownComponent_cx_configurator_attribute_numeric_input_field_2_Template,"ConfiguratorAttributeDropDownComponent_cx_configurator_attribute_numeric_input_field_2_Template"),__name(ConfiguratorAttributeDropDownComponent_cx_configurator_attribute_input_field_3_Template,"ConfiguratorAttributeDropDownComponent_cx_configurator_attribute_input_field_3_Template"),__name(ConfiguratorAttributeMultiSelectionBundleComponent_div_0_div_1_Template,"ConfiguratorAttributeMultiSelectionBundleComponent_div_0_div_1_Template"),__name(ConfiguratorAttributeMultiSelectionBundleComponent_div_0_cx_configurator_attribute_product_card_2_Template,"ConfiguratorAttributeMultiSelectionBundleComponent_div_0_cx_configurator_attribute_product_card_2_Template"),__name(ConfiguratorAttributeMultiSelectionBundleComponent_div_0_Template,"ConfiguratorAttributeMultiSelectionBundleComponent_div_0_Template"),__name(ConfiguratorAttributeMultiSelectionImageComponent_div_1_img_6_Template,"ConfiguratorAttributeMultiSelectionImageComponent_div_1_img_6_Template"),__name(ConfiguratorAttributeMultiSelectionImageComponent_div_1_div_7_Template,"ConfiguratorAttributeMultiSelectionImageComponent_div_1_div_7_Template"),__name(ConfiguratorAttributeMultiSelectionImageComponent_div_1_Template,"ConfiguratorAttributeMultiSelectionImageComponent_div_1_Template"),__name(ConfiguratorAttributeRadioButtonComponent_div_4_Template,"ConfiguratorAttributeRadioButtonComponent_div_4_Template"),__name(ConfiguratorAttributeRadioButtonComponent_div_5_Template,"ConfiguratorAttributeRadioButtonComponent_div_5_Template"),__name(ConfiguratorAttributeRadioButtonComponent_cx_configurator_attribute_numeric_input_field_6_Template,"ConfiguratorAttributeRadioButtonComponent_cx_configurator_attribute_numeric_input_field_6_Template"),__name(ConfiguratorAttributeRadioButtonComponent_cx_configurator_attribute_input_field_7_Template,"ConfiguratorAttributeRadioButtonComponent_cx_configurator_attribute_input_field_7_Template"),__name(ConfiguratorAttributeReadOnlyComponent_div_0_ng_container_1_ng_container_1_span_1_Template,"ConfiguratorAttributeReadOnlyComponent_div_0_ng_container_1_ng_container_1_span_1_Template"),__name(ConfiguratorAttributeReadOnlyComponent_div_0_ng_container_1_ng_container_1_div_2_Template,"ConfiguratorAttributeReadOnlyComponent_div_0_ng_container_1_ng_container_1_div_2_Template"),__name(ConfiguratorAttributeReadOnlyComponent_div_0_ng_container_1_ng_container_1_Template,"ConfiguratorAttributeReadOnlyComponent_div_0_ng_container_1_ng_container_1_Template"),__name(ConfiguratorAttributeReadOnlyComponent_div_0_ng_container_1_Template,"ConfiguratorAttributeReadOnlyComponent_div_0_ng_container_1_Template"),__name(ConfiguratorAttributeReadOnlyComponent_div_0_ng_template_2_ng_container_0_Template,"ConfiguratorAttributeReadOnlyComponent_div_0_ng_template_2_ng_container_0_Template"),__name(ConfiguratorAttributeReadOnlyComponent_div_0_ng_template_2_ng_container_1_Template,"ConfiguratorAttributeReadOnlyComponent_div_0_ng_template_2_ng_container_1_Template"),__name(ConfiguratorAttributeReadOnlyComponent_div_0_ng_template_2_Template,"ConfiguratorAttributeReadOnlyComponent_div_0_ng_template_2_Template"),__name(ConfiguratorAttributeReadOnlyComponent_div_0_Template,"ConfiguratorAttributeReadOnlyComponent_div_0_Template"),__name(ConfiguratorAttributeSingleSelectionBundleDropdownComponent_div_0_option_5_Template,"ConfiguratorAttributeSingleSelectionBundleDropdownComponent_div_0_option_5_Template"),__name(ConfiguratorAttributeSingleSelectionBundleDropdownComponent_div_0_Template,"ConfiguratorAttributeSingleSelectionBundleDropdownComponent_div_0_Template"),__name(ConfiguratorAttributeSingleSelectionBundleDropdownComponent_cx_configurator_attribute_product_card_1_Template,"ConfiguratorAttributeSingleSelectionBundleDropdownComponent_cx_configurator_attribute_product_card_1_Template"),__name(ConfiguratorAttributeSingleSelectionBundleDropdownComponent_div_2_Template,"ConfiguratorAttributeSingleSelectionBundleDropdownComponent_div_2_Template"),__name(ConfiguratorAttributeSingleSelectionBundleComponent_div_0_div_1_Template,"ConfiguratorAttributeSingleSelectionBundleComponent_div_0_div_1_Template"),__name(ConfiguratorAttributeSingleSelectionBundleComponent_div_0_cx_configurator_attribute_product_card_2_Template,"ConfiguratorAttributeSingleSelectionBundleComponent_div_0_cx_configurator_attribute_product_card_2_Template"),__name(ConfiguratorAttributeSingleSelectionBundleComponent_div_0_Template,"ConfiguratorAttributeSingleSelectionBundleComponent_div_0_Template"),__name(ConfiguratorAttributeSingleSelectionImageComponent_div_1_img_6_Template,"ConfiguratorAttributeSingleSelectionImageComponent_div_1_img_6_Template"),__name(ConfiguratorAttributeSingleSelectionImageComponent_div_1_div_7_Template,"ConfiguratorAttributeSingleSelectionImageComponent_div_1_div_7_Template"),__name(ConfiguratorAttributeSingleSelectionImageComponent_div_1_Template,"ConfiguratorAttributeSingleSelectionImageComponent_div_1_Template"),__name(ConfiguratorConflictDescriptionComponent_ng_container_0_Template,"ConfiguratorConflictDescriptionComponent_ng_container_0_Template");const _c9=__name(function(a0){return{number:a0}},"_c9");function ConfiguratorConflictSuggestionComponent_ng_container_0_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.TgZ(1,"div",1),core.ALo(2,"cxTranslate"),core.ALo(3,"cxTranslate"),core.TgZ(4,"span",2),core._uU(5),core.ALo(6,"cxTranslate"),core.qZA()(),core.TgZ(7,"span",2),core._uU(8),core.ALo(9,"cxTranslate"),core.qZA(),core.BQk()),2&rf){const ctx_r0=core.oxw();core.xp6(1),core.uIk("aria-label",core.xi3(2,3,"configurator.conflict.suggestionTitle",core.VKq(15,_c9,ctx_r0.suggestionNumber+1))+" "+core.xi3(3,6,"configurator.conflict.suggestionText",core.VKq(17,_c0,ctx_r0.attribute.label))),core.xp6(4),core.Oqu(core.xi3(6,9,"configurator.conflict.suggestionTitle",core.VKq(19,_c9,ctx_r0.suggestionNumber+1))),core.xp6(3),core.Oqu(core.xi3(9,12,"configurator.conflict.suggestionText",core.VKq(21,_c0,ctx_r0.attribute.label)))}}function ConfiguratorFormComponent_ng_container_0_ng_container_1_ng_container_2_Template(rf,ctx){if(1&rf&&(core.ynx(0),core._UZ(1,"cx-configurator-conflict-description",5),core.BQk()),2&rf){const currentGroup_r5=core.oxw().ngIf;core.xp6(1),core.Q6J("currentGroup",currentGroup_r5)}}function ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_ng_container_1_ng_container_1_Template(rf,ctx){if(1&rf&&(core.ynx(0),core._UZ(1,"cx-configurator-conflict-suggestion",18),core.BQk()),2&rf){const ctx_r28=core.oxw(2),attribute_r9=ctx_r28.$implicit,indexOfAttribute_r10=ctx_r28.index,currentGroup_r5=core.oxw().ngIf;core.xp6(1),core.Q6J("currentGroup",currentGroup_r5)("attribute",attribute_r9)("suggestionNumber",indexOfAttribute_r10)}}function ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_ng_container_1_cx_configurator_attribute_radio_button_4_Template(rf,ctx){if(1&rf){const _r30=core.EpF();core.TgZ(0,"cx-configurator-attribute-radio-button",19),core.NdJ("selectionChange",__name(function($event){core.CHM(_r30);const ctx_r29=core.oxw(5);return core.KtG(ctx_r29.updateConfiguration($event))},"ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_ng_container_1_cx_configurator_attribute_radio_button_4_Template_cx_configurator_attribute_radio_button_selectionChange_0_listener")),core.ALo(1,"async"),core.qZA()}if(2&rf){const activeLanguage_r12=core.oxw().ngIf,attribute_r9=core.oxw().$implicit,configuration_r3=core.oxw(2).ngIf,ctx_r14=core.oxw();core.Q6J("attribute",attribute_r9)("ownerKey",configuration_r3.owner.key)("ownerType",configuration_r3.owner.type)("language",activeLanguage_r12)("expMode",core.lcZ(1,5,ctx_r14.expMode))}}function ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_ng_container_1_cx_configurator_attribute_single_selection_bundle_5_Template(rf,ctx){if(1&rf){const _r35=core.EpF();core.TgZ(0,"cx-configurator-attribute-single-selection-bundle",20),core.NdJ("selectionChange",__name(function($event){core.CHM(_r35);const ctx_r34=core.oxw(5);return core.KtG(ctx_r34.updateConfiguration($event))},"ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_ng_container_1_cx_configurator_attribute_single_selection_bundle_5_Template_cx_configurator_attribute_single_selection_bundle_selectionChange_0_listener")),core.qZA()}if(2&rf){const attribute_r9=core.oxw(2).$implicit,configuration_r3=core.oxw(2).ngIf;core.Q6J("attribute",attribute_r9)("ownerKey",configuration_r3.owner.key)}}function ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_ng_container_1_cx_configurator_attribute_multi_selection_bundle_6_Template(rf,ctx){if(1&rf){const _r39=core.EpF();core.TgZ(0,"cx-configurator-attribute-multi-selection-bundle",20),core.NdJ("selectionChange",__name(function($event){core.CHM(_r39);const ctx_r38=core.oxw(5);return core.KtG(ctx_r38.updateConfiguration($event))},"ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_ng_container_1_cx_configurator_attribute_multi_selection_bundle_6_Template_cx_configurator_attribute_multi_selection_bundle_selectionChange_0_listener")),core.qZA()}if(2&rf){const attribute_r9=core.oxw(2).$implicit,configuration_r3=core.oxw(2).ngIf;core.Q6J("attribute",attribute_r9)("ownerKey",configuration_r3.owner.key)}}function ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_ng_container_1_cx_configurator_attribute_single_selection_bundle_dropdown_7_Template(rf,ctx){if(1&rf){const _r43=core.EpF();core.TgZ(0,"cx-configurator-attribute-single-selection-bundle-dropdown",21),core.NdJ("selectionChange",__name(function($event){core.CHM(_r43);const ctx_r42=core.oxw(5);return core.KtG(ctx_r42.updateConfiguration($event))},"ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_ng_container_1_cx_configurator_attribute_single_selection_bundle_dropdown_7_Template_cx_configurator_attribute_single_selection_bundle_dropdown_selectionChange_0_listener")),core.qZA()}if(2&rf){const attribute_r9=core.oxw(2).$implicit,currentGroup_r5=core.oxw().ngIf,configuration_r3=core.oxw().ngIf;core.Q6J("attribute",attribute_r9)("group",currentGroup_r5.id)("ownerKey",configuration_r3.owner.key)}}function ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_ng_container_1_cx_configurator_attribute_drop_down_8_Template(rf,ctx){if(1&rf){const _r48=core.EpF();core.TgZ(0,"cx-configurator-attribute-drop-down",22),core.NdJ("selectionChange",__name(function($event){core.CHM(_r48);const ctx_r47=core.oxw(5);return core.KtG(ctx_r47.updateConfiguration($event))},"ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_ng_container_1_cx_configurator_attribute_drop_down_8_Template_cx_configurator_attribute_drop_down_selectionChange_0_listener")),core.ALo(1,"async"),core.qZA()}if(2&rf){const activeLanguage_r12=core.oxw().ngIf,attribute_r9=core.oxw().$implicit,currentGroup_r5=core.oxw().ngIf,configuration_r3=core.oxw().ngIf,ctx_r18=core.oxw();core.Q6J("attribute",attribute_r9)("group",currentGroup_r5.id)("ownerKey",configuration_r3.owner.key)("ownerType",configuration_r3.owner.type)("language",activeLanguage_r12)("expMode",core.lcZ(1,6,ctx_r18.expMode))}}function ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_ng_container_1_cx_configurator_attribute_input_field_9_Template(rf,ctx){if(1&rf){const _r54=core.EpF();core.TgZ(0,"cx-configurator-attribute-input-field",23),core.NdJ("inputChange",__name(function($event){core.CHM(_r54);const ctx_r53=core.oxw(5);return core.KtG(ctx_r53.updateConfiguration($event))},"ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_ng_container_1_cx_configurator_attribute_input_field_9_Template_cx_configurator_attribute_input_field_inputChange_0_listener")),core.qZA()}if(2&rf){const attribute_r9=core.oxw(2).$implicit,currentGroup_r5=core.oxw().ngIf,configuration_r3=core.oxw().ngIf;core.Q6J("attribute",attribute_r9)("group",currentGroup_r5.id)("ownerType",configuration_r3.owner.type)("ownerKey",configuration_r3.owner.key)}}function ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_ng_container_1_cx_configurator_attribute_numeric_input_field_10_Template(rf,ctx){if(1&rf){const _r59=core.EpF();core.TgZ(0,"cx-configurator-attribute-numeric-input-field",24),core.NdJ("inputChange",__name(function($event){core.CHM(_r59);const ctx_r58=core.oxw(5);return core.KtG(ctx_r58.updateConfiguration($event))},"ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_ng_container_1_cx_configurator_attribute_numeric_input_field_10_Template_cx_configurator_attribute_numeric_input_field_inputChange_0_listener")),core.qZA()}if(2&rf){const activeLanguage_r12=core.oxw().ngIf,attribute_r9=core.oxw().$implicit,currentGroup_r5=core.oxw().ngIf,configuration_r3=core.oxw().ngIf;core.Q6J("attribute",attribute_r9)("group",currentGroup_r5.id)("ownerType",configuration_r3.owner.type)("ownerKey",configuration_r3.owner.key)("language",activeLanguage_r12)}}function ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_ng_container_1_cx_configurator_attribute_checkbox_list_11_Template(rf,ctx){if(1&rf){const _r65=core.EpF();core.TgZ(0,"cx-configurator-attribute-checkbox-list",25),core.NdJ("selectionChange",__name(function($event){core.CHM(_r65);const ctx_r64=core.oxw(5);return core.KtG(ctx_r64.updateConfiguration($event))},"ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_ng_container_1_cx_configurator_attribute_checkbox_list_11_Template_cx_configurator_attribute_checkbox_list_selectionChange_0_listener")),core.ALo(1,"async"),core.qZA()}if(2&rf){const attribute_r9=core.oxw(2).$implicit,currentGroup_r5=core.oxw().ngIf,configuration_r3=core.oxw().ngIf,ctx_r21=core.oxw();core.Q6J("attribute",attribute_r9)("group",currentGroup_r5.id)("ownerKey",configuration_r3.owner.key)("expMode",core.lcZ(1,4,ctx_r21.expMode))}}function ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_ng_container_1_cx_configurator_attribute_checkbox_12_Template(rf,ctx){if(1&rf){const _r70=core.EpF();core.TgZ(0,"cx-configurator-attribute-checkbox",25),core.NdJ("selectionChange",__name(function($event){core.CHM(_r70);const ctx_r69=core.oxw(5);return core.KtG(ctx_r69.updateConfiguration($event))},"ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_ng_container_1_cx_configurator_attribute_checkbox_12_Template_cx_configurator_attribute_checkbox_selectionChange_0_listener")),core.ALo(1,"async"),core.qZA()}if(2&rf){const attribute_r9=core.oxw(2).$implicit,currentGroup_r5=core.oxw().ngIf,configuration_r3=core.oxw().ngIf,ctx_r22=core.oxw();core.Q6J("attribute",attribute_r9)("group",currentGroup_r5.id)("ownerKey",configuration_r3.owner.key)("expMode",core.lcZ(1,4,ctx_r22.expMode))}}function ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_ng_container_1_cx_configurator_attribute_read_only_13_Template(rf,ctx){if(1&rf&&(core._UZ(0,"cx-configurator-attribute-read-only",26),core.ALo(1,"async")),2&rf){const attribute_r9=core.oxw(2).$implicit,currentGroup_r5=core.oxw().ngIf,ctx_r23=core.oxw(2);core.Q6J("attribute",attribute_r9)("group",currentGroup_r5.id)("expMode",core.lcZ(1,3,ctx_r23.expMode))}}function ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_ng_container_1_cx_configurator_attribute_multi_selection_image_14_Template(rf,ctx){if(1&rf){const _r77=core.EpF();core.TgZ(0,"cx-configurator-attribute-multi-selection-image",27),core.NdJ("selectionChange",__name(function($event){core.CHM(_r77);const ctx_r76=core.oxw(5);return core.KtG(ctx_r76.updateConfiguration($event))},"ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_ng_container_1_cx_configurator_attribute_multi_selection_image_14_Template_cx_configurator_attribute_multi_selection_image_selectionChange_0_listener")),core.ALo(1,"async"),core.qZA()}if(2&rf){const attribute_r9=core.oxw(2).$implicit,configuration_r3=core.oxw(2).ngIf,ctx_r24=core.oxw();core.Q6J("attribute",attribute_r9)("ownerKey",configuration_r3.owner.key)("expMode",core.lcZ(1,3,ctx_r24.expMode))}}function ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_ng_container_1_cx_configurator_attribute_single_selection_image_15_Template(rf,ctx){if(1&rf){const _r81=core.EpF();core.TgZ(0,"cx-configurator-attribute-single-selection-image",27),core.NdJ("selectionChange",__name(function($event){core.CHM(_r81);const ctx_r80=core.oxw(5);return core.KtG(ctx_r80.updateConfiguration($event))},"ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_ng_container_1_cx_configurator_attribute_single_selection_image_15_Template_cx_configurator_attribute_single_selection_image_selectionChange_0_listener")),core.ALo(1,"async"),core.qZA()}if(2&rf){const attribute_r9=core.oxw(2).$implicit,configuration_r3=core.oxw(2).ngIf,ctx_r25=core.oxw();core.Q6J("attribute",attribute_r9)("ownerKey",configuration_r3.owner.key)("expMode",core.lcZ(1,3,ctx_r25.expMode))}}function ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_ng_container_1_em_16_Template(rf,ctx){1&rf&&(core.TgZ(0,"em"),core._uU(1),core.ALo(2,"cxTranslate"),core.qZA()),2&rf&&(core.xp6(1),core.Oqu(core.lcZ(2,1,"configurator.attribute.notSupported")))}function ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_ng_container_1_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_ng_container_1_ng_container_1_Template,2,3,"ng-container",2),core._UZ(2,"cx-configurator-attribute-header",7),core.ALo(3,"async"),core.YNc(4,ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_ng_container_1_cx_configurator_attribute_radio_button_4_Template,2,7,"cx-configurator-attribute-radio-button",8),core.YNc(5,ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_ng_container_1_cx_configurator_attribute_single_selection_bundle_5_Template,1,2,"cx-configurator-attribute-single-selection-bundle",9),core.YNc(6,ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_ng_container_1_cx_configurator_attribute_multi_selection_bundle_6_Template,1,2,"cx-configurator-attribute-multi-selection-bundle",9),core.YNc(7,ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_ng_container_1_cx_configurator_attribute_single_selection_bundle_dropdown_7_Template,1,3,"cx-configurator-attribute-single-selection-bundle-dropdown",10),core.YNc(8,ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_ng_container_1_cx_configurator_attribute_drop_down_8_Template,2,8,"cx-configurator-attribute-drop-down",11),core.YNc(9,ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_ng_container_1_cx_configurator_attribute_input_field_9_Template,1,4,"cx-configurator-attribute-input-field",12),core.YNc(10,ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_ng_container_1_cx_configurator_attribute_numeric_input_field_10_Template,1,5,"cx-configurator-attribute-numeric-input-field",13),core.YNc(11,ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_ng_container_1_cx_configurator_attribute_checkbox_list_11_Template,2,6,"cx-configurator-attribute-checkbox-list",14),core.YNc(12,ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_ng_container_1_cx_configurator_attribute_checkbox_12_Template,2,6,"cx-configurator-attribute-checkbox",14),core.YNc(13,ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_ng_container_1_cx_configurator_attribute_read_only_13_Template,2,5,"cx-configurator-attribute-read-only",15),core.YNc(14,ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_ng_container_1_cx_configurator_attribute_multi_selection_image_14_Template,2,5,"cx-configurator-attribute-multi-selection-image",16),core.YNc(15,ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_ng_container_1_cx_configurator_attribute_single_selection_image_15_Template,2,5,"cx-configurator-attribute-single-selection-image",16),core.YNc(16,ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_ng_container_1_em_16_Template,3,3,"em",2),core._UZ(17,"cx-configurator-attribute-footer",17),core.BQk()),2&rf){const attribute_r9=core.oxw().$implicit,currentGroup_r5=core.oxw().ngIf,configuration_r3=core.oxw().ngIf,ctx_r11=core.oxw();core.xp6(1),core.Q6J("ngIf",ctx_r11.isConflictGroupType(currentGroup_r5.groupType)),core.xp6(1),core.Q6J("attribute",attribute_r9)("owner",configuration_r3.owner)("groupId",currentGroup_r5.id)("groupType",currentGroup_r5.groupType)("expMode",core.lcZ(3,22,ctx_r11.expMode)),core.xp6(2),core.Q6J("ngIf",attribute_r9.uiType===ctx_r11.uiType.RADIOBUTTON||attribute_r9.uiType===ctx_r11.uiType.RADIOBUTTON_ADDITIONAL_INPUT),core.xp6(1),core.Q6J("ngIf",attribute_r9.uiType===ctx_r11.uiType.RADIOBUTTON_PRODUCT),core.xp6(1),core.Q6J("ngIf",attribute_r9.uiType===ctx_r11.uiType.CHECKBOXLIST_PRODUCT),core.xp6(1),core.Q6J("ngIf",attribute_r9.uiType===ctx_r11.uiType.DROPDOWN_PRODUCT),core.xp6(1),core.Q6J("ngIf",attribute_r9.uiType===ctx_r11.uiType.DROPDOWN||attribute_r9.uiType===ctx_r11.uiType.DROPDOWN_ADDITIONAL_INPUT),core.xp6(1),core.Q6J("ngIf",attribute_r9.uiType===ctx_r11.uiType.STRING),core.xp6(1),core.Q6J("ngIf",attribute_r9.uiType===ctx_r11.uiType.NUMERIC),core.xp6(1),core.Q6J("ngIf",attribute_r9.uiType===ctx_r11.uiType.CHECKBOXLIST),core.xp6(1),core.Q6J("ngIf",attribute_r9.uiType===ctx_r11.uiType.CHECKBOX),core.xp6(1),core.Q6J("ngIf",attribute_r9.uiType===ctx_r11.uiType.READ_ONLY),core.xp6(1),core.Q6J("ngIf",attribute_r9.uiType===ctx_r11.uiType.MULTI_SELECTION_IMAGE),core.xp6(1),core.Q6J("ngIf",attribute_r9.uiType===ctx_r11.uiType.SINGLE_SELECTION_IMAGE),core.xp6(1),core.Q6J("ngIf",attribute_r9.uiType===ctx_r11.uiType.NOT_IMPLEMENTED),core.xp6(1),core.Q6J("attribute",attribute_r9)("owner",configuration_r3.owner)("groupId",currentGroup_r5.id)}}function ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",6),core.YNc(1,ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_ng_container_1_Template,18,24,"ng-container",2),core.ALo(2,"async"),core.qZA()),2&rf){const attribute_r9=ctx.$implicit,ctx_r7=core.oxw(3);core.ekj("cx-hidden",!attribute_r9.visible),core.xp6(1),core.Q6J("ngIf",core.lcZ(2,3,ctx_r7.activeLanguage$))}}function ConfiguratorFormComponent_ng_container_0_ng_container_1_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.TgZ(1,"div",3),core.YNc(2,ConfiguratorFormComponent_ng_container_0_ng_container_1_ng_container_2_Template,2,1,"ng-container",2),core.YNc(3,ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_Template,3,5,"div",4),core.qZA(),core.BQk()),2&rf){const currentGroup_r5=ctx.ngIf,ctx_r4=core.oxw(2);core.xp6(1),core.s9C("id",ctx_r4.createGroupId(currentGroup_r5.id)),core.xp6(1),core.Q6J("ngIf",ctx_r4.isConflictGroupType(currentGroup_r5.groupType)),core.xp6(1),core.Q6J("ngForOf",currentGroup_r5.attributes)}}function ConfiguratorFormComponent_ng_container_0_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,ConfiguratorFormComponent_ng_container_0_ng_container_1_Template,4,3,"ng-container",2),core.ALo(2,"async"),core.BQk()),2&rf){const ctx_r0=core.oxw();core.xp6(1),core.Q6J("ngIf",core.lcZ(2,1,ctx_r0.currentGroup$))}}function ConfiguratorFormComponent_ng_template_2_ng_container_0_div_15_ng_container_5_Template(rf,ctx){1&rf&&(core.ynx(0),core._UZ(1,"div",44),core.BQk())}function ConfiguratorFormComponent_ng_template_2_ng_container_0_div_15_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",39)(1,"div",40),core._UZ(2,"div",41)(3,"div",42),core.qZA(),core.TgZ(4,"div",43),core.YNc(5,ConfiguratorFormComponent_ng_template_2_ng_container_0_div_15_ng_container_5_Template,2,0,"ng-container",2),core.qZA()()),2&rf){const i_r91=ctx.index;core.xp6(5),core.Q6J("ngIf",0!==i_r91)}}__name(ConfiguratorConflictSuggestionComponent_ng_container_0_Template,"ConfiguratorConflictSuggestionComponent_ng_container_0_Template"),__name(ConfiguratorFormComponent_ng_container_0_ng_container_1_ng_container_2_Template,"ConfiguratorFormComponent_ng_container_0_ng_container_1_ng_container_2_Template"),__name(ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_ng_container_1_ng_container_1_Template,"ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_ng_container_1_ng_container_1_Template"),__name(ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_ng_container_1_cx_configurator_attribute_radio_button_4_Template,"ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_ng_container_1_cx_configurator_attribute_radio_button_4_Template"),__name(ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_ng_container_1_cx_configurator_attribute_single_selection_bundle_5_Template,"ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_ng_container_1_cx_configurator_attribute_single_selection_bundle_5_Template"),__name(ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_ng_container_1_cx_configurator_attribute_multi_selection_bundle_6_Template,"ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_ng_container_1_cx_configurator_attribute_multi_selection_bundle_6_Template"),__name(ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_ng_container_1_cx_configurator_attribute_single_selection_bundle_dropdown_7_Template,"ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_ng_container_1_cx_configurator_attribute_single_selection_bundle_dropdown_7_Template"),__name(ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_ng_container_1_cx_configurator_attribute_drop_down_8_Template,"ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_ng_container_1_cx_configurator_attribute_drop_down_8_Template"),__name(ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_ng_container_1_cx_configurator_attribute_input_field_9_Template,"ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_ng_container_1_cx_configurator_attribute_input_field_9_Template"),__name(ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_ng_container_1_cx_configurator_attribute_numeric_input_field_10_Template,"ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_ng_container_1_cx_configurator_attribute_numeric_input_field_10_Template"),__name(ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_ng_container_1_cx_configurator_attribute_checkbox_list_11_Template,"ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_ng_container_1_cx_configurator_attribute_checkbox_list_11_Template"),__name(ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_ng_container_1_cx_configurator_attribute_checkbox_12_Template,"ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_ng_container_1_cx_configurator_attribute_checkbox_12_Template"),__name(ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_ng_container_1_cx_configurator_attribute_read_only_13_Template,"ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_ng_container_1_cx_configurator_attribute_read_only_13_Template"),__name(ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_ng_container_1_cx_configurator_attribute_multi_selection_image_14_Template,"ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_ng_container_1_cx_configurator_attribute_multi_selection_image_14_Template"),__name(ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_ng_container_1_cx_configurator_attribute_single_selection_image_15_Template,"ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_ng_container_1_cx_configurator_attribute_single_selection_image_15_Template"),__name(ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_ng_container_1_em_16_Template,"ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_ng_container_1_em_16_Template"),__name(ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_ng_container_1_Template,"ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_ng_container_1_Template"),__name(ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_Template,"ConfiguratorFormComponent_ng_container_0_ng_container_1_div_3_Template"),__name(ConfiguratorFormComponent_ng_container_0_ng_container_1_Template,"ConfiguratorFormComponent_ng_container_0_ng_container_1_Template"),__name(ConfiguratorFormComponent_ng_container_0_Template,"ConfiguratorFormComponent_ng_container_0_Template"),__name(ConfiguratorFormComponent_ng_template_2_ng_container_0_div_15_ng_container_5_Template,"ConfiguratorFormComponent_ng_template_2_ng_container_0_div_15_ng_container_5_Template"),__name(ConfiguratorFormComponent_ng_template_2_ng_container_0_div_15_Template,"ConfiguratorFormComponent_ng_template_2_ng_container_0_div_15_Template");const _c10=__name(function(){return[0,1,2]},"_c10");function ConfiguratorFormComponent_ng_template_2_ng_container_0_Template(rf,ctx){1&rf&&(core.ynx(0),core.TgZ(1,"div",29)(2,"div",30),core._UZ(3,"div",31)(4,"div",32),core.qZA(),core.TgZ(5,"div",33),core._UZ(6,"div",34)(7,"div",35),core.qZA()(),core.TgZ(8,"div",29)(9,"div",30),core._UZ(10,"div",31)(11,"div",32),core.TgZ(12,"div",36),core._UZ(13,"div",37),core.qZA()(),core.TgZ(14,"div",33),core.YNc(15,ConfiguratorFormComponent_ng_template_2_ng_container_0_div_15_Template,6,1,"div",38),core.qZA()(),core.BQk()),2&rf&&(core.xp6(15),core.Q6J("ngForOf",core.DdM(1,_c10)))}function ConfiguratorFormComponent_ng_template_2_Template(rf,ctx){1&rf&&core.YNc(0,ConfiguratorFormComponent_ng_template_2_ng_container_0_Template,16,2,"ng-container",28),2&rf&&core.Q6J("ngForOf",core.DdM(1,_c10))}__name(ConfiguratorFormComponent_ng_template_2_ng_container_0_Template,"ConfiguratorFormComponent_ng_template_2_ng_container_0_Template"),__name(ConfiguratorFormComponent_ng_template_2_Template,"ConfiguratorFormComponent_ng_template_2_Template");const _c11=["groupItem"],_c12=__name(function(){return{key:"cx-menu-back"}},"_c12");function ConfiguratorGroupMenuComponent_ng_container_0_ng_container_8_ng_container_1_ng_container_1_ng_container_1_button_1_Template(rf,ctx){if(1&rf){const _r18=core.EpF();core.TgZ(0,"button",19,8),core.NdJ("click",__name(function(){core.CHM(_r18);const ctx_r17=core.oxw(6);return core.KtG(ctx_r17.navigateUp())},"ConfiguratorGroupMenuComponent_ng_container_0_ng_container_8_ng_container_1_ng_container_1_ng_container_1_button_1_Template_button_click_0_listener"))("keydown",__name(function($event){core.CHM(_r18);const ctx_r20=core.oxw(2),groupIndex_r10=ctx_r20.index,group_r9=ctx_r20.$implicit,currentGroup_r7=core.oxw().ngIf,ctx_r19=core.oxw(3);return core.KtG(ctx_r19.switchGroupOnArrowPress($event,groupIndex_r10,group_r9,currentGroup_r7))},"ConfiguratorGroupMenuComponent_ng_container_0_ng_container_8_ng_container_1_ng_container_1_ng_container_1_button_1_Template_button_keydown_0_listener")),core.ALo(2,"cxTranslate"),core.ALo(3,"cxTranslate"),core._UZ(4,"cx-icon",20),core._uU(5),core.ALo(6,"cxTranslate"),core.qZA()}if(2&rf){const parentGroup_r14=core.oxw().ngIf,ctx_r15=core.oxw(5);core.Q6J("cxFocus",core.DdM(11,_c12)),core.uIk("aria-selected",!1)("aria-label",ctx_r15.isConflictGroupType(parentGroup_r14.groupType)?core.lcZ(2,5,"configurator.a11y.conflictBack"):core.lcZ(3,7,"configurator.a11y.groupBack")),core.xp6(4),core.Q6J("type",ctx_r15.iconTypes.CARET_LEFT),core.xp6(1),core.hij(" ",core.lcZ(6,9,"configurator.button.back")," ")}}function ConfiguratorGroupMenuComponent_ng_container_0_ng_container_8_ng_container_1_ng_container_1_ng_container_1_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,ConfiguratorGroupMenuComponent_ng_container_0_ng_container_8_ng_container_1_ng_container_1_ng_container_1_button_1_Template,7,12,"button",18),core.BQk()),2&rf){const parentGroup_r14=ctx.ngIf,groupIndex_r10=core.oxw().index;core.xp6(1),core.Q6J("ngIf",null!==parentGroup_r14&&0===groupIndex_r10)}}function ConfiguratorGroupMenuComponent_ng_container_0_ng_container_8_ng_container_1_ng_container_1_cx_icon_21_Template(rf,ctx){if(1&rf&&(core._UZ(0,"cx-icon",21),core.ALo(1,"cxTranslate")),2&rf){const group_r9=core.oxw().$implicit,ctx_r13=core.oxw(4);core.s9C("id",ctx_r13.createIconId(ctx_r13.iconTypes.CARET_RIGHT,group_r9.id)),core.Q6J("type",ctx_r13.iconTypes.CARET_RIGHT),core.uIk("aria-label",core.lcZ(1,3,"configurator.a11y.iconSubGroup"))}}function ConfiguratorGroupMenuComponent_ng_container_0_ng_container_8_ng_container_1_ng_container_1_Template(rf,ctx){if(1&rf){const _r26=core.EpF();core.ynx(0),core.YNc(1,ConfiguratorGroupMenuComponent_ng_container_0_ng_container_8_ng_container_1_ng_container_1_ng_container_1_Template,2,1,"ng-container",5),core.ALo(2,"async"),core.TgZ(3,"button",7,8),core.NdJ("click",__name(function(){const group_r9=core.CHM(_r26).$implicit,ctx_r25=core.oxw(4);return core.KtG(ctx_r25.click(group_r9))},"ConfiguratorGroupMenuComponent_ng_container_0_ng_container_8_ng_container_1_ng_container_1_Template_button_click_3_listener"))("keydown",__name(function($event){const restoredCtx=core.CHM(_r26),groupIndex_r10=restoredCtx.index,group_r9=restoredCtx.$implicit,currentGroup_r7=core.oxw().ngIf,ctx_r27=core.oxw(3);return core.KtG(ctx_r27.switchGroupOnArrowPress($event,groupIndex_r10,group_r9,currentGroup_r7))},"ConfiguratorGroupMenuComponent_ng_container_0_ng_container_8_ng_container_1_ng_container_1_Template_button_keydown_3_listener")),core.ALo(5,"async"),core.ALo(6,"async"),core.TgZ(7,"span",9),core._uU(8),core.qZA(),core.TgZ(9,"div",10)(10,"div",11),core._uU(11),core.qZA(),core.TgZ(12,"div",12),core._UZ(13,"cx-icon",13),core.ALo(14,"cxTranslate"),core.qZA(),core.TgZ(15,"div",12),core._UZ(16,"cx-icon",14),core.ALo(17,"cxTranslate"),core._UZ(18,"cx-icon",15),core.ALo(19,"cxTranslate"),core.qZA(),core.TgZ(20,"div",16),core.YNc(21,ConfiguratorGroupMenuComponent_ng_container_0_ng_container_8_ng_container_1_ng_container_1_cx_icon_21_Template,2,5,"cx-icon",17),core.qZA()()(),core.BQk()}if(2&rf){const group_r9=ctx.$implicit,currentGroup_r7=core.oxw().ngIf,configuration_r3=core.oxw(2).ngIf,ctx_r8=core.oxw();core.xp6(1),core.Q6J("ngIf",core.lcZ(2,30,ctx_r8.displayedParentGroup$)),core.xp6(2),core.ekj("DISABLED",!group_r9.configurable)("cx-menu-conflict",ctx_r8.isConflictGroupType(group_r9.groupType))("active",ctx_r8.isGroupSelected(group_r9.id,currentGroup_r7.id))("disable",!group_r9.configurable),core.s9C("id",group_r9.id),core.s9C("ngClass",core.lcZ(5,32,ctx_r8.getGroupStatusStyles(group_r9,configuration_r3))),core.Q6J("cxFocus",core.VKq(42,_c4,group_r9.id))("tabindex",ctx_r8.getTabIndex(group_r9,currentGroup_r7.id)),core.uIk("aria-describedby",core.lcZ(6,34,ctx_r8.getAriaDescribedby(group_r9,configuration_r3)))("aria-selected",ctx_r8.isGroupSelected(group_r9.id,currentGroup_r7.id))("aria-controls",ctx_r8.isGroupSelected(group_r9.id,currentGroup_r7.id)?ctx_r8.createAriaControls(group_r9.id):null)("aria-label",ctx_r8.getAriaLabel(group_r9)),core.xp6(4),core.s9C("title",group_r9.description),core.xp6(1),core.Oqu(ctx_r8.getGroupMenuTitle(group_r9)),core.xp6(3),core.hij(" ",ctx_r8.getConflictNumber(group_r9)," "),core.xp6(2),core.s9C("id",ctx_r8.createIconId(ctx_r8.iconTypes.WARNING,group_r9.id)),core.Q6J("type",ctx_r8.iconTypes.WARNING),core.uIk("aria-label",core.lcZ(14,36,"configurator.a11y.iconConflict")),core.xp6(3),core.s9C("id",ctx_r8.createIconId(ctx_r8.iconTypes.ERROR,group_r9.id)),core.Q6J("type",ctx_r8.iconTypes.ERROR),core.uIk("aria-label",core.lcZ(17,38,"configurator.a11y.iconIncomplete")),core.xp6(2),core.s9C("id",ctx_r8.createIconId(ctx_r8.iconTypes.SUCCESS,group_r9.id)),core.Q6J("type",ctx_r8.iconTypes.SUCCESS),core.uIk("aria-label",core.lcZ(19,40,"configurator.a11y.iconComplete")),core.xp6(3),core.Q6J("ngIf",ctx_r8.hasSubGroups(group_r9))}}function ConfiguratorGroupMenuComponent_ng_container_0_ng_container_8_ng_container_1_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,ConfiguratorGroupMenuComponent_ng_container_0_ng_container_8_ng_container_1_ng_container_1_Template,22,44,"ng-container",6),core.BQk()),2&rf){const groups_r5=core.oxw().ngIf;core.xp6(1),core.Q6J("ngForOf",groups_r5)}}function ConfiguratorGroupMenuComponent_ng_container_0_ng_container_8_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,ConfiguratorGroupMenuComponent_ng_container_0_ng_container_8_ng_container_1_Template,2,1,"ng-container",5),core.ALo(2,"async"),core.BQk()),2&rf){const ctx_r4=core.oxw(2);core.xp6(1),core.Q6J("ngIf",core.lcZ(2,1,ctx_r4.currentGroup$))}}function ConfiguratorGroupMenuComponent_ng_container_0_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.TgZ(1,"div",2)(2,"span",3),core._uU(3),core.ALo(4,"cxTranslate"),core.qZA(),core.TgZ(5,"span",4),core._uU(6),core.ALo(7,"cxTranslate"),core.qZA(),core.YNc(8,ConfiguratorGroupMenuComponent_ng_container_0_ng_container_8_Template,3,3,"ng-container",5),core.ALo(9,"async"),core.qZA(),core.BQk()),2&rf){const ctx_r0=core.oxw();core.xp6(3),core.hij(" ",core.lcZ(4,3,"configurator.a11y.listOfGroups")," "),core.xp6(3),core.hij(" ",core.lcZ(7,5,"configurator.a11y.inListOfGroups")," "),core.xp6(2),core.Q6J("ngIf",core.lcZ(9,7,ctx_r0.displayedGroups$))}}function ConfiguratorGroupMenuComponent_ng_template_2_div_1_Template(rf,ctx){1&rf&&(core.TgZ(0,"div",24),core._UZ(1,"div",25),core.qZA())}__name(ConfiguratorGroupMenuComponent_ng_container_0_ng_container_8_ng_container_1_ng_container_1_ng_container_1_button_1_Template,"ConfiguratorGroupMenuComponent_ng_container_0_ng_container_8_ng_container_1_ng_container_1_ng_container_1_button_1_Template"),__name(ConfiguratorGroupMenuComponent_ng_container_0_ng_container_8_ng_container_1_ng_container_1_ng_container_1_Template,"ConfiguratorGroupMenuComponent_ng_container_0_ng_container_8_ng_container_1_ng_container_1_ng_container_1_Template"),__name(ConfiguratorGroupMenuComponent_ng_container_0_ng_container_8_ng_container_1_ng_container_1_cx_icon_21_Template,"ConfiguratorGroupMenuComponent_ng_container_0_ng_container_8_ng_container_1_ng_container_1_cx_icon_21_Template"),__name(ConfiguratorGroupMenuComponent_ng_container_0_ng_container_8_ng_container_1_ng_container_1_Template,"ConfiguratorGroupMenuComponent_ng_container_0_ng_container_8_ng_container_1_ng_container_1_Template"),__name(ConfiguratorGroupMenuComponent_ng_container_0_ng_container_8_ng_container_1_Template,"ConfiguratorGroupMenuComponent_ng_container_0_ng_container_8_ng_container_1_Template"),__name(ConfiguratorGroupMenuComponent_ng_container_0_ng_container_8_Template,"ConfiguratorGroupMenuComponent_ng_container_0_ng_container_8_Template"),__name(ConfiguratorGroupMenuComponent_ng_container_0_Template,"ConfiguratorGroupMenuComponent_ng_container_0_Template"),__name(ConfiguratorGroupMenuComponent_ng_template_2_div_1_Template,"ConfiguratorGroupMenuComponent_ng_template_2_div_1_Template");const _c13=__name(function(){return[0,1,2,3,4,5,6,7,8,9]},"_c13");function ConfiguratorGroupMenuComponent_ng_template_2_Template(rf,ctx){1&rf&&(core.TgZ(0,"div",22),core.YNc(1,ConfiguratorGroupMenuComponent_ng_template_2_div_1_Template,2,0,"div",23),core.qZA()),2&rf&&(core.xp6(1),core.Q6J("ngForOf",core.DdM(1,_c13)))}function ConfiguratorGroupTitleComponent_ng_container_0_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.TgZ(1,"div",2),core._uU(2),core.qZA(),core.BQk()),2&rf){const group_r3=ctx.ngIf,ctx_r0=core.oxw();core.xp6(2),core.hij(" ",ctx_r0.getGroupTitle(group_r3)," ")}}function ConfiguratorGroupTitleComponent_ng_template_2_Template(rf,ctx){1&rf&&core._UZ(0,"div",3)}function ConfiguratorOverviewAttributeComponent_ng_container_7_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.TgZ(1,"div",4),core._uU(2),core.qZA(),core.TgZ(3,"div",5),core._UZ(4,"cx-configurator-price",6),core.qZA(),core.BQk()),2&rf){const ctx_r0=core.oxw();core.xp6(2),core.hij(" ",ctx_r0.attributeOverview.attribute," "),core.xp6(2),core.Q6J("formula",ctx_r0.extractPriceFormulaParameters())}}function ConfiguratorOverviewAttributeComponent_ng_template_9_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",5),core._UZ(1,"cx-configurator-price",6),core.qZA(),core.TgZ(2,"div",4),core._uU(3),core.qZA()),2&rf){const ctx_r2=core.oxw();core.xp6(1),core.Q6J("formula",ctx_r2.extractPriceFormulaParameters()),core.xp6(2),core.hij(" ",ctx_r2.attributeOverview.attribute," ")}}function ConfiguratorOverviewBundleAttributeComponent_ng_container_0_span_9_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"span",12),core._uU(1),core.ALo(2,"cxTranslate"),core.qZA()),2&rf){const ctx_r2=core.oxw(2);core.xp6(1),core.AsE(" ",core.lcZ(2,2,"configurator.attribute.id"),": ",ctx_r2.attributeOverview.productCode,"")}}function ConfiguratorOverviewBundleAttributeComponent_ng_container_0_div_10_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",13)(1,"span",14),core._uU(2),core.ALo(3,"cxTranslate"),core.qZA(),core.TgZ(4,"span",15),core._uU(5),core.ALo(6,"cxNumeric"),core.qZA()()),2&rf){const ctx_r3=core.oxw(2);core.xp6(2),core.Oqu(core.lcZ(3,2,"configurator.attribute.quantity")),core.xp6(3),core.Oqu(core.lcZ(6,4,ctx_r3.attributeOverview.quantity))}}function ConfiguratorOverviewBundleAttributeComponent_ng_container_0_div_11_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",16)(1,"span",14),core._uU(2),core.ALo(3,"cxTranslate"),core.qZA(),core.TgZ(4,"span",15),core._uU(5),core.qZA()()),2&rf){const ctx_r4=core.oxw(2);core.xp6(2),core.Oqu(core.lcZ(3,2,"configurator.overviewForm.itemPrice")),core.xp6(3),core.Oqu(null==ctx_r4.attributeOverview.valuePrice?null:ctx_r4.attributeOverview.valuePrice.formattedValue)}}function ConfiguratorOverviewBundleAttributeComponent_ng_container_0_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.TgZ(1,"div",1)(2,"div",2),core._UZ(3,"cx-media",3),core.qZA(),core.TgZ(4,"span",4),core._uU(5),core.qZA(),core.TgZ(6,"div",5)(7,"div"),core._uU(8),core.qZA(),core.YNc(9,ConfiguratorOverviewBundleAttributeComponent_ng_container_0_span_9_Template,3,4,"span",6),core.YNc(10,ConfiguratorOverviewBundleAttributeComponent_ng_container_0_div_10_Template,7,6,"div",7),core.YNc(11,ConfiguratorOverviewBundleAttributeComponent_ng_container_0_div_11_Template,6,4,"div",8),core.qZA()(),core.TgZ(12,"div",9)(13,"span",10),core._uU(14),core.qZA(),core._UZ(15,"cx-configurator-price",11),core.qZA(),core.BQk()),2&rf){const product_r1=ctx.ngIf,ctx_r0=core.oxw();core.xp6(3),core.Q6J("container",ctx_r0.getProductPrimaryImage(product_r1)),core.xp6(2),core.hij(" ",ctx_r0.getAriaLabel()," "),core.xp6(3),core.hij(" ",ctx_r0.attributeOverview.value," "),core.xp6(1),core.Q6J("ngIf",null==ctx_r0.attributeOverview?null:ctx_r0.attributeOverview.productCode),core.xp6(1),core.Q6J("ngIf",ctx_r0.displayQuantity()),core.xp6(1),core.Q6J("ngIf",ctx_r0.displayPrice()),core.xp6(3),core.Oqu(ctx_r0.attributeOverview.attribute),core.xp6(1),core.Q6J("formula",ctx_r0.extractPriceFormulaParameters())}}function ConfiguratorOverviewFormComponent_ng_container_0_ng_container_1_ng_container_1_Template(rf,ctx){1&rf&&core.GkF(0)}__name(ConfiguratorGroupMenuComponent_ng_template_2_Template,"ConfiguratorGroupMenuComponent_ng_template_2_Template"),__name(ConfiguratorGroupTitleComponent_ng_container_0_Template,"ConfiguratorGroupTitleComponent_ng_container_0_Template"),__name(ConfiguratorGroupTitleComponent_ng_template_2_Template,"ConfiguratorGroupTitleComponent_ng_template_2_Template"),__name(ConfiguratorOverviewAttributeComponent_ng_container_7_Template,"ConfiguratorOverviewAttributeComponent_ng_container_7_Template"),__name(ConfiguratorOverviewAttributeComponent_ng_template_9_Template,"ConfiguratorOverviewAttributeComponent_ng_template_9_Template"),__name(ConfiguratorOverviewBundleAttributeComponent_ng_container_0_span_9_Template,"ConfiguratorOverviewBundleAttributeComponent_ng_container_0_span_9_Template"),__name(ConfiguratorOverviewBundleAttributeComponent_ng_container_0_div_10_Template,"ConfiguratorOverviewBundleAttributeComponent_ng_container_0_div_10_Template"),__name(ConfiguratorOverviewBundleAttributeComponent_ng_container_0_div_11_Template,"ConfiguratorOverviewBundleAttributeComponent_ng_container_0_div_11_Template"),__name(ConfiguratorOverviewBundleAttributeComponent_ng_container_0_Template,"ConfiguratorOverviewBundleAttributeComponent_ng_container_0_Template"),__name(ConfiguratorOverviewFormComponent_ng_container_0_ng_container_1_ng_container_1_Template,"ConfiguratorOverviewFormComponent_ng_container_0_ng_container_1_ng_container_1_Template");const _c14=__name(function(a0){return{overviewGroups:a0,level:1}},"_c14");function ConfiguratorOverviewFormComponent_ng_container_0_ng_container_1_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,ConfiguratorOverviewFormComponent_ng_container_0_ng_container_1_ng_container_1_Template,1,0,"ng-container",4),core.BQk()),2&rf){const configuration_r7=core.oxw().ngIf;core.oxw();const _r3=core.MAs(5);core.xp6(1),core.Q6J("ngTemplateOutlet",_r3)("ngTemplateOutletContext",core.VKq(2,_c14,configuration_r7.overview.groups))}}function ConfiguratorOverviewFormComponent_ng_container_0_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,ConfiguratorOverviewFormComponent_ng_container_0_ng_container_1_Template,2,4,"ng-container",0),core.BQk()),2&rf){const configuration_r7=ctx.ngIf,ctx_r0=core.oxw(),_r1=core.MAs(3);core.xp6(1),core.Q6J("ngIf",ctx_r0.hasAttributes(configuration_r7))("ngIfElse",_r1)}}function ConfiguratorOverviewFormComponent_ng_template_2_Template(rf,ctx){1&rf&&(core.TgZ(0,"div",5)(1,"h2"),core._uU(2),core.ALo(3,"cxTranslate"),core.qZA(),core.TgZ(4,"p"),core._uU(5),core.ALo(6,"cxTranslate"),core.qZA()()),2&rf&&(core.xp6(2),core.Oqu(core.lcZ(3,2,"configurator.overviewForm.noAttributeHeader")),core.xp6(3),core.Oqu(core.lcZ(6,4,"configurator.overviewForm.noAttributeText")))}function ConfiguratorOverviewFormComponent_ng_template_4_ng_container_3_ng_container_1_div_8_ng_container_2_Template(rf,ctx){if(1&rf&&(core.ynx(0),core._UZ(1,"cx-configurator-overview-attribute",17),core.BQk()),2&rf){const attributeOverview_r19=core.oxw().$implicit;core.xp6(1),core.Q6J("attributeOverview",attributeOverview_r19)}}function ConfiguratorOverviewFormComponent_ng_template_4_ng_container_3_ng_container_1_div_8_ng_container_3_Template(rf,ctx){if(1&rf&&(core.ynx(0),core._UZ(1,"cx-configurator-cpq-overview-attribute",17),core.BQk()),2&rf){const attributeOverview_r19=core.oxw().$implicit;core.xp6(1),core.Q6J("attributeOverview",attributeOverview_r19)}}function ConfiguratorOverviewFormComponent_ng_template_4_ng_container_3_ng_container_1_div_8_ng_container_4_Template(rf,ctx){if(1&rf&&(core.ynx(0),core._UZ(1,"cx-configurator-overview-attribute",17),core.BQk()),2&rf){const attributeOverview_r19=core.oxw().$implicit;core.xp6(1),core.Q6J("attributeOverview",attributeOverview_r19)}}function ConfiguratorOverviewFormComponent_ng_template_4_ng_container_3_ng_container_1_div_8_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",13),core.ynx(1,14),core.YNc(2,ConfiguratorOverviewFormComponent_ng_template_4_ng_container_3_ng_container_1_div_8_ng_container_2_Template,2,1,"ng-container",15),core.YNc(3,ConfiguratorOverviewFormComponent_ng_template_4_ng_container_3_ng_container_1_div_8_ng_container_3_Template,2,1,"ng-container",15),core.YNc(4,ConfiguratorOverviewFormComponent_ng_template_4_ng_container_3_ng_container_1_div_8_ng_container_4_Template,2,1,"ng-container",16),core.BQk(),core.qZA()),2&rf){const attributeOverview_r19=ctx.$implicit,i_r20=ctx.index,group_r16=core.oxw().$implicit,ctx_r17=core.oxw(3);core.Q6J("ngClass",ctx_r17.getStyleClasses(group_r16.attributes,i_r20)),core.xp6(1),core.Q6J("ngSwitch",null==attributeOverview_r19?null:attributeOverview_r19.type),core.xp6(1),core.Q6J("ngSwitchCase",ctx_r17.attributeOverviewType.GENERAL),core.xp6(1),core.Q6J("ngSwitchCase",ctx_r17.attributeOverviewType.BUNDLE)}}function ConfiguratorOverviewFormComponent_ng_template_4_ng_container_3_ng_container_1_ng_container_9_ng_container_1_Template(rf,ctx){1&rf&&core.GkF(0)}__name(ConfiguratorOverviewFormComponent_ng_container_0_ng_container_1_Template,"ConfiguratorOverviewFormComponent_ng_container_0_ng_container_1_Template"),__name(ConfiguratorOverviewFormComponent_ng_container_0_Template,"ConfiguratorOverviewFormComponent_ng_container_0_Template"),__name(ConfiguratorOverviewFormComponent_ng_template_2_Template,"ConfiguratorOverviewFormComponent_ng_template_2_Template"),__name(ConfiguratorOverviewFormComponent_ng_template_4_ng_container_3_ng_container_1_div_8_ng_container_2_Template,"ConfiguratorOverviewFormComponent_ng_template_4_ng_container_3_ng_container_1_div_8_ng_container_2_Template"),__name(ConfiguratorOverviewFormComponent_ng_template_4_ng_container_3_ng_container_1_div_8_ng_container_3_Template,"ConfiguratorOverviewFormComponent_ng_template_4_ng_container_3_ng_container_1_div_8_ng_container_3_Template"),__name(ConfiguratorOverviewFormComponent_ng_template_4_ng_container_3_ng_container_1_div_8_ng_container_4_Template,"ConfiguratorOverviewFormComponent_ng_template_4_ng_container_3_ng_container_1_div_8_ng_container_4_Template"),__name(ConfiguratorOverviewFormComponent_ng_template_4_ng_container_3_ng_container_1_div_8_Template,"ConfiguratorOverviewFormComponent_ng_template_4_ng_container_3_ng_container_1_div_8_Template"),__name(ConfiguratorOverviewFormComponent_ng_template_4_ng_container_3_ng_container_1_ng_container_9_ng_container_1_Template,"ConfiguratorOverviewFormComponent_ng_template_4_ng_container_3_ng_container_1_ng_container_9_ng_container_1_Template");const _c15=__name(function(a0,a1){return{overviewGroups:a0,level:a1}},"_c15");function ConfiguratorOverviewFormComponent_ng_template_4_ng_container_3_ng_container_1_ng_container_9_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,ConfiguratorOverviewFormComponent_ng_template_4_ng_container_3_ng_container_1_ng_container_9_ng_container_1_Template,1,0,"ng-container",4),core.BQk()),2&rf){const group_r16=core.oxw().$implicit,level_r12=core.oxw(2).level;core.oxw();const _r3=core.MAs(5);core.xp6(1),core.Q6J("ngTemplateOutlet",_r3)("ngTemplateOutletContext",core.WLB(2,_c15,group_r16.subGroups,level_r12+1))}}__name(ConfiguratorOverviewFormComponent_ng_template_4_ng_container_3_ng_container_1_ng_container_9_Template,"ConfiguratorOverviewFormComponent_ng_template_4_ng_container_3_ng_container_1_ng_container_9_Template");const _c16=__name(function(a0){return{group:a0}},"_c16");function ConfiguratorOverviewFormComponent_ng_template_4_ng_container_3_ng_container_1_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.TgZ(1,"div",9)(2,"span",6),core._uU(3),core.ALo(4,"cxTranslate"),core.qZA(),core.TgZ(5,"h2",10)(6,"span"),core._uU(7),core.qZA()(),core.YNc(8,ConfiguratorOverviewFormComponent_ng_template_4_ng_container_3_ng_container_1_div_8_Template,5,4,"div",11),core.qZA(),core.YNc(9,ConfiguratorOverviewFormComponent_ng_template_4_ng_container_3_ng_container_1_ng_container_9_Template,2,5,"ng-container",12),core.BQk()),2&rf){const group_r16=ctx.$implicit,level_r12=core.oxw(2).level;core.xp6(1),core.ekj("topLevel",1===level_r12)("subgroupTopLevel",1===level_r12&&(null==group_r16.subGroups?null:group_r16.subGroups.length)>0),core.xp6(2),core.hij(" ",core.xi3(4,8,"configurator.a11y.group",core.VKq(11,_c16,group_r16.groupDescription))," "),core.xp6(4),core.Oqu(group_r16.groupDescription),core.xp6(1),core.Q6J("ngForOf",group_r16.attributes),core.xp6(1),core.Q6J("ngIf",(null==group_r16.subGroups?null:group_r16.subGroups.length)>0)}}function ConfiguratorOverviewFormComponent_ng_template_4_ng_container_3_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,ConfiguratorOverviewFormComponent_ng_template_4_ng_container_3_ng_container_1_Template,10,13,"ng-container",8),core.BQk()),2&rf){const overviewGroups_r11=core.oxw().overviewGroups;core.xp6(1),core.Q6J("ngForOf",overviewGroups_r11)}}function ConfiguratorOverviewFormComponent_ng_template_4_ng_container_4_ng_container_1_div_8_ng_container_2_Template(rf,ctx){if(1&rf&&(core.ynx(0),core._UZ(1,"cx-configurator-overview-attribute",17),core.BQk()),2&rf){const attributeOverview_r37=core.oxw().$implicit;core.xp6(1),core.Q6J("attributeOverview",attributeOverview_r37)}}function ConfiguratorOverviewFormComponent_ng_template_4_ng_container_4_ng_container_1_div_8_ng_container_3_Template(rf,ctx){if(1&rf&&(core.ynx(0),core._UZ(1,"cx-configurator-cpq-overview-attribute",17),core.BQk()),2&rf){const attributeOverview_r37=core.oxw().$implicit;core.xp6(1),core.Q6J("attributeOverview",attributeOverview_r37)}}function ConfiguratorOverviewFormComponent_ng_template_4_ng_container_4_ng_container_1_div_8_ng_container_4_Template(rf,ctx){if(1&rf&&(core.ynx(0),core._UZ(1,"cx-configurator-overview-attribute",17),core.BQk()),2&rf){const attributeOverview_r37=core.oxw().$implicit;core.xp6(1),core.Q6J("attributeOverview",attributeOverview_r37)}}function ConfiguratorOverviewFormComponent_ng_template_4_ng_container_4_ng_container_1_div_8_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",13),core.ynx(1,14),core.YNc(2,ConfiguratorOverviewFormComponent_ng_template_4_ng_container_4_ng_container_1_div_8_ng_container_2_Template,2,1,"ng-container",15),core.YNc(3,ConfiguratorOverviewFormComponent_ng_template_4_ng_container_4_ng_container_1_div_8_ng_container_3_Template,2,1,"ng-container",15),core.YNc(4,ConfiguratorOverviewFormComponent_ng_template_4_ng_container_4_ng_container_1_div_8_ng_container_4_Template,2,1,"ng-container",16),core.BQk(),core.qZA()),2&rf){const attributeOverview_r37=ctx.$implicit,i_r38=ctx.index,group_r34=core.oxw().$implicit,ctx_r35=core.oxw(3);core.Q6J("ngClass",ctx_r35.getStyleClasses(group_r34.attributes,i_r38)),core.xp6(1),core.Q6J("ngSwitch",null==attributeOverview_r37?null:attributeOverview_r37.type),core.xp6(1),core.Q6J("ngSwitchCase",ctx_r35.attributeOverviewType.GENERAL),core.xp6(1),core.Q6J("ngSwitchCase",ctx_r35.attributeOverviewType.BUNDLE)}}function ConfiguratorOverviewFormComponent_ng_template_4_ng_container_4_ng_container_1_ng_container_9_ng_container_1_Template(rf,ctx){1&rf&&core.GkF(0)}function ConfiguratorOverviewFormComponent_ng_template_4_ng_container_4_ng_container_1_ng_container_9_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,ConfiguratorOverviewFormComponent_ng_template_4_ng_container_4_ng_container_1_ng_container_9_ng_container_1_Template,1,0,"ng-container",4),core.BQk()),2&rf){const group_r34=core.oxw().$implicit,level_r12=core.oxw(2).level;core.oxw();const _r3=core.MAs(5);core.xp6(1),core.Q6J("ngTemplateOutlet",_r3)("ngTemplateOutletContext",core.WLB(2,_c15,group_r34.subGroups,level_r12+1))}}function ConfiguratorOverviewFormComponent_ng_template_4_ng_container_4_ng_container_1_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.TgZ(1,"div",18)(2,"span",6),core._uU(3),core.ALo(4,"cxTranslate"),core.qZA(),core.TgZ(5,"h2",10)(6,"span"),core._uU(7),core.qZA()(),core.YNc(8,ConfiguratorOverviewFormComponent_ng_template_4_ng_container_4_ng_container_1_div_8_Template,5,4,"div",11),core.YNc(9,ConfiguratorOverviewFormComponent_ng_template_4_ng_container_4_ng_container_1_ng_container_9_Template,2,5,"ng-container",12),core.qZA(),core.BQk()),2&rf){const group_r34=ctx.$implicit,level_r12=core.oxw(2).level,ctx_r33=core.oxw();core.xp6(1),core.Q6J("ngClass",ctx_r33.getGroupLevelStyleClasses(level_r12,group_r34.subGroups)),core.xp6(2),core.hij(" ",core.xi3(4,5,"configurator.a11y.group",core.VKq(8,_c16,group_r34.groupDescription))," "),core.xp6(4),core.Oqu(group_r34.groupDescription),core.xp6(1),core.Q6J("ngForOf",group_r34.attributes),core.xp6(1),core.Q6J("ngIf",(null==group_r34.subGroups?null:group_r34.subGroups.length)>0)}}function ConfiguratorOverviewFormComponent_ng_template_4_ng_container_4_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,ConfiguratorOverviewFormComponent_ng_template_4_ng_container_4_ng_container_1_Template,10,10,"ng-container",8),core.BQk()),2&rf){const overviewGroups_r11=core.oxw().overviewGroups;core.xp6(1),core.Q6J("ngForOf",overviewGroups_r11)}}function ConfiguratorOverviewFormComponent_ng_template_4_Template(rf,ctx){1&rf&&(core.TgZ(0,"span",6),core._uU(1),core.ALo(2,"cxTranslate"),core.qZA(),core.YNc(3,ConfiguratorOverviewFormComponent_ng_template_4_ng_container_3_Template,2,1,"ng-container",7),core.YNc(4,ConfiguratorOverviewFormComponent_ng_template_4_ng_container_4_Template,2,1,"ng-container",7)),2&rf&&(core.xp6(1),core.hij(" ",core.lcZ(2,3,"configurator.a11y.listOfAttributesAndValues")," "),core.xp6(2),core.Q6J("cxFeatureLevel","!5.1"),core.xp6(1),core.Q6J("cxFeatureLevel","5.1"))}function ConfiguratorOverviewFormComponent_ng_template_6_ng_container_0_ng_container_4_Template(rf,ctx){1&rf&&(core.ynx(0),core.TgZ(1,"div",22),core._UZ(2,"div",23),core.qZA(),core.TgZ(3,"div",24),core._UZ(4,"div",25),core.qZA(),core._UZ(5,"div",26),core.BQk())}__name(ConfiguratorOverviewFormComponent_ng_template_4_ng_container_3_ng_container_1_Template,"ConfiguratorOverviewFormComponent_ng_template_4_ng_container_3_ng_container_1_Template"),__name(ConfiguratorOverviewFormComponent_ng_template_4_ng_container_3_Template,"ConfiguratorOverviewFormComponent_ng_template_4_ng_container_3_Template"),__name(ConfiguratorOverviewFormComponent_ng_template_4_ng_container_4_ng_container_1_div_8_ng_container_2_Template,"ConfiguratorOverviewFormComponent_ng_template_4_ng_container_4_ng_container_1_div_8_ng_container_2_Template"),__name(ConfiguratorOverviewFormComponent_ng_template_4_ng_container_4_ng_container_1_div_8_ng_container_3_Template,"ConfiguratorOverviewFormComponent_ng_template_4_ng_container_4_ng_container_1_div_8_ng_container_3_Template"),__name(ConfiguratorOverviewFormComponent_ng_template_4_ng_container_4_ng_container_1_div_8_ng_container_4_Template,"ConfiguratorOverviewFormComponent_ng_template_4_ng_container_4_ng_container_1_div_8_ng_container_4_Template"),__name(ConfiguratorOverviewFormComponent_ng_template_4_ng_container_4_ng_container_1_div_8_Template,"ConfiguratorOverviewFormComponent_ng_template_4_ng_container_4_ng_container_1_div_8_Template"),__name(ConfiguratorOverviewFormComponent_ng_template_4_ng_container_4_ng_container_1_ng_container_9_ng_container_1_Template,"ConfiguratorOverviewFormComponent_ng_template_4_ng_container_4_ng_container_1_ng_container_9_ng_container_1_Template"),__name(ConfiguratorOverviewFormComponent_ng_template_4_ng_container_4_ng_container_1_ng_container_9_Template,"ConfiguratorOverviewFormComponent_ng_template_4_ng_container_4_ng_container_1_ng_container_9_Template"),__name(ConfiguratorOverviewFormComponent_ng_template_4_ng_container_4_ng_container_1_Template,"ConfiguratorOverviewFormComponent_ng_template_4_ng_container_4_ng_container_1_Template"),__name(ConfiguratorOverviewFormComponent_ng_template_4_ng_container_4_Template,"ConfiguratorOverviewFormComponent_ng_template_4_ng_container_4_Template"),__name(ConfiguratorOverviewFormComponent_ng_template_4_Template,"ConfiguratorOverviewFormComponent_ng_template_4_Template"),__name(ConfiguratorOverviewFormComponent_ng_template_6_ng_container_0_ng_container_4_Template,"ConfiguratorOverviewFormComponent_ng_template_6_ng_container_0_ng_container_4_Template");const _c17=__name(function(){return[0,1,2,3,4,5]},"_c17");function ConfiguratorOverviewFormComponent_ng_template_6_ng_container_0_Template(rf,ctx){1&rf&&(core.ynx(0),core.TgZ(1,"div",19),core._UZ(2,"div",20),core.TgZ(3,"div",21),core.YNc(4,ConfiguratorOverviewFormComponent_ng_template_6_ng_container_0_ng_container_4_Template,6,0,"ng-container",8),core.qZA()(),core.BQk()),2&rf&&(core.xp6(4),core.Q6J("ngForOf",core.DdM(1,_c17)))}function ConfiguratorOverviewFormComponent_ng_template_6_Template(rf,ctx){1&rf&&core.YNc(0,ConfiguratorOverviewFormComponent_ng_template_6_ng_container_0_Template,5,2,"ng-container",8),2&rf&&core.Q6J("ngForOf",core.DdM(1,_c10))}__name(ConfiguratorOverviewFormComponent_ng_template_6_ng_container_0_Template,"ConfiguratorOverviewFormComponent_ng_template_6_ng_container_0_Template"),__name(ConfiguratorOverviewFormComponent_ng_template_6_Template,"ConfiguratorOverviewFormComponent_ng_template_6_Template");const _c18=__name(function(a0,a1){return{entityKey:a0,ownerType:a1}},"_c18"),_c19=__name(function(a0,a1){return{cxRoute:a0,params:a1}},"_c19"),_c20=__name(function(a1){return{resolveIssues:!0,skipConflicts:a1}},"_c20");function ConfiguratorOverviewNotificationBannerComponent_ng_container_0_ng_container_1_div_1_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",3),core._UZ(1,"cx-icon",4),core.TgZ(2,"div",5),core._uU(3),core.ALo(4,"cxTranslate"),core.TgZ(5,"button",6),core.ALo(6,"cxUrl"),core.ALo(7,"async"),core._uU(8),core.ALo(9,"cxTranslate"),core.qZA()()()),2&rf){const numberOfIssues_r5=ctx.ngIf,routerData_r1=core.oxw(2).ngIf,ctx_r3=core.oxw();core.xp6(1),core.Q6J("type",ctx_r3.iconTypes.ERROR),core.xp6(2),core.hij(" ",core.xi3(4,5,"configurator.notificationBanner.numberOfIssues",core.VKq(14,_c8,numberOfIssues_r5))," "),core.xp6(2),core.Q6J("routerLink",core.lcZ(6,8,core.WLB(19,_c19,"configure"+routerData_r1.owner.configuratorType,core.WLB(16,_c18,routerData_r1.owner.id,routerData_r1.owner.type))))("queryParams",core.VKq(22,_c20,core.lcZ(7,10,ctx_r3.skipConflictsOnIssueNavigation$))),core.xp6(3),core.hij(" ",core.lcZ(9,12,"configurator.header.resolveIssues")," ")}}__name(ConfiguratorOverviewNotificationBannerComponent_ng_container_0_ng_container_1_div_1_Template,"ConfiguratorOverviewNotificationBannerComponent_ng_container_0_ng_container_1_div_1_Template");const _c21=__name(function(){return{resolveIssues:!0}},"_c21");function ConfiguratorOverviewNotificationBannerComponent_ng_container_0_ng_container_1_div_3_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",7),core._UZ(1,"cx-icon",4),core.TgZ(2,"div",8),core._uU(3),core.ALo(4,"cxTranslate"),core.TgZ(5,"button",9),core.ALo(6,"cxUrl"),core._uU(7),core.ALo(8,"cxTranslate"),core.qZA()()()),2&rf){const numberOfConflicts_r7=ctx.ngIf,routerData_r1=core.oxw(2).ngIf,ctx_r4=core.oxw();core.xp6(1),core.Q6J("type",ctx_r4.iconTypes.WARNING),core.xp6(2),core.hij(" ",core.xi3(4,5,"configurator.notificationBanner.numberOfConflicts",core.VKq(12,_c8,numberOfConflicts_r7))," "),core.xp6(2),core.Q6J("routerLink",core.lcZ(6,8,core.WLB(17,_c19,"configure"+routerData_r1.owner.configuratorType,core.WLB(14,_c18,routerData_r1.owner.id,routerData_r1.owner.type))))("queryParams",core.DdM(20,_c21)),core.xp6(2),core.hij(" ",core.lcZ(8,10,"configurator.header.resolveConflicts")," ")}}function ConfiguratorOverviewNotificationBannerComponent_ng_container_0_ng_container_1_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,ConfiguratorOverviewNotificationBannerComponent_ng_container_0_ng_container_1_div_1_Template,10,24,"div",1),core.ALo(2,"async"),core.YNc(3,ConfiguratorOverviewNotificationBannerComponent_ng_container_0_ng_container_1_div_3_Template,9,21,"div",2),core.ALo(4,"async"),core.BQk()),2&rf){const ctx_r2=core.oxw(2);core.xp6(1),core.Q6J("ngIf",core.lcZ(2,2,ctx_r2.numberOfIssues$)),core.xp6(2),core.Q6J("ngIf",core.lcZ(4,4,ctx_r2.numberOfConflicts$))}}function ConfiguratorOverviewNotificationBannerComponent_ng_container_0_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,ConfiguratorOverviewNotificationBannerComponent_ng_container_0_ng_container_1_Template,5,6,"ng-container",0),core.ALo(2,"async"),core.BQk()),2&rf){const ctx_r0=core.oxw();core.xp6(1),core.Q6J("ngIf",core.lcZ(2,1,ctx_r0.configurationOverview$))}}function ConfiguratorPreviousNextButtonsComponent_ng_container_0_ng_container_1_Template(rf,ctx){if(1&rf){const _r5=core.EpF();core.ynx(0),core.TgZ(1,"button",1),core.NdJ("click",__name(function(){core.CHM(_r5);const configuration_r1=core.oxw().ngIf,ctx_r3=core.oxw();return core.KtG(ctx_r3.onPrevious(configuration_r1))},"ConfiguratorPreviousNextButtonsComponent_ng_container_0_ng_container_1_Template_button_click_1_listener")),core.ALo(2,"async"),core.ALo(3,"cxTranslate"),core._uU(4),core.ALo(5,"cxTranslate"),core.qZA(),core.TgZ(6,"button",2),core.NdJ("click",__name(function(){core.CHM(_r5);const configuration_r1=core.oxw().ngIf,ctx_r6=core.oxw();return core.KtG(ctx_r6.onNext(configuration_r1))},"ConfiguratorPreviousNextButtonsComponent_ng_container_0_ng_container_1_Template_button_click_6_listener")),core.ALo(7,"async"),core.ALo(8,"cxTranslate"),core._uU(9),core.ALo(10,"cxTranslate"),core.qZA(),core.BQk()}if(2&rf){const configuration_r1=core.oxw().ngIf,ctx_r2=core.oxw();core.xp6(1),core.Q6J("disabled",core.lcZ(2,6,ctx_r2.isFirstGroup(configuration_r1.owner))),core.uIk("aria-label",core.lcZ(3,8,"configurator.a11y.previous")),core.xp6(3),core.hij(" ",core.lcZ(5,10,"configurator.button.previous")," "),core.xp6(2),core.Q6J("disabled",core.lcZ(7,12,ctx_r2.isLastGroup(configuration_r1.owner))),core.uIk("aria-label",core.lcZ(8,14,"configurator.a11y.next")),core.xp6(3),core.hij(" ",core.lcZ(10,16,"configurator.button.next")," ")}}function ConfiguratorPreviousNextButtonsComponent_ng_container_0_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,ConfiguratorPreviousNextButtonsComponent_ng_container_0_ng_container_1_Template,11,18,"ng-container",0),core.BQk()),2&rf){const configuration_r1=ctx.ngIf;core.xp6(1),core.Q6J("ngIf",(null==configuration_r1||null==configuration_r1.groups?null:configuration_r1.groups.length)>1)}}function ConfiguratorPriceSummaryComponent_ng_container_0_ng_container_1_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),core._uU(5),core.ALo(6,"cxTranslate"),core.qZA(),core.TgZ(7,"div",5),core._uU(8),core.qZA()(),core.TgZ(9,"div",6)(10,"div",4),core._uU(11),core.ALo(12,"cxTranslate"),core.qZA(),core.TgZ(13,"div",5),core._uU(14),core.qZA()(),core.TgZ(15,"div",7)(16,"div",4),core._uU(17),core.ALo(18,"cxTranslate"),core.qZA(),core.TgZ(19,"div",5),core._uU(20),core.qZA()()()(),core.BQk()),2&rf){const configuration_r1=core.oxw().ngIf;core.xp6(5),core.hij(" ",core.lcZ(6,6,"configurator.priceSummary.basePrice"),": "),core.xp6(3),core.hij(" ",null==configuration_r1||null==configuration_r1.priceSummary||null==configuration_r1.priceSummary.basePrice?null:configuration_r1.priceSummary.basePrice.formattedValue," "),core.xp6(3),core.hij(" ",core.lcZ(12,8,"configurator.priceSummary.selectedOptions"),": "),core.xp6(3),core.hij(" ",null==configuration_r1||null==configuration_r1.priceSummary||null==configuration_r1.priceSummary.selectedOptions?null:configuration_r1.priceSummary.selectedOptions.formattedValue," "),core.xp6(3),core.hij(" ",core.lcZ(18,10,"configurator.priceSummary.totalPrice"),": "),core.xp6(3),core.hij(" ",null==configuration_r1||null==configuration_r1.priceSummary||null==configuration_r1.priceSummary.currentTotal?null:configuration_r1.priceSummary.currentTotal.formattedValue," ")}}function ConfiguratorPriceSummaryComponent_ng_container_0_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,ConfiguratorPriceSummaryComponent_ng_container_0_ng_container_1_Template,21,12,"ng-container",0),core.BQk()),2&rf){const configuration_r1=ctx.ngIf;core.xp6(1),core.Q6J("ngIf",configuration_r1.pricingEnabled)}}__name(ConfiguratorOverviewNotificationBannerComponent_ng_container_0_ng_container_1_div_3_Template,"ConfiguratorOverviewNotificationBannerComponent_ng_container_0_ng_container_1_div_3_Template"),__name(ConfiguratorOverviewNotificationBannerComponent_ng_container_0_ng_container_1_Template,"ConfiguratorOverviewNotificationBannerComponent_ng_container_0_ng_container_1_Template"),__name(ConfiguratorOverviewNotificationBannerComponent_ng_container_0_Template,"ConfiguratorOverviewNotificationBannerComponent_ng_container_0_Template"),__name(ConfiguratorPreviousNextButtonsComponent_ng_container_0_ng_container_1_Template,"ConfiguratorPreviousNextButtonsComponent_ng_container_0_ng_container_1_Template"),__name(ConfiguratorPreviousNextButtonsComponent_ng_container_0_Template,"ConfiguratorPreviousNextButtonsComponent_ng_container_0_Template"),__name(ConfiguratorPriceSummaryComponent_ng_container_0_ng_container_1_Template,"ConfiguratorPriceSummaryComponent_ng_container_0_ng_container_1_Template"),__name(ConfiguratorPriceSummaryComponent_ng_container_0_Template,"ConfiguratorPriceSummaryComponent_ng_container_0_Template");const _c22=__name(function(a0){return{product:a0}},"_c22");function ConfiguratorProductTitleComponent_ng_container_0_ng_container_6_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.TgZ(1,"div",14),core.ALo(2,"cxTranslate"),core.TgZ(3,"span",15),core._uU(4),core.ALo(5,"cxTranslate"),core.qZA()(),core._UZ(6,"cx-icon",16),core.BQk()),2&rf){const product_r3=core.oxw().ngIf,ctx_r4=core.oxw();core.xp6(1),core.uIk("aria-label",core.xi3(2,3,"configurator.a11y.showMoreProductInfo",core.VKq(8,_c22,product_r3.name))),core.xp6(3),core.Oqu(core.lcZ(5,6,"configurator.header.showMore")),core.xp6(2),core.Q6J("type",ctx_r4.iconTypes.CARET_DOWN)}}function ConfiguratorProductTitleComponent_ng_container_0_ng_container_7_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.TgZ(1,"div",14),core.ALo(2,"cxTranslate"),core._uU(3),core.ALo(4,"cxTranslate"),core.qZA(),core._UZ(5,"cx-icon",16),core.BQk()),2&rf){const product_r3=core.oxw().ngIf,ctx_r5=core.oxw();core.xp6(1),core.uIk("aria-label",core.xi3(2,3,"configurator.a11y.showLessProductInfo",core.VKq(8,_c22,product_r3.name))),core.xp6(2),core.hij(" ",core.lcZ(4,6,"configurator.header.showLess")," "),core.xp6(2),core.Q6J("type",ctx_r5.iconTypes.CARET_UP)}}function ConfiguratorProductTitleComponent_ng_container_0_span_13_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"span"),core.ALo(1,"cxTranslate"),core._uU(2),core.qZA()),2&rf){const product_r3=core.oxw().ngIf;core.uIk("aria-label",core.lcZ(1,2,"configurator.a11y.productName")),core.xp6(2),core.hij(" ",product_r3.name," ")}}function ConfiguratorProductTitleComponent_ng_container_0_span_15_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"span"),core.ALo(1,"cxTranslate"),core._uU(2),core.qZA()),2&rf){const product_r3=core.oxw().ngIf;core.uIk("aria-label",core.lcZ(1,2,"configurator.a11y.productCode")),core.xp6(2),core.hij(" ",product_r3.code," ")}}function ConfiguratorProductTitleComponent_ng_container_0_span_17_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"span"),core.ALo(1,"cxTranslate"),core._uU(2),core.qZA()),2&rf){const product_r3=core.oxw().ngIf;core.uIk("aria-label",core.lcZ(1,2,"configurator.a11y.productDescription")),core.xp6(2),core.hij(" ",product_r3.description," ")}}__name(ConfiguratorProductTitleComponent_ng_container_0_ng_container_6_Template,"ConfiguratorProductTitleComponent_ng_container_0_ng_container_6_Template"),__name(ConfiguratorProductTitleComponent_ng_container_0_ng_container_7_Template,"ConfiguratorProductTitleComponent_ng_container_0_ng_container_7_Template"),__name(ConfiguratorProductTitleComponent_ng_container_0_span_13_Template,"ConfiguratorProductTitleComponent_ng_container_0_span_13_Template"),__name(ConfiguratorProductTitleComponent_ng_container_0_span_15_Template,"ConfiguratorProductTitleComponent_ng_container_0_span_15_Template"),__name(ConfiguratorProductTitleComponent_ng_container_0_span_17_Template,"ConfiguratorProductTitleComponent_ng_container_0_span_17_Template");const _c23=__name(function(a0){return{name:a0}},"_c23");function ConfiguratorProductTitleComponent_ng_container_0_ng_container_18_ng_container_1_ng_container_1_ng_container_1_ng_container_2_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.TgZ(1,"div",18)(2,"span",19),core.ALo(3,"cxTranslate"),core._uU(4),core.ALo(5,"cxTranslate"),core.qZA(),core.TgZ(6,"span",20),core._uU(7),core.qZA()(),core.BQk()),2&rf){const configuration_r17=core.oxw(2).ngIf;core.xp6(2),core.uIk("aria-label",core.xi3(3,3,"configurator.a11y.kbKeyName",core.VKq(8,_c23,configuration_r17.kbKey.kbName))),core.xp6(2),core.hij(" ",core.lcZ(5,6,"configurator.header.kbKeyName")," "),core.xp6(3),core.hij(" ",configuration_r17.kbKey.kbName," ")}}__name(ConfiguratorProductTitleComponent_ng_container_0_ng_container_18_ng_container_1_ng_container_1_ng_container_1_ng_container_2_Template,"ConfiguratorProductTitleComponent_ng_container_0_ng_container_18_ng_container_1_ng_container_1_ng_container_1_ng_container_2_Template");const _c24=__name(function(a0){return{logsys:a0}},"_c24");function ConfiguratorProductTitleComponent_ng_container_0_ng_container_18_ng_container_1_ng_container_1_ng_container_1_ng_container_3_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.TgZ(1,"div",18)(2,"span",19),core.ALo(3,"cxTranslate"),core._uU(4),core.ALo(5,"cxTranslate"),core.qZA(),core.TgZ(6,"span",20),core._uU(7),core.qZA()(),core.BQk()),2&rf){const configuration_r17=core.oxw(2).ngIf;core.xp6(2),core.uIk("aria-label",core.xi3(3,3,"configurator.a11y.kbKeyLogsys",core.VKq(8,_c24,configuration_r17.kbKey.kbLogsys))),core.xp6(2),core.hij(" ",core.lcZ(5,6,"configurator.header.kbKeyLogsys")," "),core.xp6(3),core.hij(" ",configuration_r17.kbKey.kbLogsys," ")}}__name(ConfiguratorProductTitleComponent_ng_container_0_ng_container_18_ng_container_1_ng_container_1_ng_container_1_ng_container_3_Template,"ConfiguratorProductTitleComponent_ng_container_0_ng_container_18_ng_container_1_ng_container_1_ng_container_1_ng_container_3_Template");const _c25=__name(function(a0){return{version:a0}},"_c25");function ConfiguratorProductTitleComponent_ng_container_0_ng_container_18_ng_container_1_ng_container_1_ng_container_1_ng_container_4_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.TgZ(1,"div",18)(2,"span",19),core.ALo(3,"cxTranslate"),core._uU(4),core.ALo(5,"cxTranslate"),core.qZA(),core.TgZ(6,"span",20),core._uU(7),core.qZA()(),core.BQk()),2&rf){const configuration_r17=core.oxw(2).ngIf;core.xp6(2),core.uIk("aria-label",core.xi3(3,3,"configurator.a11y.kbKeyVersion",core.VKq(8,_c25,configuration_r17.kbKey.kbVersion))),core.xp6(2),core.hij(" ",core.lcZ(5,6,"configurator.header.kbKeyVersion")," "),core.xp6(3),core.hij(" ",configuration_r17.kbKey.kbVersion," ")}}function ConfiguratorProductTitleComponent_ng_container_0_ng_container_18_ng_container_1_ng_container_1_ng_container_1_ng_container_5_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.TgZ(1,"div",18)(2,"span",19),core.ALo(3,"cxTranslate"),core._uU(4),core.ALo(5,"cxTranslate"),core.qZA(),core.TgZ(6,"span",20),core._uU(7),core.qZA()(),core.BQk()),2&rf){const configuration_r17=core.oxw(2).ngIf;core.xp6(2),core.uIk("aria-label",core.xi3(3,3,"configurator.a11y.kbKeyBuildNr",core.VKq(8,_c9,configuration_r17.kbKey.kbBuildNumber))),core.xp6(2),core.hij(" ",core.lcZ(5,6,"configurator.header.kbKeyBuildNr")," "),core.xp6(3),core.hij(" ",configuration_r17.kbKey.kbBuildNumber," ")}}function ConfiguratorProductTitleComponent_ng_container_0_ng_container_18_ng_container_1_ng_container_1_ng_container_1_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.TgZ(1,"div",17),core.YNc(2,ConfiguratorProductTitleComponent_ng_container_0_ng_container_18_ng_container_1_ng_container_1_ng_container_1_ng_container_2_Template,8,10,"ng-container",5),core.YNc(3,ConfiguratorProductTitleComponent_ng_container_0_ng_container_18_ng_container_1_ng_container_1_ng_container_1_ng_container_3_Template,8,10,"ng-container",5),core.YNc(4,ConfiguratorProductTitleComponent_ng_container_0_ng_container_18_ng_container_1_ng_container_1_ng_container_1_ng_container_4_Template,8,10,"ng-container",5),core.YNc(5,ConfiguratorProductTitleComponent_ng_container_0_ng_container_18_ng_container_1_ng_container_1_ng_container_1_ng_container_5_Template,8,10,"ng-container",5),core.qZA(),core.BQk()),2&rf){const configuration_r17=core.oxw().ngIf;core.xp6(2),core.Q6J("ngIf",configuration_r17.kbKey.kbName),core.xp6(1),core.Q6J("ngIf",configuration_r17.kbKey.kbLogsys),core.xp6(1),core.Q6J("ngIf",configuration_r17.kbKey.kbVersion),core.xp6(1),core.Q6J("ngIf",configuration_r17.kbKey.kbBuildNumber)}}function ConfiguratorProductTitleComponent_ng_container_0_ng_container_18_ng_container_1_ng_container_1_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,ConfiguratorProductTitleComponent_ng_container_0_ng_container_18_ng_container_1_ng_container_1_ng_container_1_Template,6,4,"ng-container",5),core.BQk()),2&rf){const configuration_r17=ctx.ngIf;core.xp6(1),core.Q6J("ngIf",configuration_r17.kbKey)}}function ConfiguratorProductTitleComponent_ng_container_0_ng_container_18_ng_container_1_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,ConfiguratorProductTitleComponent_ng_container_0_ng_container_18_ng_container_1_ng_container_1_Template,2,1,"ng-container",5),core.ALo(2,"async"),core.BQk()),2&rf){const ctx_r15=core.oxw(3);core.xp6(1),core.Q6J("ngIf",core.lcZ(2,1,ctx_r15.configuration$))}}function ConfiguratorProductTitleComponent_ng_container_0_ng_container_18_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,ConfiguratorProductTitleComponent_ng_container_0_ng_container_18_ng_container_1_Template,3,3,"ng-container",5),core.ALo(2,"async"),core.BQk()),2&rf){const ctx_r9=core.oxw(2);core.xp6(1),core.Q6J("ngIf",core.lcZ(2,1,ctx_r9.expMode))}}function ConfiguratorProductTitleComponent_ng_container_0_Template(rf,ctx){if(1&rf){const _r29=core.EpF();core.ynx(0),core.TgZ(1,"div",2)(2,"div",3)(3,"span"),core._uU(4),core.qZA()(),core.TgZ(5,"button",4),core.NdJ("click",__name(function(){core.CHM(_r29);const ctx_r28=core.oxw();return core.KtG(ctx_r28.triggerDetails())},"ConfiguratorProductTitleComponent_ng_container_0_Template_button_click_5_listener")),core.YNc(6,ConfiguratorProductTitleComponent_ng_container_0_ng_container_6_Template,7,10,"ng-container",5),core.YNc(7,ConfiguratorProductTitleComponent_ng_container_0_ng_container_7_Template,6,10,"ng-container",5),core.qZA(),core.TgZ(8,"div",6)(9,"div",7),core._UZ(10,"cx-media",8),core.qZA(),core.TgZ(11,"div",9)(12,"div",10),core.YNc(13,ConfiguratorProductTitleComponent_ng_container_0_span_13_Template,3,4,"span",5),core.qZA(),core.TgZ(14,"div",11),core.YNc(15,ConfiguratorProductTitleComponent_ng_container_0_span_15_Template,3,4,"span",5),core.qZA(),core.TgZ(16,"div",12),core.YNc(17,ConfiguratorProductTitleComponent_ng_container_0_span_17_Template,3,4,"span",5),core.qZA(),core.YNc(18,ConfiguratorProductTitleComponent_ng_container_0_ng_container_18_Template,3,3,"ng-container",13),core.qZA()()(),core.BQk()}if(2&rf){const product_r3=ctx.ngIf,ctx_r0=core.oxw();core.xp6(4),core.hij(" ",product_r3.name," "),core.xp6(1),core.uIk("aria-expanded",ctx_r0.showMore),core.xp6(1),core.Q6J("ngIf",!ctx_r0.showMore),core.xp6(1),core.Q6J("ngIf",ctx_r0.showMore),core.xp6(1),core.ekj("open",ctx_r0.showMore),core.xp6(2),core.Q6J("container",null==product_r3||null==product_r3.images?null:product_r3.images.PRIMARY),core.xp6(1),core.uIk("aria-hidden",!ctx_r0.showMore),core.xp6(2),core.Q6J("ngIf",product_r3.name),core.xp6(2),core.Q6J("ngIf",product_r3.code),core.xp6(2),core.Q6J("ngIf",product_r3.description),core.xp6(1),core.Q6J("cxFeatureLevel","5.1")}}function ConfiguratorProductTitleComponent_ng_template_2_Template(rf,ctx){1&rf&&core._UZ(0,"div",21)}function ConfiguratorTabBarComponent_ng_container_0_ng_container_1_ng_container_1_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.TgZ(1,"div",3)(2,"a",4),core.ALo(3,"async"),core.ALo(4,"cxUrl"),core.ALo(5,"async"),core.ALo(6,"cxTranslate"),core.ALo(7,"cxTranslate"),core._uU(8),core.ALo(9,"cxTranslate"),core.qZA(),core.TgZ(10,"a",4),core.ALo(11,"async"),core.ALo(12,"cxUrl"),core.ALo(13,"async"),core.ALo(14,"cxTranslate"),core.ALo(15,"cxTranslate"),core._uU(16),core.ALo(17,"cxTranslate"),core.qZA()(),core.BQk()),2&rf){const routerData_r1=core.oxw(2).ngIf,ctx_r5=core.oxw();core.xp6(2),core.ekj("active",!core.lcZ(3,10,ctx_r5.isOverviewPage$)),core.Q6J("routerLink",core.lcZ(4,12,core.WLB(37,_c19,"configure"+routerData_r1.owner.configuratorType,core.WLB(34,_c18,routerData_r1.owner.id,routerData_r1.owner.type)))),core.uIk("aria-label",core.lcZ(5,14,ctx_r5.isOverviewPage$)?core.lcZ(7,18,"configurator.a11y.configurationPageLink"):core.lcZ(6,16,"configurator.a11y.configurationPage")),core.xp6(6),core.Oqu(core.lcZ(9,20,"configurator.tabBar.configuration")),core.xp6(2),core.ekj("active",core.lcZ(11,22,ctx_r5.isOverviewPage$)),core.Q6J("routerLink",core.lcZ(12,24,core.WLB(43,_c19,"configureOverview"+routerData_r1.owner.configuratorType,core.WLB(40,_c18,routerData_r1.owner.id,routerData_r1.owner.type)))),core.uIk("aria-label",core.lcZ(13,26,ctx_r5.isOverviewPage$)?core.lcZ(14,28,"configurator.a11y.overviewPage"):core.lcZ(15,30,"configurator.a11y.overviewPageLink")),core.xp6(6),core.Oqu(core.lcZ(17,32,"configurator.tabBar.overview"))}}function ConfiguratorTabBarComponent_ng_container_0_ng_container_1_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,ConfiguratorTabBarComponent_ng_container_0_ng_container_1_ng_container_1_Template,18,46,"ng-container",0),core.BQk()),2&rf){const routerData_r1=core.oxw().ngIf;core.xp6(1),core.Q6J("ngIf",!routerData_r1.displayOnly)}}function ConfiguratorTabBarComponent_ng_container_0_ng_template_3_Template(rf,ctx){1&rf&&core._UZ(0,"div",5)}function ConfiguratorTabBarComponent_ng_container_0_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,ConfiguratorTabBarComponent_ng_container_0_ng_container_1_Template,2,1,"ng-container",1),core.ALo(2,"async"),core.YNc(3,ConfiguratorTabBarComponent_ng_container_0_ng_template_3_Template,1,0,"ng-template",null,2,core.W1O),core.BQk()),2&rf){const _r3=core.MAs(4),ctx_r0=core.oxw();core.xp6(1),core.Q6J("ngIf",core.lcZ(2,2,ctx_r0.configuration$))("ngIfElse",_r3)}}function ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_1_span_4_Template(rf,ctx){1&rf&&(core.TgZ(0,"span",8),core._uU(1),core.ALo(2,"cxTranslate"),core.qZA()),2&rf&&(core.xp6(1),core.hij(" ",core.lcZ(2,1,"configurator.header.multipleWarnings"),""))}function ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_1_button_5_ng_container_3_Template(rf,ctx){1&rf&&(core.ynx(0),core._UZ(1,"cx-icon",10),core.BQk())}function ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_1_button_5_ng_container_4_Template(rf,ctx){1&rf&&(core.ynx(0),core._UZ(1,"cx-icon",11),core.BQk())}function ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_1_button_5_Template(rf,ctx){if(1&rf){const _r10=core.EpF();core.TgZ(0,"button",9),core.NdJ("click",__name(function(){core.CHM(_r10);const ctx_r9=core.oxw(3);return core.KtG(ctx_r9.toggleWarnings())},"ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_1_button_5_Template_button_click_0_listener")),core._uU(1),core.ALo(2,"cxTranslate"),core.YNc(3,ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_1_button_5_ng_container_3_Template,2,0,"ng-container",0),core.YNc(4,ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_1_button_5_ng_container_4_Template,2,0,"ng-container",0),core.qZA()}if(2&rf){const ctx_r5=core.oxw(3);core.uIk("aria-expanded",ctx_r5.showWarnings),core.xp6(1),core.hij(" ",core.lcZ(2,4,"configurator.header.reviewWarnings")," "),core.xp6(2),core.Q6J("ngIf",!ctx_r5.showWarnings),core.xp6(1),core.Q6J("ngIf",ctx_r5.showWarnings)}}function ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_1_div_7_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",12),core._uU(1),core.qZA()),2&rf){const warningMessage_r11=ctx.$implicit,configuration_r1=core.oxw(2).ngIf,ctx_r6=core.oxw();core.ekj("open",ctx_r6.showWarnings||1===(null==configuration_r1||null==configuration_r1.warningMessages?null:configuration_r1.warningMessages.length)),core.xp6(1),core.hij(" ",warningMessage_r11," ")}}function ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_1_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.TgZ(1,"div",1)(2,"span",2),core._UZ(3,"cx-icon",3),core.qZA(),core.YNc(4,ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_1_span_4_Template,3,3,"span",4),core.YNc(5,ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_1_button_5_Template,5,6,"button",5),core.TgZ(6,"div",6),core.YNc(7,ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_1_div_7_Template,2,3,"div",7),core.qZA()(),core.BQk()),2&rf){const configuration_r1=core.oxw().ngIf;core.xp6(4),core.Q6J("ngIf",(null==configuration_r1||null==configuration_r1.warningMessages?null:configuration_r1.warningMessages.length)>1),core.xp6(1),core.Q6J("ngIf",(null==configuration_r1||null==configuration_r1.warningMessages?null:configuration_r1.warningMessages.length)>1),core.xp6(1),core.ekj("inline",1===(null==configuration_r1||null==configuration_r1.warningMessages?null:configuration_r1.warningMessages.length)),core.xp6(1),core.Q6J("ngForOf",configuration_r1.warningMessages)}}function ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_2_span_4_Template(rf,ctx){1&rf&&(core.TgZ(0,"span",19),core._uU(1),core.ALo(2,"cxTranslate"),core.qZA()),2&rf&&(core.xp6(1),core.hij(" ",core.lcZ(2,1,"configurator.header.multipleErrors"),""))}function ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_2_button_5_ng_container_3_Template(rf,ctx){1&rf&&(core.ynx(0),core._UZ(1,"cx-icon",10),core.BQk())}function ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_2_button_5_ng_container_4_Template(rf,ctx){1&rf&&(core.ynx(0),core._UZ(1,"cx-icon",11),core.BQk())}function ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_2_button_5_Template(rf,ctx){if(1&rf){const _r20=core.EpF();core.TgZ(0,"button",20),core.NdJ("click",__name(function(){core.CHM(_r20);const ctx_r19=core.oxw(3);return core.KtG(ctx_r19.toggleErrors())},"ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_2_button_5_Template_button_click_0_listener")),core._uU(1),core.ALo(2,"cxTranslate"),core.YNc(3,ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_2_button_5_ng_container_3_Template,2,0,"ng-container",0),core.YNc(4,ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_2_button_5_ng_container_4_Template,2,0,"ng-container",0),core.qZA()}if(2&rf){const ctx_r15=core.oxw(3);core.uIk("aria-expanded",ctx_r15.showErrors),core.xp6(1),core.hij(" ",core.lcZ(2,4,"configurator.header.reviewErrors")," "),core.xp6(2),core.Q6J("ngIf",!ctx_r15.showErrors),core.xp6(1),core.Q6J("ngIf",ctx_r15.showErrors)}}function ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_2_div_7_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",21),core._uU(1),core.qZA()),2&rf){const errorMessage_r21=ctx.$implicit,configuration_r1=core.oxw(2).ngIf,ctx_r16=core.oxw();core.ekj("open",ctx_r16.showErrors||1===(null==configuration_r1||null==configuration_r1.errorMessages?null:configuration_r1.errorMessages.length)),core.xp6(1),core.hij(" ",errorMessage_r21," ")}}function ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_2_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.TgZ(1,"div",13)(2,"span",2),core._UZ(3,"cx-icon",14),core.qZA(),core.YNc(4,ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_2_span_4_Template,3,3,"span",15),core.YNc(5,ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_2_button_5_Template,5,6,"button",16),core.TgZ(6,"div",17),core.YNc(7,ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_2_div_7_Template,2,3,"div",18),core.qZA()(),core.BQk()),2&rf){const configuration_r1=core.oxw().ngIf;core.xp6(4),core.Q6J("ngIf",(null==configuration_r1||null==configuration_r1.errorMessages?null:configuration_r1.errorMessages.length)>1),core.xp6(1),core.Q6J("ngIf",(null==configuration_r1||null==configuration_r1.errorMessages?null:configuration_r1.errorMessages.length)>1),core.xp6(1),core.ekj("inline",1===(null==configuration_r1||null==configuration_r1.errorMessages?null:configuration_r1.errorMessages.length)),core.xp6(1),core.Q6J("ngForOf",configuration_r1.errorMessages)}}function ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_1_Template,8,5,"ng-container",0),core.YNc(2,ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_2_Template,8,5,"ng-container",0),core.BQk()),2&rf){const configuration_r1=ctx.ngIf;core.xp6(1),core.Q6J("ngIf",(null==configuration_r1||null==configuration_r1.warningMessages?null:configuration_r1.warningMessages.length)>0),core.xp6(1),core.Q6J("ngIf",(null==configuration_r1||null==configuration_r1.errorMessages?null:configuration_r1.errorMessages.length)>0)}}function ConfiguratorExitButtonComponent_ng_container_0_ng_container_2_ng_container_1_Template(rf,ctx){1&rf&&(core.ynx(0),core._uU(1),core.ALo(2,"cxTranslate"),core.BQk()),2&rf&&(core.xp6(1),core.hij(" ",core.lcZ(2,1,"configurator.button.exit")," "))}function ConfiguratorExitButtonComponent_ng_container_0_ng_container_2_ng_container_3_Template(rf,ctx){1&rf&&(core.ynx(0),core._uU(1),core.ALo(2,"cxTranslate"),core.BQk()),2&rf&&(core.xp6(1),core.hij(" ",core.lcZ(2,1,"configurator.button.exitMobile")," "))}function ConfiguratorExitButtonComponent_ng_container_0_ng_container_2_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,ConfiguratorExitButtonComponent_ng_container_0_ng_container_2_ng_container_1_Template,3,3,"ng-container",0),core.ALo(2,"async"),core.YNc(3,ConfiguratorExitButtonComponent_ng_container_0_ng_container_2_ng_container_3_Template,3,3,"ng-container",0),core.ALo(4,"async"),core.BQk()),2&rf){const ctx_r2=core.oxw(2);core.xp6(1),core.Q6J("ngIf",core.lcZ(2,2,ctx_r2.isDesktop())),core.xp6(2),core.Q6J("ngIf",core.lcZ(4,4,ctx_r2.isMobile()))}}function ConfiguratorExitButtonComponent_ng_container_0_ng_container_3_ng_container_1_Template(rf,ctx){1&rf&&(core.ynx(0),core._uU(1),core.ALo(2,"cxTranslate"),core.BQk()),2&rf&&(core.xp6(1),core.hij(" ",core.lcZ(2,1,"configurator.button.cancelConfigurationMobile")," "))}function ConfiguratorExitButtonComponent_ng_container_0_ng_container_3_ng_container_3_Template(rf,ctx){1&rf&&(core.ynx(0),core._uU(1),core.ALo(2,"cxTranslate"),core.BQk()),2&rf&&(core.xp6(1),core.hij(" ",core.lcZ(2,1,"configurator.button.cancelConfiguration")," "))}function ConfiguratorExitButtonComponent_ng_container_0_ng_container_3_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,ConfiguratorExitButtonComponent_ng_container_0_ng_container_3_ng_container_1_Template,3,3,"ng-container",0),core.ALo(2,"async"),core.YNc(3,ConfiguratorExitButtonComponent_ng_container_0_ng_container_3_ng_container_3_Template,3,3,"ng-container",0),core.ALo(4,"async"),core.BQk()),2&rf){const ctx_r3=core.oxw(2);core.xp6(1),core.Q6J("ngIf",core.lcZ(2,2,ctx_r3.isMobile())),core.xp6(2),core.Q6J("ngIf",core.lcZ(4,4,ctx_r3.isDesktop()))}}function ConfiguratorExitButtonComponent_ng_container_0_Template(rf,ctx){if(1&rf){const _r9=core.EpF();core.ynx(0),core.TgZ(1,"button",1),core.NdJ("click",__name(function(){core.CHM(_r9);const ctx_r8=core.oxw();return core.KtG(ctx_r8.exitConfiguration())},"ConfiguratorExitButtonComponent_ng_container_0_Template_button_click_1_listener")),core.YNc(2,ConfiguratorExitButtonComponent_ng_container_0_ng_container_2_Template,5,6,"ng-container",0),core.YNc(3,ConfiguratorExitButtonComponent_ng_container_0_ng_container_3_Template,5,6,"ng-container",0),core.qZA(),core.BQk()}if(2&rf){const container_r1=ctx.ngIf;core.xp6(2),core.Q6J("ngIf",!container_r1.routerData.isOwnerCartEntry),core.xp6(1),core.Q6J("ngIf",container_r1.routerData.isOwnerCartEntry)}}function ConfiguratorVariantCarouselComponent_ng_container_0_ng_template_6_Template(rf,ctx){if(1&rf&&core._UZ(0,"cx-product-carousel-item",4),2&rf){const item_r4=ctx.item;core.Q6J("item",item_r4)}}__name(ConfiguratorProductTitleComponent_ng_container_0_ng_container_18_ng_container_1_ng_container_1_ng_container_1_ng_container_4_Template,"ConfiguratorProductTitleComponent_ng_container_0_ng_container_18_ng_container_1_ng_container_1_ng_container_1_ng_container_4_Template"),__name(ConfiguratorProductTitleComponent_ng_container_0_ng_container_18_ng_container_1_ng_container_1_ng_container_1_ng_container_5_Template,"ConfiguratorProductTitleComponent_ng_container_0_ng_container_18_ng_container_1_ng_container_1_ng_container_1_ng_container_5_Template"),__name(ConfiguratorProductTitleComponent_ng_container_0_ng_container_18_ng_container_1_ng_container_1_ng_container_1_Template,"ConfiguratorProductTitleComponent_ng_container_0_ng_container_18_ng_container_1_ng_container_1_ng_container_1_Template"),__name(ConfiguratorProductTitleComponent_ng_container_0_ng_container_18_ng_container_1_ng_container_1_Template,"ConfiguratorProductTitleComponent_ng_container_0_ng_container_18_ng_container_1_ng_container_1_Template"),__name(ConfiguratorProductTitleComponent_ng_container_0_ng_container_18_ng_container_1_Template,"ConfiguratorProductTitleComponent_ng_container_0_ng_container_18_ng_container_1_Template"),__name(ConfiguratorProductTitleComponent_ng_container_0_ng_container_18_Template,"ConfiguratorProductTitleComponent_ng_container_0_ng_container_18_Template"),__name(ConfiguratorProductTitleComponent_ng_container_0_Template,"ConfiguratorProductTitleComponent_ng_container_0_Template"),__name(ConfiguratorProductTitleComponent_ng_template_2_Template,"ConfiguratorProductTitleComponent_ng_template_2_Template"),__name(ConfiguratorTabBarComponent_ng_container_0_ng_container_1_ng_container_1_Template,"ConfiguratorTabBarComponent_ng_container_0_ng_container_1_ng_container_1_Template"),__name(ConfiguratorTabBarComponent_ng_container_0_ng_container_1_Template,"ConfiguratorTabBarComponent_ng_container_0_ng_container_1_Template"),__name(ConfiguratorTabBarComponent_ng_container_0_ng_template_3_Template,"ConfiguratorTabBarComponent_ng_container_0_ng_template_3_Template"),__name(ConfiguratorTabBarComponent_ng_container_0_Template,"ConfiguratorTabBarComponent_ng_container_0_Template"),__name(ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_1_span_4_Template,"ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_1_span_4_Template"),__name(ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_1_button_5_ng_container_3_Template,"ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_1_button_5_ng_container_3_Template"),__name(ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_1_button_5_ng_container_4_Template,"ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_1_button_5_ng_container_4_Template"),__name(ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_1_button_5_Template,"ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_1_button_5_Template"),__name(ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_1_div_7_Template,"ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_1_div_7_Template"),__name(ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_1_Template,"ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_1_Template"),__name(ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_2_span_4_Template,"ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_2_span_4_Template"),__name(ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_2_button_5_ng_container_3_Template,"ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_2_button_5_ng_container_3_Template"),__name(ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_2_button_5_ng_container_4_Template,"ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_2_button_5_ng_container_4_Template"),__name(ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_2_button_5_Template,"ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_2_button_5_Template"),__name(ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_2_div_7_Template,"ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_2_div_7_Template"),__name(ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_2_Template,"ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_ng_container_2_Template"),__name(ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_Template,"ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_Template"),__name(ConfiguratorExitButtonComponent_ng_container_0_ng_container_2_ng_container_1_Template,"ConfiguratorExitButtonComponent_ng_container_0_ng_container_2_ng_container_1_Template"),__name(ConfiguratorExitButtonComponent_ng_container_0_ng_container_2_ng_container_3_Template,"ConfiguratorExitButtonComponent_ng_container_0_ng_container_2_ng_container_3_Template"),__name(ConfiguratorExitButtonComponent_ng_container_0_ng_container_2_Template,"ConfiguratorExitButtonComponent_ng_container_0_ng_container_2_Template"),__name(ConfiguratorExitButtonComponent_ng_container_0_ng_container_3_ng_container_1_Template,"ConfiguratorExitButtonComponent_ng_container_0_ng_container_3_ng_container_1_Template"),__name(ConfiguratorExitButtonComponent_ng_container_0_ng_container_3_ng_container_3_Template,"ConfiguratorExitButtonComponent_ng_container_0_ng_container_3_ng_container_3_Template"),__name(ConfiguratorExitButtonComponent_ng_container_0_ng_container_3_Template,"ConfiguratorExitButtonComponent_ng_container_0_ng_container_3_Template"),__name(ConfiguratorExitButtonComponent_ng_container_0_Template,"ConfiguratorExitButtonComponent_ng_container_0_Template"),__name(ConfiguratorVariantCarouselComponent_ng_container_0_ng_template_6_Template,"ConfiguratorVariantCarouselComponent_ng_container_0_ng_template_6_Template");const _c26=__name(function(a0){return{title:a0}},"_c26");function ConfiguratorVariantCarouselComponent_ng_container_0_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.TgZ(1,"div",1),core._UZ(2,"cx-carousel",2),core.ALo(3,"cxTranslate"),core.ALo(4,"async"),core.ALo(5,"async"),core.YNc(6,ConfiguratorVariantCarouselComponent_ng_container_0_ng_template_6_Template,1,1,"ng-template",null,3,core.W1O),core.qZA(),core.BQk()),2&rf){const items_r1=ctx.ngIf,_r2=core.MAs(7),ctx_r0=core.oxw();core.xp6(2),core.Q6J("items",items_r1)("title",core.lcZ(5,9,ctx_r0.title$))("template",_r2),core.uIk("aria-label",core.xi3(3,4,"productCarousel.carouselLabel",core.VKq(11,_c26,core.lcZ(4,7,ctx_r0.title$))))}}var Configurator;__name(ConfiguratorVariantCarouselComponent_ng_container_0_Template,"ConfiguratorVariantCarouselComponent_ng_container_0_Template"),function(Configurator2){let GroupType;var GroupType2;let UiType;var UiType2;let ImageFormatType;var ImageFormatType2;let ImageType;var ImageType2;let DataType;var DataType2;let UpdateType;var UpdateType2;let AttributeOverviewType;var AttributeOverviewType2;let ValidationType;var ValidationType2;(GroupType2=GroupType=Configurator2.GroupType||(Configurator2.GroupType={})).ATTRIBUTE_GROUP="AttributeGroup",GroupType2.SUB_ITEM_GROUP="SubItemGroup",GroupType2.CONFLICT_HEADER_GROUP="ConflictHeaderGroup",GroupType2.CONFLICT_GROUP="ConflictGroup",(UiType2=UiType=Configurator2.UiType||(Configurator2.UiType={})).NOT_IMPLEMENTED="not_implemented",UiType2.RADIOBUTTON="radioGroup",UiType2.RADIOBUTTON_ADDITIONAL_INPUT="radioGroup_add",UiType2.CHECKBOX="checkBox",UiType2.CHECKBOXLIST="checkBoxList",UiType2.DROPDOWN="dropdown",UiType2.DROPDOWN_ADDITIONAL_INPUT="dropdown_add",UiType2.LISTBOX="listbox",UiType2.LISTBOX_MULTI="listboxmulti",UiType2.READ_ONLY="readonly",UiType2.STRING="string",UiType2.NUMERIC="numeric",UiType2.AUTO_COMPLETE_CUSTOM="input_autocomplete",UiType2.MULTI_SELECTION_IMAGE="multi_selection_image",UiType2.SINGLE_SELECTION_IMAGE="single_selection_image",UiType2.CHECKBOXLIST_PRODUCT="checkBoxListProduct",UiType2.DROPDOWN_PRODUCT="dropdownProduct",UiType2.RADIOBUTTON_PRODUCT="radioGroupProduct",(ImageFormatType2=ImageFormatType=Configurator2.ImageFormatType||(Configurator2.ImageFormatType={})).VALUE_IMAGE="VALUE_IMAGE",ImageFormatType2.ATTRIBUTE_IMAGE="ATTRIBUTE_IMAGE",(ImageType2=ImageType=Configurator2.ImageType||(Configurator2.ImageType={})).PRIMARY="PRIMARY",ImageType2.GALLERY="GALLERY",(DataType2=DataType=Configurator2.DataType||(Configurator2.DataType={})).INPUT_STRING="String",DataType2.INPUT_NUMBER="Number",DataType2.USER_SELECTION_QTY_ATTRIBUTE_LEVEL="UserSelectionWithAttributeQuantity",DataType2.USER_SELECTION_QTY_VALUE_LEVEL="UserSelectionWithValueQuantity",DataType2.USER_SELECTION_NO_QTY="UserSelectionWithoutQuantity",DataType2.NOT_IMPLEMENTED="not_implemented",(UpdateType2=UpdateType=Configurator2.UpdateType||(Configurator2.UpdateType={})).ATTRIBUTE="Attribute",UpdateType2.ATTRIBUTE_QUANTITY="AttributeQuantity",UpdateType2.VALUE_QUANTITY="ValueQuantity",(AttributeOverviewType2=AttributeOverviewType=Configurator2.AttributeOverviewType||(Configurator2.AttributeOverviewType={})).GENERAL="general",AttributeOverviewType2.BUNDLE="bundle",(ValidationType2=ValidationType=Configurator2.ValidationType||(Configurator2.ValidationType={})).NONE="NONE",ValidationType2.NUMERIC="NUMERIC"}(Configurator||(Configurator={}));const CONFIGURATOR_DATA="[Configurator] Configuration Data",ADD_TO_CART="[Configurator] Add to cart",UPDATE_CART_ENTRY="[Configurator] Update cart entry",ADD_NEXT_OWNER="[Configurator] Add next owner";class ReadCartEntryConfiguration extends spartacus_core.kPG.EntityLoadAction{constructor(payload){super(CONFIGURATOR_DATA,payload.owner.key),this.payload=payload,this.type="[Configurator] Read Cart Entry Configuration"}}__name(ReadCartEntryConfiguration,"ReadCartEntryConfiguration");class ReadCartEntryConfigurationSuccess extends spartacus_core.kPG.EntitySuccessAction{constructor(payload){super(CONFIGURATOR_DATA,payload.owner.key),this.payload=payload,this.type="[Configurator] Read Cart Entry Configuration Success"}}__name(ReadCartEntryConfigurationSuccess,"ReadCartEntryConfigurationSuccess");class ReadCartEntryConfigurationFail extends spartacus_core.kPG.EntityFailAction{constructor(payload){super(CONFIGURATOR_DATA,payload.ownerKey,payload.error),this.payload=payload,this.type="[Configurator] Read Cart Entry Configuration Fail"}}__name(ReadCartEntryConfigurationFail,"ReadCartEntryConfigurationFail");class ReadOrderEntryConfiguration extends spartacus_core.kPG.EntityLoadAction{constructor(payload){super(CONFIGURATOR_DATA,payload.owner.key),this.payload=payload,this.type="[Configurator] Read Order Entry Configuration"}}__name(ReadOrderEntryConfiguration,"ReadOrderEntryConfiguration");class ReadOrderEntryConfigurationSuccess extends spartacus_core.kPG.EntitySuccessAction{constructor(payload){super(CONFIGURATOR_DATA,payload.owner.key),this.payload=payload,this.type="[Configurator] Read Order Entry Configuration Success"}}__name(ReadOrderEntryConfigurationSuccess,"ReadOrderEntryConfigurationSuccess");class ReadOrderEntryConfigurationFail extends spartacus_core.kPG.EntityFailAction{constructor(payload){super(CONFIGURATOR_DATA,payload.ownerKey,payload.error),this.payload=payload,this.type="[Configurator] Read Order Entry Configuration Fail"}}__name(ReadOrderEntryConfigurationFail,"ReadOrderEntryConfigurationFail");class AddToCart extends spartacus_core.kPG.EntityProcessesIncrementAction{constructor(payload){super(spartacus_cart_base_core.N4,payload.cartId),this.payload=payload,this.type=ADD_TO_CART}}__name(AddToCart,"AddToCart");class UpdateCartEntry extends spartacus_core.kPG.EntityProcessesIncrementAction{constructor(payload){super(spartacus_cart_base_core.N4,payload.cartId),this.payload=payload,this.type=UPDATE_CART_ENTRY}}__name(UpdateCartEntry,"UpdateCartEntry");class AddNextOwner{constructor(payload){this.payload=payload,this.type=ADD_NEXT_OWNER}}__name(AddNextOwner,"AddNextOwner");class RemoveCartBoundConfigurations{constructor(){this.type="[Configurator] Remove cart bound configurations"}}__name(RemoveCartBoundConfigurations,"RemoveCartBoundConfigurations");class SetNextOwnerCartEntry extends spartacus_core.kPG.EntitySuccessAction{constructor(payload){super(CONFIGURATOR_DATA,payload.configuration.owner.key),this.payload=payload,this.type="[Configurator] Set next owner cart entry"}}__name(SetNextOwnerCartEntry,"SetNextOwnerCartEntry");const SEARCH_VARIANTS="[Configurator] Search Variants";class SearchVariants extends spartacus_core.kPG.EntityLoadAction{constructor(payload){super(CONFIGURATOR_DATA,payload.owner.key),this.payload=payload,this.type=SEARCH_VARIANTS}}__name(SearchVariants,"SearchVariants");class SearchVariantsFail extends spartacus_core.kPG.EntityFailAction{constructor(payload){super(CONFIGURATOR_DATA,payload.ownerKey,payload.error),this.payload=payload,this.type="[Configurator]  Search Variants fail"}}__name(SearchVariantsFail,"SearchVariantsFail");class SearchVariantsSuccess extends spartacus_core.kPG.EntitySuccessAction{constructor(payload){super(CONFIGURATOR_DATA,payload.ownerKey),this.payload=payload,this.type="[Configurator] Search Variants success"}}__name(SearchVariantsSuccess,"SearchVariantsSuccess");const CHANGE_GROUP="[Configurator] Change group",UPDATE_PRICE_SUMMARY="[Configurator] Update Configuration Summary Price",UPDATE_PRICE_SUMMARY_SUCCESS="[Configurator] Update Configuration Price Summary success",SET_CURRENT_GROUP="[Configurator] Set current group to State",SET_MENU_PARENT_GROUP="[Configurator] Set current parent group for menu to State",SET_GROUPS_VISITED="[Configurator] Set groups to visited";class CreateConfiguration extends spartacus_core.kPG.EntityLoadAction{constructor(payload){super(CONFIGURATOR_DATA,payload.key),this.payload=payload,this.type="[Configurator] Create Configuration"}}__name(CreateConfiguration,"CreateConfiguration");class CreateConfigurationFail extends spartacus_core.kPG.EntityFailAction{constructor(payload){super(CONFIGURATOR_DATA,payload.ownerKey,payload.error),this.payload=payload,this.type="[Configurator] Create Configuration Fail"}}__name(CreateConfigurationFail,"CreateConfigurationFail");class CreateConfigurationSuccess extends spartacus_core.kPG.EntitySuccessAction{constructor(payload){super(CONFIGURATOR_DATA,payload.owner.key),this.payload=payload,this.type="[Configurator] Create Configuration Sucess"}}__name(CreateConfigurationSuccess,"CreateConfigurationSuccess");class ReadConfiguration extends spartacus_core.kPG.EntityLoadAction{constructor(payload){super(CONFIGURATOR_DATA,payload.configuration.owner.key),this.payload=payload,this.type="[Configurator] Read Configuration"}}__name(ReadConfiguration,"ReadConfiguration");class ReadConfigurationFail extends spartacus_core.kPG.EntityFailAction{constructor(payload){super(CONFIGURATOR_DATA,payload.ownerKey,payload.error),this.payload=payload,this.type="[Configurator] Read Configuration Fail"}}__name(ReadConfigurationFail,"ReadConfigurationFail");class ReadConfigurationSuccess extends spartacus_core.kPG.EntitySuccessAction{constructor(payload){super(CONFIGURATOR_DATA,payload.owner.key),this.payload=payload,this.type="[Configurator] Read Configuration Sucess"}}__name(ReadConfigurationSuccess,"ReadConfigurationSuccess");class UpdateConfiguration extends spartacus_core.kPG.EntityProcessesIncrementAction{constructor(payload){super(CONFIGURATOR_DATA,payload.owner.key),this.payload=payload,this.type="[Configurator] Update Configuration",this.meta.loader={load:!0}}}__name(UpdateConfiguration,"UpdateConfiguration");class UpdateConfigurationFail extends spartacus_core.kPG.EntityProcessesDecrementAction{constructor(payload){super(CONFIGURATOR_DATA,payload.configuration.owner.key),this.payload=payload,this.type="[Configurator] Update Configuration Fail",this.meta.loader={error:payload.error}}}__name(UpdateConfigurationFail,"UpdateConfigurationFail");class UpdateConfigurationSuccess extends spartacus_core.kPG.EntityProcessesDecrementAction{constructor(payload){super(CONFIGURATOR_DATA,payload.owner.key),this.payload=payload,this.type="[Configurator] Update Configuration Success"}}__name(UpdateConfigurationSuccess,"UpdateConfigurationSuccess");class UpdateConfigurationFinalizeSuccess extends spartacus_core.kPG.EntitySuccessAction{constructor(payload){super(CONFIGURATOR_DATA,payload.owner.key),this.payload=payload,this.type="[Configurator] Update Configuration finalize success"}}__name(UpdateConfigurationFinalizeSuccess,"UpdateConfigurationFinalizeSuccess");class UpdateConfigurationFinalizeFail extends spartacus_core.kPG.EntitySuccessAction{constructor(payload){super(CONFIGURATOR_DATA,payload.owner.key),this.payload=payload,this.type="[Configurator] Update Configuration finalize fail"}}__name(UpdateConfigurationFinalizeFail,"UpdateConfigurationFinalizeFail");class UpdatePriceSummary extends spartacus_core.kPG.EntityLoadAction{constructor(payload){super(CONFIGURATOR_DATA,payload.owner.key),this.payload=payload,this.type=UPDATE_PRICE_SUMMARY}}__name(UpdatePriceSummary,"UpdatePriceSummary");class UpdatePriceSummaryFail extends spartacus_core.kPG.EntityFailAction{constructor(payload){super(CONFIGURATOR_DATA,payload.ownerKey,payload.error),this.payload=payload,this.type="[Configurator] Update Configuration Price Summary fail"}}__name(UpdatePriceSummaryFail,"UpdatePriceSummaryFail");class UpdatePriceSummarySuccess extends spartacus_core.kPG.EntitySuccessAction{constructor(payload){super(CONFIGURATOR_DATA,payload.owner.key),this.payload=payload,this.type=UPDATE_PRICE_SUMMARY_SUCCESS}}__name(UpdatePriceSummarySuccess,"UpdatePriceSummarySuccess");class ChangeGroup extends spartacus_core.kPG.EntityLoadAction{constructor(payload){super(CONFIGURATOR_DATA,payload.configuration.owner.key),this.payload=payload,this.type=CHANGE_GROUP}}__name(ChangeGroup,"ChangeGroup");class ChangeGroupFinalize extends spartacus_core.kPG.EntityLoadAction{constructor(payload){super(CONFIGURATOR_DATA,payload.owner.key),this.payload=payload,this.type="[Configurator] Change group finalize"}}__name(ChangeGroupFinalize,"ChangeGroupFinalize");class RemoveConfiguration extends spartacus_core.kPG.EntityLoaderResetAction{constructor(payload){super(CONFIGURATOR_DATA,payload.ownerKey),this.payload=payload,this.type="[Configurator] Remove configuration"}}__name(RemoveConfiguration,"RemoveConfiguration");class GetConfigurationOverview extends spartacus_core.kPG.EntityLoadAction{constructor(payload){super(CONFIGURATOR_DATA,payload.owner.key),this.payload=payload,this.type="[Configurator] Get Configuration Overview"}}__name(GetConfigurationOverview,"GetConfigurationOverview");class GetConfigurationOverviewFail extends spartacus_core.kPG.EntityFailAction{constructor(payload){super(CONFIGURATOR_DATA,payload.ownerKey,payload.error),this.payload=payload,this.type="[Configurator] Get Configuration Overview fail"}}__name(GetConfigurationOverviewFail,"GetConfigurationOverviewFail");class GetConfigurationOverviewSuccess extends spartacus_core.kPG.EntitySuccessAction{constructor(payload){super(CONFIGURATOR_DATA,payload.ownerKey),this.payload=payload,this.type="[Configurator] Get Configuration Overview success"}}__name(GetConfigurationOverviewSuccess,"GetConfigurationOverviewSuccess");class SetInteractionState extends spartacus_core.kPG.EntitySuccessAction{constructor(payload){super(CONFIGURATOR_DATA,payload.entityKey,payload.interactionState),this.payload=payload,this.type="[Configurator] Set interaction state"}}__name(SetInteractionState,"SetInteractionState");class SetCurrentGroup extends spartacus_core.kPG.EntitySuccessAction{constructor(payload){super(CONFIGURATOR_DATA,payload.entityKey,payload.currentGroup),this.payload=payload,this.type=SET_CURRENT_GROUP}}__name(SetCurrentGroup,"SetCurrentGroup");class SetMenuParentGroup extends spartacus_core.kPG.EntitySuccessAction{constructor(payload){super(CONFIGURATOR_DATA,payload.entityKey,payload.menuParentGroup),this.payload=payload,this.type=SET_MENU_PARENT_GROUP}}__name(SetMenuParentGroup,"SetMenuParentGroup");class SetGroupsVisited extends spartacus_core.kPG.EntitySuccessAction{constructor(payload){super(CONFIGURATOR_DATA,payload.entityKey,payload.visitedGroups),this.payload=payload,this.type=SET_GROUPS_VISITED}}__name(SetGroupsVisited,"SetGroupsVisited");class RemoveProductBoundConfigurations{constructor(){this.type="[Configurator] Remove product bound configurations"}}__name(RemoveProductBoundConfigurations,"RemoveProductBoundConfigurations");const getConfigurationsState=(0,ngrx_store.ZF)("productConfigurator"),getConfigurationState=(0,ngrx_store.P1)(getConfigurationsState,state=>state.configurations),getConfigurationProcessLoaderStateFactory=__name(code=>(0,ngrx_store.P1)(getConfigurationState,details=>spartacus_core.kPG.entityProcessesLoaderStateSelector(details,code)),"getConfigurationProcessLoaderStateFactory"),hasPendingChanges=__name(code=>(0,ngrx_store.P1)(getConfigurationState,details=>spartacus_core.kPG.entityHasPendingProcessesSelector(details,code)),"hasPendingChanges"),getConfigurationFactory=__name(code=>(0,ngrx_store.P1)(getConfigurationProcessLoaderStateFactory(code),configurationState=>spartacus_core.kPG.loaderValueSelector(configurationState)),"getConfigurationFactory"),getCurrentGroup=__name(ownerKey=>(0,ngrx_store.P1)(getConfigurationFactory(ownerKey),configuration=>configuration?.interactionState?.currentGroup),"getCurrentGroup"),isGroupVisited=__name((ownerKey,groupId)=>(0,ngrx_store.P1)(getConfigurationFactory(ownerKey),configuration=>{const groupsVisited=configuration?.interactionState?.groupsVisited;return!!groupsVisited&&groupsVisited[groupId]}),"isGroupVisited"),areGroupsVisited=__name((ownerKey,groupIds)=>(0,ngrx_store.P1)(getConfigurationFactory(ownerKey),configuration=>0===groupIds.map(id=>{const groupsVisited=configuration?.interactionState?.groupsVisited;return!!groupsVisited&&groupsVisited[id]}).filter(visited=>!visited).length),"areGroupsVisited");class ConfiguratorUtilsService{getParentGroup(groups,group,parentGroup){return groups.includes(group)?parentGroup:groups.map(currentGroup=>currentGroup.subGroups?this.getParentGroup(currentGroup.subGroups,group,currentGroup):void 0).filter(foundGroup=>foundGroup).pop()}getGroupById(groups,groupId){const currentGroup=groups.find(group=>group.id===groupId);if(currentGroup)return currentGroup;return this.getGroupFromSubGroups(groups,groupId)||groups[0]}getOptionalGroupById(groups,groupId){return groups.find(group=>group.id===groupId)||this.getGroupFromSubGroups(groups,groupId)}getGroupByIdIfPresent(groups,groupId){return groups.find(group=>group.id===groupId)||this.getGroupFromSubGroups(groups,groupId)}getGroupFromSubGroups(groups,groupId){return groups.map(group=>group.subGroups?this.getGroupByIdIfPresent(group.subGroups,groupId):void 0).filter(foundGroup=>foundGroup).pop()}hasSubGroups(group){return!!group.subGroups&&group.subGroups.length>0}isConfigurationCreated(configuration){const configId=configuration?.configId;return void 0!==configId&&0!==configId.length&&void 0!==configuration&&(configuration.flatGroups.length>0||void 0!==configuration.overview)}createConfigurationExtract(changedAttribute,configuration,updateType){updateType||(updateType=Configurator.UpdateType.ATTRIBUTE);const newConfiguration={configId:configuration.configId,groups:[],flatGroups:[],interactionState:{},owner:configuration.owner,productCode:configuration.productCode,updateType},groupPath=[];if(!changedAttribute.groupId)throw Error("GroupId must be available at attribute level during update");this.buildGroupPath(changedAttribute.groupId,configuration.groups,groupPath);const groupPathLength=groupPath.length;if(0===groupPathLength)throw new Error("At this point we expect that group is available in the configuration: "+changedAttribute.groupId+", "+JSON.stringify(configuration.groups.map(cGroup=>cGroup.id)));let currentGroupInExtract=this.buildGroupForExtract(groupPath[groupPathLength-1]),currentLeafGroupInExtract=currentGroupInExtract;newConfiguration.groups.push(currentGroupInExtract);for(let index=groupPath.length-1;index>0;index--)currentLeafGroupInExtract=this.buildGroupForExtract(groupPath[index-1]),currentGroupInExtract.subGroups=[currentLeafGroupInExtract],currentGroupInExtract=currentLeafGroupInExtract;return currentLeafGroupInExtract.attributes=[changedAttribute],newConfiguration}buildGroupPath(groupId,groupList,groupPath){let haveFoundGroup=!1;const group=groupList.find(currentGroup=>currentGroup.id===groupId);return group?(groupPath.push(group),haveFoundGroup=!0):groupList.filter(currentGroup=>currentGroup.subGroups).forEach(currentGroup=>{currentGroup.subGroups&&this.buildGroupPath(groupId,currentGroup.subGroups,groupPath)&&(groupPath.push(currentGroup),haveFoundGroup=!0)}),haveFoundGroup}getConfigurationFromState(configurationState){const configuration=configurationState.value;if(configuration)return configuration;throw new Error("Configuration must be defined at this point")}buildGroupForExtract(group){return{groupType:group.groupType,id:group.id,subGroups:[]}}}__name(ConfiguratorUtilsService,"ConfiguratorUtilsService"),ConfiguratorUtilsService.\u0275fac=__name(function(t){return new(t||ConfiguratorUtilsService)},"ConfiguratorUtilsService_Factory"),ConfiguratorUtilsService.\u0275prov=core.Yz7({token:ConfiguratorUtilsService,factory:ConfiguratorUtilsService.\u0275fac,providedIn:"root"});class ConfiguratorCartService{constructor(store,activeCartService,commonConfigUtilsService,checkoutQueryFacade,userIdService,configuratorUtilsService){this.store=store,this.activeCartService=activeCartService,this.commonConfigUtilsService=commonConfigUtilsService,this.checkoutQueryFacade=checkoutQueryFacade,this.userIdService=userIdService,this.configuratorUtilsService=configuratorUtilsService}readConfigurationForCartEntry(owner){return this.store.pipe((0,ngrx_store.Ys)(getConfigurationProcessLoaderStateFactory(owner.key)),(0,delayWhen.j)(()=>this.activeCartService.isStable().pipe((0,filter.h)(stable=>stable))),(0,delayWhen.j)(()=>this.checkoutQueryFacade.getCheckoutDetailsState().pipe((0,map.U)(state=>state.loading),(0,filter.h)(loading=>!loading))),(0,tap.b)(configurationState=>{this.configurationNeedsReading(configurationState)&&this.activeCartService.requireLoadedCart().pipe((0,take.q)(1)).subscribe(cart=>{this.userIdService.getUserId().pipe((0,take.q)(1)).subscribe(userId=>{const readFromCartEntryParameters={userId,cartId:this.commonConfigUtilsService.getCartId(cart),cartEntryNumber:owner.id,owner};this.store.dispatch(new ReadCartEntryConfiguration(readFromCartEntryParameters))})})}),(0,filter.h)(configurationState=>void 0!==configurationState.value&&this.isConfigurationCreated(configurationState.value)),(0,map.U)(configurationState=>this.configuratorUtilsService.getConfigurationFromState(configurationState)))}readConfigurationForOrderEntry(owner){return this.store.pipe((0,ngrx_store.Ys)(getConfigurationProcessLoaderStateFactory(owner.key)),(0,tap.b)(configurationState=>{if(this.configurationNeedsReading(configurationState)){const ownerIdParts=this.commonConfigUtilsService.decomposeOwnerId(owner.id),readFromOrderEntryParameters={userId:spartacus_core.zyp,orderId:ownerIdParts.documentId,orderEntryNumber:ownerIdParts.entryNumber,owner};this.store.dispatch(new ReadOrderEntryConfiguration(readFromOrderEntryParameters))}}),(0,filter.h)(configurationState=>void 0!==configurationState.value&&this.isConfigurationCreated(configurationState.value)),(0,map.U)(configurationState=>this.configuratorUtilsService.getConfigurationFromState(configurationState)))}addToCart(productCode,configId,owner){this.activeCartService.requireLoadedCart().pipe((0,take.q)(1)).subscribe(cart=>{this.userIdService.getUserId().pipe((0,take.q)(1)).subscribe(userId=>{const addToCartParameters={userId,cartId:this.commonConfigUtilsService.getCartId(cart),productCode,quantity:1,configId,owner};this.store.dispatch(new AddToCart(addToCartParameters))})})}updateCartEntry(configuration){this.activeCartService.requireLoadedCart().pipe((0,take.q)(1)).subscribe(cart=>{this.userIdService.getUserId().pipe((0,take.q)(1)).subscribe(userId=>{const parameters={userId,cartId:this.commonConfigUtilsService.getCartId(cart),cartEntryNumber:configuration.owner.id,configuration};this.store.dispatch(new UpdateCartEntry(parameters))})})}activeCartHasIssues(){return this.activeCartService.requireLoadedCart().pipe((0,map.U)(cart=>cart?cart.entries:[]),(0,map.U)(entries=>entries?entries.filter(entry=>this.commonConfigUtilsService.getNumberOfIssues(entry)):[]),(0,map.U)(entries=>entries.length>0))}removeCartBoundConfigurations(){this.store.dispatch(new RemoveCartBoundConfigurations)}isConfigurationCreated(configuration){return 0!==configuration.configId.length}configurationNeedsReading(configurationState){const configuration=configurationState.value;return void 0===configuration||!this.isConfigurationCreated(configuration)&&!configurationState.loading&&!configurationState.error}}__name(ConfiguratorCartService,"ConfiguratorCartService"),ConfiguratorCartService.\u0275fac=__name(function(t){return new(t||ConfiguratorCartService)(core.LFG(ngrx_store.yh),core.LFG(spartacus_cart_base_root.bu),core.LFG(spartacus_product_configurator_common.NU),core.LFG(spartacus_checkout_base_root.nh),core.LFG(spartacus_core.XBV),core.LFG(ConfiguratorUtilsService))},"ConfiguratorCartService_Factory"),ConfiguratorCartService.\u0275prov=core.Yz7({token:ConfiguratorCartService,factory:ConfiguratorCartService.\u0275fac,providedIn:"root"});class ConfiguratorCommonsService{constructor(store,commonConfigUtilsService,configuratorCartService,activeCartService,configuratorUtils){this.store=store,this.commonConfigUtilsService=commonConfigUtilsService,this.configuratorCartService=configuratorCartService,this.activeCartService=activeCartService,this.configuratorUtils=configuratorUtils}hasPendingChanges(owner){return this.store.pipe((0,ngrx_store.Ys)(hasPendingChanges(owner.key)))}isConfigurationLoading(owner){return this.store.pipe((0,ngrx_store.Ys)(getConfigurationProcessLoaderStateFactory(owner.key)),(0,map.U)(configurationState=>configurationState.loading??!1))}getConfiguration(owner){return this.store.pipe((0,ngrx_store.Ys)(getConfigurationFactory(owner.key)),(0,filter.h)(configuration=>this.configuratorUtils.isConfigurationCreated(configuration)))}getOrCreateConfiguration(owner){switch(owner.type){case spartacus_product_configurator_common.$g.OwnerType.PRODUCT:return this.getOrCreateConfigurationForProduct(owner);case spartacus_product_configurator_common.$g.OwnerType.CART_ENTRY:return this.configuratorCartService.readConfigurationForCartEntry(owner);case spartacus_product_configurator_common.$g.OwnerType.ORDER_ENTRY:return this.configuratorCartService.readConfigurationForOrderEntry(owner)}}updateConfiguration(ownerKey,changedAttribute,updateType){updateType||(updateType=Configurator.UpdateType.ATTRIBUTE),this.activeCartService.getActive().pipe((0,take.q)(1),(0,switchMap.w)(cart=>this.activeCartService.isStable().pipe((0,take.q)(1),(0,tap.b)(stable=>{(0,core.X6Q)()&&cart.code&&!stable&&console.warn("Cart is busy, no configuration updates possible")}),(0,filter.h)(stable=>!cart.code||stable),(0,switchMapTo.c)(this.store.pipe((0,ngrx_store.Ys)(getConfigurationFactory(ownerKey)),(0,take.q)(1)))))).subscribe(configuration=>{this.store.dispatch(new UpdateConfiguration(this.configuratorUtils.createConfigurationExtract(changedAttribute,configuration,updateType)))})}getConfigurationWithOverview(configuration){return this.store.pipe((0,ngrx_store.Ys)(getConfigurationFactory(configuration.owner.key)),(0,filter.h)(config=>this.configuratorUtils.isConfigurationCreated(config)),(0,tap.b)(configurationState=>{this.hasConfigurationOverview(configurationState)||this.store.dispatch(new GetConfigurationOverview(configuration))}),(0,filter.h)(config=>this.hasConfigurationOverview(config)))}removeConfiguration(owner){this.store.dispatch(new RemoveConfiguration({ownerKey:owner.key}))}hasConflicts(owner){return this.getConfiguration(owner).pipe((0,map.U)(configuration=>configuration.groups[0]?.groupType===Configurator.GroupType.CONFLICT_HEADER_GROUP))}getOrCreateConfigurationForProduct(owner){return this.store.pipe((0,ngrx_store.Ys)(getConfigurationProcessLoaderStateFactory(owner.key)),(0,tap.b)(configurationState=>{(void 0===configurationState.value||!this.configuratorUtils.isConfigurationCreated(configurationState.value))&&!0!==configurationState.loading&&!0!==configurationState.error&&this.store.dispatch(new CreateConfiguration(owner))}),(0,filter.h)(configurationState=>void 0!==configurationState.value&&this.configuratorUtils.isConfigurationCreated(configurationState.value)),(0,map.U)(configurationState=>this.configuratorUtils.getConfigurationFromState(configurationState)))}hasConfigurationOverview(configuration){return void 0!==configuration.overview}removeProductBoundConfigurations(){this.store.dispatch(new RemoveProductBoundConfigurations)}}__name(ConfiguratorCommonsService,"ConfiguratorCommonsService"),ConfiguratorCommonsService.\u0275fac=__name(function(t){return new(t||ConfiguratorCommonsService)(core.LFG(ngrx_store.yh),core.LFG(spartacus_product_configurator_common.NU),core.LFG(ConfiguratorCartService),core.LFG(spartacus_cart_base_root.bu),core.LFG(ConfiguratorUtilsService))},"ConfiguratorCommonsService_Factory"),ConfiguratorCommonsService.\u0275prov=core.Yz7({token:ConfiguratorCommonsService,factory:ConfiguratorCommonsService.\u0275fac,providedIn:"root"});class ConfiguratorGroupStatusService{constructor(store,configuratorUtilsService){this.store=store,this.configuratorUtilsService=configuratorUtilsService}isGroupVisited(owner,groupId){return this.store.select(isGroupVisited(owner.key,groupId))}getFirstIncompleteGroup(configuration){return configuration.flatGroups?configuration.flatGroups.filter(group=>group.groupType!==Configurator.GroupType.CONFLICT_GROUP).find(group=>!group.complete):void 0}setGroupStatusVisited(configuration,groupId){const group=this.configuratorUtilsService.getGroupById(configuration.groups,groupId),parentGroup=this.configuratorUtilsService.getParentGroup(configuration.groups,this.configuratorUtilsService.getGroupById(configuration.groups,groupId)),visitedGroupIds=[];visitedGroupIds.push(group.id),parentGroup&&this.getParentGroupStatusVisited(configuration,group.id,parentGroup,visitedGroupIds),this.store.dispatch(new SetGroupsVisited({entityKey:configuration.owner.key,visitedGroups:visitedGroupIds}))}areGroupsVisited(owner,groupIds){return this.store.select(areGroupsVisited(owner.key,groupIds))}getParentGroupStatusVisited(configuration,groupId,parentGroup,visitedGroupIds){const subGroups=[];parentGroup.subGroups.forEach(subGroup=>{subGroup.id!==groupId&&subGroups.push(subGroup.id)}),this.areGroupsVisited(configuration.owner,subGroups).pipe((0,take.q)(1)).subscribe(isVisited=>{if(isVisited){visitedGroupIds.push(parentGroup.id);const grandParentGroup=this.configuratorUtilsService.getParentGroup(configuration.groups,this.configuratorUtilsService.getGroupById(configuration.groups,parentGroup.id));grandParentGroup&&this.getParentGroupStatusVisited(configuration,parentGroup.id,grandParentGroup,visitedGroupIds)}})}}__name(ConfiguratorGroupStatusService,"ConfiguratorGroupStatusService"),ConfiguratorGroupStatusService.\u0275fac=__name(function(t){return new(t||ConfiguratorGroupStatusService)(core.LFG(ngrx_store.yh),core.LFG(ConfiguratorUtilsService))},"ConfiguratorGroupStatusService_Factory"),ConfiguratorGroupStatusService.\u0275prov=core.Yz7({token:ConfiguratorGroupStatusService,factory:ConfiguratorGroupStatusService.\u0275fac,providedIn:"root"});class ConfiguratorGroupsService{constructor(store,configuratorCommonsService,configuratorUtilsService,configuratorGroupStatusService){this.store=store,this.configuratorCommonsService=configuratorCommonsService,this.configuratorUtilsService=configuratorUtilsService,this.configuratorGroupStatusService=configuratorGroupStatusService}getCurrentGroupId(owner){return this.configuratorCommonsService.getConfiguration(owner).pipe((0,map.U)(configuration=>configuration?.interactionState.currentGroup?configuration.interactionState.currentGroup:configuration?.groups[0]?.id))}getFirstConflictGroup(configuration){return configuration.flatGroups.find(group=>group.groupType===Configurator.GroupType.CONFLICT_GROUP)}navigateToFirstIncompleteGroup(owner){this.configuratorCommonsService.getConfiguration(owner).pipe((0,take.q)(1)).subscribe(configuration=>{const groupId=this.configuratorGroupStatusService.getFirstIncompleteGroup(configuration)?.id;groupId&&this.navigateToGroup(configuration,groupId,!0)})}navigateToConflictSolver(owner){this.configuratorCommonsService.getConfiguration(owner).pipe((0,take.q)(1)).subscribe(configuration=>{const groupId=this.getFirstConflictGroup(configuration)?.id;groupId&&this.navigateToGroup(configuration,groupId,!0)})}getMenuParentGroup(owner){return this.configuratorCommonsService.getConfiguration(owner).pipe((0,map.U)(configuration=>{const menuParentGroup=configuration.interactionState.menuParentGroup;return menuParentGroup?this.configuratorUtilsService.getOptionalGroupById(configuration.groups,menuParentGroup):void 0}))}setMenuParentGroup(owner,groupId){this.store.dispatch(new SetMenuParentGroup({entityKey:owner.key,menuParentGroup:groupId}))}getCurrentGroup(owner){return this.getCurrentGroupId(owner).pipe((0,switchMap.w)(currentGroupId=>this.configuratorCommonsService.getConfiguration(owner).pipe((0,map.U)(configuration=>this.configuratorUtilsService.getGroupById(configuration.groups,currentGroupId)))))}setGroupStatusVisited(owner,groupId){this.configuratorCommonsService.getConfiguration(owner).pipe((0,map.U)(configuration=>this.configuratorGroupStatusService.setGroupStatusVisited(configuration,groupId)),(0,take.q)(1)).subscribe()}navigateToGroup(configuration,groupId,setStatus=!0){setStatus&&this.getCurrentGroup(configuration.owner).pipe((0,take.q)(1)).subscribe(currentGroup=>{this.configuratorGroupStatusService.setGroupStatusVisited(configuration,currentGroup.id)});const parentGroup=this.configuratorUtilsService.getParentGroup(configuration.groups,this.configuratorUtilsService.getGroupById(configuration.groups,groupId));this.store.dispatch(new ChangeGroup({configuration,groupId,parentGroupId:parentGroup?parentGroup.id:void 0}))}getNextGroupId(owner){return this.getNeighboringGroupId(owner,1)}getPreviousGroupId(owner){return this.getNeighboringGroupId(owner,-1)}isGroupVisited(owner,groupId){return this.configuratorGroupStatusService.isGroupVisited(owner,groupId)}getParentGroup(groups,group){return this.configuratorUtilsService.getParentGroup(groups,group)}hasSubGroups(group){return this.configuratorUtilsService.hasSubGroups(group)}getNeighboringGroupId(owner,neighboringIndex){return this.getCurrentGroupId(owner).pipe((0,switchMap.w)(currentGroupId=>this.configuratorCommonsService.getConfiguration(owner).pipe((0,map.U)(configuration=>{let nextGroup;return configuration?.flatGroups.forEach((group,index)=>{group.id===currentGroupId&&configuration?.flatGroups&&configuration?.flatGroups[index+neighboringIndex]&&(nextGroup=configuration?.flatGroups[index+neighboringIndex].id)}),nextGroup}),(0,take.q)(1))))}isConflictGroupType(groupType){return groupType===Configurator.GroupType.CONFLICT_HEADER_GROUP||groupType===Configurator.GroupType.CONFLICT_GROUP}}__name(ConfiguratorGroupsService,"ConfiguratorGroupsService"),ConfiguratorGroupsService.\u0275fac=__name(function(t){return new(t||ConfiguratorGroupsService)(core.LFG(ngrx_store.yh),core.LFG(ConfiguratorCommonsService),core.LFG(ConfiguratorUtilsService),core.LFG(ConfiguratorGroupStatusService))},"ConfiguratorGroupsService_Factory"),ConfiguratorGroupsService.\u0275prov=core.Yz7({token:ConfiguratorGroupsService,factory:ConfiguratorGroupsService.\u0275fac,providedIn:"root"});class ConfiguratorStorefrontUtilsService{constructor(configuratorGroupsService,windowRef,keyboardFocusService){this.configuratorGroupsService=configuratorGroupsService,this.windowRef=windowRef,this.keyboardFocusService=keyboardFocusService}isCartEntryOrGroupVisited(owner,groupId){return this.configuratorGroupsService.isGroupVisited(owner,groupId).pipe((0,take.q)(1),(0,map.U)(result=>!!result||owner.type===spartacus_product_configurator_common.$g.OwnerType.CART_ENTRY))}assembleValuesForMultiSelectAttributes(controlArray,attribute){const localAssembledValues=[];for(let i=0;i<controlArray.length;i++){const value=attribute.values?attribute.values[i]:void 0;if(value){const localAttributeValue={valueCode:value.valueCode};localAttributeValue.name=value.name,localAttributeValue.quantity=value.quantity,localAttributeValue.selected=controlArray[i].value,localAssembledValues.push(localAttributeValue)}else(0,core.X6Q)()&&console.warn("ControlArray does not match values, at least one value could not been found")}return localAssembledValues}scroll(element){let topOffset=0;element instanceof HTMLElement&&(topOffset=element.offsetTop),this.windowRef.nativeWindow?.scroll(0,topOffset)}scrollToConfigurationElement(selector){if(this.windowRef.isBrowser()){const element=this.getElement(selector);element&&this.scroll(element)}}focusFirstAttribute(){if(!this.windowRef.isBrowser())return;const form=this.getElement("cx-configurator-form");if(form){const focusableElements=this.keyboardFocusService.findFocusable(form);focusableElements&&focusableElements.length>0&&focusableElements[0].focus()}}getFocusableElementById(focusableElements,id){return focusableElements.find(focusableElement=>{if(id&&(-1!==focusableElement.nodeName.toLocaleLowerCase().indexOf(id)||-1!==focusableElement.id.indexOf(id)))return focusableElement})}getFocusableConflictDescription(focusableElements){return this.getFocusableElementById(focusableElements,"cx-configurator-conflict-description")}getFocusableElementByValueUiKey(focusableElements,valueUiKey){return this.getFocusableElementById(focusableElements,valueUiKey)}getFocusableElementByAttributeId(focusableElements,attributeName){return this.getFocusableElementById(focusableElements,attributeName)}createAttributeValueUiKey(attributeId,valueId){return attributeId+"--"+valueId}focusValue(attribute){if(!this.windowRef.isBrowser())return;const form=this.getElement("cx-configurator-form");if(form){const focusableElements=this.keyboardFocusService.findFocusable(form);focusableElements.length>0&&this.focusOnElements(focusableElements,attribute)}}focusOnElements(focusableElements,attribute){let foundFocusableElement=this.getFocusableConflictDescription(focusableElements);foundFocusableElement||(foundFocusableElement=this.focusOnElementForConflicting(attribute,foundFocusableElement,focusableElements)),foundFocusableElement&&foundFocusableElement.focus()}focusOnElementForConflicting(attribute,foundFocusableElement,focusableElements){const selectedValue=attribute.values?.find(value=>value.selected);if(selectedValue){const valueUiKey=this.createAttributeValueUiKey(attribute.name,selectedValue.valueCode);foundFocusableElement=this.getFocusableElementByValueUiKey(focusableElements,valueUiKey)}return foundFocusableElement||(foundFocusableElement=this.getFocusableElementByAttributeId(focusableElements,attribute.name)),foundFocusableElement}createGroupId(groupId){if(groupId)return groupId+"-group"}setFocus(key,group){key&&this.keyboardFocusService.set(key,group)}changeStyling(querySelector,property,value){const element=this.getElement(querySelector);element&&element.style.setProperty(property,value)}getElement(querySelector){if(this.windowRef.isBrowser())return this.windowRef.document.querySelector(querySelector)}}__name(ConfiguratorStorefrontUtilsService,"ConfiguratorStorefrontUtilsService"),ConfiguratorStorefrontUtilsService.\u0275fac=__name(function(t){return new(t||ConfiguratorStorefrontUtilsService)(core.LFG(ConfiguratorGroupsService),core.LFG(spartacus_core.X9E),core.LFG(spartacus_storefront.K9x))},"ConfiguratorStorefrontUtilsService_Factory"),ConfiguratorStorefrontUtilsService.\u0275prov=core.Yz7({token:ConfiguratorStorefrontUtilsService,factory:ConfiguratorStorefrontUtilsService.\u0275fac,providedIn:"root"});class ConfiguratorAddToCartButtonComponent{constructor(routingService,configuratorCommonsService,configuratorCartService,configuratorGroupsService,configRouterExtractorService,globalMessageService,orderHistoryFacade,commonConfiguratorUtilsService,configUtils,intersectionService){this.routingService=routingService,this.configuratorCommonsService=configuratorCommonsService,this.configuratorCartService=configuratorCartService,this.configuratorGroupsService=configuratorGroupsService,this.configRouterExtractorService=configRouterExtractorService,this.globalMessageService=globalMessageService,this.orderHistoryFacade=orderHistoryFacade,this.commonConfiguratorUtilsService=commonConfiguratorUtilsService,this.configUtils=configUtils,this.intersectionService=intersectionService,this.subscription=new Subscription.w,this.container$=this.configRouterExtractorService.extractRouterData().pipe((0,switchMap.w)(routerData=>this.configuratorCommonsService.getConfiguration(routerData.owner).pipe((0,map.U)(configuration=>({routerData,configuration}))).pipe((0,switchMap.w)(cont=>this.configuratorCommonsService.hasPendingChanges(cont.configuration.owner).pipe((0,map.U)(hasPendingChanges2=>({routerData:cont.routerData,configuration:cont.configuration,hasPendingChanges:hasPendingChanges2})))))))}ngOnInit(){this.makeAddToCartButtonSticky()}navigateToCart(){this.routingService.go("cart")}navigateToOverview(configuratorType,owner){this.routingService.go({cxRoute:"configureOverview"+configuratorType,params:{ownerType:"cartEntry",entityKey:owner.id}})}displayConfirmationMessage(key){this.globalMessageService.add({key},spartacus_core.xUg.MSG_TYPE_CONFIRMATION)}performNavigation(configuratorType,owner,isAdd,isOverview,showMessage){const messageKey=isAdd?"configurator.addToCart.confirmation":"configurator.addToCart.confirmationUpdate";isOverview?this.navigateToCart():this.navigateToOverview(configuratorType,owner),showMessage&&this.displayConfirmationMessage(messageKey)}getButtonResourceKey(routerData,configuration){return routerData.isOwnerCartEntry&&configuration.isCartEntryUpdateRequired?"configurator.addToCart.buttonUpdateCart":routerData.isOwnerCartEntry&&!configuration.isCartEntryUpdateRequired?"configurator.addToCart.buttonAfterAddToCart":"configurator.addToCart.button"}onAddToCart(configuration,routerData){const pageType=routerData.pageType,configuratorType=configuration.owner.configuratorType,isOverview=pageType===spartacus_product_configurator_common.iB.PageType.OVERVIEW,isOwnerCartEntry=routerData.owner.type===spartacus_product_configurator_common.$g.OwnerType.CART_ENTRY,owner=configuration.owner,currentGroup=configuration.interactionState.currentGroup;currentGroup&&this.configuratorGroupsService.setGroupStatusVisited(configuration.owner,currentGroup),this.container$.pipe((0,filter.h)(cont=>!cont.hasPendingChanges),(0,take.q)(1)).subscribe(()=>{isOwnerCartEntry?this.onUpdateCart(configuration,configuratorType,owner,isOverview):this.onAddToCartForProduct(owner,configuration,configuratorType,isOverview)})}onAddToCartForProduct(owner,configuration,configuratorType,isOverview){this.configuratorCartService.addToCart(owner.id,configuration.configId,owner),this.configuratorCommonsService.getConfiguration(owner).pipe((0,filter.h)(configWithNextOwner=>void 0!==configWithNextOwner.nextOwner),(0,take.q)(1)).subscribe(configWithNextOwner=>{this.navigateForProductBound(configWithNextOwner,configuratorType,isOverview)})}navigateForProductBound(configWithNextOwner,configuratorType,isOverview){const nextOwner=configWithNextOwner.nextOwner??spartacus_product_configurator_common.mR.createInitialOwner();this.performNavigation(configuratorType,nextOwner,!0,isOverview,!0),isOverview||this.configuratorCommonsService.removeConfiguration(nextOwner)}onUpdateCart(configuration,configuratorType,owner,isOverview){configuration.isCartEntryUpdateRequired&&this.configuratorCartService.updateCartEntry(configuration),this.performNavigation(configuratorType,owner,!1,isOverview,configuration.isCartEntryUpdateRequired??!1),configuration.isCartEntryUpdateRequired&&!isOverview&&this.configuratorCommonsService.removeConfiguration(owner)}leaveConfigurationOverview(){this.container$.pipe((0,take.q)(1)).subscribe(container=>{container.routerData.owner.type===spartacus_product_configurator_common.$g.OwnerType.ORDER_ENTRY?this.goToOrderDetails(container.routerData.owner):this.routingService.go({cxRoute:"checkoutReviewOrder"})})}goToOrderDetails(owner){this.orderHistoryFacade.loadOrderDetails(this.commonConfiguratorUtilsService.decomposeOwnerId(owner.id).documentId),this.orderHistoryFacade.getOrderDetails().pipe((0,filter.h)(order=>void 0!==order),(0,take.q)(1)).subscribe(order=>this.routingService.go({cxRoute:"orderDetails",params:order}))}extractConfigPrices(configuration){const priceSummary=configuration.priceSummary,basePrice=priceSummary?.basePrice?.formattedValue,selectedOptions=priceSummary?.selectedOptions?.formattedValue,totalPrice=priceSummary?.currentTotal?.formattedValue,prices={basePrice,selectedOptions,totalPrice};return(!basePrice||"-"===basePrice)&&(prices.basePrice="0"),(!selectedOptions||"-"===selectedOptions)&&(prices.selectedOptions="0"),(!totalPrice||"-"===totalPrice)&&(prices.totalPrice="0"),prices}makeAddToCartButtonSticky(){const options={rootMargin:"0px 0px -100px 0px"};this.subscription.add(this.container$.pipe((0,take.q)(1),(0,delay.g)(0),(0,map.U)(()=>this.configUtils.getElement(".cx-price-summary-container")),(0,switchMap.w)(priceSummary=>priceSummary?this.intersectionService.isIntersecting(priceSummary,options):(0,of.of)(void 0)),(0,filter.h)(isIntersecting=>void 0!==isIntersecting)).subscribe(isIntersecting=>{isIntersecting?this.configUtils.changeStyling("cx-configurator-add-to-cart-button","position","sticky"):this.configUtils.changeStyling("cx-configurator-add-to-cart-button","position","fixed")}))}ngOnDestroy(){this.subscription.unsubscribe()}}__name(ConfiguratorAddToCartButtonComponent,"ConfiguratorAddToCartButtonComponent"),ConfiguratorAddToCartButtonComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorAddToCartButtonComponent)(core.Y36(spartacus_core.Znh),core.Y36(ConfiguratorCommonsService),core.Y36(ConfiguratorCartService),core.Y36(ConfiguratorGroupsService),core.Y36(spartacus_product_configurator_common.u6),core.Y36(spartacus_core.IWp),core.Y36(spartacus_order_root.Kr),core.Y36(spartacus_product_configurator_common.NU),core.Y36(ConfiguratorStorefrontUtilsService),core.Y36(spartacus_storefront.o8g))},"ConfiguratorAddToCartButtonComponent_Factory"),ConfiguratorAddToCartButtonComponent.\u0275cmp=core.Xpm({type:ConfiguratorAddToCartButtonComponent,selectors:[["cx-configurator-add-to-cart-button"]],decls:2,vars:3,consts:[[4,"ngIf"],[4,"ngIf","ngIfElse"],["displayOnly",""],[1,"cx-add-to-cart-btn-container"],[1,"cx-btn","btn","btn-block","btn-primary","cx-add-to-cart-btn",3,"click"],[1,"cx-display-only-btn-container"],[1,"cx-btn","btn","btn-block","btn-primary","cx-display-only-btn",3,"click"]],template:__name(function(rf,ctx){1&rf&&(core.YNc(0,ConfiguratorAddToCartButtonComponent_ng_container_0_Template,4,2,"ng-container",0),core.ALo(1,"async")),2&rf&&core.Q6J("ngIf",core.lcZ(1,1,ctx.container$))},"ConfiguratorAddToCartButtonComponent_Template"),dependencies:[common.O5,common.Ov,spartacus_core.X$D],encapsulation:2,changeDetection:0});class ConfiguratorAddToCartButtonModule{}__name(ConfiguratorAddToCartButtonModule,"ConfiguratorAddToCartButtonModule"),ConfiguratorAddToCartButtonModule.\u0275fac=__name(function(t){return new(t||ConfiguratorAddToCartButtonModule)},"ConfiguratorAddToCartButtonModule_Factory"),ConfiguratorAddToCartButtonModule.\u0275mod=core.oAB({type:ConfiguratorAddToCartButtonModule}),ConfiguratorAddToCartButtonModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)({cmsComponents:{ConfiguratorAddToCartButton:{component:ConfiguratorAddToCartButtonComponent}}})],imports:[common.ez,spartacus_core.LUR]});class ConfiguratorAttributeBaseComponent{createValueUiKey(prefix,attributeId,valueId){return this.createAttributeUiKey(prefix,attributeId)+ConfiguratorAttributeBaseComponent.SEPERATOR+valueId}createAttributeValueIdForConfigurator(currentAttribute,value){return this.createValueUiKey(this.getUiType(currentAttribute),currentAttribute.name,value)}getUiType(attribute){return attribute.uiType?attribute.uiType:Configurator.UiType.NOT_IMPLEMENTED}createAttributeUiKey(prefix,attributeId){return ConfiguratorAttributeBaseComponent.PREFIX+ConfiguratorAttributeBaseComponent.SEPERATOR+prefix+ConfiguratorAttributeBaseComponent.SEPERATOR+attributeId}createAttributeIdForConfigurator(currentAttribute){return this.createAttributeUiKey(this.getUiType(currentAttribute),currentAttribute.name)}createAriaLabelledBy(prefix,attributeId,valueId,hasQuantity){let attributeUiKey=this.createAttributeUiKey(ConfiguratorAttributeBaseComponent.PREFIX_LABEL,attributeId);return valueId&&(attributeUiKey+=" "+this.createAttributeUiKey(prefix,attributeId)+ConfiguratorAttributeBaseComponent.SEPERATOR+valueId+" ",attributeUiKey+="boolean"!=typeof hasQuantity||hasQuantity?this.createAttributeUiKey(ConfiguratorAttributeBaseComponent.PREFIX_OPTION_PRICE_VALUE,attributeId)+ConfiguratorAttributeBaseComponent.SEPERATOR+valueId:this.createAttributeUiKey(ConfiguratorAttributeBaseComponent.PREFIX_DDLB_OPTION_PRICE_VALUE,attributeId)+ConfiguratorAttributeBaseComponent.SEPERATOR+valueId),attributeUiKey}createFocusId(attributeId,valueCode){return`${attributeId}--${valueCode}--focus`}getLabel(expMode,label,techName){let title=label||"";return expMode&&techName&&(title+=" / ["+techName+"]"),title}getAttributeCode(attribute){const code=attribute.attrCode;if(code)return code;throw new Error("No attribute code for: "+attribute.name)}isWithAdditionalValues(attribute){const uiType=attribute.uiType;return uiType===Configurator.UiType.RADIOBUTTON_ADDITIONAL_INPUT||uiType===Configurator.UiType.DROPDOWN_ADDITIONAL_INPUT}}__name(ConfiguratorAttributeBaseComponent,"ConfiguratorAttributeBaseComponent"),ConfiguratorAttributeBaseComponent.SEPERATOR="--",ConfiguratorAttributeBaseComponent.PREFIX="cx-configurator",ConfiguratorAttributeBaseComponent.PREFIX_LABEL="label",ConfiguratorAttributeBaseComponent.PREFIX_OPTION_PRICE_VALUE="price--optionsPriceValue",ConfiguratorAttributeBaseComponent.PREFIX_DDLB_OPTION_PRICE_VALUE="option--price";class ConfiguratorAttributeFooterComponent extends ConfiguratorAttributeBaseComponent{constructor(configUtils){super(),this.configUtils=configUtils,this.iconType=spartacus_storefront.e1G}ngOnInit(){this.showRequiredMessageForUserInput$=this.configUtils.isCartEntryOrGroupVisited(this.owner,this.groupId).pipe((0,map.U)(result=>!!result&&this.needsUserInputMessage()))}isUserInputEmpty(input){return void 0!==input&&(!input.trim()||0===input.length)}needsUserInputMessage(){const uiType=this.attribute.uiType;return(this.attribute.required&&this.attribute.incomplete&&(uiType===Configurator.UiType.STRING||uiType===Configurator.UiType.NUMERIC)&&this.isUserInputEmpty(this.attribute.userInput))??!1}}__name(ConfiguratorAttributeFooterComponent,"ConfiguratorAttributeFooterComponent"),ConfiguratorAttributeFooterComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorAttributeFooterComponent)(core.Y36(ConfiguratorStorefrontUtilsService))},"ConfiguratorAttributeFooterComponent_Factory"),ConfiguratorAttributeFooterComponent.\u0275cmp=core.Xpm({type:ConfiguratorAttributeFooterComponent,selectors:[["cx-configurator-attribute-footer"]],inputs:{attribute:"attribute",owner:"owner",groupId:"groupId"},features:[core.qOj],decls:2,vars:3,consts:[["class","cx-required-error-msg","aria-live","assertive","aria-atomic","true","role","alert",3,"id",4,"ngIf"],["aria-live","assertive","aria-atomic","true","role","alert",1,"cx-required-error-msg",3,"id"],[3,"type"]],template:__name(function(rf,ctx){1&rf&&(core.YNc(0,ConfiguratorAttributeFooterComponent_div_0_Template,5,8,"div",0),core.ALo(1,"async")),2&rf&&core.Q6J("ngIf",core.lcZ(1,1,ctx.showRequiredMessageForUserInput$))},"ConfiguratorAttributeFooterComponent_Template"),dependencies:[common.O5,spartacus_storefront.oJW,common.Ov,spartacus_core.X$D],encapsulation:2,changeDetection:0});class ConfiguratorAttributeFooterModule{}__name(ConfiguratorAttributeFooterModule,"ConfiguratorAttributeFooterModule"),ConfiguratorAttributeFooterModule.\u0275fac=__name(function(t){return new(t||ConfiguratorAttributeFooterModule)},"ConfiguratorAttributeFooterModule_Factory"),ConfiguratorAttributeFooterModule.\u0275mod=core.oAB({type:ConfiguratorAttributeFooterModule}),ConfiguratorAttributeFooterModule.\u0275inj=core.cJS({imports:[fesm2020_forms.u5,fesm2020_forms.UX,common.ez,spartacus_core.LUR,spartacus_storefront.QX1]});class ConfiguratorCoreConfig{}__name(ConfiguratorCoreConfig,"ConfiguratorCoreConfig"),ConfiguratorCoreConfig.\u0275fac=__name(function(t){return new(t||ConfiguratorCoreConfig)},"ConfiguratorCoreConfig_Factory"),ConfiguratorCoreConfig.\u0275prov=core.Yz7({token:ConfiguratorCoreConfig,factory:__name(function(t){let r=null;return r=t?new(t||ConfiguratorCoreConfig):core.LFG(spartacus_core.DeH),r},"ConfiguratorCoreConfig_Factory"),providedIn:"root"});__name(class RulebasedConfiguratorAdapter{},"RulebasedConfiguratorAdapter");class RulebasedConfiguratorConnector{constructor(adapters,configUtilsService){this.adapters=adapters,this.configUtilsService=configUtilsService}createConfiguration(owner){return this.getAdapter(owner.configuratorType).createConfiguration(owner)}readConfiguration(configId,groupId,configurationOwner){return this.getAdapter(configurationOwner.configuratorType).readConfiguration(configId,groupId,configurationOwner)}updateConfiguration(configuration){return this.getAdapter(configuration.owner.configuratorType).updateConfiguration(configuration)}addToCart(parameters){return this.getAdapter(parameters.owner.configuratorType).addToCart(parameters)}readConfigurationForCartEntry(parameters){return this.getAdapter(parameters.owner.configuratorType).readConfigurationForCartEntry(parameters)}updateConfigurationForCartEntry(parameters){return this.getAdapter(parameters.configuration.owner.configuratorType).updateConfigurationForCartEntry(parameters)}readConfigurationForOrderEntry(parameters){return this.getAdapter(parameters.owner.configuratorType).readConfigurationForOrderEntry(parameters)}readPriceSummary(configuration){return this.getAdapter(configuration.owner.configuratorType).readPriceSummary(configuration)}getConfigurationOverview(configuration){return this.getAdapter(configuration.owner.configuratorType).getConfigurationOverview(configuration.configId)}searchVariants(configuration){return this.getAdapter(configuration.owner.configuratorType).searchVariants(configuration.configId)}getAdapter(configuratorType){const adapterResult=this.adapters.find(adapter=>adapter.getConfiguratorType()===configuratorType);if(adapterResult)return adapterResult;throw new Error("No adapter found for configurator type: "+configuratorType)}}__name(RulebasedConfiguratorConnector,"RulebasedConfiguratorConnector"),RulebasedConfiguratorConnector.CONFIGURATOR_ADAPTER_LIST=new core.OlP("ConfiguratorAdapterList"),RulebasedConfiguratorConnector.\u0275fac=__name(function(t){return new(t||RulebasedConfiguratorConnector)(core.LFG(RulebasedConfiguratorConnector.CONFIGURATOR_ADAPTER_LIST),core.LFG(spartacus_product_configurator_common.NU))},"RulebasedConfiguratorConnector_Factory"),RulebasedConfiguratorConnector.\u0275prov=core.Yz7({token:RulebasedConfiguratorConnector,factory:RulebasedConfiguratorConnector.\u0275fac});class ConfiguratorRouterListener{constructor(configuratorCartService,routingService){this.configuratorCartService=configuratorCartService,this.routingService=routingService,this.subscription=new Subscription.w,this.observeRouterChanges()}observeRouterChanges(){this.subscription.add(this.routingService.getRouterState().subscribe(routerState=>{this.isConfiguratorRelatedRoute(routerState.state.semanticRoute)||this.configuratorCartService.removeCartBoundConfigurations()}))}isConfiguratorRelatedRoute(semanticRoute){return!!semanticRoute&&semanticRoute.includes("configure")}ngOnDestroy(){this.subscription.unsubscribe()}}__name(ConfiguratorRouterListener,"ConfiguratorRouterListener"),ConfiguratorRouterListener.\u0275fac=__name(function(t){return new(t||ConfiguratorRouterListener)(core.LFG(ConfiguratorCartService),core.LFG(spartacus_core.Znh))},"ConfiguratorRouterListener_Factory"),ConfiguratorRouterListener.\u0275prov=core.Yz7({token:ConfiguratorRouterListener,factory:ConfiguratorRouterListener.\u0275fac,providedIn:"root"});class ConfiguratorRouterModule{constructor(_configuratorRouterListener){}}__name(ConfiguratorRouterModule,"ConfiguratorRouterModule"),ConfiguratorRouterModule.\u0275fac=__name(function(t){return new(t||ConfiguratorRouterModule)(core.LFG(ConfiguratorRouterListener))},"ConfiguratorRouterModule_Factory"),ConfiguratorRouterModule.\u0275mod=core.oAB({type:ConfiguratorRouterModule}),ConfiguratorRouterModule.\u0275inj=core.cJS({});class ConfiguratorBasicEffectService{getFirstGroupWithAttributes(configuration){const id=this.getFirstGroupWithAttributesForList(configuration.groups);if(id)return id;throw new Error("Configuration does not have any attributes")}getFirstGroupWithAttributesForList(groups){const groupWithAttributes=groups.filter(currentGroup=>currentGroup.attributes&&currentGroup.attributes.length>0).shift();let id;return id=groupWithAttributes?groupWithAttributes.id:groups.filter(currentGroup=>currentGroup.subGroups&&currentGroup.subGroups.length>0).flatMap(currentGroup=>this.getFirstGroupWithAttributesForList(currentGroup.subGroups)).filter(groupId=>groupId).shift(),id}}__name(ConfiguratorBasicEffectService,"ConfiguratorBasicEffectService"),ConfiguratorBasicEffectService.\u0275fac=__name(function(t){return new(t||ConfiguratorBasicEffectService)},"ConfiguratorBasicEffectService_Factory"),ConfiguratorBasicEffectService.\u0275prov=core.Yz7({token:ConfiguratorBasicEffectService,factory:ConfiguratorBasicEffectService.\u0275fac,providedIn:"root"});class ConfiguratorBasicEffects{constructor(actions$,configuratorCommonsConnector,commonConfigUtilsService,configuratorGroupUtilsService,configuratorGroupStatusService,store,configuratorBasicEffectService){this.actions$=actions$,this.configuratorCommonsConnector=configuratorCommonsConnector,this.commonConfigUtilsService=commonConfigUtilsService,this.configuratorGroupUtilsService=configuratorGroupUtilsService,this.configuratorGroupStatusService=configuratorGroupStatusService,this.store=store,this.configuratorBasicEffectService=configuratorBasicEffectService,this.createConfiguration$=(0,ngrx_effects.GW)(()=>this.actions$.pipe((0,ngrx_effects.l4)("[Configurator] Create Configuration"),(0,mergeMap.zg)(action=>this.configuratorCommonsConnector.createConfiguration(action.payload).pipe((0,switchMap.w)(configuration=>{const currentGroup=this.configuratorBasicEffectService.getFirstGroupWithAttributes(configuration);return this.store.dispatch(new UpdatePriceSummary({...configuration,interactionState:{currentGroup}})),[new CreateConfigurationSuccess(configuration),new SearchVariants(configuration)]}),(0,catchError.K)(error=>[new CreateConfigurationFail({ownerKey:action.payload.key,error:(0,spartacus_core.cxH)(error)})]))))),this.readConfiguration$=(0,ngrx_effects.GW)(()=>this.actions$.pipe((0,ngrx_effects.l4)("[Configurator] Read Configuration"),(0,mergeMap.zg)(action=>this.configuratorCommonsConnector.readConfiguration(action.payload.configuration.configId,action.payload.groupId,action.payload.configuration.owner).pipe((0,switchMap.w)(configuration=>[new ReadConfigurationSuccess(configuration)]),(0,catchError.K)(error=>[new ReadConfigurationFail({ownerKey:action.payload.configuration.owner.key,error:(0,spartacus_core.cxH)(error)})]))))),this.updateConfiguration$=(0,ngrx_effects.GW)(()=>this.actions$.pipe((0,ngrx_effects.l4)("[Configurator] Update Configuration"),(0,map.U)(action=>action.payload),(0,mergeMap.zg)(payload=>this.configuratorCommonsConnector.updateConfiguration(payload).pipe((0,map.U)(configuration=>new UpdateConfigurationSuccess(configuration)),(0,catchError.K)(error=>{const errorPayload=(0,spartacus_core.cxH)(error);return[new UpdateConfigurationFail({configuration:payload,error:errorPayload})]}))))),this.updatePriceSummary$=(0,ngrx_effects.GW)(()=>this.actions$.pipe((0,ngrx_effects.l4)(UPDATE_PRICE_SUMMARY),(0,map.U)(action=>action.payload),(0,filter.h)(configuration=>!0===configuration.pricingEnabled),(0,mergeMap.zg)(payload=>this.configuratorCommonsConnector.readPriceSummary(payload).pipe((0,map.U)(configuration=>new UpdatePriceSummarySuccess(configuration)),(0,catchError.K)(error=>{const errorPayload=(0,spartacus_core.cxH)(error);return[new UpdatePriceSummaryFail({ownerKey:payload.owner.key,error:errorPayload})]}))))),this.getOverview$=(0,ngrx_effects.GW)(()=>this.actions$.pipe((0,ngrx_effects.l4)("[Configurator] Get Configuration Overview"),(0,map.U)(action=>action.payload),(0,mergeMap.zg)(payload=>this.configuratorCommonsConnector.getConfigurationOverview(payload).pipe((0,map.U)(overview=>new GetConfigurationOverviewSuccess({ownerKey:payload.owner.key,overview})),(0,catchError.K)(error=>{const errorPayload=(0,spartacus_core.cxH)(error);return[new GetConfigurationOverviewFail({ownerKey:payload.owner.key,error:errorPayload})]}))))),this.updateConfigurationSuccess$=(0,ngrx_effects.GW)(()=>this.actions$.pipe((0,ngrx_effects.l4)("[Configurator] Update Configuration Success"),(0,map.U)(action=>action.payload),(0,mergeMap.zg)(payload=>this.store.pipe((0,ngrx_store.Ys)(hasPendingChanges(payload.owner.key)),(0,take.q)(1),(0,filter.h)(hasPendingChanges2=>!1===hasPendingChanges2),(0,switchMapTo.c)(this.store.pipe((0,ngrx_store.Ys)(getCurrentGroup(payload.owner.key)),(0,take.q)(1),(0,map.U)(currentGroupId=>{const groupIdFromPayload=this.configuratorBasicEffectService.getFirstGroupWithAttributes(payload);return{currentGroupId,groupIdFromPayload,parentGroupFromPayload:this.configuratorGroupUtilsService.getParentGroup(payload.groups,this.configuratorGroupUtilsService.getGroupById(payload.groups,groupIdFromPayload),void 0)}}),(0,switchMap.w)(container=>{const updateFinalizeSuccessAction=new UpdateConfigurationFinalizeSuccess(payload),updatePriceSummaryAction=new UpdatePriceSummary({...payload,interactionState:{currentGroup:container.groupIdFromPayload}}),searchVariantsAction=new SearchVariants(payload);return container.currentGroupId===container.groupIdFromPayload?[updateFinalizeSuccessAction,updatePriceSummaryAction,searchVariantsAction]:[updateFinalizeSuccessAction,updatePriceSummaryAction,searchVariantsAction,new ChangeGroup({configuration:payload,groupId:container.groupIdFromPayload,parentGroupId:container.parentGroupFromPayload?.id})]}))))))),this.updateConfigurationFail$=(0,ngrx_effects.GW)(()=>this.actions$.pipe((0,ngrx_effects.l4)("[Configurator] Update Configuration Fail"),(0,map.U)(action=>action.payload),(0,mergeMap.zg)(payload=>this.store.pipe((0,ngrx_store.Ys)(hasPendingChanges(payload.configuration.owner.key)),(0,take.q)(1),(0,filter.h)(hasPendingChanges2=>!1===hasPendingChanges2),(0,map.U)(()=>new UpdateConfigurationFinalizeFail(payload.configuration)))))),this.handleErrorOnUpdate$=(0,ngrx_effects.GW)(()=>this.actions$.pipe((0,ngrx_effects.l4)("[Configurator] Update Configuration finalize fail"),(0,map.U)(action=>action.payload),(0,map.U)(payload=>new ReadConfiguration({configuration:payload,groupId:this.configuratorBasicEffectService.getFirstGroupWithAttributes(payload)})))),this.groupChange$=(0,ngrx_effects.GW)(()=>this.actions$.pipe((0,ngrx_effects.l4)(CHANGE_GROUP),(0,switchMap.w)(action=>this.store.pipe((0,ngrx_store.Ys)(hasPendingChanges(action.payload.configuration.owner.key)),(0,take.q)(1),(0,filter.h)(hasPendingChanges2=>!1===hasPendingChanges2),(0,switchMap.w)(()=>this.configuratorCommonsConnector.readConfiguration(action.payload.configuration.configId,action.payload.groupId,action.payload.configuration.owner).pipe((0,switchMap.w)(configuration=>[new SetCurrentGroup({entityKey:action.payload.configuration.owner.key,currentGroup:action.payload.groupId}),new SetMenuParentGroup({entityKey:action.payload.configuration.owner.key,menuParentGroup:action.payload.parentGroupId}),new ReadConfigurationSuccess(configuration),new UpdatePriceSummary({...configuration,interactionState:{currentGroup:action.payload.groupId}})]),(0,catchError.K)(error=>[new ReadConfigurationFail({ownerKey:action.payload.configuration.owner.key,error:(0,spartacus_core.cxH)(error)})]))))))),this.removeProductBoundConfigurations$=(0,ngrx_effects.GW)(()=>this.actions$.pipe((0,ngrx_effects.l4)("[Configurator] Remove product bound configurations"),(0,switchMap.w)(()=>this.store.pipe((0,ngrx_store.Ys)(getConfigurationsState),(0,take.q)(1),(0,map.U)(configuratorState=>{const entities=configuratorState.configurations.entities,ownerKeysToRemove=[];for(const ownerKey in entities)ownerKey.includes(spartacus_product_configurator_common.$g.OwnerType.PRODUCT)&&ownerKeysToRemove.push(ownerKey);return new RemoveConfiguration({ownerKey:ownerKeysToRemove})})))))}}__name(ConfiguratorBasicEffects,"ConfiguratorBasicEffects"),ConfiguratorBasicEffects.\u0275fac=__name(function(t){return new(t||ConfiguratorBasicEffects)(core.LFG(ngrx_effects.eX),core.LFG(RulebasedConfiguratorConnector),core.LFG(spartacus_product_configurator_common.NU),core.LFG(ConfiguratorUtilsService),core.LFG(ConfiguratorGroupStatusService),core.LFG(ngrx_store.yh),core.LFG(ConfiguratorBasicEffectService))},"ConfiguratorBasicEffects_Factory"),ConfiguratorBasicEffects.\u0275prov=core.Yz7({token:ConfiguratorBasicEffects,factory:ConfiguratorBasicEffects.\u0275fac});class ConfiguratorCartEffects{constructor(actions$,configuratorCommonsConnector,commonConfigUtilsService,configuratorGroupUtilsService,store,configuratorBasicEffectService){this.actions$=actions$,this.configuratorCommonsConnector=configuratorCommonsConnector,this.commonConfigUtilsService=commonConfigUtilsService,this.configuratorGroupUtilsService=configuratorGroupUtilsService,this.store=store,this.configuratorBasicEffectService=configuratorBasicEffectService,this.addToCart$=(0,ngrx_effects.GW)(()=>this.actions$.pipe((0,ngrx_effects.l4)(ADD_TO_CART),(0,map.U)(action=>action.payload),(0,switchMap.w)(payload=>this.configuratorCommonsConnector.addToCart(payload).pipe((0,switchMap.w)(entry=>{const entryNumber=entry.entry?.entryNumber;if(void 0===entryNumber)throw Error("Entry number is required in addToCart response");return[new AddNextOwner({ownerKey:payload.owner.key,cartEntryNo:entryNumber.toString()}),new spartacus_cart_base_core.$.CartAddEntrySuccess({...entry,userId:payload.userId,cartId:payload.cartId,productCode:payload.productCode,quantity:payload.quantity,deliveryModeChanged:entry.deliveryModeChanged,entry:entry.entry,quantityAdded:entry.quantityAdded,statusCode:entry.statusCode,statusMessage:entry.statusMessage})]}),(0,catchError.K)(error=>(0,of.of)(new spartacus_cart_base_core.$.CartAddEntryFail({userId:payload.userId,cartId:payload.cartId,productCode:payload.productCode,quantity:payload.quantity,error:error instanceof http.UA?(0,spartacus_core.cxH)(error):error}))))))),this.updateCartEntry$=(0,ngrx_effects.GW)(()=>this.actions$.pipe((0,ngrx_effects.l4)(UPDATE_CART_ENTRY),(0,map.U)(action=>action.payload),(0,switchMap.w)(payload=>this.configuratorCommonsConnector.updateConfigurationForCartEntry(payload).pipe((0,switchMap.w)(cartModification=>[new spartacus_cart_base_core.$.CartUpdateEntrySuccess({userId:payload.userId,cartId:payload.cartId,entryNumber:payload.cartEntryNumber,quantity:cartModification.quantity})]),(0,catchError.K)(error=>(0,of.of)(new spartacus_cart_base_core.$.CartUpdateEntryFail({userId:payload.userId,cartId:payload.cartId,entryNumber:payload.cartEntryNumber,error:(0,spartacus_core.cxH)(error)}))))))),this.readConfigurationForCartEntry$=(0,ngrx_effects.GW)(()=>this.actions$.pipe((0,ngrx_effects.l4)("[Configurator] Read Cart Entry Configuration"),(0,switchMap.w)(action=>{const parameters=action.payload;return this.configuratorCommonsConnector.readConfigurationForCartEntry(parameters).pipe((0,switchMap.w)(result=>{const updatePriceSummaryAction=this.configuratorBasicEffectService?new UpdatePriceSummary({...result,interactionState:{currentGroup:this.configuratorBasicEffectService.getFirstGroupWithAttributes(result)}}):new UpdatePriceSummary(result);return[new ReadCartEntryConfigurationSuccess(result),updatePriceSummaryAction,new SearchVariants(result)]}),(0,catchError.K)(error=>[new ReadCartEntryConfigurationFail({ownerKey:action.payload.owner.key,error:(0,spartacus_core.cxH)(error)})]))}))),this.readConfigurationForOrderEntry$=(0,ngrx_effects.GW)(()=>this.actions$.pipe((0,ngrx_effects.l4)("[Configurator] Read Order Entry Configuration"),(0,switchMap.w)(action=>{const parameters=action.payload;return this.configuratorCommonsConnector.readConfigurationForOrderEntry(parameters).pipe((0,switchMap.w)(result=>[new ReadOrderEntryConfigurationSuccess(result)]),(0,catchError.K)(error=>[new ReadOrderEntryConfigurationFail({ownerKey:action.payload.owner.key,error:(0,spartacus_core.cxH)(error)})]))}))),this.removeCartBoundConfigurations$=(0,ngrx_effects.GW)(()=>this.actions$.pipe((0,ngrx_effects.l4)("[Configurator] Remove cart bound configurations"),(0,switchMap.w)(()=>this.store.pipe((0,ngrx_store.Ys)(getConfigurationsState),(0,take.q)(1),(0,map.U)(configuratorState=>{const entities=configuratorState.configurations.entities,ownerKeysToRemove=[],ownerKeysProductBound=[];for(const ownerKey in entities)ownerKey.includes(spartacus_product_configurator_common.$g.OwnerType.CART_ENTRY)?ownerKeysToRemove.push(ownerKey):ownerKey.includes(spartacus_product_configurator_common.$g.OwnerType.PRODUCT)&&ownerKeysProductBound.push(ownerKey);return ownerKeysProductBound.forEach(ownerKey=>{void 0!==entities[ownerKey].value?.nextOwner&&ownerKeysToRemove.push(ownerKey)}),new RemoveConfiguration({ownerKey:ownerKeysToRemove})}))))),this.addOwner$=(0,ngrx_effects.GW)(()=>this.actions$.pipe((0,ngrx_effects.l4)(ADD_NEXT_OWNER),(0,switchMap.w)(action=>this.store.pipe((0,ngrx_store.Ys)(getConfigurationFactory(action.payload.ownerKey)),(0,take.q)(1),(0,switchMap.w)(configuration=>{const newOwner=spartacus_product_configurator_common.mR.createOwner(spartacus_product_configurator_common.$g.OwnerType.CART_ENTRY,action.payload.cartEntryNo);return this.commonConfigUtilsService.setOwnerKey(newOwner),[new SetNextOwnerCartEntry({configuration,cartEntryNo:action.payload.cartEntryNo}),new SetInteractionState({entityKey:newOwner.key,interactionState:configuration.interactionState})]})))))}}__name(ConfiguratorCartEffects,"ConfiguratorCartEffects"),ConfiguratorCartEffects.\u0275fac=__name(function(t){return new(t||ConfiguratorCartEffects)(core.LFG(ngrx_effects.eX),core.LFG(RulebasedConfiguratorConnector),core.LFG(spartacus_product_configurator_common.NU),core.LFG(ConfiguratorUtilsService),core.LFG(ngrx_store.yh),core.LFG(ConfiguratorBasicEffectService,8))},"ConfiguratorCartEffects_Factory"),ConfiguratorCartEffects.\u0275prov=core.Yz7({token:ConfiguratorCartEffects,factory:ConfiguratorCartEffects.\u0275fac});class ConfiguratorVariantEffects{constructor(actions$,configuratorCommonsConnector,configuratorCoreConfig){this.actions$=actions$,this.configuratorCommonsConnector=configuratorCommonsConnector,this.configuratorCoreConfig=configuratorCoreConfig,this.searchVariants$=(0,ngrx_effects.GW)(()=>this.actions$.pipe((0,ngrx_effects.l4)(SEARCH_VARIANTS),(0,filter.h)(()=>!0===this.configuratorCoreConfig.productConfigurator?.enableVariantSearch),(0,filter.h)(action=>"CPQCONFIGURATOR"===action.payload.owner.configuratorType),(0,switchMap.w)(action=>this.configuratorCommonsConnector.searchVariants(action.payload).pipe((0,switchMap.w)(result=>[new SearchVariantsSuccess({ownerKey:action.payload.owner.key,variants:result})]),(0,catchError.K)(error=>[new SearchVariantsFail({ownerKey:action.payload.owner.key,error:(0,spartacus_core.cxH)(error)})])))))}}__name(ConfiguratorVariantEffects,"ConfiguratorVariantEffects"),ConfiguratorVariantEffects.\u0275fac=__name(function(t){return new(t||ConfiguratorVariantEffects)(core.LFG(ngrx_effects.eX),core.LFG(RulebasedConfiguratorConnector),core.LFG(ConfiguratorCoreConfig))},"ConfiguratorVariantEffects_Factory"),ConfiguratorVariantEffects.\u0275prov=core.Yz7({token:ConfiguratorVariantEffects,factory:ConfiguratorVariantEffects.\u0275fac});const ConfiguratorEffects=[ConfiguratorBasicEffects,ConfiguratorCartEffects,ConfiguratorVariantEffects];class ConfiguratorStateUtils{static mergeGroupsWithSupplements(groups,attributeSupplements){const mergedGroups=[];return groups.forEach(group=>mergedGroups.push(this.mergeGroupWithSupplements(group,attributeSupplements))),mergedGroups}static mergeGroupWithSupplements(group,attributeSupplements){return this.isTargetGroup(group,attributeSupplements)?this.mergeTargetGroupWithSupplements(group,attributeSupplements):{...group,subGroups:this.mergeGroupsWithSupplements(group.subGroups,attributeSupplements)}}static mergeTargetGroupWithSupplements(group,attributeSupplements){let mergedAttributes=group.attributes;return attributeSupplements.forEach(attributeSupplement=>{const attributeName=ConfiguratorStateUtils.getAttributeName(attributeSupplement.attributeUiKey);mergedAttributes=this.updateArrayElement(mergedAttributes,attribute=>attribute.name===attributeName,attribute=>({...attribute,values:this.mergeValuesWithSupplement(attribute.values,attributeSupplement)}))}),{...group,attributes:mergedAttributes}}static mergeValuesWithSupplement(attributeValues,attributeSupplement){let mergedValues=attributeValues;return attributeSupplement.valueSupplements.forEach(valueSupplement=>{mergedValues=this.updateArrayElement(mergedValues,value=>value.valueCode===valueSupplement.attributeValueKey,value=>({...value,valuePrice:valueSupplement.priceValue}))}),mergedValues}static isTargetGroup(group,attributeSupplements){const firstSupplement=attributeSupplements[0];if(firstSupplement){const attributeName=ConfiguratorStateUtils.getAttributeName(firstSupplement.attributeUiKey),attributeUiKey=ConfiguratorStateUtils.getKey(firstSupplement.attributeUiKey,attributeName);return group.id.indexOf(attributeUiKey)>=0}throw new Error("We expect at least one attribute supplement")}static updateArrayElement(array,predicate,projection){if(array){const index=array.findIndex(predicate);if(-1===index)return array;const newValue=projection(array[index],index),newArray=[...array];return newArray[index]=newValue,newArray}}static getAttributeName(attributeUiKey){const lastIndexOf=attributeUiKey.lastIndexOf("@");return attributeUiKey.slice(lastIndexOf+1)}static getKey(key,name){return key.replace("@"+name,"")}}__name(ConfiguratorStateUtils,"ConfiguratorStateUtils");const initialState={configId:"",productCode:"",groups:[],flatGroups:[],interactionState:{currentGroup:void 0,groupsVisited:{},menuParentGroup:void 0},owner:spartacus_product_configurator_common.mR.createInitialOwner()};function configuratorReducer(state=initialState,action){switch(action.type){case"[Configurator] Update Configuration finalize success":{const result=takeOverChanges(action,state);return result.isCartEntryUpdateRequired=!0,result.overview=void 0,result}case UPDATE_CART_ENTRY:{const result={...state};return result.isCartEntryUpdateRequired=!1,result}case"[Configurator] Create Configuration Sucess":case"[Configurator] Read Configuration Sucess":case"[Configurator] Read Cart Entry Configuration Success":return setInitialCurrentGroup(takeOverChanges(action,state));case UPDATE_PRICE_SUMMARY_SUCCESS:return setInitialCurrentGroup(takeOverPricingChanges(action,state));case"[Configurator] Get Configuration Overview success":{const content={...action.payload.overview};return{...state,overview:content,priceSummary:content.priceSummary,interactionState:{...state.interactionState,issueNavigationDone:!1}}}case"[Configurator] Search Variants success":return{...state,variants:action.payload.variants};case"[Configurator] Read Order Entry Configuration Success":{const configuration={...action.payload};return{...state,...configuration,priceSummary:configuration.overview?.priceSummary}}case"[Configurator] Set next owner cart entry":{const content={...action.payload.configuration};return content.nextOwner=spartacus_product_configurator_common.mR.createOwner(spartacus_product_configurator_common.$g.OwnerType.CART_ENTRY,action.payload.cartEntryNo),{...state,...content}}case"[Configurator] Set interaction state":{const newInteractionState=action.payload.interactionState;return{...state,interactionState:newInteractionState}}case SET_CURRENT_GROUP:{const newCurrentGroup=action.payload.currentGroup;return{...state,interactionState:{...state.interactionState,currentGroup:newCurrentGroup}}}case SET_MENU_PARENT_GROUP:{const newMenuParentGroup=action.payload.menuParentGroup;return{...state,interactionState:{...state.interactionState,menuParentGroup:newMenuParentGroup}}}case SET_GROUPS_VISITED:{const groupIds=action.payload.visitedGroups,changedInteractionState={groupsVisited:{}};return state.interactionState.groupsVisited&&Object.keys(state.interactionState.groupsVisited).forEach(groupId=>setGroupsVisited(changedInteractionState,groupId)),groupIds.forEach(groupId=>setGroupsVisited(changedInteractionState,groupId)),{...state,interactionState:{...state.interactionState,groupsVisited:changedInteractionState.groupsVisited}}}}return state}function setGroupsVisited(changedInteractionState,groupId){const groupsVisited=changedInteractionState.groupsVisited;groupsVisited&&(groupsVisited[groupId]=!0)}function setInitialCurrentGroup(state){if(state.interactionState.currentGroup)return state;let initialCurrentGroup;const flatGroups=state.flatGroups;return flatGroups&&flatGroups.length>0&&(initialCurrentGroup=flatGroups[0]?.id),{...state,interactionState:{...state.interactionState,currentGroup:initialCurrentGroup}}}function takeOverChanges(action,state){const content={...action.payload},groups=content.groups.length>0?content.groups:state.groups;return{...state,...content,groups,interactionState:{...state.interactionState,...content.interactionState,issueNavigationDone:!0}}}function takeOverPricingChanges(action,state){const content={...action.payload},priceSupplements=content.priceSupplements,groups=priceSupplements&&priceSupplements.length>0?ConfiguratorStateUtils.mergeGroupsWithSupplements(state.groups,priceSupplements):state.groups;return{...state,...content,groups,interactionState:{...state.interactionState,...content.interactionState,issueNavigationDone:!0}}}function getConfiguratorReducers(){return{configurations:spartacus_core.kPG.entityProcessesLoaderReducer(CONFIGURATOR_DATA,configuratorReducer)}}__name(configuratorReducer,"configuratorReducer"),__name(setGroupsVisited,"setGroupsVisited"),__name(setInitialCurrentGroup,"setInitialCurrentGroup"),__name(takeOverChanges,"takeOverChanges"),__name(takeOverPricingChanges,"takeOverPricingChanges"),__name(getConfiguratorReducers,"getConfiguratorReducers");const configuratorReducerToken=new core.OlP("ConfiguratorReducers"),configuratorReducerProvider={provide:configuratorReducerToken,useFactory:getConfiguratorReducers};class RulebasedConfiguratorStateModule{}__name(RulebasedConfiguratorStateModule,"RulebasedConfiguratorStateModule"),RulebasedConfiguratorStateModule.\u0275fac=__name(function(t){return new(t||RulebasedConfiguratorStateModule)},"RulebasedConfiguratorStateModule_Factory"),RulebasedConfiguratorStateModule.\u0275mod=core.oAB({type:RulebasedConfiguratorStateModule}),RulebasedConfiguratorStateModule.\u0275inj=core.cJS({providers:[configuratorReducerProvider],imports:[common.ez,spartacus_core.vUS,ngrx_store.Aw.forFeature("productConfigurator",configuratorReducerToken),ngrx_effects.sQ.forFeature(ConfiguratorEffects)]});class ConfiguratorExpertModeService{constructor(){this._expModeRequested=new ReplaySubject.t(1),this._expModeActive=new ReplaySubject.t(1)}setExpModeRequested(expMode){this._expModeRequested.next(expMode)}getExpModeRequested(){return this._expModeRequested}setExpModeActive(expMode){this._expModeActive.next(expMode)}getExpModeActive(){return this._expModeActive}}__name(ConfiguratorExpertModeService,"ConfiguratorExpertModeService"),ConfiguratorExpertModeService.\u0275fac=__name(function(t){return new(t||ConfiguratorExpertModeService)},"ConfiguratorExpertModeService_Factory"),ConfiguratorExpertModeService.\u0275prov=core.Yz7({token:ConfiguratorExpertModeService,factory:ConfiguratorExpertModeService.\u0275fac,providedIn:"root"});class ConfiguratorLogoutEventListener{constructor(eventService,configExpertModeService,configuratorCommonsService){this.eventService=eventService,this.configExpertModeService=configExpertModeService,this.configuratorCommonsService=configuratorCommonsService,this.subscription=new Subscription.w,this.onLogout()}onLogout(){this.subscription.add((0,merge.T)(this.eventService.get(spartacus_core.rX_)).subscribe(()=>{this.configExpertModeService.setExpModeActive(!1),this.configExpertModeService.setExpModeRequested(!1),this.configuratorCommonsService.removeProductBoundConfigurations()}))}ngOnDestroy(){this.subscription.unsubscribe()}}__name(ConfiguratorLogoutEventListener,"ConfiguratorLogoutEventListener"),ConfiguratorLogoutEventListener.\u0275fac=__name(function(t){return new(t||ConfiguratorLogoutEventListener)(core.LFG(spartacus_core.POd),core.LFG(ConfiguratorExpertModeService),core.LFG(ConfiguratorCommonsService))},"ConfiguratorLogoutEventListener_Factory"),ConfiguratorLogoutEventListener.\u0275prov=core.Yz7({token:ConfiguratorLogoutEventListener,factory:ConfiguratorLogoutEventListener.\u0275fac,providedIn:"root"});class RulebasedConfiguratorCoreModule{constructor(_configuratorLogoutEventListener){}}__name(RulebasedConfiguratorCoreModule,"RulebasedConfiguratorCoreModule"),RulebasedConfiguratorCoreModule.\u0275fac=__name(function(t){return new(t||RulebasedConfiguratorCoreModule)(core.LFG(ConfiguratorLogoutEventListener))},"RulebasedConfiguratorCoreModule_Factory"),RulebasedConfiguratorCoreModule.\u0275mod=core.oAB({type:RulebasedConfiguratorCoreModule}),RulebasedConfiguratorCoreModule.\u0275inj=core.cJS({providers:[RulebasedConfiguratorConnector,(0,spartacus_core.i51)({productConfigurator:{enableVariantSearch:!1}})],imports:[RulebasedConfiguratorStateModule,ConfiguratorRouterModule]});class ConfiguratorUISettingsConfig{}__name(ConfiguratorUISettingsConfig,"ConfiguratorUISettingsConfig"),ConfiguratorUISettingsConfig.\u0275fac=__name(function(t){return new(t||ConfiguratorUISettingsConfig)},"ConfiguratorUISettingsConfig_Factory"),ConfiguratorUISettingsConfig.\u0275prov=core.Yz7({token:ConfiguratorUISettingsConfig,factory:__name(function(t){let r=null;return r=t?new(t||ConfiguratorUISettingsConfig):core.LFG(spartacus_core.DeH),r},"ConfiguratorUISettingsConfig_Factory"),providedIn:"root"});class ConfiguratorAttributeHeaderComponent extends ConfiguratorAttributeBaseComponent{constructor(configUtils,configuratorCommonsService,configuratorGroupsService,configuratorUiSettings){super(),this.configUtils=configUtils,this.configuratorCommonsService=configuratorCommonsService,this.configuratorGroupsService=configuratorGroupsService,this.configuratorUiSettings=configuratorUiSettings,this.iconTypes=spartacus_storefront.e1G}ngOnInit(){this.showRequiredMessageForDomainAttribute$=this.configUtils.isCartEntryOrGroupVisited(this.owner,this.groupId).pipe((0,map.U)(result=>!!result&&this.isRequiredAttributeWithDomain()))}getRequiredMessageKey(){return this.isSingleSelection()?this.isWithAdditionalValues(this.attribute)?"configurator.attribute.singleSelectAdditionalRequiredMessage":"configurator.attribute.singleSelectRequiredMessage":this.isMultiSelection?"configurator.attribute.multiSelectRequiredMessage":"configurator.attribute.singleSelectRequiredMessage"}get isMultiSelection(){switch(this.attribute.uiType){case Configurator.UiType.CHECKBOXLIST:case Configurator.UiType.CHECKBOXLIST_PRODUCT:case Configurator.UiType.MULTI_SELECTION_IMAGE:return!0}return!1}isSingleSelection(){switch(this.attribute.uiType){case Configurator.UiType.RADIOBUTTON:case Configurator.UiType.RADIOBUTTON_ADDITIONAL_INPUT:case Configurator.UiType.RADIOBUTTON_PRODUCT:case Configurator.UiType.CHECKBOX:case Configurator.UiType.DROPDOWN:case Configurator.UiType.DROPDOWN_ADDITIONAL_INPUT:case Configurator.UiType.DROPDOWN_PRODUCT:case Configurator.UiType.SINGLE_SELECTION_IMAGE:return!0}return!1}isRequiredAttributeWithDomain(){const uiType=this.attribute.uiType;return(this.attribute.required&&this.attribute.incomplete&&uiType!==Configurator.UiType.NOT_IMPLEMENTED&&uiType!==Configurator.UiType.STRING&&uiType!==Configurator.UiType.NUMERIC)??!1}isAttributeGroup(){return Configurator.GroupType.ATTRIBUTE_GROUP===this.groupType}getConflictMessageKey(){return this.groupType===Configurator.GroupType.CONFLICT_GROUP?"configurator.conflict.viewConfigurationDetails":this.isNavigationToConflictEnabled()?"configurator.conflict.viewConflictDetails":"configurator.conflict.conflictDetected"}get hasImage(){const images=this.attribute.images;return!!images&&images.length>0}get image(){const images=this.attribute.images;return images&&this.hasImage?images[0]:void 0}navigateToGroup(){this.configuratorCommonsService.getConfiguration(this.owner).pipe((0,take.q)(1)).subscribe(configuration=>{let groupId;groupId=this.groupType===Configurator.GroupType.CONFLICT_GROUP?this.attribute.groupId:this.findConflictGroupId(configuration,this.attribute),groupId?(this.configuratorGroupsService.navigateToGroup(configuration,groupId),this.focusValue(this.attribute),this.scrollToAttribute(this.attribute.name)):this.logError('Attribute was not found in any conflict group. Note that for this navigation, commerce 22.05 or later is required. Consider to disable setting "enableNavigationToConflict"')})}scrollToAttribute(name){this.onNavigationCompleted(()=>this.configUtils.scrollToConfigurationElement("#"+this.createAttributeUiKey("label",name)))}findConflictGroupId(configuration,currentAttribute){return configuration.flatGroups.filter(group=>group.groupType===Configurator.GroupType.CONFLICT_GROUP).find(group=>group.attributes?.find(attribute=>attribute.key===currentAttribute.key))?.id}logError(text){(0,core.X6Q)()&&console.error(text)}focusValue(attribute){this.onNavigationCompleted(()=>this.configUtils.focusValue(attribute))}onNavigationCompleted(callback){this.configuratorCommonsService.isConfigurationLoading(this.owner).pipe((0,filter.h)(isLoading=>isLoading),(0,take.q)(1),(0,switchMap.w)(()=>this.configuratorCommonsService.isConfigurationLoading(this.owner).pipe((0,filter.h)(isLoading=>!isLoading),(0,take.q)(1),(0,delay.g)(0)))).subscribe(callback)}isNavigationToConflictEnabled(){return this.configuratorUiSettings.productConfigurator?.enableNavigationToConflict??!1}}__name(ConfiguratorAttributeHeaderComponent,"ConfiguratorAttributeHeaderComponent"),ConfiguratorAttributeHeaderComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorAttributeHeaderComponent)(core.Y36(ConfiguratorStorefrontUtilsService),core.Y36(ConfiguratorCommonsService),core.Y36(ConfiguratorGroupsService),core.Y36(ConfiguratorUISettingsConfig))},"ConfiguratorAttributeHeaderComponent_Factory"),ConfiguratorAttributeHeaderComponent.\u0275cmp=core.Xpm({type:ConfiguratorAttributeHeaderComponent,selectors:[["cx-configurator-attribute-header"]],inputs:{attribute:"attribute",owner:"owner",groupId:"groupId",groupType:"groupType",expMode:"expMode"},features:[core.qOj],decls:15,vars:26,consts:[[4,"cxFeatureLevel"],[3,"id"],["class","cx-conflict-msg",3,"id",4,"ngIf"],["class","cx-required-error-msg",3,"id",4,"ngIf"],["class","cx-attribute-img",3,"src","alt",4,"ngIf"],["conflictGroup",""],["withoutLink",""],["class","cx-hidden-msg",4,"ngIf"],[1,"cx-hidden-msg"],["aria-hidden","true",3,"type"],[1,"cx-conflict-msg",3,"id"],["aria-hidden","true",3,"type",4,"ngIf"],[4,"ngIf","ngIfElse"],["tabindex","0",1,"link","cx-action-link",3,"click","keydown.enter"],[1,"cx-required-error-msg",3,"id"],[3,"type"],[1,"cx-attribute-img",3,"src","alt"],[1,"cx-conflict-msg"]],template:__name(function(rf,ctx){1&rf&&(core.YNc(0,ConfiguratorAttributeHeaderComponent_ng_container_0_Template,2,1,"ng-container",0),core.TgZ(1,"label",1),core.ALo(2,"async"),core.ALo(3,"cxTranslate"),core.ALo(4,"cxTranslate"),core.TgZ(5,"span"),core._uU(6),core.qZA()(),core.YNc(7,ConfiguratorAttributeHeaderComponent_div_7_Template,4,10,"div",2),core.YNc(8,ConfiguratorAttributeHeaderComponent_div_8_Template,5,8,"div",3),core.ALo(9,"async"),core.YNc(10,ConfiguratorAttributeHeaderComponent_img_10_Template,1,2,"img",4),core.YNc(11,ConfiguratorAttributeHeaderComponent_ng_template_11_Template,3,3,"ng-template",null,5,core.W1O),core.YNc(13,ConfiguratorAttributeHeaderComponent_ng_template_13_Template,3,3,"ng-template",null,6,core.W1O)),2&rf&&(core.Q6J("cxFeatureLevel","5.1"),core.xp6(1),core.ekj("cx-required-error",core.lcZ(2,12,ctx.showRequiredMessageForDomainAttribute$)),core.s9C("id",ctx.createAttributeUiKey("label",ctx.attribute.name)),core.uIk("aria-label",ctx.attribute.required?core.xi3(4,17,"configurator.a11y.requiredAttribute",core.VKq(24,_c1,ctx.attribute.label)):core.xi3(3,14,"configurator.a11y.attribute",core.VKq(22,_c0,ctx.attribute.label))),core.xp6(4),core.ekj("cx-required-icon",ctx.attribute.required),core.uIk("aria-describedby",ctx.createAttributeUiKey("label",ctx.attribute.name)),core.xp6(1),core.Oqu(ctx.getLabel(ctx.expMode,ctx.attribute.label,ctx.attribute.name)),core.xp6(1),core.Q6J("ngIf",ctx.attribute.hasConflicts),core.xp6(1),core.Q6J("ngIf",core.lcZ(9,20,ctx.showRequiredMessageForDomainAttribute$)),core.xp6(2),core.Q6J("ngIf",ctx.hasImage))},"ConfiguratorAttributeHeaderComponent_Template"),dependencies:[common.O5,spartacus_storefront.oJW,spartacus_core.EJv,common.Ov,spartacus_core.X$D],encapsulation:2,changeDetection:0});class ConfiguratorAttributeHeaderModule{}__name(ConfiguratorAttributeHeaderModule,"ConfiguratorAttributeHeaderModule"),ConfiguratorAttributeHeaderModule.\u0275fac=__name(function(t){return new(t||ConfiguratorAttributeHeaderModule)},"ConfiguratorAttributeHeaderModule_Factory"),ConfiguratorAttributeHeaderModule.\u0275mod=core.oAB({type:ConfiguratorAttributeHeaderModule}),ConfiguratorAttributeHeaderModule.\u0275inj=core.cJS({imports:[fesm2020_forms.u5,fesm2020_forms.UX,common.ez,spartacus_core.LUR,spartacus_storefront.QX1,ng_select_ng_select.A0,spartacus_core.GSh]});class ConfiguratorShowMoreComponent{constructor(cdRef){this.cdRef=cdRef,this.showMore=!1,this.showHiddenText=!1,this.textSize=60}ngAfterViewInit(){this.textNormalized=this.normalize(this.text),this.textNormalized.length>this.textSize?(this.showMore=!0,this.textToShow=this.textNormalized.substring(0,this.textSize)):this.textToShow=this.textNormalized,this.cdRef.detectChanges()}toggleShowMore(){this.showHiddenText=!this.showHiddenText,this.showHiddenText?this.textToShow=this.textNormalized:this.textToShow=this.textNormalized.substring(0,this.textSize),this.cdRef.detectChanges()}normalize(text=""){return text.replace(/<[^>]*>/g,"")}}__name(ConfiguratorShowMoreComponent,"ConfiguratorShowMoreComponent"),ConfiguratorShowMoreComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorShowMoreComponent)(core.Y36(core.sBO))},"ConfiguratorShowMoreComponent_Factory"),ConfiguratorShowMoreComponent.\u0275cmp=core.Xpm({type:ConfiguratorShowMoreComponent,selectors:[["cx-configurator-show-more"]],inputs:{text:"text",textSize:"textSize",productName:"productName"},decls:1,vars:1,consts:[[4,"ngIf"],[3,"innerHTML"],["tabindex","-1",3,"click",4,"ngIf"],["tabindex","-1",3,"click"],[4,"ngIf","ngIfElse"],["less",""]],template:__name(function(rf,ctx){1&rf&&core.YNc(0,ConfiguratorShowMoreComponent_ng_container_0_Template,4,8,"ng-container",0),2&rf&&core.Q6J("ngIf",ctx.text)},"ConfiguratorShowMoreComponent_Template"),dependencies:[common.O5,spartacus_core.X$D],encapsulation:2,changeDetection:0});class ConfiguratorAttributeQuantityComponent{constructor(config){this.config=config,this.quantity=new fesm2020_forms.p4(1),this.optionsChangeSub=new Subscription.w,this.quantityChangeSub=new Subscription.w,this.changeQuantity=new core.vpe}ngOnInit(){this.quantity.setValue(this.quantityOptions?.initialQuantity),this.optionsChangeSub.add(this.quantityOptions.disableQuantityActions$?.pipe(distinct()).subscribe(disable=>{disable?(this.quantity.disable(),this.quantityChangeSub.unsubscribe()):(this.quantity.enable(),this.quantityChangeSub.add(this.subscribeToQuantityChange()))}))}subscribeToQuantityChange(){return this.quantity.valueChanges.pipe((0,debounce.D)(()=>(0,timer.H)(this.config.productConfigurator?.updateDebounceTime?.quantity)),(0,take.q)(1)).subscribe(()=>this.onChangeQuantity())}ngOnDestroy(){this.optionsChangeSub.unsubscribe(),this.quantityChangeSub.unsubscribe()}onChangeQuantity(){this.changeQuantity.emit(this.quantity?.value)}}__name(ConfiguratorAttributeQuantityComponent,"ConfiguratorAttributeQuantityComponent"),ConfiguratorAttributeQuantityComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorAttributeQuantityComponent)(core.Y36(ConfiguratorUISettingsConfig))},"ConfiguratorAttributeQuantityComponent_Factory"),ConfiguratorAttributeQuantityComponent.\u0275cmp=core.Xpm({type:ConfiguratorAttributeQuantityComponent,selectors:[["cx-configurator-attribute-quantity"]],inputs:{quantityOptions:"quantityOptions"},outputs:{changeQuantity:"changeQuantity"},decls:5,vars:6,consts:[[1,"cx-quantity"],[3,"allowZero","control","min"]],template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"div",0)(1,"label"),core._uU(2),core.ALo(3,"cxTranslate"),core.qZA(),core._UZ(4,"cx-item-counter",1),core.qZA()),2&rf&&(core.xp6(2),core.Oqu(core.lcZ(3,4,"configurator.attribute.quantity")),core.xp6(2),core.Q6J("allowZero",null==ctx.quantityOptions?null:ctx.quantityOptions.allowZero)("control",ctx.quantity)("min",null!=ctx.quantityOptions&&ctx.quantityOptions.allowZero?0:1))},"ConfiguratorAttributeQuantityComponent_Template"),dependencies:[spartacus_storefront.odZ,spartacus_core.X$D],encapsulation:2,changeDetection:0});class ConfiguratorPriceComponent{get price(){return this.formula.priceTotal?this.priceTotal:"+ "+this.formula.price?.formattedValue}get priceTotal(){return"+ "+this.formula.priceTotal?.formattedValue}displayQuantityAndPrice(){const quantity=this.formula.quantity;return!!quantity&&(0!==this.formula.price?.value&&quantity>=1)}displayPriceOnly(){const priceValue=this.formula.price?.value??0,priceTotalValue=this.formula.priceTotal?.value??0;return(0!==priceValue||0!==priceTotalValue)&&!this.displayQuantityAndPrice()}displayFormula(){return(this.formula.quantity&&0!==this.formula.quantity||this.formula.price&&0!==this.formula.price?.value||this.formula.priceTotal&&0!==this.formula.priceTotal?.value)??!1}quantityWithPrice(formattedQuantity){return formattedQuantity+"x("+this.formula.price?.formattedValue+")"}isPriceLightedUp(){return this.formula.isLightedUp??!1}get styleClass(){let styleClass="cx-price";return this.isPriceLightedUp()||(styleClass+=" cx-greyed-out"),styleClass}}__name(ConfiguratorPriceComponent,"ConfiguratorPriceComponent"),ConfiguratorPriceComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorPriceComponent)},"ConfiguratorPriceComponent_Factory"),ConfiguratorPriceComponent.\u0275cmp=core.Xpm({type:ConfiguratorPriceComponent,selectors:[["cx-configurator-price"]],inputs:{formula:"formula"},decls:1,vars:1,consts:[[4,"ngIf"],[3,"ngClass"],[1,"cx-quantity-price"],[1,"cx-price-total"]],template:__name(function(rf,ctx){1&rf&&core.YNc(0,ConfiguratorPriceComponent_ng_container_0_Template,3,2,"ng-container",0),2&rf&&core.Q6J("ngIf",ctx.displayFormula())},"ConfiguratorPriceComponent_Template"),dependencies:[common.mk,common.O5,spartacus_core.X$D,spartacus_core.bOD],encapsulation:2,changeDetection:0});class ConfiguratorAttributeProductCardComponent extends ConfiguratorAttributeBaseComponent{constructor(productService,keyBoardFocus,translation){super(),this.productService=productService,this.keyBoardFocus=keyBoardFocus,this.translation=translation,this.loading$=new BehaviorSubject.X(!0),this.showDeselectionNotPossible=!1,this.handleDeselect=new core.vpe,this.handleQuantity=new core.vpe,this.handleSelect=new core.vpe,this.iconType=spartacus_storefront.e1G}ngOnInit(){this.loading$.next(!0);const productSystemId=this.productCardOptions.productBoundValue.productSystemId;this.product$=this.productService.get(productSystemId||"",spartacus_product_configurator_common.ns.CONFIGURATOR_PRODUCT_CARD).pipe((0,map.U)(respProduct=>respProduct||this.transformToProductType(this.productCardOptions.productBoundValue)),(0,tap.b)(()=>this.loading$.next(!1)))}get showQuantity(){return(this.productCardOptions.withQuantity&&this.productCardOptions.productBoundValue.selected&&this.productCardOptions.multiSelect)??!1}get focusConfig(){return{key:this.createFocusId(this.productCardOptions.attributeId.toString(),this.productCardOptions.productBoundValue.valueCode)}}onHandleSelect(){this.loading$.next(!0),this.productCardOptions.hideRemoveButton&&this.productCardOptions.fallbackFocusId&&this.keyBoardFocus.set(this.productCardOptions.fallbackFocusId),this.handleSelect.emit(this.productCardOptions.productBoundValue.valueCode)}onHandleDeselect(){this.productCardOptions.productBoundValue.selected&&this.productCardOptions.hideRemoveButton?this.showDeselectionNotPossibleMessage():(this.loading$.next(!0),this.handleDeselect.emit(this.productCardOptions.productBoundValue.valueCode))}onChangeQuantity(eventObject){eventObject?this.onHandleQuantity(eventObject):this.onHandleDeselect()}isProductCardSelected(){return(this.productCardOptions.productBoundValue&&this.productCardOptions.productBoundValue.selected&&!this.productCardOptions.singleDropdown)??!1}hasPriceDisplay(){return!!(this.productCardOptions.productBoundValue.valuePrice||this.productCardOptions.productBoundValue.quantity||this.productCardOptions.productBoundValue.valuePriceTotal)}extractPriceFormulaParameters(){return this.productCardOptions.multiSelect?{quantity:this.productCardOptions.productBoundValue.quantity,price:this.productCardOptions.productBoundValue.valuePrice,priceTotal:this.productCardOptions.productBoundValue.valuePriceTotal,isLightedUp:this.productCardOptions.productBoundValue.selected}:{price:this.productCardOptions.productBoundValue.valuePrice,isLightedUp:this.productCardOptions.productBoundValue.selected}}extractQuantityParameters(){const quantityFromOptions=this.productCardOptions.productBoundValue.quantity,mergedLoading=this.productCardOptions.loading$?(0,combineLatest.aj)([this.loading$,this.productCardOptions.loading$]).pipe((0,map.U)(values=>values[0]||values[1])):this.loading$;return{allowZero:!this.productCardOptions.hideRemoveButton,initialQuantity:quantityFromOptions||0,disableQuantityActions$:mergedLoading}}isValueCodeDefined(valueCode){return!(!valueCode||"0"===valueCode)}transformToProductType(value){return{code:value?.productSystemId,description:value?.description,images:{},name:value?.valueDisplay}}onHandleQuantity(quantity){this.loading$.next(!0),this.handleQuantity.emit({quantity,valueCode:this.productCardOptions.productBoundValue.valueCode})}showDeselectionNotPossibleMessage(){this.showDeselectionNotPossible=!0}getAriaLabelSingleUnselected(product){let translatedText="";const index=this.productCardOptions.itemIndex+1;return this.isValueCodeDefined(this.productCardOptions?.productBoundValue?.valueCode)?this.hasPriceDisplay()&&0!==this.productCardOptions.productBoundValue.valuePrice?.value?this.translation.translate("configurator.a11y.itemOfAttributeUnselectedWithPrice",{item:product.code,attribute:this.productCardOptions?.attributeLabel,itemIndex:index,itemCount:this.productCardOptions.itemCount,price:this.productCardOptions.productBoundValue.valuePriceTotal?.formattedValue}).pipe((0,take.q)(1)).subscribe(text=>translatedText=text):this.translation.translate("configurator.a11y.itemOfAttributeUnselected",{item:product.code,attribute:this.productCardOptions?.attributeLabel,itemIndex:index,itemCount:this.productCardOptions.itemCount}).pipe((0,take.q)(1)).subscribe(text=>translatedText=text):this.translation.translate("configurator.a11y.selectNoItemOfAttribute",{attribute:this.productCardOptions?.attributeLabel,itemIndex:index,itemCount:this.productCardOptions.itemCount}).pipe((0,take.q)(1)).subscribe(text=>translatedText=text),translatedText}getAriaLabelSingleSelected(product){let translatedText="";const index=this.productCardOptions.itemIndex+1;return this.hasPriceDisplay()&&0!==this.productCardOptions.productBoundValue.valuePrice?.value?this.translation.translate("configurator.a11y.itemOfAttributeSelectedPressToUnselectWithPrice",{item:product.code,attribute:this.productCardOptions?.attributeLabel,itemIndex:index,itemCount:this.productCardOptions.itemCount,price:this.productCardOptions.productBoundValue.valuePriceTotal?.formattedValue}).pipe((0,take.q)(1)).subscribe(text=>translatedText=text):this.translation.translate("configurator.a11y.itemOfAttributeSelectedPressToUnselect",{item:product.code,attribute:this.productCardOptions?.attributeLabel,itemIndex:index,itemCount:this.productCardOptions.itemCount}).pipe((0,take.q)(1)).subscribe(text=>translatedText=text),translatedText}getAriaLabelSingleSelectedNoButton(product){let translatedText="";const index=this.productCardOptions.itemIndex+1;return this.hasPriceDisplay()&&0!==this.productCardOptions.productBoundValue.valuePrice?.value?this.translation.translate("configurator.a11y.itemOfAttributeSelectedWithPrice",{item:product.code,attribute:this.productCardOptions?.attributeLabel,itemIndex:index,itemCount:this.productCardOptions.itemCount,price:this.productCardOptions.productBoundValue.valuePriceTotal?.formattedValue}).pipe((0,take.q)(1)).subscribe(text=>translatedText=text):this.translation.translate("configurator.a11y.itemOfAttributeSelected",{item:product.code,attribute:this.productCardOptions?.attributeLabel,itemIndex:index,itemCount:this.productCardOptions.itemCount}).pipe((0,take.q)(1)).subscribe(text=>translatedText=text),translatedText}getAriaLabelMultiSelected(product){let translatedText="";const index=this.productCardOptions.itemIndex+1;return this.hasPriceDisplay()&&0!==this.productCardOptions.productBoundValue.valuePrice?.value?this.translation.translate("configurator.a11y.itemOfAttributeSelectedPressToUnselectWithPrice",{item:product.code,attribute:this.productCardOptions?.attributeLabel,itemIndex:index,itemCount:this.productCardOptions.itemCount,price:this.productCardOptions.productBoundValue.valuePriceTotal?.formattedValue}).pipe((0,take.q)(1)).subscribe(text=>translatedText=text):this.translation.translate("configurator.a11y.itemOfAttributeSelectedPressToUnselect",{item:product.code,attribute:this.productCardOptions?.attributeLabel,itemIndex:index,itemCount:this.productCardOptions.itemCount}).pipe((0,take.q)(1)).subscribe(text=>translatedText=text),translatedText}getAriaLabelMultiUnselected(product){let translatedText="";const index=this.productCardOptions.itemIndex+1;return this.hasPriceDisplay()&&0!==this.productCardOptions.productBoundValue.valuePrice?.value?this.translation.translate("configurator.a11y.itemOfAttributeUnselectedWithPrice",{item:product.code,attribute:this.productCardOptions?.attributeLabel,itemIndex:index,itemCount:this.productCardOptions.itemCount,price:this.productCardOptions.productBoundValue.valuePriceTotal?.formattedValue}).pipe((0,take.q)(1)).subscribe(text=>translatedText=text):this.translation.translate("configurator.a11y.itemOfAttributeUnselected",{item:product.code,attribute:this.productCardOptions?.attributeLabel,itemIndex:index,itemCount:this.productCardOptions.itemCount}).pipe((0,take.q)(1)).subscribe(text=>translatedText=text),translatedText}}__name(ConfiguratorAttributeProductCardComponent,"ConfiguratorAttributeProductCardComponent"),ConfiguratorAttributeProductCardComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorAttributeProductCardComponent)(core.Y36(spartacus_core.M52),core.Y36(spartacus_storefront.K9x),core.Y36(spartacus_core.D7D))},"ConfiguratorAttributeProductCardComponent_Factory"),ConfiguratorAttributeProductCardComponent.\u0275cmp=core.Xpm({type:ConfiguratorAttributeProductCardComponent,selectors:[["cx-configurator-attribute-product-card"]],inputs:{productCardOptions:"productCardOptions"},outputs:{handleDeselect:"handleDeselect",handleQuantity:"handleQuantity",handleSelect:"handleSelect"},features:[core.qOj],decls:2,vars:3,consts:[[4,"ngIf"],[1,"cx-product-card",3,"ngClass"],[1,"cx-product-card-rows"],[1,"cx-product-card-imgs"],["format","product","aria-hidden","true",3,"container"],[1,"cx-product-card-info"],[1,"cx-product-card-name"],["class","cx-product-card-code",4,"ngIf"],[3,"text","textSize","productName",4,"ngIf"],["class","cx-product-card-rows column",4,"ngIf"],[1,"cx-product-card-code"],[3,"text","textSize","productName"],[1,"cx-product-card-rows","column"],[1,"cx-product-card-quantity-price"],[1,"cx-product-card-quantity"],[3,"quantityOptions","changeQuantity",4,"ngIf"],[1,"cx-product-card-price"],[3,"formula"],[1,"cx-product-card-action"],["class","cx-product-card-action-btn",4,"ngIf"],[3,"quantityOptions","changeQuantity"],[1,"cx-product-card-action-btn"],[4,"ngIf","ngIfElse"],["single",""],["class","btn btn-action",3,"cxFocus","click",4,"ngIf","ngIfElse"],["select",""],[1,"btn","btn-action",3,"cxFocus","click"],[1,"btn","btn-primary",3,"disabled","cxFocus","click"],["class","btn btn-primary",3,"disabled","cxFocus","click",4,"ngIf","ngIfElse"],["deselect",""],["class","btn btn-action",3,"disabled","cxFocus","click",4,"ngIf"],["class","cx-visually-hidden","tabindex","0",4,"ngIf"],[1,"btn","btn-action",3,"disabled","cxFocus","click"],["tabindex","0",1,"cx-visually-hidden"],["aria-live","assertive","aria-atomic","true","role","alert",1,"cx-product-card-rows","deselection-error-message",3,"id"],["type","ERROR",1,"deselection-error-symbol"]],template:__name(function(rf,ctx){1&rf&&(core.YNc(0,ConfiguratorAttributeProductCardComponent_ng_container_0_Template,14,15,"ng-container",0),core.ALo(1,"async")),2&rf&&core.Q6J("ngIf",core.lcZ(1,1,ctx.product$))},"ConfiguratorAttributeProductCardComponent_Template"),dependencies:[common.mk,common.O5,ConfiguratorShowMoreComponent,ConfiguratorAttributeQuantityComponent,spartacus_storefront.R7z,ConfiguratorPriceComponent,spartacus_storefront.RRe,spartacus_storefront.oJW,common.Ov,spartacus_core.X$D],encapsulation:2,changeDetection:0});class ConfiguratorPriceModule{}__name(ConfiguratorPriceModule,"ConfiguratorPriceModule"),ConfiguratorPriceModule.\u0275fac=__name(function(t){return new(t||ConfiguratorPriceModule)},"ConfiguratorPriceModule_Factory"),ConfiguratorPriceModule.\u0275mod=core.oAB({type:ConfiguratorPriceModule}),ConfiguratorPriceModule.\u0275inj=core.cJS({imports:[common.ez,spartacus_core.LUR]});class ConfiguratorShowMoreModule{}__name(ConfiguratorShowMoreModule,"ConfiguratorShowMoreModule"),ConfiguratorShowMoreModule.\u0275fac=__name(function(t){return new(t||ConfiguratorShowMoreModule)},"ConfiguratorShowMoreModule_Factory"),ConfiguratorShowMoreModule.\u0275mod=core.oAB({type:ConfiguratorShowMoreModule}),ConfiguratorShowMoreModule.\u0275inj=core.cJS({imports:[common.ez,spartacus_core.LUR]});class ConfiguratorAttributeQuantityModule{}__name(ConfiguratorAttributeQuantityModule,"ConfiguratorAttributeQuantityModule"),ConfiguratorAttributeQuantityModule.\u0275fac=__name(function(t){return new(t||ConfiguratorAttributeQuantityModule)},"ConfiguratorAttributeQuantityModule_Factory"),ConfiguratorAttributeQuantityModule.\u0275mod=core.oAB({type:ConfiguratorAttributeQuantityModule}),ConfiguratorAttributeQuantityModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)({productConfigurator:{updateDebounceTime:{quantity:750,input:500},addRetractOption:!1,enableNavigationToConflict:!1}})],imports:[common.ez,spartacus_core.LUR,spartacus_storefront.Td$,spartacus_storefront.oPH]});class ConfiguratorAttributeProductCardModule{}__name(ConfiguratorAttributeProductCardModule,"ConfiguratorAttributeProductCardModule"),ConfiguratorAttributeProductCardModule.\u0275fac=__name(function(t){return new(t||ConfiguratorAttributeProductCardModule)},"ConfiguratorAttributeProductCardModule_Factory"),ConfiguratorAttributeProductCardModule.\u0275mod=core.oAB({type:ConfiguratorAttributeProductCardModule}),ConfiguratorAttributeProductCardModule.\u0275inj=core.cJS({imports:[common.ez,ConfiguratorShowMoreModule,ConfiguratorAttributeQuantityModule,spartacus_core.LUR,router.Bz,spartacus_core.bhT,fesm2020_forms.u5,fesm2020_forms.UX,spartacus_storefront.cOq,ConfiguratorPriceModule,spartacus_storefront.oPH,spartacus_storefront.QX1]});class ConfiguratorAttributeQuantityService{disableQuantityActions(value){return!value||"0"===value}disableQuantityActionsMultiSelection(attribute){return!(attribute.dataType!==Configurator.DataType.USER_SELECTION_QTY_ATTRIBUTE_LEVEL||attribute.values&&attribute.values.find(value=>value.selected)&&0!==attribute.quantity)}withQuantityOnAttributeLevel(attribute){return attribute.dataType===Configurator.DataType.USER_SELECTION_QTY_ATTRIBUTE_LEVEL}withQuantity(dataType,uiType){switch(uiType){case Configurator.UiType.DROPDOWN_PRODUCT:case Configurator.UiType.DROPDOWN:case Configurator.UiType.RADIOBUTTON_PRODUCT:case Configurator.UiType.RADIOBUTTON:return dataType===Configurator.DataType.USER_SELECTION_QTY_ATTRIBUTE_LEVEL;case Configurator.UiType.CHECKBOXLIST:case Configurator.UiType.CHECKBOXLIST_PRODUCT:return dataType===Configurator.DataType.USER_SELECTION_QTY_VALUE_LEVEL;default:return!1}}allowZeroValueQuantity(attribute){const selectedValues=attribute.values?attribute.values.filter(value=>value.selected).length:0;return!(attribute.required&&selectedValues<2)}}__name(ConfiguratorAttributeQuantityService,"ConfiguratorAttributeQuantityService"),ConfiguratorAttributeQuantityService.\u0275fac=__name(function(t){return new(t||ConfiguratorAttributeQuantityService)},"ConfiguratorAttributeQuantityService_Factory"),ConfiguratorAttributeQuantityService.\u0275prov=core.Yz7({token:ConfiguratorAttributeQuantityService,factory:ConfiguratorAttributeQuantityService.\u0275fac,providedIn:"root"});class ConfiguratorAttributeSingleSelectionBaseComponent extends ConfiguratorAttributeBaseComponent{constructor(quantityService,translation){super(),this.quantityService=quantityService,this.translation=translation,this.loading$=new BehaviorSubject.X(!1),this.selectionChange=new core.vpe}get withQuantity(){return this.quantityService.withQuantity(this.attribute.dataType??Configurator.DataType.NOT_IMPLEMENTED,this.attribute.uiType??Configurator.UiType.NOT_IMPLEMENTED)}get disableQuantityActions(){return this.quantityService.disableQuantityActions(this.attribute.selectedSingleValue)}onSelect(value){this.loading$.next(!0);const event={changedAttribute:{...this.attribute,selectedSingleValue:value},ownerKey:this.ownerKey,updateType:Configurator.UpdateType.ATTRIBUTE};this.selectionChange.emit(event)}onSelectAdditionalValue(event){const userInput=event.changedAttribute.userInput;userInput&&(this.loading$.next(!0),event.changedAttribute.selectedSingleValue=userInput,this.selectionChange.emit(event))}onHandleQuantity(quantity){this.loading$.next(!0);const event={changedAttribute:{...this.attribute,quantity},ownerKey:this.ownerKey,updateType:Configurator.UpdateType.ATTRIBUTE_QUANTITY};this.selectionChange.emit(event)}onChangeQuantity(eventObject,form){eventObject?this.onHandleQuantity(eventObject):(form&&form.setValue("0"),this.onSelect(""))}getInitialQuantity(form){const quantity=this.attribute.quantity??0;return form?"0"!==form.value?quantity:0:this.attribute.selectedSingleValue?quantity:0}extractQuantityParameters(form){const initialQuantity=this.getInitialQuantity(form),disableQuantityActions$=this.loading$.pipe((0,map.U)(loading=>loading||this.disableQuantityActions));return{allowZero:!this.attribute.required,initialQuantity,disableQuantityActions$}}extractPriceFormulaParameters(){return{quantity:this.attribute.quantity,price:this.getSelectedValuePrice(),priceTotal:this.attribute.attributePriceTotal,isLightedUp:!0}}extractValuePriceFormulaParameters(value){if(value)return{price:value.valuePrice,isLightedUp:value.selected}}getSelectedValuePrice(){return this.attribute.values?.find(value=>value.selected)?.valuePrice}get isAdditionalValueNumeric(){return this.isWithAdditionalValues(this.attribute)&&this.attribute.validationType===Configurator.ValidationType.NUMERIC}get isAdditionalValueAlphaNumeric(){return this.isWithAdditionalValues(this.attribute)&&this.attribute.validationType===Configurator.ValidationType.NONE}getAriaLabel(value,attribute){const ariaLabel=this.getAriaLabelWithoutAdditionalValue(value,attribute);if(this.isWithAdditionalValues(this.attribute)){return ariaLabel+" "+this.getAdditionalValueAriaLabel()}return ariaLabel}getAdditionalValueAriaLabel(){let ariaLabel="";return this.translation.translate("configurator.a11y.additionalValue").pipe((0,take.q)(1)).subscribe(text=>ariaLabel=text),ariaLabel}getAriaLabelWithoutAdditionalValue(value,attribute){let ariaLabel="";return value.valuePrice&&0!==value.valuePrice?.value?value.valuePriceTotal&&0!==value.valuePriceTotal?.value?this.translation.translate("configurator.a11y.selectedValueOfAttributeFullWithPrice",{value:value.valueDisplay,attribute:attribute.label,price:value.valuePriceTotal.formattedValue}).pipe((0,take.q)(1)).subscribe(text=>ariaLabel=text):this.translation.translate("configurator.a11y.selectedValueOfAttributeFullWithPrice",{value:value.valueDisplay,attribute:attribute.label,price:value.valuePrice.formattedValue}).pipe((0,take.q)(1)).subscribe(text=>ariaLabel=text):this.translation.translate("configurator.a11y.selectedValueOfAttributeFull",{value:value.valueDisplay,attribute:attribute.label}).pipe((0,take.q)(1)).subscribe(text=>ariaLabel=text),ariaLabel}}__name(ConfiguratorAttributeSingleSelectionBaseComponent,"ConfiguratorAttributeSingleSelectionBaseComponent"),ConfiguratorAttributeSingleSelectionBaseComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorAttributeSingleSelectionBaseComponent)(core.Y36(ConfiguratorAttributeQuantityService),core.Y36(spartacus_core.D7D))},"ConfiguratorAttributeSingleSelectionBaseComponent_Factory"),ConfiguratorAttributeSingleSelectionBaseComponent.\u0275dir=core.lG2({type:ConfiguratorAttributeSingleSelectionBaseComponent,inputs:{attribute:"attribute",ownerKey:"ownerKey",language:"language",ownerType:"ownerType",expMode:"expMode"},outputs:{selectionChange:"selectionChange"},features:[core.qOj]});class ConfiguratorAttributeMultiSelectionBaseComponent extends ConfiguratorAttributeBaseComponent{constructor(quantityService){super(),this.quantityService=quantityService,this.loading$=new BehaviorSubject.X(!1),this.selectionChange=new core.vpe}get withQuantityOnAttributeLevel(){return this.quantityService.withQuantityOnAttributeLevel(this.attribute)}get withQuantity(){return this.quantityService.withQuantity(this.attribute.dataType??Configurator.DataType.NOT_IMPLEMENTED,this.attribute.uiType??Configurator.UiType.NOT_IMPLEMENTED)}get disableQuantityActions(){return this.quantityService.disableQuantityActionsMultiSelection(this.attribute)}extractQuantityParameters(initialQuantity,allowZero){const disableQuantityActions$=this.loading$.pipe((0,map.U)(loading=>loading||this.disableQuantityActions));return{allowZero:allowZero??!this.attribute.required,initialQuantity,disableQuantityActions$}}onHandleAttributeQuantity(quantity){this.loading$.next(!0);const event={changedAttribute:{...this.attribute,quantity},ownerKey:this.ownerKey,updateType:Configurator.UpdateType.ATTRIBUTE_QUANTITY};this.selectionChange.emit(event)}extractPriceFormulaParameters(){return{quantity:0,price:{value:0,currencyIso:""},priceTotal:this.attribute.attributePriceTotal,isLightedUp:!0}}extractValuePriceFormulaParameters(value){return{quantity:value.quantity,price:value.valuePrice,priceTotal:value.valuePriceTotal,isLightedUp:value.selected}}}__name(ConfiguratorAttributeMultiSelectionBaseComponent,"ConfiguratorAttributeMultiSelectionBaseComponent"),ConfiguratorAttributeMultiSelectionBaseComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorAttributeMultiSelectionBaseComponent)(core.Y36(ConfiguratorAttributeQuantityService))},"ConfiguratorAttributeMultiSelectionBaseComponent_Factory"),ConfiguratorAttributeMultiSelectionBaseComponent.\u0275dir=core.lG2({type:ConfiguratorAttributeMultiSelectionBaseComponent,inputs:{attribute:"attribute",ownerKey:"ownerKey",expMode:"expMode"},outputs:{selectionChange:"selectionChange"},features:[core.qOj]});class ConfiguratorAttributeCheckBoxListComponent extends ConfiguratorAttributeMultiSelectionBaseComponent{constructor(configUtilsService,quantityService){super(quantityService),this.configUtilsService=configUtilsService,this.quantityService=quantityService,this.attributeCheckBoxForms=new Array}ngOnInit(){const disabled=!this.allowZeroValueQuantity;for(const value of this.attribute.values??[]){let attributeCheckBoxForm;attributeCheckBoxForm=value.selected?new fesm2020_forms.p4({value:!0,disabled}):new fesm2020_forms.p4(!1),this.attributeCheckBoxForms.push(attributeCheckBoxForm)}}get allowZeroValueQuantity(){return this.quantityService.allowZeroValueQuantity(this.attribute)}onSelect(){const selectedValues=this.configUtilsService.assembleValuesForMultiSelectAttributes(this.attributeCheckBoxForms,this.attribute),event={changedAttribute:{...this.attribute,values:selectedValues},ownerKey:this.ownerKey,updateType:Configurator.UpdateType.ATTRIBUTE};this.selectionChange.emit(event)}onChangeValueQuantity(eventObject,valueCode,formIndex){if(0===eventObject)return this.attributeCheckBoxForms[formIndex].setValue(!1),void this.onSelect();const value=this.configUtilsService.assembleValuesForMultiSelectAttributes(this.attributeCheckBoxForms,this.attribute).find(item=>item.valueCode===valueCode);if(!value)return void((0,core.X6Q)()&&console.warn("no value for event:",eventObject));value.quantity=eventObject;const event={changedAttribute:{...this.attribute,values:[value]},ownerKey:this.ownerKey,updateType:Configurator.UpdateType.VALUE_QUANTITY};this.selectionChange.emit(event)}onChangeQuantity(eventObject){eventObject?this.onHandleAttributeQuantity(eventObject):(this.attributeCheckBoxForms.forEach((_,index)=>this.attributeCheckBoxForms[index].setValue(!1)),this.onSelect())}}__name(ConfiguratorAttributeCheckBoxListComponent,"ConfiguratorAttributeCheckBoxListComponent"),ConfiguratorAttributeCheckBoxListComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorAttributeCheckBoxListComponent)(core.Y36(ConfiguratorStorefrontUtilsService),core.Y36(ConfiguratorAttributeQuantityService))},"ConfiguratorAttributeCheckBoxListComponent_Factory"),ConfiguratorAttributeCheckBoxListComponent.\u0275cmp=core.Xpm({type:ConfiguratorAttributeCheckBoxListComponent,selectors:[["cx-configurator-attribute-checkbox-list"]],inputs:{group:"group"},features:[core.qOj],decls:6,vars:4,consts:[[2,"display","none"],[3,"id"],["class","cx-attribute-level-quantity-price",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"cx-attribute-level-quantity-price"],[3,"quantityOptions","changeQuantity"],[3,"formula"],[1,"form-check"],[1,"cx-value-label-pair"],["type","checkbox",1,"form-check-input",3,"id","cxFocus","value","formControl","name","change"],["aria-hidden","true",1,"cx-configurator-attribute-value-label","form-check-label",3,"id","for"],[1,"cx-value-price"],[3,"quantityOptions","changeQuantity",4,"ngIf"]],template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"fieldset")(1,"legend",0),core._uU(2),core.qZA(),core.TgZ(3,"div",1),core.YNc(4,ConfiguratorAttributeCheckBoxListComponent_div_4_Template,3,2,"div",2),core.YNc(5,ConfiguratorAttributeCheckBoxListComponent_ng_container_5_Template,12,34,"ng-container",3),core.qZA()()),2&rf&&(core.xp6(2),core.Oqu(ctx.attribute.label),core.xp6(1),core.s9C("id",ctx.createAttributeIdForConfigurator(ctx.attribute)),core.xp6(1),core.Q6J("ngIf",ctx.withQuantityOnAttributeLevel),core.xp6(1),core.Q6J("ngForOf",ctx.attribute.values))},"ConfiguratorAttributeCheckBoxListComponent_Template"),dependencies:[spartacus_storefront.RRe,fesm2020_forms.Wl,fesm2020_forms.JJ,fesm2020_forms.oH,common.sg,common.O5,ConfiguratorAttributeQuantityComponent,ConfiguratorPriceComponent,spartacus_core.X$D],encapsulation:2,changeDetection:0});class ConfiguratorAttributeCheckboxListModule{}__name(ConfiguratorAttributeCheckboxListModule,"ConfiguratorAttributeCheckboxListModule"),ConfiguratorAttributeCheckboxListModule.\u0275fac=__name(function(t){return new(t||ConfiguratorAttributeCheckboxListModule)},"ConfiguratorAttributeCheckboxListModule_Factory"),ConfiguratorAttributeCheckboxListModule.\u0275mod=core.oAB({type:ConfiguratorAttributeCheckboxListModule}),ConfiguratorAttributeCheckboxListModule.\u0275inj=core.cJS({imports:[spartacus_storefront.oPH,fesm2020_forms.u5,fesm2020_forms.UX,common.ez,spartacus_core.LUR,ConfiguratorAttributeQuantityModule,ConfiguratorPriceModule]});class ConfiguratorAttributeCheckBoxComponent extends ConfiguratorAttributeBaseComponent{constructor(){super(...arguments),this.selectionChange=new core.vpe,this.attributeCheckBoxForm=new fesm2020_forms.p4("")}ngOnInit(){this.attributeCheckBoxForm.setValue(this.attribute.selectedSingleValue)}onSelect(){const selectedValues=this.assembleSingleValue(),event={ownerKey:this.ownerKey,changedAttribute:{...this.attribute,values:selectedValues}};this.selectionChange.emit(event)}assembleSingleValue(){const localAssembledValues=[],value=this.attribute.values?this.attribute.values[0]:void 0;if(value){const localAttributeValue={valueCode:value.valueCode};localAttributeValue.name=value.name,localAttributeValue.selected=this.attributeCheckBoxForm.value,localAssembledValues.push(localAttributeValue)}return localAssembledValues}extractValuePriceFormulaParameters(value){return{quantity:value.quantity,price:value.valuePrice,priceTotal:value.valuePriceTotal,isLightedUp:value.selected}}}__name(ConfiguratorAttributeCheckBoxComponent,"ConfiguratorAttributeCheckBoxComponent"),ConfiguratorAttributeCheckBoxComponent.\u0275fac=function(){let \u0275ConfiguratorAttributeCheckBoxComponent_BaseFactory;return __name(function(t){return(\u0275ConfiguratorAttributeCheckBoxComponent_BaseFactory||(\u0275ConfiguratorAttributeCheckBoxComponent_BaseFactory=core.n5z(ConfiguratorAttributeCheckBoxComponent)))(t||ConfiguratorAttributeCheckBoxComponent)},"ConfiguratorAttributeCheckBoxComponent_Factory")}(),ConfiguratorAttributeCheckBoxComponent.\u0275cmp=core.Xpm({type:ConfiguratorAttributeCheckBoxComponent,selectors:[["cx-configurator-attribute-checkbox"]],inputs:{attribute:"attribute",group:"group",ownerKey:"ownerKey",expMode:"expMode"},outputs:{selectionChange:"selectionChange"},features:[core.qOj],decls:2,vars:2,consts:[[4,"cxFeatureLevel"],[3,"id"],[1,"form-check"],["type","checkbox",1,"form-check-input",3,"id","value","cxFocus","formControl","name","change"],["aria-hidden","true",1,"form-check-label",3,"id","for"],[2,"display","none"],[1,"cx-value-label-pair"],[1,"cx-value-price"],[3,"formula"]],template:__name(function(rf,ctx){1&rf&&(core.YNc(0,ConfiguratorAttributeCheckBoxComponent_ng_container_0_Template,7,19,"ng-container",0),core.YNc(1,ConfiguratorAttributeCheckBoxComponent_ng_container_1_Template,14,28,"ng-container",0)),2&rf&&(core.Q6J("cxFeatureLevel","!4.1"),core.xp6(1),core.Q6J("cxFeatureLevel","4.1"))},"ConfiguratorAttributeCheckBoxComponent_Template"),dependencies:[spartacus_storefront.RRe,fesm2020_forms.Wl,fesm2020_forms.JJ,fesm2020_forms.oH,spartacus_core.EJv,ConfiguratorPriceComponent,spartacus_core.X$D],encapsulation:2,changeDetection:0});class ConfiguratorAttributeCheckboxModule{}__name(ConfiguratorAttributeCheckboxModule,"ConfiguratorAttributeCheckboxModule"),ConfiguratorAttributeCheckboxModule.\u0275fac=__name(function(t){return new(t||ConfiguratorAttributeCheckboxModule)},"ConfiguratorAttributeCheckboxModule_Factory"),ConfiguratorAttributeCheckboxModule.\u0275mod=core.oAB({type:ConfiguratorAttributeCheckboxModule}),ConfiguratorAttributeCheckboxModule.\u0275inj=core.cJS({imports:[spartacus_storefront.oPH,fesm2020_forms.u5,fesm2020_forms.UX,common.ez,spartacus_core.LUR,spartacus_core.GSh,ConfiguratorPriceModule]});class ConfiguratorAttributeInputFieldComponent extends ConfiguratorAttributeBaseComponent{constructor(config){super(),this.config=config,this.attributeInputForm=new fesm2020_forms.p4(""),this.inputChange=new core.vpe,this.FALLBACK_DEBOUNCE_TIME=500}ngOnInit(){this.attributeInputForm.setValue(this.attribute.userInput),this.ownerType===spartacus_product_configurator_common.$g.OwnerType.CART_ENTRY&&this.attribute.required&&this.attribute.incomplete&&!this.attributeInputForm.value&&this.attributeInputForm.markAsTouched(),this.sub=this.attributeInputForm.valueChanges.pipe((0,debounce.D)(()=>(0,timer.H)(this.config.productConfigurator?.updateDebounceTime?.input??this.FALLBACK_DEBOUNCE_TIME))).subscribe(()=>this.onChange())}onChange(){const event={ownerKey:this.ownerKey,changedAttribute:{...this.attribute,userInput:this.attributeInputForm.value}};this.attributeInputForm.invalid||this.inputChange.emit(event)}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}get isRequired(){return(this.attribute.uiType===Configurator.UiType.STRING||this.attribute.uiType===Configurator.UiType.NUMERIC)&&(this.attribute.required??!1)}}__name(ConfiguratorAttributeInputFieldComponent,"ConfiguratorAttributeInputFieldComponent"),ConfiguratorAttributeInputFieldComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorAttributeInputFieldComponent)(core.Y36(ConfiguratorUISettingsConfig))},"ConfiguratorAttributeInputFieldComponent_Factory"),ConfiguratorAttributeInputFieldComponent.\u0275cmp=core.Xpm({type:ConfiguratorAttributeInputFieldComponent,selectors:[["cx-configurator-attribute-input-field"]],inputs:{ownerType:"ownerType",attribute:"attribute",group:"group",ownerKey:"ownerKey"},outputs:{inputChange:"inputChange"},features:[core.qOj],decls:4,vars:21,consts:[[1,"form-group",3,"id"],[1,"form-control",3,"formControl","required","maxlength","cxFocus"]],template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"div",0),core._UZ(1,"input",1),core.ALo(2,"cxTranslate"),core.ALo(3,"cxTranslate"),core.qZA()),2&rf&&(core.s9C("id",ctx.createAttributeIdForConfigurator(ctx.attribute)),core.xp6(1),core.s9C("maxlength",ctx.attribute.maxlength),core.Q6J("formControl",ctx.attributeInputForm)("required",ctx.isRequired)("cxFocus",core.VKq(14,_c4,ctx.createAttributeIdForConfigurator(ctx.attribute))),core.uIk("required",ctx.attribute.required)("aria-label",void 0===ctx.attribute.userInput||0===ctx.attribute.userInput.length?core.xi3(2,8,"configurator.a11y.valueOfAttributeBlank",core.VKq(16,_c0,ctx.attribute.label)):core.xi3(3,11,"configurator.a11y.valueOfAttributeFull",core.WLB(18,_c6,ctx.attribute.userInput,ctx.attribute.label)))("aria-describedby",ctx.createAttributeUiKey("label",ctx.attribute.name)))},"ConfiguratorAttributeInputFieldComponent_Template"),dependencies:[spartacus_storefront.RRe,fesm2020_forms.Fj,fesm2020_forms.JJ,fesm2020_forms.Q7,fesm2020_forms.nD,fesm2020_forms.oH,spartacus_core.X$D],encapsulation:2,changeDetection:0});class ConfiguratorAttributeNumericInputFieldService{performValidationAccordingToMetaData(input,groupingSeparator,decimalSeparator,numberTotalPlaces,numberDecimalPlaces){const search=new RegExp("\\"+groupingSeparator,"g"),woGrouping=input.replace(search,""),splitParts=woGrouping.split(decimalSeparator);return splitParts.length>2||(1===splitParts.length?woGrouping.length>numberTotalPlaces-numberDecimalPlaces:splitParts[0].length>numberTotalPlaces-numberDecimalPlaces||splitParts[1].length>numberDecimalPlaces)}formatIntervalValue(intervalValue,decimalPlaces,locale){return void 0===decimalPlaces&&(decimalPlaces=0),(0,common.uf)(intervalValue,locale,"1."+decimalPlaces+"-"+decimalPlaces)}getIntervals(values){const intervals=[];return values&&values.length>0&&values.forEach(value=>{const interval=this.getInterval(value);interval&&0!==Object.keys(interval).length&&intervals.push(interval)}),intervals}getInterval(value){const interval={minValue:void 0,maxValue:void 0,minValueIncluded:!1,maxValueIncluded:!1};if(!value||!value.name||value.selected)return;let minVal="",maxVal="";return value.name.includes(" - ")?({minVal,maxVal}=this.handleStandardInterval(value.name,minVal,maxVal,interval)):({minVal,maxVal}=this.handleSingleOrInfinite(value.name,minVal,interval,maxVal)),minVal&&minVal.length>0&&(interval.minValue=+minVal),maxVal&&maxVal.length>0&&(interval.maxValue=+maxVal),interval}handleSingleOrInfinite(valueName,minVal,interval,maxVal){return valueName.includes(">")&&(minVal=valueName,interval.minValueIncluded=!1,minVal=minVal.replace(">","")),valueName.includes("<")&&(maxVal=valueName,interval.maxValueIncluded=!1,maxVal=maxVal.replace("<","")),valueName.includes("\u2265")&&(minVal=valueName,interval.minValueIncluded=!0,minVal=minVal.replace("\u2265","")),valueName.includes("\u2264")&&(maxVal=valueName,interval.maxValueIncluded=!0,maxVal=maxVal.replace("\u2264","")),!valueName.includes(">")&&!valueName.includes("<")&&!valueName.includes("\u2264")&&!valueName.includes("\u2265")&&(minVal=valueName,maxVal=valueName),{minVal,maxVal}}handleStandardInterval(valueName,minVal,maxVal,interval){let index=valueName.indexOf(" - ");return minVal=valueName.substring(0,index),maxVal=valueName.substring(index+3,valueName.length),interval.minValueIncluded=!0,interval.maxValueIncluded=!0,minVal.includes(">")&&(interval.minValueIncluded=!1,minVal=minVal.replace(">","")),maxVal.includes("<")&&(interval.maxValueIncluded=!1,maxVal=maxVal.replace("<","")),{minVal,maxVal}}getPatternForValidationMessage(decimalPlaces,totalLength,negativeAllowed,locale){let input=(10**totalLength-1).toString();decimalPlaces>0&&(input=input.substring(0,totalLength-decimalPlaces)+"."+input.substring(totalLength-decimalPlaces,totalLength));const inputAsNumber=Number(input);let formatted=(0,common.uf)(inputAsNumber,locale,"1."+decimalPlaces+"-"+decimalPlaces).replace(/9/g,"#");return negativeAllowed&&(formatted="-"+formatted),formatted}getNumberFormatValidator(locale,numberDecimalPlaces,numberTotalPlaces,negativeAllowed){return control=>{const input=control.value;if(input){const groupingSeparator=(0,common.dv)(locale,common.wE.Group),decimalSeparator=(0,common.dv)(locale,common.wE.Decimal);return new RegExp((negativeAllowed?"^-?":"^")+"[0123456789"+groupingSeparator+decimalSeparator+"]*$").test(input)?this.createValidationError(this.performValidationAccordingToMetaData(input,groupingSeparator,decimalSeparator,numberTotalPlaces+(input.includes("-")?1:0),numberDecimalPlaces)):this.createValidationError(!0)}return null}}createValidationError(isError){return isError?{wrongFormat:{}}:null}}__name(ConfiguratorAttributeNumericInputFieldService,"ConfiguratorAttributeNumericInputFieldService"),ConfiguratorAttributeNumericInputFieldService.\u0275fac=__name(function(t){return new(t||ConfiguratorAttributeNumericInputFieldService)},"ConfiguratorAttributeNumericInputFieldService_Factory"),ConfiguratorAttributeNumericInputFieldService.\u0275prov=core.Yz7({token:ConfiguratorAttributeNumericInputFieldService,factory:ConfiguratorAttributeNumericInputFieldService.\u0275fac,providedIn:"root"});__name(class DefaultSettings{},"DefaultSettings");class ConfiguratorAttributeNumericInputFieldComponent extends ConfiguratorAttributeInputFieldComponent{constructor(configAttributeNumericInputFieldService,config,translation){super(config),this.configAttributeNumericInputFieldService=configAttributeNumericInputFieldService,this.config=config,this.translation=translation,this.iconType=spartacus_storefront.e1G,this.intervals=[]}mustDisplayValidationMessage(){return(this.attributeInputForm.dirty||this.attributeInputForm.touched)&&this.attributeInputForm.errors?.wrongFormat}ngOnInit(){this.locale=this.getInstalledLocale(this.language);let numDecimalPlaces=this.attribute.numDecimalPlaces,numTotalLength=this.attribute.numTotalLength,negativeAllowed=this.attribute.negativeAllowed;if(void 0===numDecimalPlaces||void 0===numTotalLength||void 0===negativeAllowed){const defaultSettings=this.getDefaultSettings();numDecimalPlaces=defaultSettings.numDecimalPlaces,numTotalLength=defaultSettings.numTotalLength,negativeAllowed=defaultSettings.negativeAllowed,(0,core.X6Q)()&&console.warn("Meta data for numeric attribute not present, falling back to defaults")}this.attributeInputForm=new fesm2020_forms.p4("",[this.configAttributeNumericInputFieldService.getNumberFormatValidator(this.locale,numDecimalPlaces,numTotalLength,negativeAllowed)]),this.numericFormatPattern=this.configAttributeNumericInputFieldService.getPatternForValidationMessage(numDecimalPlaces,numTotalLength,negativeAllowed,this.locale),this.attribute.userInput&&this.attributeInputForm.setValue(this.attribute.userInput),this.ownerType===spartacus_product_configurator_common.$g.OwnerType.CART_ENTRY&&this.attribute.required&&this.attribute.incomplete&&!this.attributeInputForm.value&&this.attributeInputForm.markAsTouched(),this.attribute.intervalInDomain&&(this.intervals=this.configAttributeNumericInputFieldService.getIntervals(this.attribute.values)),this.sub=this.attributeInputForm.valueChanges.pipe((0,debounce.D)(()=>(0,timer.H)(this.config.productConfigurator?.updateDebounceTime?.input??this.FALLBACK_DEBOUNCE_TIME))).subscribe(()=>this.onChange())}ngOnDestroy(){super.ngOnDestroy()}getHelpTextForInterval(){let intervalText="",concatenatedIntervalText="";return this.intervals.forEach((interval,index)=>{intervalText=this.getIntervalText(interval),index>0?(intervalText=intervalText.charAt(0).toLowerCase()+intervalText.slice(1),this.translation.translate("configurator.a11y.combinedIntervalsText",{combinedInterval:concatenatedIntervalText,newInterval:intervalText}).pipe((0,take.q)(1)).subscribe(text=>concatenatedIntervalText=text)):concatenatedIntervalText=intervalText}),concatenatedIntervalText.trim()}getAriaLabelComplete(){let completeAriaText="";return 0===this.attribute.userInput?.length?this.translation.translate("configurator.a11y.valueOfAttributeBlank",{attribute:this.attribute.label}).pipe((0,take.q)(1)).subscribe(text=>completeAriaText=text):this.translation.translate("configurator.a11y.valueOfAttributeFull",{value:this.attribute.userInput,attribute:this.attribute.label}).pipe((0,take.q)(1)).subscribe(text=>completeAriaText=text),completeAriaText+=" ",completeAriaText+=this.getHelpTextForInterval(),completeAriaText}getIntervalText(interval){let intervalText="",formattedMinValue="",formattedMaxValue="";if(interval.minValue&&(formattedMinValue=this.configAttributeNumericInputFieldService.formatIntervalValue(interval.minValue,this.attribute.numDecimalPlaces,this.locale)),interval.maxValue&&(formattedMaxValue=this.configAttributeNumericInputFieldService.formatIntervalValue(interval.maxValue,this.attribute.numDecimalPlaces,this.locale)),interval.minValue&&interval.maxValue){if(interval.minValue===interval.maxValue)return this.translation.translate("configurator.a11y.numericIntervalSingleValue",{value:formattedMinValue}).pipe((0,take.q)(1)).subscribe(text=>intervalText=text),intervalText;intervalText=this.getTextForRealInterval(formattedMinValue,formattedMaxValue,intervalText,interval)}else intervalText=this.getTextForPartialInterval(interval,intervalText,formattedMinValue,formattedMaxValue);return intervalText}getTextForPartialInterval(interval,intervalText,formattedMinValue,formattedMaxValue){return interval.minValue?intervalText=interval.minValueIncluded?this.getInfiniteIntervalText("configurator.a11y.numericInfiniteIntervalMinValueIncluded",formattedMinValue):this.getInfiniteIntervalText("configurator.a11y.numericInfiniteIntervalMinValue",formattedMinValue):interval.maxValue&&(intervalText=interval.maxValueIncluded?this.getInfiniteIntervalText("configurator.a11y.numericInfiniteIntervalMaxValueIncluded",formattedMaxValue):this.getInfiniteIntervalText("configurator.a11y.numericInfiniteIntervalMaxValue",formattedMaxValue)),intervalText}getTextForRealInterval(formattedMinValue,formattedMaxValue,intervalText,interval){return this.translation.translate("configurator.a11y.numericIntervalStandard",{minValue:formattedMinValue,maxValue:formattedMaxValue}).pipe((0,take.q)(1)).subscribe(text=>intervalText=text),(!interval.minValueIncluded||!interval.maxValueIncluded)&&(interval.minValueIncluded||interval.maxValueIncluded?(interval.minValueIncluded||(intervalText+=" ",intervalText+=this.getAdditionalIntervalText("configurator.a11y.numericIntervalStandardLowerEndpointNotIncluded")),interval.maxValueIncluded||(intervalText+=" ",intervalText+=this.getAdditionalIntervalText("configurator.a11y.numericIntervalStandardUpperEndpointNotIncluded"))):(intervalText+=" ",intervalText+=this.getAdditionalIntervalText("configurator.a11y.numericIntervalStandardOpen"))),intervalText}getAdditionalIntervalText(key){let intervalText="";return this.translation.translate(key).pipe((0,take.q)(1)).subscribe(text=>intervalText=text),intervalText}getInfiniteIntervalText(key,value){let intervalText="";return this.translation.translate(key,{value}).pipe((0,take.q)(1)).subscribe(text=>intervalText=text),intervalText}getDefaultSettings(){return{numDecimalPlaces:2,numTotalLength:6,negativeAllowed:!1}}getInstalledLocale(locale){try{return(0,common.wM)(locale),locale}catch{return this.reportMissingLocaleData(locale),"en"}}reportMissingLocaleData(lang){(0,core.X6Q)()&&console.warn(`ConfigAttributeNumericInputFieldComponent: No locale data registered for '${lang}' (see https://angular.io/api/common/registerLocaleData).`)}}__name(ConfiguratorAttributeNumericInputFieldComponent,"ConfiguratorAttributeNumericInputFieldComponent"),ConfiguratorAttributeNumericInputFieldComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorAttributeNumericInputFieldComponent)(core.Y36(ConfiguratorAttributeNumericInputFieldService),core.Y36(ConfiguratorUISettingsConfig),core.Y36(spartacus_core.D7D))},"ConfiguratorAttributeNumericInputFieldComponent_Factory"),ConfiguratorAttributeNumericInputFieldComponent.\u0275cmp=core.Xpm({type:ConfiguratorAttributeNumericInputFieldComponent,selectors:[["cx-configurator-attribute-numeric-input-field"]],inputs:{language:"language"},features:[core.qOj],decls:4,vars:13,consts:[["class","cx-intervalHelpText",4,"ngIf"],[1,"form-group",3,"id"],[1,"form-control",3,"formControl","required","maxlength","cxFocus","change"],["class","cx-validation-msg","aria-live","assertive","aria-atomic","true","role","alert",3,"id",4,"ngIf"],[1,"cx-intervalHelpText"],["aria-live","assertive","aria-atomic","true","role","alert",1,"cx-validation-msg",3,"id"],[3,"type"]],template:__name(function(rf,ctx){1&rf&&(core.YNc(0,ConfiguratorAttributeNumericInputFieldComponent_label_0_Template,2,1,"label",0),core.TgZ(1,"div",1)(2,"input",2),core.NdJ("change",__name(function(){return ctx.onChange()},"ConfiguratorAttributeNumericInputFieldComponent_Template_input_change_2_listener")),core.qZA()(),core.YNc(3,ConfiguratorAttributeNumericInputFieldComponent_div_3_Template,4,8,"div",3)),2&rf&&(core.Q6J("ngIf",ctx.attribute.intervalInDomain),core.xp6(1),core.s9C("id",ctx.createAttributeIdForConfigurator(ctx.attribute)),core.xp6(1),core.s9C("maxlength",ctx.attribute.maxlength),core.Q6J("formControl",ctx.attributeInputForm)("required",ctx.isRequired)("cxFocus",core.VKq(11,_c4,ctx.createAttributeIdForConfigurator(ctx.attribute))),core.uIk("aria-describedby",ctx.mustDisplayValidationMessage()?ctx.createAttributeUiKey("label",ctx.attribute.name)+" "+ctx.createAttributeUiKey("attribute-msg",ctx.attribute.name):ctx.createAttributeUiKey("label",ctx.attribute.name))("role",ctx.attribute.dataType)("required",ctx.attribute.required)("aria-label",ctx.getAriaLabelComplete()),core.xp6(1),core.Q6J("ngIf",ctx.mustDisplayValidationMessage()))},"ConfiguratorAttributeNumericInputFieldComponent_Template"),dependencies:[spartacus_storefront.RRe,fesm2020_forms.Fj,fesm2020_forms.JJ,fesm2020_forms.Q7,fesm2020_forms.nD,fesm2020_forms.oH,common.O5,spartacus_storefront.oJW,spartacus_core.X$D],encapsulation:2,changeDetection:0});class ConfiguratorAttributeDropDownComponent extends ConfiguratorAttributeSingleSelectionBaseComponent{constructor(quantityService,translation){super(quantityService,translation),this.quantityService=quantityService,this.translation=translation,this.attributeDropDownForm=new fesm2020_forms.p4("")}ngOnInit(){this.attributeDropDownForm.setValue(this.attribute.selectedSingleValue)}getSelectedValue(){return this.attribute.values?.find(value=>value?.selected)}}__name(ConfiguratorAttributeDropDownComponent,"ConfiguratorAttributeDropDownComponent"),ConfiguratorAttributeDropDownComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorAttributeDropDownComponent)(core.Y36(ConfiguratorAttributeQuantityService),core.Y36(spartacus_core.D7D))},"ConfiguratorAttributeDropDownComponent_Factory"),ConfiguratorAttributeDropDownComponent.\u0275cmp=core.Xpm({type:ConfiguratorAttributeDropDownComponent,selectors:[["cx-configurator-attribute-drop-down"]],inputs:{group:"group"},features:[core.qOj],decls:4,vars:4,consts:[["class","form-group",4,"ngIf"],["class","cx-attribute-level-quantity-price",4,"ngIf"],["class","cx-configurator-attribute-additional-value",3,"attribute","ownerType","ownerKey","language","inputChange",4,"ngIf"],["class","cx-configurator-attribute-additional-value",3,"attribute","ownerType","ownerKey","inputChange",4,"ngIf"],[1,"form-group"],[1,"cx-visually-hidden",3,"for"],[1,"form-control",3,"id","formControl","cxFocus","change"],[3,"label","selected","value",4,"ngFor","ngForOf"],["class","cx-value-price",4,"ngIf"],[3,"label","selected","value"],[1,"cx-value-price"],[3,"formula"],[1,"cx-attribute-level-quantity-price"],[3,"quantityOptions","changeQuantity"],[1,"cx-configurator-attribute-additional-value",3,"attribute","ownerType","ownerKey","language","inputChange"],[1,"cx-configurator-attribute-additional-value",3,"attribute","ownerType","ownerKey","inputChange"]],template:__name(function(rf,ctx){1&rf&&(core.YNc(0,ConfiguratorAttributeDropDownComponent_div_0_Template,7,15,"div",0),core.YNc(1,ConfiguratorAttributeDropDownComponent_div_1_Template,3,2,"div",1),core.YNc(2,ConfiguratorAttributeDropDownComponent_cx_configurator_attribute_numeric_input_field_2_Template,2,7,"cx-configurator-attribute-numeric-input-field",2),core.YNc(3,ConfiguratorAttributeDropDownComponent_cx_configurator_attribute_input_field_3_Template,2,6,"cx-configurator-attribute-input-field",3)),2&rf&&(core.Q6J("ngIf",ctx.attribute.values&&0!==ctx.attribute.values.length),core.xp6(1),core.Q6J("ngIf",ctx.withQuantity),core.xp6(1),core.Q6J("ngIf",ctx.isAdditionalValueNumeric),core.xp6(1),core.Q6J("ngIf",ctx.isAdditionalValueAlphaNumeric))},"ConfiguratorAttributeDropDownComponent_Template"),dependencies:[common.sg,common.O5,ConfiguratorAttributeQuantityComponent,fesm2020_forms.YN,fesm2020_forms.Kr,fesm2020_forms.EJ,fesm2020_forms.JJ,spartacus_storefront.RRe,fesm2020_forms.oH,ConfiguratorPriceComponent,ConfiguratorAttributeNumericInputFieldComponent,ConfiguratorAttributeInputFieldComponent,spartacus_core.X$D],encapsulation:2,changeDetection:0});class ConfiguratorAttributeNumericInputFieldModule{}__name(ConfiguratorAttributeNumericInputFieldModule,"ConfiguratorAttributeNumericInputFieldModule"),ConfiguratorAttributeNumericInputFieldModule.\u0275fac=__name(function(t){return new(t||ConfiguratorAttributeNumericInputFieldModule)},"ConfiguratorAttributeNumericInputFieldModule_Factory"),ConfiguratorAttributeNumericInputFieldModule.\u0275mod=core.oAB({type:ConfiguratorAttributeNumericInputFieldModule}),ConfiguratorAttributeNumericInputFieldModule.\u0275inj=core.cJS({imports:[spartacus_storefront.oPH,fesm2020_forms.u5,fesm2020_forms.UX,common.ez,spartacus_core.LUR,spartacus_storefront.QX1]});class ConfiguratorAttributeInputFieldModule{}__name(ConfiguratorAttributeInputFieldModule,"ConfiguratorAttributeInputFieldModule"),ConfiguratorAttributeInputFieldModule.\u0275fac=__name(function(t){return new(t||ConfiguratorAttributeInputFieldModule)},"ConfiguratorAttributeInputFieldModule_Factory"),ConfiguratorAttributeInputFieldModule.\u0275mod=core.oAB({type:ConfiguratorAttributeInputFieldModule}),ConfiguratorAttributeInputFieldModule.\u0275inj=core.cJS({imports:[spartacus_storefront.oPH,fesm2020_forms.u5,fesm2020_forms.UX,common.ez,spartacus_core.LUR]});class ConfiguratorAttributeDropDownModule{}__name(ConfiguratorAttributeDropDownModule,"ConfiguratorAttributeDropDownModule"),ConfiguratorAttributeDropDownModule.\u0275fac=__name(function(t){return new(t||ConfiguratorAttributeDropDownModule)},"ConfiguratorAttributeDropDownModule_Factory"),ConfiguratorAttributeDropDownModule.\u0275mod=core.oAB({type:ConfiguratorAttributeDropDownModule}),ConfiguratorAttributeDropDownModule.\u0275inj=core.cJS({imports:[common.ez,ConfiguratorAttributeQuantityModule,fesm2020_forms.u5,spartacus_core.LUR,spartacus_storefront.oPH,ng_select_ng_select.A0,fesm2020_forms.UX,ConfiguratorPriceModule,ConfiguratorAttributeNumericInputFieldModule,ConfiguratorAttributeInputFieldModule]});class ConfiguratorAttributeMultiSelectionBundleComponent extends ConfiguratorAttributeMultiSelectionBaseComponent{constructor(){super(...arguments),this.preventAction$=new BehaviorSubject.X(!1),this.multipleSelectionValues=[]}ngOnInit(){this.initialize()}initialize(){this.attribute.values&&this.attribute.values.length>0&&(this.multipleSelectionValues=this.attribute.values.map(({name,quantity,selected,valueCode})=>({name,quantity,selected,valueCode}))),this.attribute.required&&this.multipleSelectionValues.filter(value=>value.selected).length<2&&this.preventAction$.next(!0)}updateMultipleSelectionValues(valueCode,state){const index=this.multipleSelectionValues.findIndex(value=>value.valueCode===valueCode);return this.multipleSelectionValues[index]={...this.multipleSelectionValues[index],selected:state},{changedAttribute:{...this.attribute,values:this.multipleSelectionValues},ownerKey:this.ownerKey,updateType:Configurator.UpdateType.ATTRIBUTE}}updateMultipleSelectionValuesQuantity(eventValue){const value=this.multipleSelectionValues.find(selectionValue=>selectionValue.valueCode===eventValue.valueCode);return value?(value.quantity=eventValue.quantity,{changedAttribute:{...this.attribute,values:[value]},ownerKey:this.ownerKey,updateType:Configurator.UpdateType.VALUE_QUANTITY}):void 0}onSelect(eventValue){this.loading$.next(!0),this.selectionChange.emit(this.updateMultipleSelectionValues(eventValue,!0))}onDeselect(eventValue){this.loading$.next(!0),this.selectionChange.emit(this.updateMultipleSelectionValues(eventValue,!1))}onDeselectAll(){this.loading$.next(!0);const event={changedAttribute:{...this.attribute,values:[]},ownerKey:this.ownerKey,updateType:Configurator.UpdateType.ATTRIBUTE};this.selectionChange.emit(event)}onChangeValueQuantity(eventValue){this.loading$.next(!0),this.selectionChange.emit(this.updateMultipleSelectionValuesQuantity(eventValue))}onChangeAttributeQuantity(eventObject){this.loading$.next(!0),eventObject?this.onHandleAttributeQuantity(eventObject):this.onDeselectAll()}extractPriceFormulaParameters(){return{quantity:0,price:{value:0,currencyIso:""},priceTotal:this.attribute.attributePriceTotal,isLightedUp:!0}}extractProductCardParameters(disableAllButtons,hideRemoveButton,value,index){return{disableAllButtons:disableAllButtons??!1,hideRemoveButton:hideRemoveButton??!1,productBoundValue:value,multiSelect:!0,withQuantity:this.withQuantity,loading$:this.loading$,attributeId:this.getAttributeCode(this.attribute),attributeLabel:this.attribute.label,attributeName:this.attribute.name,itemCount:this.attribute.values?.length?this.attribute.values.length:0,itemIndex:index}}}__name(ConfiguratorAttributeMultiSelectionBundleComponent,"ConfiguratorAttributeMultiSelectionBundleComponent"),ConfiguratorAttributeMultiSelectionBundleComponent.\u0275fac=function(){let \u0275ConfiguratorAttributeMultiSelectionBundleComponent_BaseFactory;return __name(function(t){return(\u0275ConfiguratorAttributeMultiSelectionBundleComponent_BaseFactory||(\u0275ConfiguratorAttributeMultiSelectionBundleComponent_BaseFactory=core.n5z(ConfiguratorAttributeMultiSelectionBundleComponent)))(t||ConfiguratorAttributeMultiSelectionBundleComponent)},"ConfiguratorAttributeMultiSelectionBundleComponent_Factory")}(),ConfiguratorAttributeMultiSelectionBundleComponent.\u0275cmp=core.Xpm({type:ConfiguratorAttributeMultiSelectionBundleComponent,selectors:[["cx-configurator-attribute-multi-selection-bundle"]],features:[core.qOj],decls:1,vars:1,consts:[[3,"id",4,"ngIf"],[3,"id"],["class","cx-attribute-level-quantity-price",4,"ngIf"],[3,"id","productCardOptions","handleDeselect","handleQuantity","handleSelect",4,"ngFor","ngForOf"],[1,"cx-attribute-level-quantity-price"],[3,"quantityOptions","changeQuantity"],[3,"formula"],[3,"id","productCardOptions","handleDeselect","handleQuantity","handleSelect"]],template:__name(function(rf,ctx){1&rf&&core.YNc(0,ConfiguratorAttributeMultiSelectionBundleComponent_div_0_Template,3,3,"div",0),2&rf&&core.Q6J("ngIf",null==ctx.attribute||null==ctx.attribute.values?null:ctx.attribute.values.length)},"ConfiguratorAttributeMultiSelectionBundleComponent_Template"),dependencies:[common.sg,common.O5,ConfiguratorAttributeProductCardComponent,ConfiguratorAttributeQuantityComponent,ConfiguratorPriceComponent,common.Ov],encapsulation:2,changeDetection:0});class ConfiguratorAttributeMultiSelectionBundleModule{}__name(ConfiguratorAttributeMultiSelectionBundleModule,"ConfiguratorAttributeMultiSelectionBundleModule"),ConfiguratorAttributeMultiSelectionBundleModule.\u0275fac=__name(function(t){return new(t||ConfiguratorAttributeMultiSelectionBundleModule)},"ConfiguratorAttributeMultiSelectionBundleModule_Factory"),ConfiguratorAttributeMultiSelectionBundleModule.\u0275mod=core.oAB({type:ConfiguratorAttributeMultiSelectionBundleModule}),ConfiguratorAttributeMultiSelectionBundleModule.\u0275inj=core.cJS({imports:[common.ez,ConfiguratorAttributeProductCardModule,fesm2020_forms.u5,spartacus_core.LUR,spartacus_storefront.oPH,fesm2020_forms.UX,router.Bz,spartacus_core.bhT,ConfiguratorAttributeQuantityModule,ConfiguratorPriceModule]});class ConfiguratorAttributeMultiSelectionImageComponent extends ConfiguratorAttributeBaseComponent{constructor(configUtilsService){super(),this.configUtilsService=configUtilsService,this.selectionChange=new core.vpe,this.attributeCheckBoxForms=new Array}ngOnInit(){const values=this.attribute.values;if(values)for(const value of values){let attributeCheckBoxForm;attributeCheckBoxForm=value.selected?new fesm2020_forms.p4(!0):new fesm2020_forms.p4(!1),this.attributeCheckBoxForms.push(attributeCheckBoxForm)}}onSelect(index){this.attributeCheckBoxForms[index].setValue(!this.attributeCheckBoxForms[index].value);const selectedValues=this.configUtilsService.assembleValuesForMultiSelectAttributes(this.attributeCheckBoxForms,this.attribute),event={ownerKey:this.ownerKey,changedAttribute:{...this.attribute,values:selectedValues}};this.selectionChange.emit(event)}extractValuePriceFormulaParameters(value){return{quantity:value.quantity,price:value.valuePrice,priceTotal:value.valuePriceTotal,isLightedUp:value.selected}}}__name(ConfiguratorAttributeMultiSelectionImageComponent,"ConfiguratorAttributeMultiSelectionImageComponent"),ConfiguratorAttributeMultiSelectionImageComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorAttributeMultiSelectionImageComponent)(core.Y36(ConfiguratorStorefrontUtilsService))},"ConfiguratorAttributeMultiSelectionImageComponent_Factory"),ConfiguratorAttributeMultiSelectionImageComponent.\u0275cmp=core.Xpm({type:ConfiguratorAttributeMultiSelectionImageComponent,selectors:[["cx-configurator-attribute-multi-selection-image"]],inputs:{attribute:"attribute",ownerKey:"ownerKey",expMode:"expMode"},outputs:{selectionChange:"selectionChange"},features:[core.qOj],decls:2,vars:2,consts:[[1,"cx-row",3,"id"],["class","cx-configurator-select",3,"id",4,"ngFor","ngForOf"],[1,"cx-configurator-select",3,"id"],["type","checkbox",1,"form-input",3,"id","value","formControl","name","cxFocus","click"],[1,"cx-label-container"],["aria-hidden","true",1,"form-check-label",3,"id","for"],["class","cx-img",3,"src","alt",4,"ngIf"],["class","cx-img-dummy",4,"ngIf"],[3,"formula"],[1,"cx-img",3,"src","alt"],[1,"cx-img-dummy"]],template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"div",0),core.YNc(1,ConfiguratorAttributeMultiSelectionImageComponent_div_1_Template,10,30,"div",1),core.qZA()),2&rf&&(core.s9C("id",ctx.createAttributeIdForConfigurator(ctx.attribute)),core.xp6(1),core.Q6J("ngForOf",ctx.attribute.values))},"ConfiguratorAttributeMultiSelectionImageComponent_Template"),dependencies:[spartacus_storefront.RRe,fesm2020_forms.Wl,fesm2020_forms.JJ,fesm2020_forms.oH,common.sg,common.O5,ConfiguratorPriceComponent,spartacus_core.X$D],encapsulation:2,changeDetection:0});class ConfiguratorAttributeMultiSelectionImageModule{}__name(ConfiguratorAttributeMultiSelectionImageModule,"ConfiguratorAttributeMultiSelectionImageModule"),ConfiguratorAttributeMultiSelectionImageModule.\u0275fac=__name(function(t){return new(t||ConfiguratorAttributeMultiSelectionImageModule)},"ConfiguratorAttributeMultiSelectionImageModule_Factory"),ConfiguratorAttributeMultiSelectionImageModule.\u0275mod=core.oAB({type:ConfiguratorAttributeMultiSelectionImageModule}),ConfiguratorAttributeMultiSelectionImageModule.\u0275inj=core.cJS({imports:[spartacus_storefront.oPH,fesm2020_forms.u5,fesm2020_forms.UX,common.ez,spartacus_core.LUR,ConfiguratorPriceModule]});class ConfiguratorAttributeRadioButtonComponent extends ConfiguratorAttributeSingleSelectionBaseComponent{constructor(quantityService,translation){super(quantityService,translation),this.quantityService=quantityService,this.translation=translation,this.attributeRadioButtonForm=new fesm2020_forms.p4("")}ngOnInit(){this.attributeRadioButtonForm.setValue(this.attribute.selectedSingleValue)}}__name(ConfiguratorAttributeRadioButtonComponent,"ConfiguratorAttributeRadioButtonComponent"),ConfiguratorAttributeRadioButtonComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorAttributeRadioButtonComponent)(core.Y36(ConfiguratorAttributeQuantityService),core.Y36(spartacus_core.D7D))},"ConfiguratorAttributeRadioButtonComponent_Factory"),ConfiguratorAttributeRadioButtonComponent.\u0275cmp=core.Xpm({type:ConfiguratorAttributeRadioButtonComponent,selectors:[["cx-configurator-attribute-radio-button"]],features:[core.qOj],decls:8,vars:6,consts:[[2,"display","none"],[3,"id"],["class","cx-attribute-level-quantity-price",4,"ngIf"],["class","form-check",4,"ngFor","ngForOf"],["class","cx-configurator-attribute-additional-value",3,"attribute","ownerType","ownerKey","language","inputChange",4,"ngIf"],["class","cx-configurator-attribute-additional-value",3,"attribute","ownerType","ownerKey","inputChange",4,"ngIf"],[1,"cx-attribute-level-quantity-price"],[3,"quantityOptions","changeQuantity"],[3,"formula"],[1,"form-check"],[1,"cx-value-label-pair"],["type","radio","formcontrolname","attributeRadioButtonForm",1,"form-check-input",3,"id","formControl","value","name","cxFocus","change"],["aria-hidden","true",1,"form-check-label","form-radio-label",3,"id","for"],[1,"cx-value-price"],[1,"cx-configurator-attribute-additional-value",3,"attribute","ownerType","ownerKey","language","inputChange"],[1,"cx-configurator-attribute-additional-value",3,"attribute","ownerType","ownerKey","inputChange"]],template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"fieldset")(1,"legend",0),core._uU(2),core.qZA(),core.TgZ(3,"div",1),core.YNc(4,ConfiguratorAttributeRadioButtonComponent_div_4_Template,3,2,"div",2),core.YNc(5,ConfiguratorAttributeRadioButtonComponent_div_5_Template,7,16,"div",3),core.YNc(6,ConfiguratorAttributeRadioButtonComponent_cx_configurator_attribute_numeric_input_field_6_Template,1,4,"cx-configurator-attribute-numeric-input-field",4),core.YNc(7,ConfiguratorAttributeRadioButtonComponent_cx_configurator_attribute_input_field_7_Template,1,3,"cx-configurator-attribute-input-field",5),core.qZA()()),2&rf&&(core.xp6(2),core.Oqu(ctx.attribute.label),core.xp6(1),core.s9C("id",ctx.createAttributeIdForConfigurator(ctx.attribute)),core.xp6(1),core.Q6J("ngIf",ctx.withQuantity),core.xp6(1),core.Q6J("ngForOf",ctx.attribute.values),core.xp6(1),core.Q6J("ngIf",ctx.isAdditionalValueNumeric),core.xp6(1),core.Q6J("ngIf",ctx.isAdditionalValueAlphaNumeric))},"ConfiguratorAttributeRadioButtonComponent_Template"),dependencies:[common.sg,common.O5,ConfiguratorAttributeQuantityComponent,fesm2020_forms.Fj,fesm2020_forms._,fesm2020_forms.JJ,fesm2020_forms.Q7,spartacus_storefront.RRe,fesm2020_forms.oH,ConfiguratorPriceComponent,ConfiguratorAttributeNumericInputFieldComponent,ConfiguratorAttributeInputFieldComponent],encapsulation:2,changeDetection:0});class ConfiguratorAttributeRadioButtonModule{}__name(ConfiguratorAttributeRadioButtonModule,"ConfiguratorAttributeRadioButtonModule"),ConfiguratorAttributeRadioButtonModule.\u0275fac=__name(function(t){return new(t||ConfiguratorAttributeRadioButtonModule)},"ConfiguratorAttributeRadioButtonModule_Factory"),ConfiguratorAttributeRadioButtonModule.\u0275mod=core.oAB({type:ConfiguratorAttributeRadioButtonModule}),ConfiguratorAttributeRadioButtonModule.\u0275inj=core.cJS({imports:[common.ez,ConfiguratorAttributeQuantityModule,fesm2020_forms.u5,spartacus_core.LUR,spartacus_storefront.oPH,fesm2020_forms.UX,ConfiguratorPriceModule,ConfiguratorAttributeNumericInputFieldModule,ConfiguratorAttributeInputFieldModule]});class ConfiguratorAttributeReadOnlyComponent extends ConfiguratorAttributeBaseComponent{}__name(ConfiguratorAttributeReadOnlyComponent,"ConfiguratorAttributeReadOnlyComponent"),ConfiguratorAttributeReadOnlyComponent.\u0275fac=function(){let \u0275ConfiguratorAttributeReadOnlyComponent_BaseFactory;return __name(function(t){return(\u0275ConfiguratorAttributeReadOnlyComponent_BaseFactory||(\u0275ConfiguratorAttributeReadOnlyComponent_BaseFactory=core.n5z(ConfiguratorAttributeReadOnlyComponent)))(t||ConfiguratorAttributeReadOnlyComponent)},"ConfiguratorAttributeReadOnlyComponent_Factory")}(),ConfiguratorAttributeReadOnlyComponent.\u0275cmp=core.Xpm({type:ConfiguratorAttributeReadOnlyComponent,selectors:[["cx-configurator-attribute-read-only"]],inputs:{attribute:"attribute",group:"group",expMode:"expMode"},features:[core.qOj],decls:1,vars:1,consts:[[3,"id",4,"ngIf"],[3,"id"],[4,"ngIf","ngIfElse"],["noStaticDomain",""],[4,"ngFor","ngForOf"],["tabindex","0","class","cx-visually-hidden",3,"id",4,"ngIf"],["class","cx-read-only-label","aria-hidden","true",4,"ngIf"],["tabindex","0",1,"cx-visually-hidden",3,"id"],["aria-hidden","true",1,"cx-read-only-label"],["aria-hidden","true"],[4,"ngIf"]],template:__name(function(rf,ctx){1&rf&&core.YNc(0,ConfiguratorAttributeReadOnlyComponent_div_0_Template,4,3,"div",0),2&rf&&core.Q6J("ngIf",void 0!==ctx.attribute.values&&ctx.attribute.values.length>0)},"ConfiguratorAttributeReadOnlyComponent_Template"),dependencies:[common.sg,common.O5,spartacus_core.X$D],encapsulation:2,changeDetection:0});class ConfiguratorAttributeReadOnlyModule{}__name(ConfiguratorAttributeReadOnlyModule,"ConfiguratorAttributeReadOnlyModule"),ConfiguratorAttributeReadOnlyModule.\u0275fac=__name(function(t){return new(t||ConfiguratorAttributeReadOnlyModule)},"ConfiguratorAttributeReadOnlyModule_Factory"),ConfiguratorAttributeReadOnlyModule.\u0275mod=core.oAB({type:ConfiguratorAttributeReadOnlyModule}),ConfiguratorAttributeReadOnlyModule.\u0275inj=core.cJS({imports:[spartacus_storefront.oPH,fesm2020_forms.u5,fesm2020_forms.UX,common.ez,spartacus_core.LUR]});class ConfiguratorAttributeSingleSelectionBundleDropdownComponent extends ConfiguratorAttributeSingleSelectionBaseComponent{constructor(){super(...arguments),this.attributeDropDownForm=new fesm2020_forms.p4("")}ngOnInit(){this.attributeDropDownForm.setValue(this.attribute.selectedSingleValue);const values=this.attribute.values;if(values&&values.length>0){const selectedValue=values.find(value=>value.selected);selectedValue&&(this.selectionValue=selectedValue)}}extractProductCardParameters(){return{hideRemoveButton:!0,productBoundValue:this.selectionValue,singleDropdown:!0,withQuantity:!1,loading$:this.loading$,attributeId:this.getAttributeCode(this.attribute),attributeName:this.attribute.name,itemCount:0,itemIndex:0}}}__name(ConfiguratorAttributeSingleSelectionBundleDropdownComponent,"ConfiguratorAttributeSingleSelectionBundleDropdownComponent"),ConfiguratorAttributeSingleSelectionBundleDropdownComponent.\u0275fac=function(){let \u0275ConfiguratorAttributeSingleSelectionBundleDropdownComponent_BaseFactory;return __name(function(t){return(\u0275ConfiguratorAttributeSingleSelectionBundleDropdownComponent_BaseFactory||(\u0275ConfiguratorAttributeSingleSelectionBundleDropdownComponent_BaseFactory=core.n5z(ConfiguratorAttributeSingleSelectionBundleDropdownComponent)))(t||ConfiguratorAttributeSingleSelectionBundleDropdownComponent)},"ConfiguratorAttributeSingleSelectionBundleDropdownComponent_Factory")}(),ConfiguratorAttributeSingleSelectionBundleDropdownComponent.\u0275cmp=core.Xpm({type:ConfiguratorAttributeSingleSelectionBundleDropdownComponent,selectors:[["cx-configurator-attribute-single-selection-bundle-dropdown"]],inputs:{group:"group"},features:[core.qOj],decls:3,vars:3,consts:[["class","form-group",4,"ngIf"],[3,"id","productCardOptions","handleDeselect",4,"ngIf"],["class","cx-attribute-level-quantity-price",4,"ngIf"],[1,"form-group"],[1,"cx-visually-hidden",3,"for"],[1,"form-control",3,"id","formControl","cxFocus","change"],[3,"label","selected","value",4,"ngFor","ngForOf"],[3,"label","selected","value"],[3,"id","productCardOptions","handleDeselect"],[1,"cx-attribute-level-quantity-price"],[3,"quantityOptions","changeQuantity"],[3,"formula"]],template:__name(function(rf,ctx){1&rf&&(core.YNc(0,ConfiguratorAttributeSingleSelectionBundleDropdownComponent_div_0_Template,6,14,"div",0),core.YNc(1,ConfiguratorAttributeSingleSelectionBundleDropdownComponent_cx_configurator_attribute_product_card_1_Template,1,2,"cx-configurator-attribute-product-card",1),core.YNc(2,ConfiguratorAttributeSingleSelectionBundleDropdownComponent_div_2_Template,3,2,"div",2)),2&rf&&(core.Q6J("ngIf",null==ctx.attribute||null==ctx.attribute.values?null:ctx.attribute.values.length),core.xp6(1),core.Q6J("ngIf","0"!==(null==ctx.selectionValue?null:ctx.selectionValue.valueCode)),core.xp6(1),core.Q6J("ngIf",ctx.withQuantity))},"ConfiguratorAttributeSingleSelectionBundleDropdownComponent_Template"),dependencies:[common.sg,common.O5,ConfiguratorAttributeProductCardComponent,fesm2020_forms.YN,fesm2020_forms.Kr,fesm2020_forms.EJ,fesm2020_forms.JJ,spartacus_storefront.RRe,fesm2020_forms.oH,ConfiguratorAttributeQuantityComponent,ConfiguratorPriceComponent,spartacus_core.X$D],encapsulation:2,changeDetection:0});class ConfiguratorAttributeSingleSelectionBundleDropdownModule{}__name(ConfiguratorAttributeSingleSelectionBundleDropdownModule,"ConfiguratorAttributeSingleSelectionBundleDropdownModule"),ConfiguratorAttributeSingleSelectionBundleDropdownModule.\u0275fac=__name(function(t){return new(t||ConfiguratorAttributeSingleSelectionBundleDropdownModule)},"ConfiguratorAttributeSingleSelectionBundleDropdownModule_Factory"),ConfiguratorAttributeSingleSelectionBundleDropdownModule.\u0275mod=core.oAB({type:ConfiguratorAttributeSingleSelectionBundleDropdownModule}),ConfiguratorAttributeSingleSelectionBundleDropdownModule.\u0275inj=core.cJS({imports:[common.ez,ConfiguratorAttributeProductCardModule,fesm2020_forms.u5,spartacus_core.LUR,spartacus_storefront.oPH,ng_select_ng_select.A0,fesm2020_forms.UX,ConfiguratorAttributeQuantityModule,ConfiguratorPriceModule]});class ConfiguratorAttributeSingleSelectionBundleComponent extends ConfiguratorAttributeSingleSelectionBaseComponent{extractProductCardParameters(value,index){return{hideRemoveButton:this.attribute.required,fallbackFocusId:this.getFocusIdOfNearestValue(value),productBoundValue:value,loading$:this.loading$,attributeId:this.getAttributeCode(this.attribute),attributeLabel:this.attribute.label,attributeName:this.attribute.name,itemCount:this.attribute.values?.length?this.attribute.values.length:0,itemIndex:index}}getFocusIdOfNearestValue(currentValue){if(!this.attribute.values)return"n/a";let prevIdx=this.attribute.values.findIndex(value=>value.valueCode===currentValue.valueCode);return prevIdx--,prevIdx<0&&(prevIdx=this.attribute.values.length>1?1:0),this.createFocusId(this.getAttributeCode(this.attribute).toString(),this.attribute.values[prevIdx].valueCode)}}__name(ConfiguratorAttributeSingleSelectionBundleComponent,"ConfiguratorAttributeSingleSelectionBundleComponent"),ConfiguratorAttributeSingleSelectionBundleComponent.\u0275fac=function(){let \u0275ConfiguratorAttributeSingleSelectionBundleComponent_BaseFactory;return __name(function(t){return(\u0275ConfiguratorAttributeSingleSelectionBundleComponent_BaseFactory||(\u0275ConfiguratorAttributeSingleSelectionBundleComponent_BaseFactory=core.n5z(ConfiguratorAttributeSingleSelectionBundleComponent)))(t||ConfiguratorAttributeSingleSelectionBundleComponent)},"ConfiguratorAttributeSingleSelectionBundleComponent_Factory")}(),ConfiguratorAttributeSingleSelectionBundleComponent.\u0275cmp=core.Xpm({type:ConfiguratorAttributeSingleSelectionBundleComponent,selectors:[["cx-configurator-attribute-single-selection-bundle"]],features:[core.qOj],decls:1,vars:1,consts:[[3,"id",4,"ngIf"],[3,"id"],["class","cx-attribute-level-quantity-price",4,"ngIf"],[3,"id","productCardOptions","handleDeselect","handleSelect",4,"ngFor","ngForOf"],[1,"cx-attribute-level-quantity-price"],[3,"quantityOptions","changeQuantity"],[3,"formula"],[3,"id","productCardOptions","handleDeselect","handleSelect"]],template:__name(function(rf,ctx){1&rf&&core.YNc(0,ConfiguratorAttributeSingleSelectionBundleComponent_div_0_Template,3,3,"div",0),2&rf&&core.Q6J("ngIf",null==ctx.attribute||null==ctx.attribute.values?null:ctx.attribute.values.length)},"ConfiguratorAttributeSingleSelectionBundleComponent_Template"),dependencies:[common.sg,common.O5,ConfiguratorAttributeProductCardComponent,ConfiguratorAttributeQuantityComponent,ConfiguratorPriceComponent],encapsulation:2,changeDetection:0});class ConfiguratorAttributeSingleSelectionBundleModule{}__name(ConfiguratorAttributeSingleSelectionBundleModule,"ConfiguratorAttributeSingleSelectionBundleModule"),ConfiguratorAttributeSingleSelectionBundleModule.\u0275fac=__name(function(t){return new(t||ConfiguratorAttributeSingleSelectionBundleModule)},"ConfiguratorAttributeSingleSelectionBundleModule_Factory"),ConfiguratorAttributeSingleSelectionBundleModule.\u0275mod=core.oAB({type:ConfiguratorAttributeSingleSelectionBundleModule}),ConfiguratorAttributeSingleSelectionBundleModule.\u0275inj=core.cJS({imports:[common.ez,ConfiguratorAttributeProductCardModule,ConfiguratorAttributeQuantityModule,fesm2020_forms.u5,spartacus_core.LUR,spartacus_storefront.Td$,spartacus_storefront.oPH,fesm2020_forms.UX,router.Bz,spartacus_core.bhT,ConfiguratorPriceModule]});class ConfiguratorAttributeSingleSelectionImageComponent extends ConfiguratorAttributeBaseComponent{constructor(){super(...arguments),this.attributeRadioButtonForm=new fesm2020_forms.p4(""),this.selectionChange=new core.vpe}ngOnInit(){this.attributeRadioButtonForm.setValue(this.attribute.selectedSingleValue)}onClick(value){const event={ownerKey:this.ownerKey,changedAttribute:{...this.attribute,selectedSingleValue:value}};this.selectionChange.emit(event)}extractValuePriceFormulaParameters(value){if(value)return{price:value.valuePrice,isLightedUp:value.selected}}}__name(ConfiguratorAttributeSingleSelectionImageComponent,"ConfiguratorAttributeSingleSelectionImageComponent"),ConfiguratorAttributeSingleSelectionImageComponent.\u0275fac=function(){let \u0275ConfiguratorAttributeSingleSelectionImageComponent_BaseFactory;return __name(function(t){return(\u0275ConfiguratorAttributeSingleSelectionImageComponent_BaseFactory||(\u0275ConfiguratorAttributeSingleSelectionImageComponent_BaseFactory=core.n5z(ConfiguratorAttributeSingleSelectionImageComponent)))(t||ConfiguratorAttributeSingleSelectionImageComponent)},"ConfiguratorAttributeSingleSelectionImageComponent_Factory")}(),ConfiguratorAttributeSingleSelectionImageComponent.\u0275cmp=core.Xpm({type:ConfiguratorAttributeSingleSelectionImageComponent,selectors:[["cx-configurator-attribute-single-selection-image"]],inputs:{attribute:"attribute",ownerKey:"ownerKey",expMode:"expMode"},outputs:{selectionChange:"selectionChange"},features:[core.qOj],decls:2,vars:2,consts:[["role","radiogroup",1,"cx-row",3,"id"],["class","cx-configurator-select",3,"id",4,"ngFor","ngForOf"],[1,"cx-configurator-select",3,"id"],["type","radio","formcontrolname","attributeRadioButtonForm","role","radio",1,"form-input",3,"id","value","formControl","name","cxFocus","click"],[1,"cx-label-container"],["aria-hidden","true",1,"form-check-label","form-radio-label",3,"id","for"],["class","cx-img",3,"src","alt",4,"ngIf"],["class","cx-img-dummy",4,"ngIf"],[3,"formula"],[1,"cx-img",3,"src","alt"],[1,"cx-img-dummy"]],template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"div",0),core.YNc(1,ConfiguratorAttributeSingleSelectionImageComponent_div_1_Template,10,34,"div",1),core.qZA()),2&rf&&(core.s9C("id",ctx.createAttributeIdForConfigurator(ctx.attribute)),core.xp6(1),core.Q6J("ngForOf",ctx.attribute.values))},"ConfiguratorAttributeSingleSelectionImageComponent_Template"),dependencies:[spartacus_storefront.RRe,fesm2020_forms.Fj,fesm2020_forms._,fesm2020_forms.JJ,fesm2020_forms.Q7,fesm2020_forms.oH,common.sg,common.O5,ConfiguratorPriceComponent,spartacus_core.X$D],encapsulation:2,changeDetection:0});class ConfiguratorAttributeSingleSelectionImageModule{}__name(ConfiguratorAttributeSingleSelectionImageModule,"ConfiguratorAttributeSingleSelectionImageModule"),ConfiguratorAttributeSingleSelectionImageModule.\u0275fac=__name(function(t){return new(t||ConfiguratorAttributeSingleSelectionImageModule)},"ConfiguratorAttributeSingleSelectionImageModule_Factory"),ConfiguratorAttributeSingleSelectionImageModule.\u0275mod=core.oAB({type:ConfiguratorAttributeSingleSelectionImageModule}),ConfiguratorAttributeSingleSelectionImageModule.\u0275inj=core.cJS({imports:[spartacus_storefront.oPH,fesm2020_forms.u5,fesm2020_forms.UX,common.ez,spartacus_core.LUR,ConfiguratorPriceModule]});class ConfiguratorMessageConfig{}__name(ConfiguratorMessageConfig,"ConfiguratorMessageConfig");class ConfiguratorConflictDescriptionComponent{constructor(){this.groupType=Configurator.GroupType,this.iconTypes=spartacus_storefront.e1G,this.tabindex="0"}displayConflictDescription(group){return group.groupType===Configurator.GroupType.CONFLICT_GROUP}}__name(ConfiguratorConflictDescriptionComponent,"ConfiguratorConflictDescriptionComponent"),ConfiguratorConflictDescriptionComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorConflictDescriptionComponent)},"ConfiguratorConflictDescriptionComponent_Factory"),ConfiguratorConflictDescriptionComponent.\u0275cmp=core.Xpm({type:ConfiguratorConflictDescriptionComponent,selectors:[["cx-configurator-conflict-description"]],hostVars:1,hostBindings:__name(function(rf,ctx){2&rf&&core.Ikx("tabindex",ctx.tabindex)},"ConfiguratorConflictDescriptionComponent_HostBindings"),inputs:{currentGroup:"currentGroup"},decls:1,vars:1,consts:[[4,"ngIf"],["aria-hidden","true",3,"type"]],template:__name(function(rf,ctx){1&rf&&core.YNc(0,ConfiguratorConflictDescriptionComponent_ng_container_0_Template,3,2,"ng-container",0),2&rf&&core.Q6J("ngIf",ctx.displayConflictDescription(ctx.currentGroup))},"ConfiguratorConflictDescriptionComponent_Template"),dependencies:[common.O5,spartacus_storefront.oJW],encapsulation:2,changeDetection:0});class ConfiguratorConflictDescriptionModule{}__name(ConfiguratorConflictDescriptionModule,"ConfiguratorConflictDescriptionModule"),ConfiguratorConflictDescriptionModule.\u0275fac=__name(function(t){return new(t||ConfiguratorConflictDescriptionModule)},"ConfiguratorConflictDescriptionModule_Factory"),ConfiguratorConflictDescriptionModule.\u0275mod=core.oAB({type:ConfiguratorConflictDescriptionModule}),ConfiguratorConflictDescriptionModule.\u0275inj=core.cJS({imports:[common.ez,spartacus_storefront.QX1]});class ConfiguratorConflictSuggestionComponent{constructor(){this.groupType=Configurator.GroupType,this.tabindex="0"}displayConflictSuggestion(group){return!(group.groupType!==Configurator.GroupType.CONFLICT_GROUP||!group.attributes)&&group.attributes?.length>1}createSuggestionUiKey(){return"suggestion--"+this.suggestionNumber}}__name(ConfiguratorConflictSuggestionComponent,"ConfiguratorConflictSuggestionComponent"),ConfiguratorConflictSuggestionComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorConflictSuggestionComponent)},"ConfiguratorConflictSuggestionComponent_Factory"),ConfiguratorConflictSuggestionComponent.\u0275cmp=core.Xpm({type:ConfiguratorConflictSuggestionComponent,selectors:[["cx-configurator-conflict-suggestion"]],hostVars:1,hostBindings:__name(function(rf,ctx){2&rf&&core.Ikx("tabindex",ctx.tabindex)},"ConfiguratorConflictSuggestionComponent_HostBindings"),inputs:{currentGroup:"currentGroup",attribute:"attribute",suggestionNumber:"suggestionNumber"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"cx-title"],["aria-hidden","true"]],template:__name(function(rf,ctx){1&rf&&core.YNc(0,ConfiguratorConflictSuggestionComponent_ng_container_0_Template,10,23,"ng-container",0),2&rf&&core.Q6J("ngIf",ctx.displayConflictSuggestion(ctx.currentGroup))},"ConfiguratorConflictSuggestionComponent_Template"),dependencies:[common.O5,spartacus_core.X$D],encapsulation:2,changeDetection:0});class ConfiguratorConflictSuggestionModule{}__name(ConfiguratorConflictSuggestionModule,"ConfiguratorConflictSuggestionModule"),ConfiguratorConflictSuggestionModule.\u0275fac=__name(function(t){return new(t||ConfiguratorConflictSuggestionModule)},"ConfiguratorConflictSuggestionModule_Factory"),ConfiguratorConflictSuggestionModule.\u0275mod=core.oAB({type:ConfiguratorConflictSuggestionModule}),ConfiguratorConflictSuggestionModule.\u0275inj=core.cJS({imports:[common.ez,spartacus_core.LUR]});class ConfiguratorFormComponent{constructor(configuratorCommonsService,configuratorGroupsService,configRouterExtractorService,languageService,configUtils,configExpertModeService){this.configuratorCommonsService=configuratorCommonsService,this.configuratorGroupsService=configuratorGroupsService,this.configRouterExtractorService=configRouterExtractorService,this.languageService=languageService,this.configUtils=configUtils,this.configExpertModeService=configExpertModeService,this.subscriptions=new Subscription.w,this.configuration$=this.configRouterExtractorService.extractRouterData().pipe((0,filter.h)(routerData=>routerData.pageType===spartacus_product_configurator_common.iB.PageType.CONFIGURATION),(0,switchMap.w)(routerData=>this.configuratorCommonsService.getOrCreateConfiguration(routerData.owner))),this.currentGroup$=this.configRouterExtractorService.extractRouterData().pipe((0,switchMap.w)(routerData=>this.configuratorGroupsService.getCurrentGroup(routerData.owner))),this.activeLanguage$=this.languageService.getActive(),this.uiType=Configurator.UiType}ngOnInit(){this.configRouterExtractorService.extractRouterData().pipe((0,take.q)(1)).subscribe(routingData=>{routingData.resolveIssues&&this.configuratorCommonsService.hasConflicts(routingData.owner).pipe((0,take.q)(1)).subscribe(hasConflicts=>{hasConflicts&&!routingData.skipConflicts?this.configuratorGroupsService.navigateToConflictSolver(routingData.owner):this.configuratorGroupsService.navigateToFirstIncompleteGroup(routingData.owner)}),routingData.expMode&&this.configExpertModeService?.setExpModeRequested(routingData.expMode)})}updateConfiguration(event){this.configuratorCommonsService.updateConfiguration(event.ownerKey,event.changedAttribute,event.updateType)}isConflictGroupType(groupType){return this.configuratorGroupsService.isConflictGroupType(groupType)}createGroupId(groupId){return this.configUtils.createGroupId(groupId)}get expMode(){return this.configExpertModeService?.getExpModeActive()}}__name(ConfiguratorFormComponent,"ConfiguratorFormComponent"),ConfiguratorFormComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorFormComponent)(core.Y36(ConfiguratorCommonsService),core.Y36(ConfiguratorGroupsService),core.Y36(spartacus_product_configurator_common.u6),core.Y36(spartacus_core.TSl),core.Y36(ConfiguratorStorefrontUtilsService),core.Y36(ConfiguratorExpertModeService,8))},"ConfiguratorFormComponent_Factory"),ConfiguratorFormComponent.\u0275cmp=core.Xpm({type:ConfiguratorFormComponent,selectors:[["cx-configurator-form"]],decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["ghostForm",""],[4,"ngIf"],["role","tabpanel",3,"id"],["class","cx-group-attribute",3,"cx-hidden",4,"ngFor","ngForOf"],[3,"currentGroup"],[1,"cx-group-attribute"],[3,"attribute","owner","groupId","groupType","expMode"],[3,"attribute","ownerKey","ownerType","language","expMode","selectionChange",4,"ngIf"],[3,"attribute","ownerKey","selectionChange",4,"ngIf"],[3,"attribute","group","ownerKey","selectionChange",4,"ngIf"],[3,"attribute","group","ownerKey","ownerType","language","expMode","selectionChange",4,"ngIf"],[3,"attribute","group","ownerType","ownerKey","inputChange",4,"ngIf"],[3,"attribute","group","ownerType","ownerKey","language","inputChange",4,"ngIf"],[3,"attribute","group","ownerKey","expMode","selectionChange",4,"ngIf"],[3,"attribute","group","expMode",4,"ngIf"],[3,"attribute","ownerKey","expMode","selectionChange",4,"ngIf"],[3,"attribute","owner","groupId"],[3,"currentGroup","attribute","suggestionNumber"],[3,"attribute","ownerKey","ownerType","language","expMode","selectionChange"],[3,"attribute","ownerKey","selectionChange"],[3,"attribute","group","ownerKey","selectionChange"],[3,"attribute","group","ownerKey","ownerType","language","expMode","selectionChange"],[3,"attribute","group","ownerType","ownerKey","inputChange"],[3,"attribute","group","ownerType","ownerKey","language","inputChange"],[3,"attribute","group","ownerKey","expMode","selectionChange"],[3,"attribute","group","expMode"],[3,"attribute","ownerKey","expMode","selectionChange"],[4,"ngFor","ngForOf"],[1,"cx-ghost-attribute"],[1,"cx-ghost-header"],[1,"cx-ghost-title","ghost"],[1,"cx-ghost-icon","ghost"],[1,"cx-ghost-body"],[1,"cx-ghost-text","ghost"],[1,"cx-ghost-price","ghost"],[1,"cx-ghost-description-box"],[1,"cx-ghost-description","ghost"],["class","cx-ghost-radiobutton-value",4,"ngFor","ngForOf"],[1,"cx-ghost-radiobutton-value"],[1,"cx-ghost-value-label-pair"],[1,"cx-ghost-value-icon","ghost"],[1,"cx-ghost-label","ghost"],[1,"cx-ghost-value-price","ghost"],[1,"cx-ghost-price"]],template:__name(function(rf,ctx){if(1&rf&&(core.YNc(0,ConfiguratorFormComponent_ng_container_0_Template,3,3,"ng-container",0),core.ALo(1,"async"),core.YNc(2,ConfiguratorFormComponent_ng_template_2_Template,1,2,"ng-template",null,1,core.W1O)),2&rf){const _r1=core.MAs(3);core.Q6J("ngIf",core.lcZ(1,2,ctx.configuration$))("ngIfElse",_r1)}},"ConfiguratorFormComponent_Template"),dependencies:[common.sg,common.O5,ConfiguratorAttributeInputFieldComponent,ConfiguratorAttributeFooterComponent,ConfiguratorAttributeNumericInputFieldComponent,ConfiguratorAttributeHeaderComponent,ConfiguratorAttributeRadioButtonComponent,ConfiguratorAttributeSingleSelectionBundleComponent,ConfiguratorAttributeMultiSelectionBundleComponent,ConfiguratorAttributeReadOnlyComponent,ConfiguratorAttributeSingleSelectionImageComponent,ConfiguratorAttributeSingleSelectionBundleDropdownComponent,ConfiguratorAttributeCheckBoxComponent,ConfiguratorAttributeCheckBoxListComponent,ConfiguratorAttributeDropDownComponent,ConfiguratorAttributeMultiSelectionImageComponent,ConfiguratorConflictDescriptionComponent,ConfiguratorConflictSuggestionComponent,common.Ov,spartacus_core.X$D],encapsulation:2,changeDetection:0});__name(class ConfigFormUpdateEvent{},"ConfigFormUpdateEvent");class ConfiguratorFormModule{}__name(ConfiguratorFormModule,"ConfiguratorFormModule"),ConfiguratorFormModule.\u0275fac=__name(function(t){return new(t||ConfiguratorFormModule)},"ConfiguratorFormModule_Factory"),ConfiguratorFormModule.\u0275mod=core.oAB({type:ConfiguratorFormModule}),ConfiguratorFormModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)({cmsComponents:{ConfiguratorForm:{component:ConfiguratorFormComponent}}})],imports:[fesm2020_forms.u5,fesm2020_forms.UX,common.ez,spartacus_core.LUR,ng_select_ng_select.A0,ConfiguratorAttributeInputFieldModule,ConfiguratorAttributeFooterModule,ConfiguratorAttributeNumericInputFieldModule,ConfiguratorAttributeHeaderModule,ConfiguratorAttributeRadioButtonModule,ConfiguratorAttributeSingleSelectionBundleModule,ConfiguratorAttributeMultiSelectionBundleModule,ConfiguratorAttributeReadOnlyModule,ConfiguratorAttributeSingleSelectionImageModule,ConfiguratorAttributeSingleSelectionBundleDropdownModule,ConfiguratorAttributeCheckboxModule,ConfiguratorAttributeCheckboxListModule,ConfiguratorAttributeDropDownModule,ConfiguratorAttributeMultiSelectionImageModule,ConfiguratorConflictDescriptionModule,ConfiguratorConflictSuggestionModule]});class ConfiguratorGroupMenuService{constructor(windowRef){this.windowRef=windowRef}getFocusedGroupIndex(groups){if(groups){const group=groups.find(groupHTMLEl=>groupHTMLEl.nativeElement?.id===this.windowRef?.document?.activeElement?.id);if(group)return groups.toArray().indexOf(group)}}updateCurrentGroupIndex(currentGroupIndex,focusedGroupIndex){return focusedGroupIndex&&focusedGroupIndex!==currentGroupIndex?focusedGroupIndex:currentGroupIndex}focusNextGroup(currentGroupIndex,groups){const focusedGroupIndex=this.getFocusedGroupIndex(groups);currentGroupIndex=this.updateCurrentGroupIndex(currentGroupIndex,focusedGroupIndex),groups&&(currentGroupIndex===groups.length-1?groups.first?.nativeElement?.focus():groups.toArray()[currentGroupIndex+1]?.nativeElement.focus())}focusPreviousGroup(currentGroupIndex,groups){const focusedGroupIndex=this.getFocusedGroupIndex(groups);currentGroupIndex=this.updateCurrentGroupIndex(currentGroupIndex,focusedGroupIndex),groups&&(0===currentGroupIndex?groups.last?.nativeElement?.focus():groups.toArray()[currentGroupIndex-1]?.nativeElement?.focus())}switchGroupOnArrowPress(event,groupIndex,groups){event.preventDefault(),"ArrowUp"===event.code?this.focusPreviousGroup(groupIndex,groups):"ArrowDown"===event.code&&this.focusNextGroup(groupIndex,groups)}isBackBtnFocused(groups){if(groups)return-1!==groups.first?.nativeElement?.classList?.value?.indexOf("cx-menu-back")&&this.windowRef?.document?.activeElement===groups.first?.nativeElement}}__name(ConfiguratorGroupMenuService,"ConfiguratorGroupMenuService"),ConfiguratorGroupMenuService.\u0275fac=__name(function(t){return new(t||ConfiguratorGroupMenuService)(core.LFG(spartacus_core.X9E))},"ConfiguratorGroupMenuService_Factory"),ConfiguratorGroupMenuService.\u0275prov=core.Yz7({token:ConfiguratorGroupMenuService,factory:ConfiguratorGroupMenuService.\u0275fac,providedIn:"root"});class ConfiguratorGroupMenuComponent{constructor(configCommonsService,configuratorGroupsService,hamburgerMenuService,configRouterExtractorService,configUtils,configGroupMenuService,directionService,translation,configExpertModeService){this.configCommonsService=configCommonsService,this.configuratorGroupsService=configuratorGroupsService,this.hamburgerMenuService=hamburgerMenuService,this.configRouterExtractorService=configRouterExtractorService,this.configUtils=configUtils,this.configGroupMenuService=configGroupMenuService,this.directionService=directionService,this.translation=translation,this.configExpertModeService=configExpertModeService,this.routerData$=this.configRouterExtractorService.extractRouterData(),this.configuration$=this.routerData$.pipe((0,switchMap.w)(routerData=>this.configCommonsService.getConfiguration(routerData.owner).pipe((0,map.U)(configuration=>({routerData,configuration})),(0,filter.h)(cont=>cont.configuration.complete&&cont.configuration.consistent||cont.configuration.interactionState.issueNavigationDone||!cont.routerData.resolveIssues)).pipe((0,map.U)(cont=>cont.configuration)))),this.currentGroup$=this.routerData$.pipe((0,switchMap.w)(routerData=>this.configuratorGroupsService.getCurrentGroup(routerData.owner))),this.displayedParentGroup$=this.configuration$.pipe((0,switchMap.w)(configuration=>this.configuratorGroupsService.getMenuParentGroup(configuration.owner)),(0,switchMap.w)(parentGroup=>parentGroup?this.getCondensedParentGroup(parentGroup):(0,of.of)(parentGroup))),this.displayedGroups$=this.displayedParentGroup$.pipe((0,switchMap.w)(parentGroup=>this.configuration$.pipe((0,map.U)(configuration=>parentGroup?this.condenseGroups(parentGroup.subGroups):this.condenseGroups(configuration.groups))))),this.iconTypes=spartacus_storefront.e1G,this.ERROR=" ERROR",this.COMPLETE=" COMPLETE",this.WARNING=" WARNING",this.ICON="ICON"}click(group){this.configuration$.pipe((0,take.q)(1)).subscribe(configuration=>{configuration.interactionState.currentGroup!==group.id&&(this.configuratorGroupsService.hasSubGroups(group)?this.configuratorGroupsService.setMenuParentGroup(configuration.owner,group.id):(this.configuratorGroupsService.navigateToGroup(configuration,group.id),this.hamburgerMenuService.toggle(!0),this.configUtils.scrollToConfigurationElement(".VariantConfigurationTemplate, .CpqConfigurationTemplate")))})}navigateUp(){this.displayedParentGroup$.pipe((0,take.q)(1)).subscribe(displayedParentGroup=>{if(displayedParentGroup){const grandParentGroup$=this.getParentGroup(displayedParentGroup);this.configuration$.pipe((0,take.q)(1)).subscribe(configuration=>{grandParentGroup$.pipe((0,take.q)(1)).subscribe(grandParentGroup=>{this.configuratorGroupsService.setMenuParentGroup(configuration.owner,grandParentGroup?grandParentGroup.id:void 0)})})}})}getConflictNumber(group){return group&&group.groupType===Configurator.GroupType.CONFLICT_HEADER_GROUP?"("+group.subGroups.length+")":""}hasSubGroups(group){return this.configuratorGroupsService.hasSubGroups(group)}getParentGroup(group){return this.configuration$.pipe((0,map.U)(configuration=>this.configuratorGroupsService.getParentGroup(configuration.groups,group)))}getCondensedParentGroup(parentGroup){return parentGroup&&parentGroup.subGroups&&1===parentGroup.subGroups.length&&parentGroup.groupType!==Configurator.GroupType.CONFLICT_HEADER_GROUP?this.getParentGroup(parentGroup).pipe((0,switchMap.w)(group=>group?this.getCondensedParentGroup(group):(0,of.of)(group))):(0,of.of)(parentGroup)}condenseGroups(groups){return groups.flatMap(group=>1===group.subGroups.length&&group.groupType!==Configurator.GroupType.CONFLICT_HEADER_GROUP?this.condenseGroups(group.subGroups):group)}isGroupVisited(group,configuration){return this.configuratorGroupsService.isGroupVisited(configuration.owner,group.id).pipe((0,map.U)(isVisited=>isVisited&&!this.isConflictGroupType(group.groupType??Configurator.GroupType.ATTRIBUTE_GROUP)),(0,take.q)(1))}isConflictGroupType(groupType){return this.configuratorGroupsService.isConflictGroupType(groupType)}isConflictHeader(group){return group&&group.groupType===Configurator.GroupType.CONFLICT_HEADER_GROUP}isConflictGroup(group){return group&&group.groupType===Configurator.GroupType.CONFLICT_GROUP}getGroupStatusStyles(group,configuration){return this.isGroupVisited(group,configuration).pipe((0,map.U)(isVisited=>{let groupStatusStyle="cx-menu-item";return"CLOUDCPQCONFIGURATOR"!==configuration.owner.configuratorType&&!group.consistent&&(groupStatusStyle+=this.WARNING),"CLOUDCPQCONFIGURATOR"!==configuration.owner.configuratorType&&group.complete&&group.consistent&&isVisited&&(groupStatusStyle+=this.COMPLETE),!group.complete&&isVisited&&(groupStatusStyle+=this.ERROR),groupStatusStyle}))}isLTRDirection(){return this.directionService.getDirection()===spartacus_storefront.uEG.LTR}isRTLDirection(){return this.directionService.getDirection()===spartacus_storefront.uEG.RTL}isForwardsNavigation(event){return"ArrowRight"===event.code&&this.isLTRDirection()||"ArrowLeft"===event.code&&this.isRTLDirection()}isBackNavigation(event){return"ArrowLeft"===event.code&&this.isLTRDirection()||"ArrowRight"===event.code&&this.isRTLDirection()}switchGroupOnArrowPress(event,groupIndex,targetGroup,currentGroup){"ArrowUp"===event.code||"ArrowDown"===event.code?this.configGroupMenuService.switchGroupOnArrowPress(event,groupIndex,this.groups):this.isForwardsNavigation(event)?targetGroup&&this.hasSubGroups(targetGroup)&&(this.click(targetGroup),this.setFocusForSubGroup(targetGroup,currentGroup.id)):this.isBackNavigation(event)&&this.configGroupMenuService.isBackBtnFocused(this.groups)&&(this.navigateUp(),this.setFocusForMainMenu(currentGroup.id))}setFocusForMainMenu(currentGroupId){let key=currentGroupId;this.configuration$.pipe((0,take.q)(1)).subscribe(configuration=>{configuration.groups?.forEach(group=>{1!==group.subGroups?.length&&(this.isGroupSelected(group.id,currentGroupId)||this.containsSelectedGroup(group,currentGroupId))&&(key=group.id)})}),this.configUtils.setFocus(key)}setFocusForSubGroup(group,currentGroupId){let key="cx-menu-back";this.containsSelectedGroup(group,currentGroupId)&&(key=currentGroupId),this.configUtils.setFocus(key)}containsSelectedGroup(group,currentGroupId){let isCurrentGroupFound=!1;return group.subGroups?.forEach(subGroup=>{this.isGroupSelected(subGroup.id,currentGroupId)&&(isCurrentGroupFound=!0)}),isCurrentGroupFound}getTabIndex(group,currentGroupId){return this.isGroupSelected(group.id,currentGroupId)||this.containsSelectedGroup(group,currentGroupId)?0:-1}isGroupSelected(groupId,currentGroupId){return groupId===currentGroupId}createAriaControls(groupId){return this.configUtils.createGroupId(groupId)}getAriaLabel(group){let translatedText="";return group&&group.groupType&&this.isConflictGroupType(group.groupType)?this.isConflictHeader(group)?this.translation.translate("configurator.a11y.conflictsInConfiguration",{numberOfConflicts:this.getConflictNumber(group)}).pipe((0,take.q)(1)).subscribe(text=>translatedText=text):translatedText=group.description?group.description:"":this.translation.translate("configurator.a11y.groupName",{group:group.description}).pipe((0,take.q)(1)).subscribe(text=>translatedText=text),translatedText}createIconId(type,groupId){return this.ICON+type+groupId}getAriaDescribedby(group,configuration){return this.isGroupVisited(group,configuration).pipe((0,map.U)(isVisited=>{let ariaDescribedby="";return"CLOUDCPQCONFIGURATOR"!==configuration.owner.configuratorType&&!group.consistent&&group.groupType&&!this.isConflictGroupType(group.groupType)&&(ariaDescribedby+=this.createIconId(spartacus_storefront.e1G.WARNING,group.id)),"CLOUDCPQCONFIGURATOR"!==configuration.owner.configuratorType&&group.complete&&group.consistent&&isVisited&&(ariaDescribedby=ariaDescribedby+" "+this.createIconId(spartacus_storefront.e1G.SUCCESS,group.id)),!group.complete&&isVisited&&(ariaDescribedby=ariaDescribedby+" "+this.createIconId(spartacus_storefront.e1G.ERROR,group.id)),this.hasSubGroups(group)&&(ariaDescribedby=ariaDescribedby+" "+this.createIconId(spartacus_storefront.e1G.CARET_RIGHT,group.id)),ariaDescribedby+=" inListOfGroups",ariaDescribedby}))}getGroupMenuTitle(group){let title=group.description;return!this.isConflictHeader(group)&&!this.isConflictGroup(group)&&this.configExpertModeService?.getExpModeActive().pipe((0,take.q)(1)).subscribe(expMode=>{expMode&&(title+=" / ["+group.name+"]")}),title}}__name(ConfiguratorGroupMenuComponent,"ConfiguratorGroupMenuComponent"),ConfiguratorGroupMenuComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorGroupMenuComponent)(core.Y36(ConfiguratorCommonsService),core.Y36(ConfiguratorGroupsService),core.Y36(spartacus_storefront.O2g),core.Y36(spartacus_product_configurator_common.u6),core.Y36(ConfiguratorStorefrontUtilsService),core.Y36(ConfiguratorGroupMenuService),core.Y36(spartacus_storefront.Lh6),core.Y36(spartacus_core.D7D),core.Y36(ConfiguratorExpertModeService,8))},"ConfiguratorGroupMenuComponent_Factory"),ConfiguratorGroupMenuComponent.\u0275cmp=core.Xpm({type:ConfiguratorGroupMenuComponent,selectors:[["cx-configurator-group-menu"]],viewQuery:__name(function(rf,ctx){if(1&rf&&core.Gf(_c11,5),2&rf){let _t;core.iGM(_t=core.CRH())&&(ctx.groups=_t)}},"ConfiguratorGroupMenuComponent_Query"),decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["ghostGroups",""],["role","tablist",1,"cx-group-menu"],["id","listOfGroups",1,"cx-visually-hidden"],["id","inListOfGroups","aria-hidden","true",1,"cx-visually-hidden"],[4,"ngIf"],[4,"ngFor","ngForOf"],["role","tab",3,"id","ngClass","cxFocus","tabindex","click","keydown"],["groupItem",""],[3,"title"],[1,"groupIndicators"],[1,"conflictNumberIndicator"],[1,"groupStatusIndicator"],[1,"WARNING",3,"type","id"],[1,"ERROR",3,"type","id"],[1,"COMPLETE",3,"type","id"],[1,"subGroupIndicator"],[3,"type","id",4,"ngIf"],["class","cx-menu-back","role","tab","aria-describedby","listOfGroups",3,"cxFocus","click","keydown",4,"ngIf"],["role","tab","aria-describedby","listOfGroups",1,"cx-menu-back",3,"cxFocus","click","keydown"],[3,"type"],[3,"type","id"],[1,"cx-ghost-group-menu"],["class","cx-ghost-menu-item",4,"ngFor","ngForOf"],[1,"cx-ghost-menu-item"],[1,"cx-ghost-item-title","ghost"]],template:__name(function(rf,ctx){if(1&rf&&(core.YNc(0,ConfiguratorGroupMenuComponent_ng_container_0_Template,10,9,"ng-container",0),core.ALo(1,"async"),core.YNc(2,ConfiguratorGroupMenuComponent_ng_template_2_Template,2,2,"ng-template",null,1,core.W1O)),2&rf){const _r1=core.MAs(3);core.Q6J("ngIf",core.lcZ(1,2,ctx.configuration$))("ngIfElse",_r1)}},"ConfiguratorGroupMenuComponent_Template"),dependencies:[common.mk,common.sg,common.O5,spartacus_storefront.oJW,spartacus_storefront.RRe,common.Ov,spartacus_core.X$D],encapsulation:2,changeDetection:0});class ConfiguratorGroupMenuModule{}__name(ConfiguratorGroupMenuModule,"ConfiguratorGroupMenuModule"),ConfiguratorGroupMenuModule.\u0275fac=__name(function(t){return new(t||ConfiguratorGroupMenuModule)},"ConfiguratorGroupMenuModule_Factory"),ConfiguratorGroupMenuModule.\u0275mod=core.oAB({type:ConfiguratorGroupMenuModule}),ConfiguratorGroupMenuModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)({cmsComponents:{ConfiguratorMenu:{component:ConfiguratorGroupMenuComponent}}})],imports:[common.ez,spartacus_core.LUR,spartacus_storefront.QX1,spartacus_storefront.oPH]});class ConfiguratorGroupTitleComponent{constructor(configuratorCommonsService,configuratorGroupsService,configRouterExtractorService,configExpertModeService){this.configuratorCommonsService=configuratorCommonsService,this.configuratorGroupsService=configuratorGroupsService,this.configRouterExtractorService=configRouterExtractorService,this.configExpertModeService=configExpertModeService,this.ghostStyle=!0,this.displayedGroup$=this.configRouterExtractorService.extractRouterData().pipe((0,switchMap.w)(routerData=>this.configuratorGroupsService.getCurrentGroup(routerData.owner).pipe((0,tap.b)(()=>{this.ghostStyle=!1})))),this.iconTypes=spartacus_storefront.e1G}getGroupTitle(group){let title=group.description;return group.groupType!==Configurator.GroupType.CONFLICT_GROUP&&this.configExpertModeService?.getExpModeActive().pipe((0,take.q)(1)).subscribe(expMode=>{expMode&&(title+=" / ["+group.name+"]")}),title}}__name(ConfiguratorGroupTitleComponent,"ConfiguratorGroupTitleComponent"),ConfiguratorGroupTitleComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorGroupTitleComponent)(core.Y36(ConfiguratorCommonsService),core.Y36(ConfiguratorGroupsService),core.Y36(spartacus_product_configurator_common.u6),core.Y36(ConfiguratorExpertModeService,8))},"ConfiguratorGroupTitleComponent_Factory"),ConfiguratorGroupTitleComponent.\u0275cmp=core.Xpm({type:ConfiguratorGroupTitleComponent,selectors:[["cx-configurator-group-title"]],hostVars:2,hostBindings:__name(function(rf,ctx){2&rf&&core.ekj("ghost",ctx.ghostStyle)},"ConfiguratorGroupTitleComponent_HostBindings"),decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["ghostGroup",""],[1,"cx-group-title"],[1,"cx-ghost-group-title"]],template:__name(function(rf,ctx){if(1&rf&&(core.YNc(0,ConfiguratorGroupTitleComponent_ng_container_0_Template,3,1,"ng-container",0),core.ALo(1,"async"),core.YNc(2,ConfiguratorGroupTitleComponent_ng_template_2_Template,1,0,"ng-template",null,1,core.W1O)),2&rf){const _r1=core.MAs(3);core.Q6J("ngIf",core.lcZ(1,2,ctx.displayedGroup$))("ngIfElse",_r1)}},"ConfiguratorGroupTitleComponent_Template"),dependencies:[common.O5,common.Ov],encapsulation:2,changeDetection:0});class ConfiguratorGroupTitleModule{}__name(ConfiguratorGroupTitleModule,"ConfiguratorGroupTitleModule"),ConfiguratorGroupTitleModule.\u0275fac=__name(function(t){return new(t||ConfiguratorGroupTitleModule)},"ConfiguratorGroupTitleModule_Factory"),ConfiguratorGroupTitleModule.\u0275mod=core.oAB({type:ConfiguratorGroupTitleModule}),ConfiguratorGroupTitleModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)({cmsComponents:{ConfiguratorGroupTitle:{component:ConfiguratorGroupTitleComponent}}})],imports:[common.ez]});class ConfiguratorOverviewAttributeComponent{constructor(breakpointService){this.breakpointService=breakpointService}extractPriceFormulaParameters(){return{quantity:this.attributeOverview.quantity,price:this.attributeOverview.valuePrice,priceTotal:this.attributeOverview.valuePriceTotal,isLightedUp:!0}}isDesktop(){return this.breakpointService.isUp(spartacus_storefront.Bst.md)}}__name(ConfiguratorOverviewAttributeComponent,"ConfiguratorOverviewAttributeComponent"),ConfiguratorOverviewAttributeComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorOverviewAttributeComponent)(core.Y36(spartacus_storefront.r))},"ConfiguratorOverviewAttributeComponent_Factory"),ConfiguratorOverviewAttributeComponent.\u0275cmp=core.Xpm({type:ConfiguratorOverviewAttributeComponent,selectors:[["cx-configurator-overview-attribute"]],inputs:{attributeOverview:"attributeOverview"},decls:11,vars:26,consts:[[1,"cx-visually-hidden"],["aria-hidden","true",1,"cx-attribute-value"],[4,"ngIf","ngIfElse"],["mobile",""],["aria-hidden","true",1,"cx-attribute-label"],["aria-hidden","true",1,"cx-attribute-price"],[3,"formula"]],template:__name(function(rf,ctx){if(1&rf&&(core.TgZ(0,"span",0),core._uU(1),core.ALo(2,"cxTranslate"),core.ALo(3,"cxTranslate"),core.ALo(4,"cxTranslate"),core.qZA(),core.TgZ(5,"div",1),core._uU(6),core.qZA(),core.YNc(7,ConfiguratorOverviewAttributeComponent_ng_container_7_Template,5,2,"ng-container",2),core.ALo(8,"async"),core.YNc(9,ConfiguratorOverviewAttributeComponent_ng_template_9_Template,4,2,"ng-template",null,3,core.W1O)),2&rf){const _r1=core.MAs(10);core.xp6(1),core.hij(" ",ctx.attributeOverview.valuePrice&&0!==(null==ctx.attributeOverview.valuePrice?null:ctx.attributeOverview.valuePrice.value)?ctx.attributeOverview.valuePriceTotal&&0!==(null==ctx.attributeOverview.valuePriceTotal?null:ctx.attributeOverview.valuePriceTotal.value)?core.xi3(2,4,"configurator.a11y.valueOfAttributeFullWithPrice",core.kEZ(15,_c5,ctx.attributeOverview.value,ctx.attributeOverview.attribute,ctx.attributeOverview.valuePriceTotal.formattedValue)):core.xi3(3,7,"configurator.a11y.valueOfAttributeFullWithPrice",core.kEZ(19,_c5,ctx.attributeOverview.value,ctx.attributeOverview.attribute,ctx.attributeOverview.valuePrice.formattedValue)):core.xi3(4,10,"configurator.a11y.valueOfAttributeFull",core.WLB(23,_c6,ctx.attributeOverview.value,ctx.attributeOverview.attribute)),"\n"),core.xp6(5),core.hij(" ",ctx.attributeOverview.value,"\n"),core.xp6(1),core.Q6J("ngIf",core.lcZ(8,13,ctx.isDesktop()))("ngIfElse",_r1)}},"ConfiguratorOverviewAttributeComponent_Template"),dependencies:[common.O5,ConfiguratorPriceComponent,common.Ov,spartacus_core.X$D],encapsulation:2,changeDetection:0});class ConfiguratorOverviewAttributeModule{}__name(ConfiguratorOverviewAttributeModule,"ConfiguratorOverviewAttributeModule"),ConfiguratorOverviewAttributeModule.\u0275fac=__name(function(t){return new(t||ConfiguratorOverviewAttributeModule)},"ConfiguratorOverviewAttributeModule_Factory"),ConfiguratorOverviewAttributeModule.\u0275mod=core.oAB({type:ConfiguratorOverviewAttributeModule}),ConfiguratorOverviewAttributeModule.\u0275inj=core.cJS({imports:[common.ez,spartacus_core.LUR,ConfiguratorPriceModule]});class ConfiguratorOverviewBundleAttributeComponent{constructor(productService,translation){this.productService=productService,this.translation=translation}ngOnInit(){const noCommerceProduct={images:{}};this.attributeOverview.productCode?this.product$=this.productService.get(this.attributeOverview.productCode,"list").pipe((0,map.U)(respProduct=>respProduct||noCommerceProduct)):this.product$=(0,of.of)(noCommerceProduct)}getProductPrimaryImage(product){return product?.images?.PRIMARY}extractPriceFormulaParameters(){return{quantity:this.attributeOverview.quantity,price:this.attributeOverview.valuePrice,priceTotal:this.attributeOverview.valuePriceTotal,isLightedUp:!0}}displayQuantity(){const quantity=this.attributeOverview.quantity;return void 0!==quantity&&quantity>0}displayPrice(){return void 0!==this.attributeOverview.valuePrice?.value&&this.attributeOverview.valuePrice?.value>0}getAriaLabel(){let translatedText="";return this.displayQuantity()?void 0!==this.attributeOverview.valuePrice?.value&&0!==this.attributeOverview.valuePrice?.value?this.translation.translate("configurator.a11y.itemOfAttributeFullWithPriceAndQuantity",{item:this.attributeOverview.value,attribute:this.attributeOverview.attribute,price:this.attributeOverview.valuePriceTotal?.formattedValue,quantity:this.attributeOverview.quantity}).pipe((0,take.q)(1)).subscribe(text=>translatedText=text):this.translation.translate("configurator.a11y.itemOfAttributeFullWithQuantity",{item:this.attributeOverview.value,attribute:this.attributeOverview.attribute,quantity:this.attributeOverview.quantity}).pipe((0,take.q)(1)).subscribe(text=>translatedText=text):void 0!==this.attributeOverview.valuePrice?.value&&0!==this.attributeOverview.valuePrice?.value?this.translation.translate("configurator.a11y.itemOfAttributeFullWithPrice",{item:this.attributeOverview.value,attribute:this.attributeOverview.attribute,price:this.attributeOverview.valuePriceTotal?.formattedValue}).pipe((0,take.q)(1)).subscribe(text=>translatedText=text):this.translation.translate("configurator.a11y.itemOfAttributeFull",{item:this.attributeOverview.value,attribute:this.attributeOverview.attribute}).pipe((0,take.q)(1)).subscribe(text=>translatedText=text),translatedText}}__name(ConfiguratorOverviewBundleAttributeComponent,"ConfiguratorOverviewBundleAttributeComponent"),ConfiguratorOverviewBundleAttributeComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorOverviewBundleAttributeComponent)(core.Y36(spartacus_core.M52),core.Y36(spartacus_core.D7D))},"ConfiguratorOverviewBundleAttributeComponent_Factory"),ConfiguratorOverviewBundleAttributeComponent.\u0275cmp=core.Xpm({type:ConfiguratorOverviewBundleAttributeComponent,selectors:[["cx-configurator-cpq-overview-attribute"]],inputs:{attributeOverview:"attributeOverview"},decls:2,vars:3,consts:[[4,"ngIf"],[1,"cx-value-container"],[1,"cx-thumbnail"],["format","product","aria-hidden","true",3,"container"],[1,"cx-visually-hidden"],["aria-hidden","true",1,"cx-value-info"],["class","cx-code",4,"ngIf"],["class","cx-quantity",4,"ngIf"],["class","cx-price",4,"ngIf"],["aria-hidden","true",1,"cx-attribute-price-container"],[1,"cx-attribute-label"],[3,"formula"],[1,"cx-code"],[1,"cx-quantity"],[1,"cx-identifier"],[1,"cx-item"],[1,"cx-price"]],template:__name(function(rf,ctx){1&rf&&(core.YNc(0,ConfiguratorOverviewBundleAttributeComponent_ng_container_0_Template,16,8,"ng-container",0),core.ALo(1,"async")),2&rf&&core.Q6J("ngIf",core.lcZ(1,1,ctx.product$))},"ConfiguratorOverviewBundleAttributeComponent_Template"),dependencies:[common.O5,spartacus_storefront.R7z,ConfiguratorPriceComponent,common.Ov,spartacus_core.X$D,spartacus_core.bOD],encapsulation:2,changeDetection:0});class ConfiguratorOverviewBundleAttributeModule{}__name(ConfiguratorOverviewBundleAttributeModule,"ConfiguratorOverviewBundleAttributeModule"),ConfiguratorOverviewBundleAttributeModule.\u0275fac=__name(function(t){return new(t||ConfiguratorOverviewBundleAttributeModule)},"ConfiguratorOverviewBundleAttributeModule_Factory"),ConfiguratorOverviewBundleAttributeModule.\u0275mod=core.oAB({type:ConfiguratorOverviewBundleAttributeModule}),ConfiguratorOverviewBundleAttributeModule.\u0275inj=core.cJS({imports:[common.ez,spartacus_storefront.cOq,spartacus_core.LUR,ConfiguratorPriceModule]});class ConfiguratorOverviewFormComponent{constructor(configuratorCommonsService,configRouterExtractorService){this.configuratorCommonsService=configuratorCommonsService,this.configRouterExtractorService=configRouterExtractorService,this.attributeOverviewType=Configurator.AttributeOverviewType,this.configuration$=this.configRouterExtractorService.extractRouterData().pipe((0,switchMap.w)(routerData=>this.configuratorCommonsService.getOrCreateConfiguration(routerData.owner)),(0,distinctUntilKeyChanged.g)("configId"),(0,switchMap.w)(configuration=>this.configuratorCommonsService.getConfigurationWithOverview(configuration)),(0,filter.h)(configuration=>null!=configuration.overview))}hasAttributes(configuration){return void 0!==configuration.overview?.groups?.find(group=>!!group.attributes&&group.attributes.length)}isSameAttribute(attributes,index){return attributes.length>1&&(0===index?attributes[index]?.attribute===attributes[index+1]?.attribute:attributes[index]?.attribute===attributes[index-1]?.attribute)}getStyleClasses(attributes,index){let styleClass="";switch(attributes[index]?.type){case this.attributeOverviewType.BUNDLE:styleClass+="bundle";break;case this.attributeOverviewType.GENERAL:styleClass+="general"}return(0===index||!this.isSameAttribute(attributes,index))&&(styleClass+=" margin"),!this.isSameAttribute(attributes,index+1)&&!styleClass.includes("bundle")&&(styleClass+=" last-value-pair"),styleClass}getGroupLevelStyleClasses(level,subGroups){let styleClass="cx-group";return 1===level?(styleClass+=" topLevel",subGroups&&subGroups.length>0&&(styleClass+=" subgroupTopLevel")):(styleClass+=" subgroup",styleClass+=" subgroupLevel"+level),styleClass}}__name(ConfiguratorOverviewFormComponent,"ConfiguratorOverviewFormComponent"),ConfiguratorOverviewFormComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorOverviewFormComponent)(core.Y36(ConfiguratorCommonsService),core.Y36(spartacus_product_configurator_common.u6))},"ConfiguratorOverviewFormComponent_Factory"),ConfiguratorOverviewFormComponent.\u0275cmp=core.Xpm({type:ConfiguratorOverviewFormComponent,selectors:[["cx-configurator-overview-form"]],decls:8,vars:4,consts:[[4,"ngIf","ngIfElse"],["noAttributes",""],["groups",""],["ghostForm",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cx-no-attribute-value-pairs"],[1,"cx-visually-hidden"],[4,"cxFeatureLevel"],[4,"ngFor","ngForOf"],[1,"cx-group"],["aria-hidden","true"],["class","cx-attribute-value-pair",3,"ngClass",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"cx-attribute-value-pair",3,"ngClass"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[3,"attributeOverview"],[3,"ngClass"],[1,"cx-ghost-group"],[1,"cx-ghost-header","ghost"],[1,"cx-ghost-body"],[1,"cx-ghost-attribute-value"],[1,"cx-ghost-value","ghost"],[1,"cx-ghost-attribute-label"],[1,"cx-ghost-label","ghost"],[1,"cx-ghost-attribute-price","ghost"]],template:__name(function(rf,ctx){if(1&rf&&(core.YNc(0,ConfiguratorOverviewFormComponent_ng_container_0_Template,2,2,"ng-container",0),core.ALo(1,"async"),core.YNc(2,ConfiguratorOverviewFormComponent_ng_template_2_Template,7,6,"ng-template",null,1,core.W1O),core.YNc(4,ConfiguratorOverviewFormComponent_ng_template_4_Template,5,5,"ng-template",null,2,core.W1O),core.YNc(6,ConfiguratorOverviewFormComponent_ng_template_6_Template,1,2,"ng-template",null,3,core.W1O)),2&rf){const _r5=core.MAs(7);core.Q6J("ngIf",core.lcZ(1,2,ctx.configuration$))("ngIfElse",_r5)}},"ConfiguratorOverviewFormComponent_Template"),dependencies:[common.mk,common.sg,common.O5,common.tP,common.RF,common.n9,common.ED,ConfiguratorOverviewAttributeComponent,ConfiguratorOverviewBundleAttributeComponent,spartacus_core.EJv,common.Ov,spartacus_core.X$D],encapsulation:2,changeDetection:0});class ConfiguratorOverviewFormModule{}__name(ConfiguratorOverviewFormModule,"ConfiguratorOverviewFormModule"),ConfiguratorOverviewFormModule.\u0275fac=__name(function(t){return new(t||ConfiguratorOverviewFormModule)},"ConfiguratorOverviewFormModule_Factory"),ConfiguratorOverviewFormModule.\u0275mod=core.oAB({type:ConfiguratorOverviewFormModule}),ConfiguratorOverviewFormModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)({cmsComponents:{ConfiguratorOverviewForm:{component:ConfiguratorOverviewFormComponent}}})],imports:[common.ez,ConfiguratorOverviewAttributeModule,ConfiguratorOverviewBundleAttributeModule,spartacus_core.LUR,spartacus_core.GSh]});class ConfiguratorOverviewNotificationBannerComponent{constructor(configuratorCommonsService,configRouterExtractorService,commonConfigUtilsService){this.configuratorCommonsService=configuratorCommonsService,this.configRouterExtractorService=configRouterExtractorService,this.commonConfigUtilsService=commonConfigUtilsService,this.routerData$=this.configRouterExtractorService.extractRouterData(),this.configuration$=this.routerData$.pipe((0,filter.h)(routerData=>routerData.owner.type===spartacus_product_configurator_common.$g.OwnerType.PRODUCT||routerData.owner.type===spartacus_product_configurator_common.$g.OwnerType.CART_ENTRY),(0,switchMap.w)(routerData=>this.configuratorCommonsService.getConfiguration(routerData.owner))),this.configurationOverview$=this.configuration$.pipe((0,map.U)(configuration=>configuration.overview)),this.numberOfIssues$=this.configuration$.pipe((0,map.U)(configuration=>{const configOv=configuration.overview;return configOv?.totalNumberOfIssues?void 0!==configOv.numberOfIncompleteCharacteristics?configOv.numberOfIncompleteCharacteristics:configOv.totalNumberOfIssues:configuration.totalNumberOfIssues?configuration.totalNumberOfIssues:0})),this.numberOfConflicts$=this.configuration$.pipe((0,map.U)(configuration=>configuration.overview?.numberOfConflicts??0)),this.skipConflictsOnIssueNavigation$=this.configuration$.pipe((0,map.U)(configuration=>(configuration.overview?.numberOfConflicts??0)>0)),this.iconTypes=spartacus_storefront.e1G}}__name(ConfiguratorOverviewNotificationBannerComponent,"ConfiguratorOverviewNotificationBannerComponent"),ConfiguratorOverviewNotificationBannerComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorOverviewNotificationBannerComponent)(core.Y36(ConfiguratorCommonsService),core.Y36(spartacus_product_configurator_common.u6),core.Y36(spartacus_product_configurator_common.NU))},"ConfiguratorOverviewNotificationBannerComponent_Factory"),ConfiguratorOverviewNotificationBannerComponent.\u0275cmp=core.Xpm({type:ConfiguratorOverviewNotificationBannerComponent,selectors:[["cx-configurator-overview-notification-banner"]],decls:2,vars:3,consts:[[4,"ngIf"],["class","cx-error-notification-banner",4,"ngIf"],["class","cx-conflict-notification-banner",4,"ngIf"],[1,"cx-error-notification-banner"],[3,"type"],["id","cx-configurator-overview-error-msg",1,"cx-error-msg"],["aria-describedby","cx-configurator-overview-error-msg","cxAutoFocus","",1,"link","cx-action-link",3,"routerLink","queryParams"],[1,"cx-conflict-notification-banner"],["id","cx-configurator-overview-conflict-msg",1,"cx-conflict-msg"],["aria-describedby","cx-configurator-overview-conflict-msg","cxAutoFocus","",1,"link","cx-action-link",3,"routerLink","queryParams"]],template:__name(function(rf,ctx){1&rf&&(core.YNc(0,ConfiguratorOverviewNotificationBannerComponent_ng_container_0_Template,3,3,"ng-container",0),core.ALo(1,"async")),2&rf&&core.Q6J("ngIf",core.lcZ(1,1,ctx.routerData$))},"ConfiguratorOverviewNotificationBannerComponent_Template"),dependencies:[common.O5,spartacus_storefront.oJW,router.rH,common.Ov,spartacus_core.X$D,spartacus_core.l2T],encapsulation:2,changeDetection:0});class ConfiguratorOverviewNotificationBannerModule{}__name(ConfiguratorOverviewNotificationBannerModule,"ConfiguratorOverviewNotificationBannerModule"),ConfiguratorOverviewNotificationBannerModule.\u0275fac=__name(function(t){return new(t||ConfiguratorOverviewNotificationBannerModule)},"ConfiguratorOverviewNotificationBannerModule_Factory"),ConfiguratorOverviewNotificationBannerModule.\u0275mod=core.oAB({type:ConfiguratorOverviewNotificationBannerModule}),ConfiguratorOverviewNotificationBannerModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)({cmsComponents:{ConfiguratorOverviewBanner:{component:ConfiguratorOverviewNotificationBannerComponent}}})],imports:[common.ez,spartacus_core.LUR,spartacus_core.bhT,spartacus_storefront.QX1,router.Bz]});class ConfiguratorPreviousNextButtonsComponent{constructor(configuratorGroupsService,configuratorCommonsService,configRouterExtractorService,configUtils){this.configuratorGroupsService=configuratorGroupsService,this.configuratorCommonsService=configuratorCommonsService,this.configRouterExtractorService=configRouterExtractorService,this.configUtils=configUtils,this.configuration$=this.configRouterExtractorService.extractRouterData().pipe((0,switchMap.w)(routerData=>this.configuratorCommonsService.getConfiguration(routerData.owner)))}onPrevious(configuration){this.configuratorGroupsService.getPreviousGroupId(configuration.owner).pipe((0,take.q)(1)).subscribe(groupId=>{groupId&&(this.configuratorGroupsService.navigateToGroup(configuration,groupId),this.focusFirstAttribute())}),this.configUtils.scrollToConfigurationElement(".VariantConfigurationTemplate, .CpqConfigurationTemplate")}onNext(configuration){this.configuratorGroupsService.getNextGroupId(configuration.owner).pipe((0,take.q)(1)).subscribe(groupId=>{groupId&&(this.configuratorGroupsService.navigateToGroup(configuration,groupId),this.focusFirstAttribute())}),this.configUtils.scrollToConfigurationElement(".VariantConfigurationTemplate, .CpqConfigurationTemplate")}isFirstGroup(owner){return this.configuratorGroupsService.getPreviousGroupId(owner).pipe((0,map.U)(group=>!group))}isLastGroup(owner){return this.configuratorGroupsService.getNextGroupId(owner).pipe((0,map.U)(group=>!group))}focusFirstAttribute(){this.configRouterExtractorService.extractRouterData().pipe((0,switchMap.w)(routerData=>this.configuratorCommonsService.isConfigurationLoading(routerData.owner).pipe((0,filter.h)(isLoading=>isLoading),(0,take.q)(1),(0,switchMap.w)(()=>this.configuratorCommonsService.isConfigurationLoading(routerData.owner).pipe((0,filter.h)(isLoading=>!isLoading),(0,take.q)(1),(0,delay.g)(0)))))).subscribe(()=>this.configUtils.focusFirstAttribute())}}__name(ConfiguratorPreviousNextButtonsComponent,"ConfiguratorPreviousNextButtonsComponent"),ConfiguratorPreviousNextButtonsComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorPreviousNextButtonsComponent)(core.Y36(ConfiguratorGroupsService),core.Y36(ConfiguratorCommonsService),core.Y36(spartacus_product_configurator_common.u6),core.Y36(ConfiguratorStorefrontUtilsService))},"ConfiguratorPreviousNextButtonsComponent_Factory"),ConfiguratorPreviousNextButtonsComponent.\u0275cmp=core.Xpm({type:ConfiguratorPreviousNextButtonsComponent,selectors:[["cx-configurator-previous-next-buttons"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"cx-btn","btn","btn-action",3,"disabled","click"],[1,"cx-btn","btn","btn-secondary",3,"disabled","click"]],template:__name(function(rf,ctx){1&rf&&(core.YNc(0,ConfiguratorPreviousNextButtonsComponent_ng_container_0_Template,2,1,"ng-container",0),core.ALo(1,"async")),2&rf&&core.Q6J("ngIf",core.lcZ(1,1,ctx.configuration$))},"ConfiguratorPreviousNextButtonsComponent_Template"),dependencies:[common.O5,common.Ov,spartacus_core.X$D],encapsulation:2,changeDetection:0});class ConfiguratorPreviousNextButtonsModule{}__name(ConfiguratorPreviousNextButtonsModule,"ConfiguratorPreviousNextButtonsModule"),ConfiguratorPreviousNextButtonsModule.\u0275fac=__name(function(t){return new(t||ConfiguratorPreviousNextButtonsModule)},"ConfiguratorPreviousNextButtonsModule_Factory"),ConfiguratorPreviousNextButtonsModule.\u0275mod=core.oAB({type:ConfiguratorPreviousNextButtonsModule}),ConfiguratorPreviousNextButtonsModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)({cmsComponents:{ConfiguratorPrevNext:{component:ConfiguratorPreviousNextButtonsComponent}}})],imports:[common.ez,spartacus_core.LUR,spartacus_storefront.oPH]});class ConfiguratorPriceSummaryComponent{constructor(configuratorCommonsService,configRouterExtractorService){this.configuratorCommonsService=configuratorCommonsService,this.configRouterExtractorService=configRouterExtractorService,this.configuration$=this.configRouterExtractorService.extractRouterData().pipe((0,switchMap.w)(routerData=>this.configuratorCommonsService.getConfiguration(routerData.owner)))}}__name(ConfiguratorPriceSummaryComponent,"ConfiguratorPriceSummaryComponent"),ConfiguratorPriceSummaryComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorPriceSummaryComponent)(core.Y36(ConfiguratorCommonsService),core.Y36(spartacus_product_configurator_common.u6))},"ConfiguratorPriceSummaryComponent_Factory"),ConfiguratorPriceSummaryComponent.\u0275cmp=core.Xpm({type:ConfiguratorPriceSummaryComponent,selectors:[["cx-configurator-price-summary"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"cx-price-summary-container"],[1,"cx-total-summary"],[1,"cx-summary-row","cx-base-price"],[1,"cx-label"],[1,"cx-amount"],[1,"cx-summary-row","cx-selected-options"],[1,"cx-summary-row","cx-total-price"]],template:__name(function(rf,ctx){1&rf&&(core.YNc(0,ConfiguratorPriceSummaryComponent_ng_container_0_Template,2,1,"ng-container",0),core.ALo(1,"async")),2&rf&&core.Q6J("ngIf",core.lcZ(1,1,ctx.configuration$))},"ConfiguratorPriceSummaryComponent_Template"),dependencies:[common.O5,common.Ov,spartacus_core.X$D],encapsulation:2,changeDetection:0});class ConfiguratorPriceSummaryModule{}__name(ConfiguratorPriceSummaryModule,"ConfiguratorPriceSummaryModule"),ConfiguratorPriceSummaryModule.\u0275fac=__name(function(t){return new(t||ConfiguratorPriceSummaryModule)},"ConfiguratorPriceSummaryModule_Factory"),ConfiguratorPriceSummaryModule.\u0275mod=core.oAB({type:ConfiguratorPriceSummaryModule}),ConfiguratorPriceSummaryModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)({cmsComponents:{ConfiguratorPriceSummary:{component:ConfiguratorPriceSummaryComponent}}})],imports:[fesm2020_forms.u5,fesm2020_forms.UX,common.ez,spartacus_core.LUR]});class ConfiguratorProductTitleComponent{constructor(configuratorCommonsService,configRouterExtractorService,productService,configExpertModeService){this.configuratorCommonsService=configuratorCommonsService,this.configRouterExtractorService=configRouterExtractorService,this.productService=productService,this.configExpertModeService=configExpertModeService,this.ghostStyle=!0,this.configuration$=this.configRouterExtractorService.extractRouterData().pipe((0,switchMap.w)(routerData=>this.configuratorCommonsService.getConfiguration(routerData.owner))),this.product$=this.configuration$.pipe((0,map.U)(configuration=>{switch(configuration.owner.type){case spartacus_product_configurator_common.$g.OwnerType.PRODUCT:case spartacus_product_configurator_common.$g.OwnerType.CART_ENTRY:return configuration.productCode;case spartacus_product_configurator_common.$g.OwnerType.ORDER_ENTRY:return configuration.overview?.productCode}}),(0,switchMap.w)(productCode=>productCode?this.productService.get(productCode,"list"):empty.E)).pipe((0,tap.b)(()=>{this.ghostStyle=!1})),this.showMore=!1,this.iconTypes=spartacus_storefront.e1G}triggerDetails(){this.showMore=!this.showMore}get expMode(){return this.configExpertModeService?.getExpModeActive()}}__name(ConfiguratorProductTitleComponent,"ConfiguratorProductTitleComponent"),ConfiguratorProductTitleComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorProductTitleComponent)(core.Y36(ConfiguratorCommonsService),core.Y36(spartacus_product_configurator_common.u6),core.Y36(spartacus_core.M52),core.Y36(ConfiguratorExpertModeService,8))},"ConfiguratorProductTitleComponent_Factory"),ConfiguratorProductTitleComponent.\u0275cmp=core.Xpm({type:ConfiguratorProductTitleComponent,selectors:[["cx-configurator-product-title"]],hostVars:2,hostBindings:__name(function(rf,ctx){2&rf&&core.ekj("ghost",ctx.ghostStyle)},"ConfiguratorProductTitleComponent_HostBindings"),decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["ghostProductTitle",""],[1,"cx-general-product-info"],[1,"cx-title"],[3,"click"],[4,"ngIf"],[1,"cx-details"],["aria-hidden","true",1,"cx-details-image"],["format","product",3,"container"],[1,"cx-details-content"],[1,"cx-detail-title"],[1,"cx-code"],[1,"cx-description"],[4,"cxFeatureLevel"],[1,"cx-toggle-details-link-text"],["aria-hidden","true"],[3,"type"],[1,"cx-kb-key-details"],[1,"cx-kb-pair"],[1,"cx-label"],[1,"cx-value"],[1,"cx-ghost-general-product-info"]],template:__name(function(rf,ctx){if(1&rf&&(core.YNc(0,ConfiguratorProductTitleComponent_ng_container_0_Template,19,12,"ng-container",0),core.ALo(1,"async"),core.YNc(2,ConfiguratorProductTitleComponent_ng_template_2_Template,1,0,"ng-template",null,1,core.W1O)),2&rf){const _r1=core.MAs(3);core.Q6J("ngIf",core.lcZ(1,2,ctx.product$))("ngIfElse",_r1)}},"ConfiguratorProductTitleComponent_Template"),dependencies:[common.O5,spartacus_storefront.oJW,spartacus_storefront.R7z,spartacus_core.EJv,common.Ov,spartacus_core.X$D],encapsulation:2,changeDetection:0});class ConfiguratorProductTitleModule{}__name(ConfiguratorProductTitleModule,"ConfiguratorProductTitleModule"),ConfiguratorProductTitleModule.\u0275fac=__name(function(t){return new(t||ConfiguratorProductTitleModule)},"ConfiguratorProductTitleModule_Factory"),ConfiguratorProductTitleModule.\u0275mod=core.oAB({type:ConfiguratorProductTitleModule}),ConfiguratorProductTitleModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)({cmsComponents:{ConfiguratorProductTitle:{component:ConfiguratorProductTitleComponent}}})],imports:[fesm2020_forms.u5,fesm2020_forms.UX,ng_select_ng_select.A0,common.ez,spartacus_core.LUR,spartacus_storefront.QX1,spartacus_storefront.cOq,spartacus_core.GSh]});class ConfiguratorTabBarComponent{constructor(configRouterExtractorService,configuratorCommonsService){this.configRouterExtractorService=configRouterExtractorService,this.configuratorCommonsService=configuratorCommonsService,this.ghostStyle=!0,this.routerData$=this.configRouterExtractorService.extractRouterData(),this.configuration$=this.routerData$.pipe((0,switchMap.w)(routerData=>this.configuratorCommonsService.getConfiguration(routerData.owner).pipe((0,tap.b)(()=>{this.ghostStyle=!1})))),this.isOverviewPage$=this.routerData$.pipe((0,map.U)(routerData=>routerData.pageType===spartacus_product_configurator_common.iB.PageType.OVERVIEW))}}__name(ConfiguratorTabBarComponent,"ConfiguratorTabBarComponent"),ConfiguratorTabBarComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorTabBarComponent)(core.Y36(spartacus_product_configurator_common.u6),core.Y36(ConfiguratorCommonsService))},"ConfiguratorTabBarComponent_Factory"),ConfiguratorTabBarComponent.\u0275cmp=core.Xpm({type:ConfiguratorTabBarComponent,selectors:[["cx-configurator-tab-bar"]],hostVars:2,hostBindings:__name(function(rf,ctx){2&rf&&core.ekj("ghost",ctx.ghostStyle)},"ConfiguratorTabBarComponent_HostBindings"),decls:2,vars:3,consts:[[4,"ngIf"],[4,"ngIf","ngIfElse"],["ghostTabBar",""],[1,"cx-tab-bar"],["tabindex","0",3,"routerLink"],[1,"cx-ghost-tab-bar"]],template:__name(function(rf,ctx){1&rf&&(core.YNc(0,ConfiguratorTabBarComponent_ng_container_0_Template,5,4,"ng-container",0),core.ALo(1,"async")),2&rf&&core.Q6J("ngIf",core.lcZ(1,1,ctx.routerData$))},"ConfiguratorTabBarComponent_Template"),dependencies:[common.O5,router.yS,common.Ov,spartacus_core.X$D,spartacus_core.l2T],encapsulation:2,changeDetection:0});class ConfiguratorTabBarModule{}__name(ConfiguratorTabBarModule,"ConfiguratorTabBarModule"),ConfiguratorTabBarModule.\u0275fac=__name(function(t){return new(t||ConfiguratorTabBarModule)},"ConfiguratorTabBarModule_Factory"),ConfiguratorTabBarModule.\u0275mod=core.oAB({type:ConfiguratorTabBarModule}),ConfiguratorTabBarModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)({cmsComponents:{ConfiguratorTabBar:{component:ConfiguratorTabBarComponent}}})],imports:[fesm2020_forms.u5,fesm2020_forms.UX,ng_select_ng_select.A0,common.ez,spartacus_core.LUR,spartacus_core.bhT,router.Bz]});class ConfiguratorUpdateMessageComponent{constructor(configuratorCommonsService,configRouterExtractorService,config){this.configuratorCommonsService=configuratorCommonsService,this.configRouterExtractorService=configRouterExtractorService,this.config=config,this.hasPendingChanges$=this.configRouterExtractorService.extractRouterData().pipe((0,switchMap.w)(routerData=>this.configuratorCommonsService.hasPendingChanges(routerData.owner)),(0,distinctUntilChanged.x)())}}__name(ConfiguratorUpdateMessageComponent,"ConfiguratorUpdateMessageComponent"),ConfiguratorUpdateMessageComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorUpdateMessageComponent)(core.Y36(ConfiguratorCommonsService),core.Y36(spartacus_product_configurator_common.u6),core.Y36(ConfiguratorMessageConfig))},"ConfiguratorUpdateMessageComponent_Factory"),ConfiguratorUpdateMessageComponent.\u0275cmp=core.Xpm({type:ConfiguratorUpdateMessageComponent,selectors:[["cx-configurator-update-message"]],decls:7,vars:7,consts:[["aria-live","polite","aria-atomic","false"],[1,"cx-update-msg"]],template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"div",0)(1,"div",1),core.ALo(2,"async"),core._UZ(3,"cx-spinner"),core.TgZ(4,"strong"),core._uU(5),core.ALo(6,"cxTranslate"),core.qZA()()()),2&rf&&(core.xp6(1),core.ekj("visible",core.lcZ(2,3,ctx.hasPendingChanges$)),core.xp6(4),core.Oqu(core.lcZ(6,5,"configurator.header.updateMessage")))},"ConfiguratorUpdateMessageComponent_Template"),dependencies:[spartacus_storefront.ORR,common.Ov,spartacus_core.X$D],encapsulation:2,changeDetection:0});class ConfiguratorUpdateMessageModule{}__name(ConfiguratorUpdateMessageModule,"ConfiguratorUpdateMessageModule"),ConfiguratorUpdateMessageModule.\u0275fac=__name(function(t){return new(t||ConfiguratorUpdateMessageModule)},"ConfiguratorUpdateMessageModule_Factory"),ConfiguratorUpdateMessageModule.\u0275mod=core.oAB({type:ConfiguratorUpdateMessageModule}),ConfiguratorUpdateMessageModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)({cmsComponents:{ConfiguratorUpdateMessage:{component:ConfiguratorUpdateMessageComponent}}}),(0,spartacus_core.i51)({productConfigurator:{updateConfigurationMessage:{waitingTime:1e3}}}),{provide:ConfiguratorMessageConfig,useExisting:spartacus_core.DeH}],imports:[common.ez,spartacus_storefront.Fme,spartacus_core.LUR]});class ConfiguratorConflictAndErrorMessagesComponent{constructor(configuratorCommonsService,configRouterExtractorService){this.configuratorCommonsService=configuratorCommonsService,this.configRouterExtractorService=configRouterExtractorService,this.iconTypes=spartacus_storefront.e1G,this.configuration$=this.configRouterExtractorService.extractRouterData().pipe((0,switchMap.w)(routerData=>this.configuratorCommonsService.getConfiguration(routerData.owner))),this.showWarnings=!1,this.showErrors=!1}toggleWarnings(){this.showWarnings=!this.showWarnings}toggleErrors(){this.showErrors=!this.showErrors}}__name(ConfiguratorConflictAndErrorMessagesComponent,"ConfiguratorConflictAndErrorMessagesComponent"),ConfiguratorConflictAndErrorMessagesComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorConflictAndErrorMessagesComponent)(core.Y36(ConfiguratorCommonsService),core.Y36(spartacus_product_configurator_common.u6))},"ConfiguratorConflictAndErrorMessagesComponent_Factory"),ConfiguratorConflictAndErrorMessagesComponent.\u0275cmp=core.Xpm({type:ConfiguratorConflictAndErrorMessagesComponent,selectors:[["cx-configuration-conflict-and-error-messages"]],decls:2,vars:3,consts:[[4,"ngIf"],["aria-live","assertive","aria-atomic","true",1,"alert-message","alert-message-invalid-warning"],[1,"alert-icon"],["type","WARNING"],["class","cx-warning-text",4,"ngIf"],["class","cx-warning-toggle",3,"click",4,"ngIf"],[1,"cx-warning-messages"],["class","cx-warning-message",3,"open",4,"ngFor","ngForOf"],[1,"cx-warning-text"],[1,"cx-warning-toggle",3,"click"],["type","CARET_DOWN"],["type","CARET_UP"],[1,"cx-warning-message"],["aria-live","assertive","aria-atomic","true","role","alert",1,"alert-message","alert-message-error"],["type","ERROR"],["class","cx-error-text",4,"ngIf"],["class","cx-error-toggle",3,"click",4,"ngIf"],[1,"cx-error-messages"],["class","cx-error-message",3,"open",4,"ngFor","ngForOf"],[1,"cx-error-text"],[1,"cx-error-toggle",3,"click"],[1,"cx-error-message"]],template:__name(function(rf,ctx){1&rf&&(core.YNc(0,ConfiguratorConflictAndErrorMessagesComponent_ng_container_0_Template,3,2,"ng-container",0),core.ALo(1,"async")),2&rf&&core.Q6J("ngIf",core.lcZ(1,1,ctx.configuration$))},"ConfiguratorConflictAndErrorMessagesComponent_Template"),dependencies:[common.sg,common.O5,spartacus_storefront.oJW,common.Ov,spartacus_core.X$D],encapsulation:2,changeDetection:0});class ConfiguratorConflictAndErrorMessagesModule{}__name(ConfiguratorConflictAndErrorMessagesModule,"ConfiguratorConflictAndErrorMessagesModule"),ConfiguratorConflictAndErrorMessagesModule.\u0275fac=__name(function(t){return new(t||ConfiguratorConflictAndErrorMessagesModule)},"ConfiguratorConflictAndErrorMessagesModule_Factory"),ConfiguratorConflictAndErrorMessagesModule.\u0275mod=core.oAB({type:ConfiguratorConflictAndErrorMessagesModule}),ConfiguratorConflictAndErrorMessagesModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)({cmsComponents:{CpqConfiguratorConflictAndErrorMessagesComponent:{component:ConfiguratorConflictAndErrorMessagesComponent}}})],imports:[common.ez,router.Bz,spartacus_core.bhT,spartacus_core.LUR,spartacus_storefront.QX1]});class ConfiguratorExitButtonComponent{constructor(productService,routingService,configRouterExtractorService,configuratorCommonsService,breakpointService,windowRef,location){this.productService=productService,this.routingService=routingService,this.configRouterExtractorService=configRouterExtractorService,this.configuratorCommonsService=configuratorCommonsService,this.breakpointService=breakpointService,this.windowRef=windowRef,this.location=location,this.container$=this.configRouterExtractorService.extractRouterData().pipe((0,switchMap.w)(routerData=>this.configuratorCommonsService.getConfiguration(routerData.owner).pipe((0,map.U)(configuration=>({routerData,configuration}))).pipe((0,switchMap.w)(cont=>this.productService.get(cont.configuration.productCode).pipe((0,map.U)(product=>({routerData:cont.routerData,configuration:cont.configuration,product})))))))}navigateToCart(){this.routingService.go("cart")}exitConfiguration(){this.container$.pipe((0,take.q)(1)).subscribe(container=>{container.routerData.owner.type===spartacus_product_configurator_common.$g.OwnerType.CART_ENTRY?this.navigateToCart():this.routingService.go({cxRoute:"product",params:container.product})})}isDesktop(){return this.breakpointService.isUp(spartacus_storefront.Bst.md)}isMobile(){return this.breakpointService.isDown(spartacus_storefront.Bst.sm)}}__name(ConfiguratorExitButtonComponent,"ConfiguratorExitButtonComponent"),ConfiguratorExitButtonComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorExitButtonComponent)(core.Y36(spartacus_core.M52),core.Y36(spartacus_core.Znh),core.Y36(spartacus_product_configurator_common.u6),core.Y36(ConfiguratorCommonsService),core.Y36(spartacus_storefront.r),core.Y36(spartacus_core.X9E),core.Y36(common.Ye))},"ConfiguratorExitButtonComponent_Factory"),ConfiguratorExitButtonComponent.\u0275cmp=core.Xpm({type:ConfiguratorExitButtonComponent,selectors:[["cx-configurator-exit-button"]],decls:2,vars:3,consts:[[4,"ngIf"],["tabindex","0",1,"cx-config-exit-button",3,"click"]],template:__name(function(rf,ctx){1&rf&&(core.YNc(0,ConfiguratorExitButtonComponent_ng_container_0_Template,4,2,"ng-container",0),core.ALo(1,"async")),2&rf&&core.Q6J("ngIf",core.lcZ(1,1,ctx.container$))},"ConfiguratorExitButtonComponent_Template"),dependencies:[common.O5,common.Ov,spartacus_core.X$D],encapsulation:2});class ConfiguratorExitButtonModule{}__name(ConfiguratorExitButtonModule,"ConfiguratorExitButtonModule"),ConfiguratorExitButtonModule.\u0275fac=__name(function(t){return new(t||ConfiguratorExitButtonModule)},"ConfiguratorExitButtonModule_Factory"),ConfiguratorExitButtonModule.\u0275mod=core.oAB({type:ConfiguratorExitButtonModule}),ConfiguratorExitButtonModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)({cmsComponents:{ConfiguratorExitButton:{component:ConfiguratorExitButtonComponent}}}),spartacus_core.X9E],imports:[common.ez,spartacus_core.LUR]});class ConfiguratorVariantCarouselComponent{constructor(productService,translationService,configuratorRouterExtractorService,configuratorCommonsService){this.productService=productService,this.translationService=translationService,this.configuratorRouterExtractorService=configuratorRouterExtractorService,this.configuratorCommonsService=configuratorCommonsService,this.configuration$=this.configuratorRouterExtractorService.extractRouterData().pipe((0,switchMap.w)(routerData=>this.configuratorCommonsService.getConfiguration(routerData.owner))),this.title$=this.translationService.translate("configurator.variantCarousel.title"),this.items$=this.configuration$.pipe((0,map.U)(configuration=>configuration.variants?configuration.variants:[]),(0,map.U)(variants=>variants.map(variant=>this.productService.get(variant.productCode))))}}__name(ConfiguratorVariantCarouselComponent,"ConfiguratorVariantCarouselComponent"),ConfiguratorVariantCarouselComponent.\u0275fac=__name(function(t){return new(t||ConfiguratorVariantCarouselComponent)(core.Y36(spartacus_core.M52),core.Y36(spartacus_core.D7D),core.Y36(spartacus_product_configurator_common.u6),core.Y36(ConfiguratorCommonsService))},"ConfiguratorVariantCarouselComponent_Factory"),ConfiguratorVariantCarouselComponent.\u0275cmp=core.Xpm({type:ConfiguratorVariantCarouselComponent,selectors:[["cx-configurator-variant-carousel"]],decls:3,vars:5,consts:[[4,"ngIf"],[1,"cx-variant-carousel-container"],["role","region","itemWidth","285px",3,"items","title","template"],["carouselItem",""],[3,"item"]],template:__name(function(rf,ctx){if(1&rf&&(core.YNc(0,ConfiguratorVariantCarouselComponent_ng_container_0_Template,8,13,"ng-container",0),core.ALo(1,"async"),core.ALo(2,"async")),2&rf){let tmp_0_0;core.Q6J("ngIf",(null==(tmp_0_0=core.lcZ(1,1,ctx.items$))?null:tmp_0_0.length)>0&&core.lcZ(2,3,ctx.items$))}},"ConfiguratorVariantCarouselComponent_Template"),dependencies:[common.O5,spartacus_storefront.Fy4,spartacus_storefront.mEt,common.Ov,spartacus_core.X$D],encapsulation:2,changeDetection:0});class ConfiguratorVariantCarouselModule{}__name(ConfiguratorVariantCarouselModule,"ConfiguratorVariantCarouselModule"),ConfiguratorVariantCarouselModule.\u0275fac=__name(function(t){return new(t||ConfiguratorVariantCarouselModule)},"ConfiguratorVariantCarouselModule_Factory"),ConfiguratorVariantCarouselModule.\u0275mod=core.oAB({type:ConfiguratorVariantCarouselModule}),ConfiguratorVariantCarouselModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)({cmsComponents:{ConfiguratorVariantCarousel:{component:ConfiguratorVariantCarouselComponent}}})],imports:[fesm2020_forms.u5,fesm2020_forms.UX,common.ez,spartacus_core.LUR,spartacus_storefront.bBg,spartacus_storefront.pvk]});class RulebasedConfiguratorComponentsModule{}__name(RulebasedConfiguratorComponentsModule,"RulebasedConfiguratorComponentsModule"),RulebasedConfiguratorComponentsModule.\u0275fac=__name(function(t){return new(t||RulebasedConfiguratorComponentsModule)},"RulebasedConfiguratorComponentsModule_Factory"),RulebasedConfiguratorComponentsModule.\u0275mod=core.oAB({type:RulebasedConfiguratorComponentsModule}),RulebasedConfiguratorComponentsModule.\u0275inj=core.cJS({imports:[ConfiguratorPriceSummaryModule,ConfiguratorAddToCartButtonModule,ConfiguratorGroupMenuModule,ConfiguratorProductTitleModule,ConfiguratorTabBarModule,ConfiguratorFormModule,ConfiguratorGroupTitleModule,ConfiguratorUpdateMessageModule,ConfiguratorPreviousNextButtonsModule,ConfiguratorOverviewAttributeModule,ConfiguratorOverviewFormModule,ConfiguratorOverviewNotificationBannerModule,ConfiguratorConflictAndErrorMessagesModule,ConfiguratorExitButtonModule,ConfiguratorVariantCarouselModule]});class OccConfiguratorVariantAddToCartSerializer{constructor(){}convert(source,target){return{...target,userId:source.userId,cartId:source.cartId,product:{code:source.productCode},quantity:source.quantity,configId:source.configId}}}var OccConfigurator;__name(OccConfiguratorVariantAddToCartSerializer,"OccConfiguratorVariantAddToCartSerializer"),OccConfiguratorVariantAddToCartSerializer.\u0275fac=__name(function(t){return new(t||OccConfiguratorVariantAddToCartSerializer)},"OccConfiguratorVariantAddToCartSerializer_Factory"),OccConfiguratorVariantAddToCartSerializer.\u0275prov=core.Yz7({token:OccConfiguratorVariantAddToCartSerializer,factory:OccConfiguratorVariantAddToCartSerializer.\u0275fac,providedIn:"root"}),function(OccConfigurator2){let GroupType;var GroupType2;let UiType;var UiType2;let PriceType;let ImageFormatType;var ImageFormatType2;let ImageType;var ImageType2;(GroupType2=GroupType=OccConfigurator2.GroupType||(OccConfigurator2.GroupType={})).CSTIC_GROUP="CSTIC_GROUP",GroupType2.INSTANCE="INSTANCE",GroupType2.CONFLICT_HEADER="CONFLICT_HEADER",GroupType2.CONFLICT="CONFLICT",(UiType2=UiType=OccConfigurator2.UiType||(OccConfigurator2.UiType={})).STRING="STRING",UiType2.NUMERIC="NUMERIC",UiType2.CHECK_BOX="CHECK_BOX",UiType2.CHECK_BOX_LIST="CHECK_BOX_LIST",UiType2.RADIO_BUTTON="RADIO_BUTTON",UiType2.RADIO_BUTTON_ADDITIONAL_INPUT="RADIO_BUTTON_ADDITIONAL_INPUT",UiType2.DROPDOWN="DROPDOWN",UiType2.DROPDOWN_ADDITIONAL_INPUT="DROPDOWN_ADDITIONAL_INPUT",UiType2.READ_ONLY="READ_ONLY",UiType2.NOT_IMPLEMENTED="NOT_IMPLEMENTED",UiType2.SINGLE_SELECTION_IMAGE="SINGLE_SELECTION_IMAGE",UiType2.MULTI_SELECTION_IMAGE="MULTI_SELECTION_IMAGE",(PriceType=OccConfigurator2.PriceType||(OccConfigurator2.PriceType={})).BUY="BUY",(ImageFormatType2=ImageFormatType=OccConfigurator2.ImageFormatType||(OccConfigurator2.ImageFormatType={})).VALUE_IMAGE="VALUE_IMAGE",ImageFormatType2.CSTIC_IMAGE="CSTIC_IMAGE",(ImageType2=ImageType=OccConfigurator2.ImageType||(OccConfigurator2.ImageType={})).PRIMARY="PRIMARY",ImageType2.GALLERY="GALLERY"}(OccConfigurator||(OccConfigurator={}));class OccConfiguratorVariantNormalizer{constructor(config,translation,uiSettingsConfig){this.config=config,this.translation=translation,this.uiSettingsConfig=uiSettingsConfig}convert(source,target){const resultTarget={...target,owner:target?.owner??spartacus_product_configurator_common.mR.createInitialOwner(),interactionState:target?.interactionState??{},configId:source.configId,complete:source.complete,consistent:source.consistent,totalNumberOfIssues:source.totalNumberOfIssues,productCode:source.rootProduct,groups:[],flatGroups:[],kbKey:source.kbKey??void 0,pricingEnabled:source.pricingEnabled??!0},flatGroups=[];return source.groups?.forEach(group=>this.convertGroup(group,resultTarget.groups,flatGroups)),resultTarget.flatGroups=flatGroups,resultTarget}convertGroup(source,groupList,flatGroupList){const attributes=[];source.attributes&&source.attributes.forEach(sourceAttribute=>this.convertAttribute(sourceAttribute,attributes));const group={description:source.description,configurable:source.configurable,complete:source.complete,consistent:source.consistent,groupType:this.convertGroupType(source.groupType),name:source.name,id:source.id,attributes,subGroups:[]};this.setGroupDescription(group),source.subGroups&&source.subGroups.forEach(sourceSubGroup=>this.convertGroup(sourceSubGroup,group.subGroups,flatGroupList)),(group.groupType===Configurator.GroupType.ATTRIBUTE_GROUP||group.groupType===Configurator.GroupType.CONFLICT_GROUP)&&flatGroupList.push(group),groupList.push(group)}getGroupId(key,name){return key.replace("@"+name,"")}convertAttribute(sourceAttribute,attributeList){const numberOfConflicts=sourceAttribute.conflicts?sourceAttribute.conflicts.length:0,attributeImages=[],attributeValues=[];sourceAttribute.images&&sourceAttribute.images.forEach(occImage=>this.convertImage(occImage,attributeImages)),this.addRetractValue(sourceAttribute,attributeValues),sourceAttribute.domainValues&&sourceAttribute.domainValues.forEach(value=>this.convertValue(value,attributeValues));const uiType=this.convertAttributeType(sourceAttribute),attribute={name:sourceAttribute.name,label:sourceAttribute.langDepName,required:sourceAttribute.required,uiType,groupId:this.getGroupId(sourceAttribute.key,sourceAttribute.name),userInput:uiType===Configurator.UiType.NUMERIC||uiType===Configurator.UiType.STRING?sourceAttribute.formattedValue?sourceAttribute.formattedValue:"":void 0,maxlength:(sourceAttribute.maxlength??0)+(sourceAttribute.negativeAllowed?1:0),numDecimalPlaces:sourceAttribute.numberScale,negativeAllowed:sourceAttribute.negativeAllowed,numTotalLength:sourceAttribute.typeLength,selectedSingleValue:void 0,hasConflicts:numberOfConflicts>0,images:attributeImages,values:attributeValues,intervalInDomain:sourceAttribute.intervalInDomain,key:sourceAttribute.key,validationType:sourceAttribute.validationType,visible:sourceAttribute.visible};this.setSelectedSingleValue(attribute),this.compileAttributeIncomplete(attribute),attributeList.push(attribute)}setSelectedSingleValue(attribute){if(attribute.values){const selectedValues=attribute.values.map(entry=>entry).filter(entry=>entry.selected);selectedValues&&1===selectedValues.length&&(attribute.selectedSingleValue=selectedValues[0].valueCode)}}isRetractValueSelected(sourceAttribute){return!(sourceAttribute.domainValues&&sourceAttribute.domainValues.filter(value=>value.selected).length)}setRetractValueDisplay(attributeType,value){(attributeType===Configurator.UiType.DROPDOWN||attributeType===Configurator.UiType.RADIOBUTTON)&&(attributeType===Configurator.UiType.DROPDOWN&&value.selected?this.translation.translate("configurator.attribute.dropDownSelectMsg").pipe((0,take.q)(1)).subscribe(text=>value.valueDisplay=text):this.translation.translate("configurator.attribute.noOptionSelectedMsg").pipe((0,take.q)(1)).subscribe(text=>value.valueDisplay=text))}hasSourceAttributeConflicts(sourceAttribute){return!!sourceAttribute.conflicts&&sourceAttribute.conflicts.length>0}isSourceAttributeTypeReadOnly(sourceAttribute){return sourceAttribute.type===OccConfigurator.UiType.READ_ONLY}isRetractBlocked(sourceAttribute){return!!sourceAttribute.retractBlocked&&sourceAttribute.retractBlocked}addRetractValue(sourceAttribute,values){const isRetractBlocked=this.isRetractBlocked(sourceAttribute),isConflicting=this.hasSourceAttributeConflicts(sourceAttribute);if(!isRetractBlocked&&(this.uiSettingsConfig?.productConfigurator?.addRetractOption||this.isSourceAttributeTypeReadOnly(sourceAttribute)&&isConflicting)){const attributeType=this.convertAttributeType(sourceAttribute);if(attributeType===Configurator.UiType.RADIOBUTTON||attributeType===Configurator.UiType.DROPDOWN){const value={valueCode:OccConfiguratorVariantNormalizer.RETRACT_VALUE_CODE,selected:this.isRetractValueSelected(sourceAttribute)};this.setRetractValueDisplay(attributeType,value),values.push(value)}}}convertValue(occValue,values){const valueImages=[];occValue.images&&occValue.images.forEach(occImage=>this.convertImage(occImage,valueImages));const value={valueCode:occValue.key,valueDisplay:occValue.langDepName,name:occValue.name,selected:occValue.selected,images:valueImages};values.push(value)}convertImage(occImage,images){const image={url:(this.config?.backend?.media?.baseUrl||this.config?.backend?.occ?.baseUrl||"")+occImage.url,altText:occImage.altText,galleryIndex:occImage.galleryIndex,type:this.convertImageType(occImage.imageType),format:this.convertImageFormatType(occImage.format)};images.push(image)}convertAttributeType(sourceAttribute){let uiType;switch(sourceAttribute.type){case OccConfigurator.UiType.RADIO_BUTTON:uiType=Configurator.UiType.RADIOBUTTON;break;case OccConfigurator.UiType.RADIO_BUTTON_ADDITIONAL_INPUT:uiType=Configurator.UiType.RADIOBUTTON_ADDITIONAL_INPUT;break;case OccConfigurator.UiType.DROPDOWN:uiType=Configurator.UiType.DROPDOWN;break;case OccConfigurator.UiType.DROPDOWN_ADDITIONAL_INPUT:uiType=Configurator.UiType.DROPDOWN_ADDITIONAL_INPUT;break;case OccConfigurator.UiType.STRING:uiType=Configurator.UiType.STRING;break;case OccConfigurator.UiType.NUMERIC:uiType=Configurator.UiType.NUMERIC;break;case OccConfigurator.UiType.READ_ONLY:uiType=!sourceAttribute.retractBlocked&&this.hasSourceAttributeConflicts(sourceAttribute)?Configurator.UiType.RADIOBUTTON:Configurator.UiType.READ_ONLY;break;case OccConfigurator.UiType.CHECK_BOX_LIST:uiType=Configurator.UiType.CHECKBOXLIST;break;case OccConfigurator.UiType.CHECK_BOX:uiType=Configurator.UiType.CHECKBOX;break;case OccConfigurator.UiType.MULTI_SELECTION_IMAGE:uiType=Configurator.UiType.MULTI_SELECTION_IMAGE;break;case OccConfigurator.UiType.SINGLE_SELECTION_IMAGE:uiType=Configurator.UiType.SINGLE_SELECTION_IMAGE;break;default:uiType=Configurator.UiType.NOT_IMPLEMENTED}return uiType}convertGroupType(groupType){switch(groupType){case OccConfigurator.GroupType.CSTIC_GROUP:return Configurator.GroupType.ATTRIBUTE_GROUP;case OccConfigurator.GroupType.INSTANCE:return Configurator.GroupType.SUB_ITEM_GROUP;case OccConfigurator.GroupType.CONFLICT_HEADER:return Configurator.GroupType.CONFLICT_HEADER_GROUP;case OccConfigurator.GroupType.CONFLICT:return Configurator.GroupType.CONFLICT_GROUP}}setGroupDescription(group){switch(group.groupType){case Configurator.GroupType.CONFLICT_HEADER_GROUP:this.translation.translate("configurator.group.conflictHeader").pipe((0,take.q)(1)).subscribe(conflictHeaderText=>group.description=conflictHeaderText);break;case Configurator.GroupType.CONFLICT_GROUP:const conflictDescription=group.description;this.translation.translate("configurator.group.conflictGroup",{attribute:group.name}).pipe((0,take.q)(1)).subscribe(conflictGroupText=>group.description=conflictGroupText),group.name=conflictDescription;break;default:if("_GEN"!==group.name)return;this.translation.translate("configurator.group.general").pipe((0,take.q)(1)).subscribe(generalText=>group.description=generalText)}}convertImageType(imageType){switch(imageType){case OccConfigurator.ImageType.GALLERY:return Configurator.ImageType.GALLERY;case OccConfigurator.ImageType.PRIMARY:return Configurator.ImageType.PRIMARY}}convertImageFormatType(formatType){switch(formatType){case OccConfigurator.ImageFormatType.VALUE_IMAGE:return Configurator.ImageFormatType.VALUE_IMAGE;case OccConfigurator.ImageFormatType.CSTIC_IMAGE:return Configurator.ImageFormatType.ATTRIBUTE_IMAGE}}compileAttributeIncomplete(attribute){switch(attribute.incomplete=!1,attribute.uiType){case Configurator.UiType.RADIOBUTTON:case Configurator.UiType.RADIOBUTTON_ADDITIONAL_INPUT:case Configurator.UiType.DROPDOWN_ADDITIONAL_INPUT:case Configurator.UiType.DROPDOWN:(!attribute.selectedSingleValue||attribute.selectedSingleValue===OccConfiguratorVariantNormalizer.RETRACT_VALUE_CODE)&&(attribute.incomplete=!0);break;case Configurator.UiType.SINGLE_SELECTION_IMAGE:attribute.selectedSingleValue||(attribute.incomplete=!0);break;case Configurator.UiType.NUMERIC:case Configurator.UiType.STRING:attribute.userInput||(attribute.incomplete=!0);break;case Configurator.UiType.CHECKBOXLIST:case Configurator.UiType.CHECKBOX:case Configurator.UiType.MULTI_SELECTION_IMAGE:{const isOneValueSelected=void 0!==attribute.values?.find(value=>value.selected);attribute.incomplete=!isOneValueSelected;break}}}}__name(OccConfiguratorVariantNormalizer,"OccConfiguratorVariantNormalizer"),OccConfiguratorVariantNormalizer.RETRACT_VALUE_CODE="###RETRACT_VALUE_CODE###",OccConfiguratorVariantNormalizer.\u0275fac=__name(function(t){return new(t||OccConfiguratorVariantNormalizer)(core.LFG(spartacus_core.Vri),core.LFG(spartacus_core.D7D),core.LFG(ConfiguratorUISettingsConfig))},"OccConfiguratorVariantNormalizer_Factory"),OccConfiguratorVariantNormalizer.\u0275prov=core.Yz7({token:OccConfiguratorVariantNormalizer,factory:OccConfiguratorVariantNormalizer.\u0275fac,providedIn:"root"});const VARIANT_CONFIGURATOR_NORMALIZER=new core.OlP("VariantConfiguratorNormalizer"),VARIANT_CONFIGURATOR_SERIALIZER=new core.OlP("VariantConfiguratorSerializer"),VARIANT_CONFIGURATOR_PRICE_SUMMARY_NORMALIZER=new core.OlP("VariantConfiguratorPriceSummaryNormalizer"),VARIANT_CONFIGURATOR_PRICE_NORMALIZER=new core.OlP("VariantConfiguratorPriceNormalizer"),VARIANT_CONFIGURATOR_ADD_TO_CART_SERIALIZER=new core.OlP("VariantConfiguratorAddToCartSerializer"),VARIANT_CONFIGURATOR_UPDATE_CART_ENTRY_SERIALIZER=new core.OlP("VariantConfiguratorUpdateCartEntrySerializer"),VARIANT_CONFIGURATOR_OVERVIEW_NORMALIZER=new core.OlP("VariantConfiguratorOverviewNormalizer");class OccConfiguratorVariantOverviewNormalizer{constructor(translation,converterService){this.translation=translation,this.converterService=converterService}convert(source,target){const prices={priceSummary:source.pricing,configId:source.id},resultTarget={...target,configId:source.id,groups:source.groups?.flatMap(group=>this.convertGroup(group)),priceSummary:this.converterService.convert(prices,VARIANT_CONFIGURATOR_PRICE_SUMMARY_NORMALIZER),productCode:source.productCode};return this.setIssueCounters(resultTarget,source),resultTarget}convertGroup(source){const result=[],characteristicValues=source.characteristicValues,subGroups=source.subGroups,group={id:source.id,groupDescription:source.groupDescription,attributes:characteristicValues?characteristicValues.map(characteristic=>({attribute:characteristic.characteristic,attributeId:characteristic.characteristicId,value:characteristic.value,valueId:characteristic.valueId,valuePrice:characteristic.price})):[]};if(this.setGeneralDescription(group),subGroups){const resultSubGroups=[];subGroups.forEach(subGroup=>this.convertGroup(subGroup).forEach(groupArray=>resultSubGroups.push(groupArray))),group.subGroups=resultSubGroups}return result.push(group),result}setGeneralDescription(group){"_GEN"===group.id&&this.translation.translate("configurator.group.general").pipe((0,take.q)(1)).subscribe(generalText=>group.groupDescription=generalText)}setIssueCounters(target,source){target.totalNumberOfIssues=source.totalNumberOfIssues,target.numberOfConflicts=source.numberOfConflicts,target.numberOfIncompleteCharacteristics=source.numberOfIncompleteCharacteristics}}__name(OccConfiguratorVariantOverviewNormalizer,"OccConfiguratorVariantOverviewNormalizer"),OccConfiguratorVariantOverviewNormalizer.\u0275fac=__name(function(t){return new(t||OccConfiguratorVariantOverviewNormalizer)(core.LFG(spartacus_core.D7D),core.LFG(spartacus_core.IXI))},"OccConfiguratorVariantOverviewNormalizer_Factory"),OccConfiguratorVariantOverviewNormalizer.\u0275prov=core.Yz7({token:OccConfiguratorVariantOverviewNormalizer,factory:OccConfiguratorVariantOverviewNormalizer.\u0275fac,providedIn:"root"});class OccConfiguratorVariantPriceSummaryNormalizer{convert(source,target){return{...target,...source.priceSummary}}}__name(OccConfiguratorVariantPriceSummaryNormalizer,"OccConfiguratorVariantPriceSummaryNormalizer"),OccConfiguratorVariantPriceSummaryNormalizer.\u0275fac=__name(function(t){return new(t||OccConfiguratorVariantPriceSummaryNormalizer)},"OccConfiguratorVariantPriceSummaryNormalizer_Factory"),OccConfiguratorVariantPriceSummaryNormalizer.\u0275prov=core.Yz7({token:OccConfiguratorVariantPriceSummaryNormalizer,factory:OccConfiguratorVariantPriceSummaryNormalizer.\u0275fac,providedIn:"root"});class OccConfiguratorVariantSerializer{convert(source,target){const resultGroups=[];return source.groups.forEach(group=>this.convertGroup(group,resultGroups)),{...target,configId:source.configId,rootProduct:source.productCode,complete:source.complete,groups:resultGroups}}convertGroup(source,occGroups){const resultSubGroups=[],resultAttributes=[];source.attributes&&source.attributes.forEach(attribute=>this.convertAttribute(attribute,resultAttributes)),source.subGroups&&source.subGroups.forEach(subGroup=>this.convertGroup(subGroup,resultSubGroups));const group={name:source.name,id:source.id,configurable:source.configurable,groupType:this.convertGroupType(source.groupType??Configurator.GroupType.ATTRIBUTE_GROUP),description:source.description,attributes:resultAttributes,subGroups:resultSubGroups};occGroups.push(group)}isRetractValue(attribute){return attribute.selectedSingleValue===OccConfiguratorVariantSerializer.RETRACT_VALUE_CODE}getRetractedValue(attribute){return attribute.values?.find(value=>value.selected)?.valueCode}retractValue(attribute,targetAttribute){this.isRetractValue(attribute)?(targetAttribute.value=this.getRetractedValue(attribute),targetAttribute.retractTriggered=!0):targetAttribute.value=attribute.selectedSingleValue}convertAttribute(attribute,occAttributes){const targetAttribute={key:attribute.name,name:attribute.name,langDepName:attribute.label,required:attribute.required,retractTriggered:attribute.retractTriggered,type:this.convertCharacteristicType(attribute.uiType??Configurator.UiType.NOT_IMPLEMENTED)};if(attribute.uiType===Configurator.UiType.DROPDOWN||attribute.uiType===Configurator.UiType.DROPDOWN_ADDITIONAL_INPUT||attribute.uiType===Configurator.UiType.RADIOBUTTON||attribute.uiType===Configurator.UiType.RADIOBUTTON_ADDITIONAL_INPUT||attribute.uiType===Configurator.UiType.SINGLE_SELECTION_IMAGE)this.retractValue(attribute,targetAttribute);else if(attribute.uiType===Configurator.UiType.STRING)targetAttribute.value=attribute.userInput;else if(attribute.uiType===Configurator.UiType.NUMERIC)targetAttribute.formattedValue=attribute.userInput;else if(attribute.uiType===Configurator.UiType.CHECKBOXLIST||attribute.uiType===Configurator.UiType.CHECKBOX||attribute.uiType===Configurator.UiType.MULTI_SELECTION_IMAGE){const domainValues=[];attribute.values&&attribute.values.forEach(value=>{this.convertValue(value,domainValues)}),targetAttribute.domainValues=domainValues}occAttributes.push(targetAttribute)}convertValue(value,values){values.push({key:value.valueCode,langDepName:value.valueDisplay,name:value.name,selected:value.selected})}convertCharacteristicType(type){let uiType;switch(type){case Configurator.UiType.RADIOBUTTON:uiType=OccConfigurator.UiType.RADIO_BUTTON;break;case Configurator.UiType.RADIOBUTTON_ADDITIONAL_INPUT:uiType=OccConfigurator.UiType.RADIO_BUTTON_ADDITIONAL_INPUT;break;case Configurator.UiType.DROPDOWN:uiType=OccConfigurator.UiType.DROPDOWN;break;case Configurator.UiType.DROPDOWN_ADDITIONAL_INPUT:uiType=OccConfigurator.UiType.DROPDOWN_ADDITIONAL_INPUT;break;case Configurator.UiType.STRING:uiType=OccConfigurator.UiType.STRING;break;case Configurator.UiType.NUMERIC:uiType=OccConfigurator.UiType.NUMERIC;break;case Configurator.UiType.CHECKBOX:uiType=OccConfigurator.UiType.CHECK_BOX;break;case Configurator.UiType.CHECKBOXLIST:uiType=OccConfigurator.UiType.CHECK_BOX_LIST;break;case Configurator.UiType.MULTI_SELECTION_IMAGE:uiType=OccConfigurator.UiType.MULTI_SELECTION_IMAGE;break;case Configurator.UiType.SINGLE_SELECTION_IMAGE:uiType=OccConfigurator.UiType.SINGLE_SELECTION_IMAGE;break;default:uiType=OccConfigurator.UiType.NOT_IMPLEMENTED}return uiType}convertGroupType(groupType){switch(groupType){case Configurator.GroupType.ATTRIBUTE_GROUP:return OccConfigurator.GroupType.CSTIC_GROUP;case Configurator.GroupType.SUB_ITEM_GROUP:return OccConfigurator.GroupType.INSTANCE;case Configurator.GroupType.CONFLICT_GROUP:return OccConfigurator.GroupType.CONFLICT;case Configurator.GroupType.CONFLICT_HEADER_GROUP:return OccConfigurator.GroupType.CONFLICT_HEADER}}}__name(OccConfiguratorVariantSerializer,"OccConfiguratorVariantSerializer"),OccConfiguratorVariantSerializer.RETRACT_VALUE_CODE="###RETRACT_VALUE_CODE###",OccConfiguratorVariantSerializer.\u0275fac=__name(function(t){return new(t||OccConfiguratorVariantSerializer)},"OccConfiguratorVariantSerializer_Factory"),OccConfiguratorVariantSerializer.\u0275prov=core.Yz7({token:OccConfiguratorVariantSerializer,factory:OccConfiguratorVariantSerializer.\u0275fac,providedIn:"root"});class OccConfiguratorVariantUpdateCartEntrySerializer{convert(source,target){return{...target,userId:source.userId,cartId:source.cartId,product:{code:source.configuration.productCode},entryNumber:source.cartEntryNumber,configId:source.configuration.configId,configurationInfos:[{configuratorType:"CPQCONFIGURATOR"}]}}}__name(OccConfiguratorVariantUpdateCartEntrySerializer,"OccConfiguratorVariantUpdateCartEntrySerializer"),OccConfiguratorVariantUpdateCartEntrySerializer.\u0275fac=__name(function(t){return new(t||OccConfiguratorVariantUpdateCartEntrySerializer)},"OccConfiguratorVariantUpdateCartEntrySerializer_Factory"),OccConfiguratorVariantUpdateCartEntrySerializer.\u0275prov=core.Yz7({token:OccConfiguratorVariantUpdateCartEntrySerializer,factory:OccConfiguratorVariantUpdateCartEntrySerializer.\u0275fac,providedIn:"root"});class VariantConfiguratorOccAdapter{constructor(http2,occEndpointsService,converterService,configExpertModeService){this.http=http2,this.occEndpointsService=occEndpointsService,this.converterService=converterService,this.configExpertModeService=configExpertModeService}getConfiguratorType(){return"CPQCONFIGURATOR"}getExpModeRequested(){let expMode=!1;return this.configExpertModeService?.getExpModeRequested().pipe((0,take.q)(1)).subscribe(mode=>expMode=mode),expMode}setExpModeActive(expMode){this.configExpertModeService?.setExpModeActive(expMode)}createConfiguration(owner){const productCode=owner.id,expMode=this.getExpModeRequested();return this.http.get(this.occEndpointsService.buildUrl("createVariantConfiguration",{urlParams:{productCode},queryParams:{expMode}}),{context:this.indicateSendUserForAsm()}).pipe(this.converterService.pipeable(VARIANT_CONFIGURATOR_NORMALIZER),(0,tap.b)(resultConfiguration=>{this.setExpModeActive(void 0!==resultConfiguration.kbKey)}),(0,map.U)(resultConfiguration=>({...resultConfiguration,owner})))}readConfiguration(configId,groupId,configurationOwner){const expMode=this.getExpModeRequested();return this.http.get(this.occEndpointsService.buildUrl("readVariantConfiguration",{urlParams:{configId},queryParams:{groupId,expMode}}),{context:this.indicateSendUserForAsm()}).pipe(this.converterService.pipeable(VARIANT_CONFIGURATOR_NORMALIZER),(0,tap.b)(resultConfiguration=>{this.setExpModeActive(void 0!==resultConfiguration.kbKey)}),(0,map.U)(resultConfiguration=>({...resultConfiguration,owner:configurationOwner})))}updateConfiguration(configuration){const configId=configuration.configId,expMode=this.getExpModeRequested(),url=this.occEndpointsService.buildUrl("updateVariantConfiguration",{urlParams:{configId},queryParams:{expMode}}),occConfiguration=this.converterService.convert(configuration,VARIANT_CONFIGURATOR_SERIALIZER);return this.http.patch(url,occConfiguration,{context:this.indicateSendUserForAsm()}).pipe(this.converterService.pipeable(VARIANT_CONFIGURATOR_NORMALIZER),(0,tap.b)(resultConfiguration=>{this.setExpModeActive(void 0!==resultConfiguration.kbKey)}),(0,map.U)(resultConfiguration=>({...resultConfiguration,owner:configuration.owner})))}addToCart(parameters){const url=this.occEndpointsService.buildUrl("addVariantConfigurationToCart",{urlParams:{userId:parameters.userId,cartId:parameters.cartId}}),occAddToCartParameters=this.converterService.convert(parameters,VARIANT_CONFIGURATOR_ADD_TO_CART_SERIALIZER),headers=new http.WM({"Content-Type":"application/json"});return this.http.post(url,occAddToCartParameters,{headers}).pipe(this.converterService.pipeable(spartacus_cart_base_root.Ke))}readConfigurationForCartEntry(parameters){const url=this.occEndpointsService.buildUrl("readVariantConfigurationForCartEntry",{urlParams:{userId:parameters.userId,cartId:parameters.cartId,cartEntryNumber:parameters.cartEntryNumber}});return this.http.get(url).pipe(this.converterService.pipeable(VARIANT_CONFIGURATOR_NORMALIZER),(0,map.U)(resultConfiguration=>({...resultConfiguration,owner:parameters.owner})))}updateConfigurationForCartEntry(parameters){const url=this.occEndpointsService.buildUrl("updateVariantConfigurationForCartEntry",{urlParams:{userId:parameters.userId,cartId:parameters.cartId,cartEntryNumber:parameters.cartEntryNumber}}),headers=new http.WM({"Content-Type":"application/json"}),occUpdateCartEntryParameters=this.converterService.convert(parameters,VARIANT_CONFIGURATOR_UPDATE_CART_ENTRY_SERIALIZER);return this.http.put(url,occUpdateCartEntryParameters,{headers}).pipe(this.converterService.pipeable(spartacus_cart_base_root.Ke))}readConfigurationForOrderEntry(parameters){const url=this.occEndpointsService.buildUrl("readVariantConfigurationOverviewForOrderEntry",{urlParams:{userId:parameters.userId,orderId:parameters.orderId,orderEntryNumber:parameters.orderEntryNumber}});return this.http.get(url).pipe(this.converterService.pipeable(VARIANT_CONFIGURATOR_OVERVIEW_NORMALIZER),(0,map.U)(overview=>({configId:overview.configId,productCode:overview.productCode,groups:[],flatGroups:[],interactionState:{},overview,owner:spartacus_product_configurator_common.mR.createInitialOwner()})),(0,map.U)(resultConfiguration=>({...resultConfiguration,owner:parameters.owner})))}readPriceSummary(configuration){const url=this.occEndpointsService.buildUrl("readVariantConfigurationPriceSummary",{urlParams:{configId:configuration.configId},queryParams:{groupId:configuration.interactionState.currentGroup}});return this.http.get(url,{context:this.indicateSendUserForAsm()}).pipe(this.converterService.pipeable(VARIANT_CONFIGURATOR_PRICE_NORMALIZER),(0,map.U)(configResult=>({...configuration,priceSummary:configResult.priceSummary,priceSupplements:configResult.priceSupplements})))}getConfigurationOverview(configId){const url=this.occEndpointsService.buildUrl("getVariantConfigurationOverview",{urlParams:{configId}});return this.http.get(url,{context:this.indicateSendUserForAsm()}).pipe(this.converterService.pipeable(VARIANT_CONFIGURATOR_OVERVIEW_NORMALIZER))}searchVariants(configId){const url=this.occEndpointsService.buildUrl("searchConfiguratorVariants",{urlParams:{configId}});return this.http.get(url,{context:this.indicateSendUserForAsm()})}indicateSendUserForAsm(){return(new http.qT).set(spartacus_core.oT0,{sendUserIdAsHeader:!0})}}__name(VariantConfiguratorOccAdapter,"VariantConfiguratorOccAdapter"),VariantConfiguratorOccAdapter.\u0275fac=__name(function(t){return new(t||VariantConfiguratorOccAdapter)(core.LFG(http.eN),core.LFG(spartacus_core.Lz0),core.LFG(spartacus_core.IXI),core.LFG(ConfiguratorExpertModeService,8))},"VariantConfiguratorOccAdapter_Factory"),VariantConfiguratorOccAdapter.\u0275prov=core.Yz7({token:VariantConfiguratorOccAdapter,factory:VariantConfiguratorOccAdapter.\u0275fac});class OccConfiguratorVariantPriceNormalizer{convert(source,target){const priceSupplements=[];return source.attributes?.forEach(attr=>{this.convertAttributeSupplements(attr,priceSupplements)}),{...target,configId:source.configId,productCode:"",groups:[],flatGroups:[],owner:spartacus_product_configurator_common.mR.createInitialOwner(),interactionState:{},priceSummary:source?.priceSummary,priceSupplements}}convertAttributeSupplements(source,priceSupplements){const attributeSupplement={attributeUiKey:source?.csticUiKey,valueSupplements:[]};source?.priceSupplements?.forEach(value=>{this.convertValueSupplement(value,attributeSupplement?.valueSupplements)}),priceSupplements.push(attributeSupplement)}convertValueSupplement(source,valueSupplements){const valueSupplement={attributeValueKey:source?.attributeValueKey,priceValue:source?.priceValue,obsoletePriceValue:source?.obsoletePriceValue};valueSupplements.push(valueSupplement)}}function defaultOccVariantConfiguratorConfigFactory(){return{backend:{occ:{endpoints:{createVariantConfiguration:"products/${productCode}/configurators/ccpconfigurator",readVariantConfiguration:"ccpconfigurator/${configId}",updateVariantConfiguration:"ccpconfigurator/${configId}",addVariantConfigurationToCart:"users/${userId}/carts/${cartId}/entries/ccpconfigurator",readVariantConfigurationForCartEntry:"users/${userId}/carts/${cartId}/entries/${cartEntryNumber}/ccpconfigurator",updateVariantConfigurationForCartEntry:"users/${userId}/carts/${cartId}/entries/${cartEntryNumber}/ccpconfigurator",readVariantConfigurationOverviewForOrderEntry:"users/${userId}/orders/${orderId}/entries/${orderEntryNumber}/ccpconfigurator/configurationOverview",readVariantConfigurationPriceSummary:"ccpconfigurator/${configId}/pricing",getVariantConfigurationOverview:"ccpconfigurator/${configId}/configurationOverview",searchConfiguratorVariants:"ccpconfigurator/${configId}/variants"}}}}}__name(OccConfiguratorVariantPriceNormalizer,"OccConfiguratorVariantPriceNormalizer"),OccConfiguratorVariantPriceNormalizer.\u0275fac=__name(function(t){return new(t||OccConfiguratorVariantPriceNormalizer)},"OccConfiguratorVariantPriceNormalizer_Factory"),OccConfiguratorVariantPriceNormalizer.\u0275prov=core.Yz7({token:OccConfiguratorVariantPriceNormalizer,factory:OccConfiguratorVariantPriceNormalizer.\u0275fac,providedIn:"root"}),__name(defaultOccVariantConfiguratorConfigFactory,"defaultOccVariantConfiguratorConfigFactory");class VariantConfiguratorOccModule{}__name(VariantConfiguratorOccModule,"VariantConfiguratorOccModule"),VariantConfiguratorOccModule.\u0275fac=__name(function(t){return new(t||VariantConfiguratorOccModule)},"VariantConfiguratorOccModule_Factory"),VariantConfiguratorOccModule.\u0275mod=core.oAB({type:VariantConfiguratorOccModule}),VariantConfiguratorOccModule.\u0275inj=core.cJS({providers:[{provide:RulebasedConfiguratorConnector.CONFIGURATOR_ADAPTER_LIST,useClass:VariantConfiguratorOccAdapter,multi:!0},{provide:VARIANT_CONFIGURATOR_NORMALIZER,useExisting:OccConfiguratorVariantNormalizer,multi:!0},{provide:VARIANT_CONFIGURATOR_SERIALIZER,useExisting:OccConfiguratorVariantSerializer,multi:!0},{provide:VARIANT_CONFIGURATOR_PRICE_SUMMARY_NORMALIZER,useExisting:OccConfiguratorVariantPriceSummaryNormalizer,multi:!0},{provide:VARIANT_CONFIGURATOR_PRICE_NORMALIZER,useExisting:OccConfiguratorVariantPriceNormalizer,multi:!0},{provide:VARIANT_CONFIGURATOR_ADD_TO_CART_SERIALIZER,useExisting:OccConfiguratorVariantAddToCartSerializer,multi:!0},{provide:VARIANT_CONFIGURATOR_UPDATE_CART_ENTRY_SERIALIZER,useExisting:OccConfiguratorVariantUpdateCartEntrySerializer,multi:!0},{provide:VARIANT_CONFIGURATOR_OVERVIEW_NORMALIZER,useExisting:OccConfiguratorVariantOverviewNormalizer,multi:!0}],imports:[common.ez,spartacus_core.pEA.withConfigFactory(defaultOccVariantConfiguratorConfigFactory)]});class RulebasedConfiguratorModule{}__name(RulebasedConfiguratorModule,"RulebasedConfiguratorModule"),RulebasedConfiguratorModule.\u0275fac=__name(function(t){return new(t||RulebasedConfiguratorModule)},"RulebasedConfiguratorModule_Factory"),RulebasedConfiguratorModule.\u0275mod=core.oAB({type:RulebasedConfiguratorModule}),RulebasedConfiguratorModule.\u0275inj=core.cJS({imports:[VariantConfiguratorOccModule,RulebasedConfiguratorCoreModule,RulebasedConfiguratorComponentsModule]});var spartacus_product_configurator_rulebased_root=__webpack_require__(3935),forkJoin=__webpack_require__(567);const CPQ_CONFIGURATOR_ADD_TO_CART_SERIALIZER=new core.OlP("CpqConfiguratorAddToCartSerializer"),CPQ_CONFIGURATOR_UPDATE_CART_ENTRY_SERIALIZER=new core.OlP("CpqConfiguratorUpdateCartEntrySerializer");class OccConfiguratorCpqAddToCartSerializer{convert(source,target){return{...target,userId:source.userId,cartId:source.cartId,product:{code:source.productCode},quantity:source.quantity,configId:source.configId}}}__name(OccConfiguratorCpqAddToCartSerializer,"OccConfiguratorCpqAddToCartSerializer"),OccConfiguratorCpqAddToCartSerializer.\u0275fac=__name(function(t){return new(t||OccConfiguratorCpqAddToCartSerializer)},"OccConfiguratorCpqAddToCartSerializer_Factory"),OccConfiguratorCpqAddToCartSerializer.\u0275prov=core.Yz7({token:OccConfiguratorCpqAddToCartSerializer,factory:OccConfiguratorCpqAddToCartSerializer.\u0275fac,providedIn:"root"});class OccConfiguratorCpqUpdateCartEntrySerializer{convert(source,target){return{...target,userId:source.userId,cartId:source.cartId,entryNumber:source.cartEntryNumber,configId:source.configuration.configId}}}function defaultOccCpqConfiguratorConfigFactory(){return{backend:{occ:{endpoints:{getCpqAccessData:"users/${userId}/access/cpqconfigurator",addCpqConfigurationToCart:"users/${userId}/carts/${cartId}/entries/cpqconfigurator",readCpqConfigurationForCartEntry:"users/${userId}/carts/${cartId}/entries/${cartEntryNumber}/cpqconfigurator",readCpqConfigurationForOrderEntry:"users/${userId}/orders/${orderId}/entries/${orderEntryNumber}/cpqconfigurator",updateCpqConfigurationForCartEntry:"users/${userId}/carts/${cartId}/entries/${cartEntryNumber}/cpqconfigurator"}}}}}__name(OccConfiguratorCpqUpdateCartEntrySerializer,"OccConfiguratorCpqUpdateCartEntrySerializer"),OccConfiguratorCpqUpdateCartEntrySerializer.\u0275fac=__name(function(t){return new(t||OccConfiguratorCpqUpdateCartEntrySerializer)},"OccConfiguratorCpqUpdateCartEntrySerializer_Factory"),OccConfiguratorCpqUpdateCartEntrySerializer.\u0275prov=core.Yz7({token:OccConfiguratorCpqUpdateCartEntrySerializer,factory:OccConfiguratorCpqUpdateCartEntrySerializer.\u0275fac,providedIn:"root"}),__name(defaultOccCpqConfiguratorConfigFactory,"defaultOccCpqConfiguratorConfigFactory");class CpqConfiguratorOccModule{}__name(CpqConfiguratorOccModule,"CpqConfiguratorOccModule"),CpqConfiguratorOccModule.\u0275fac=__name(function(t){return new(t||CpqConfiguratorOccModule)},"CpqConfiguratorOccModule_Factory"),CpqConfiguratorOccModule.\u0275mod=core.oAB({type:CpqConfiguratorOccModule}),CpqConfiguratorOccModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.x2j)(defaultOccCpqConfiguratorConfigFactory),{provide:CPQ_CONFIGURATOR_ADD_TO_CART_SERIALIZER,useExisting:OccConfiguratorCpqAddToCartSerializer,multi:!0},{provide:CPQ_CONFIGURATOR_UPDATE_CART_ENTRY_SERIALIZER,useExisting:OccConfiguratorCpqUpdateCartEntrySerializer,multi:!0}],imports:[common.ez]});class CpqConfiguratorOccService{constructor(http2,occEndpointsService,converterService){this.http=http2,this.occEndpointsService=occEndpointsService,this.converterService=converterService}addToCart(parameters){const url=this.occEndpointsService.buildUrl("addCpqConfigurationToCart",{urlParams:{userId:parameters.userId,cartId:parameters.cartId}}),occAddToCartParameters=this.converterService.convert(parameters,CPQ_CONFIGURATOR_ADD_TO_CART_SERIALIZER);return this.http.post(url,occAddToCartParameters).pipe(this.converterService.pipeable(spartacus_cart_base_root.Ke))}updateCartEntry(parameters){const url=this.occEndpointsService.buildUrl("updateCpqConfigurationForCartEntry",{urlParams:{userId:parameters.userId,cartId:parameters.cartId,cartEntryNumber:parameters.cartEntryNumber}}),occUpdateCartEntryParameters=this.converterService.convert(parameters,CPQ_CONFIGURATOR_UPDATE_CART_ENTRY_SERIALIZER);return this.http.put(url,occUpdateCartEntryParameters).pipe(this.converterService.pipeable(spartacus_cart_base_root.Ke))}getConfigIdForCartEntry(parameters){const url=this.occEndpointsService.buildUrl("readCpqConfigurationForCartEntry",{urlParams:{userId:parameters.userId,cartId:parameters.cartId,cartEntryNumber:parameters.cartEntryNumber}});return this.http.get(url).pipe((0,map.U)(response=>response.configId))}getConfigIdForOrderEntry(parameters){const url=this.occEndpointsService.buildUrl("readCpqConfigurationForOrderEntry",{urlParams:{userId:parameters.userId,orderId:parameters.orderId,orderEntryNumber:parameters.orderEntryNumber}});return this.http.get(url).pipe((0,map.U)(response=>response.configId))}}var Cpq;__name(CpqConfiguratorOccService,"CpqConfiguratorOccService"),CpqConfiguratorOccService.\u0275fac=__name(function(t){return new(t||CpqConfiguratorOccService)(core.LFG(http.eN),core.LFG(spartacus_core.Lz0),core.LFG(spartacus_core.IXI))},"CpqConfiguratorOccService_Factory"),CpqConfiguratorOccService.\u0275prov=core.Yz7({token:CpqConfiguratorOccService,factory:CpqConfiguratorOccService.\u0275fac,providedIn:"root"}),function(Cpq2){let DisplayAs;var DisplayAs2;let DataType;var DataType2;(DisplayAs2=DisplayAs=Cpq2.DisplayAs||(Cpq2.DisplayAs={}))[DisplayAs2.RADIO_BUTTON=1]="RADIO_BUTTON",DisplayAs2[DisplayAs2.CHECK_BOX=2]="CHECK_BOX",DisplayAs2[DisplayAs2.DROPDOWN=3]="DROPDOWN",DisplayAs2[DisplayAs2.LIST_BOX=4]="LIST_BOX",DisplayAs2[DisplayAs2.LIST_BOX_MULTI=5]="LIST_BOX_MULTI",DisplayAs2[DisplayAs2.READ_ONLY=71]="READ_ONLY",DisplayAs2[DisplayAs2.INPUT=95]="INPUT",DisplayAs2[DisplayAs2.AUTO_COMPLETE_CUSTOM=102]="AUTO_COMPLETE_CUSTOM",(DataType2=DataType=Cpq2.DataType||(Cpq2.DataType={})).INPUT_STRING="String",DataType2.INPUT_NUMBER="Number",DataType2.QTY_ATTRIBUTE_LEVEL="Quantity",DataType2.QTY_VALUE_LEVEL="Attr.Quantity",DataType2.N_A="N/A"}(Cpq||(Cpq={}));class CpqConfiguratorNormalizerUtilsService{constructor(languageService){this.languageService=languageService}convertQuantity(value,attribute){if(!value.selected)return;let quantity;switch(this.convertDataType(attribute)){case Configurator.DataType.USER_SELECTION_QTY_ATTRIBUTE_LEVEL:quantity=Number(attribute.quantity);break;case Configurator.DataType.USER_SELECTION_QTY_VALUE_LEVEL:quantity=Number(value.quantity);break;default:quantity=void 0}return quantity}convertValuePrice(value,currency){let price;return value.price&&(price={currencyIso:currency,value:parseFloat(value.price)},this.formatPriceForLocale(price,this.getLanguage())),price}calculateValuePriceTotal(quantity,valuePrice){let valuePriceTotal;if(valuePrice){const calculationQuantity=quantity||1;valuePriceTotal={currencyIso:valuePrice.currencyIso,value:calculationQuantity*valuePrice.value},this.formatPriceForLocale(valuePriceTotal,this.getLanguage())}return valuePriceTotal}calculateAttributePriceTotal(attribute,currency){const priceTotal=attribute.values?.filter(entry=>entry.selected&&entry.valuePriceTotal).reduce((total,item)=>total+(item.valuePriceTotal?.value??0),0),attributePriceTotal={currencyIso:currency,value:priceTotal??0};return this.formatPriceForLocale(attributePriceTotal,this.getLanguage()),attributePriceTotal}formatPriceForLocale(price,availableLocale){const currencySymbol=(0,common.jK)(price.currencyIso,"narrow",availableLocale);price.formattedValue=(0,common.xG)(price.value,availableLocale,currencySymbol,price.currencyIso)}convertDataType(cpqAttribute){let dataType;switch(cpqAttribute.dataType){case Cpq.DataType.INPUT_STRING:dataType=Configurator.DataType.INPUT_STRING;break;case Cpq.DataType.INPUT_NUMBER:dataType=Configurator.DataType.INPUT_NUMBER;break;case Cpq.DataType.N_A:dataType=Configurator.DataType.USER_SELECTION_NO_QTY;break;case Cpq.DataType.QTY_ATTRIBUTE_LEVEL:dataType=Configurator.DataType.USER_SELECTION_QTY_ATTRIBUTE_LEVEL;break;case Cpq.DataType.QTY_VALUE_LEVEL:dataType=cpqAttribute.displayAs===Cpq.DisplayAs.RADIO_BUTTON||cpqAttribute.displayAs===Cpq.DisplayAs.DROPDOWN||cpqAttribute.displayAs===Cpq.DisplayAs.CHECK_BOX&&!cpqAttribute.isLineItem?Configurator.DataType.USER_SELECTION_NO_QTY:Configurator.DataType.USER_SELECTION_QTY_VALUE_LEVEL;break;default:dataType=Configurator.DataType.NOT_IMPLEMENTED}return dataType}convertPriceSummary(cpqConfiguration){const priceSummary={};if(cpqConfiguration.currencyISOCode){const currency=cpqConfiguration.currencyISOCode;if(cpqConfiguration?.responder?.totalPrice&&cpqConfiguration?.currencySign){const currencySign=cpqConfiguration?.currencySign,totalPriceAsString=cpqConfiguration.responder.totalPrice.replace(currencySign,""),totalPrice={currencyIso:currency,value:parseFloat(totalPriceAsString)};this.formatPriceForLocale(totalPrice,this.getLanguage()),priceSummary.currentTotal=totalPrice}if(cpqConfiguration?.responder?.baseProductPrice){const basePriceAsString=cpqConfiguration.responder.baseProductPrice,basePrice={currencyIso:currency,value:parseFloat(basePriceAsString)};this.formatPriceForLocale(basePrice,this.getLanguage()),priceSummary.basePrice=basePrice}if(priceSummary.currentTotal&&priceSummary.basePrice){const selectedOptionsPrice={currencyIso:currency,value:priceSummary.currentTotal.value-priceSummary.basePrice.value};this.formatPriceForLocale(selectedOptionsPrice,this.getLanguage()),priceSummary.selectedOptions=selectedOptionsPrice}}return priceSummary}hasAnyProducts(attributeValues){return attributeValues.some(value=>value?.productSystemId)}convertAttributeLabel(attribute){return attribute.label?attribute.label:attribute.name?attribute.name:""}getLanguage(){const lang=this.getActiveLanguage();try{return(0,common.wM)(lang),lang}catch{return this.reportMissingLocaleData(lang),"en"}}getActiveLanguage(){let result;return this.languageService.getActive().subscribe(lang=>result=lang).unsubscribe(),result??"en"}reportMissingLocaleData(lang){(0,core.X6Q)()&&console.warn(`CpqConfiguratorNormalizerUtilsService: No locale data registered for '${lang}' (see https://angular.io/api/common/registerLocaleData).`)}}__name(CpqConfiguratorNormalizerUtilsService,"CpqConfiguratorNormalizerUtilsService"),CpqConfiguratorNormalizerUtilsService.\u0275fac=__name(function(t){return new(t||CpqConfiguratorNormalizerUtilsService)(core.LFG(spartacus_core.TSl))},"CpqConfiguratorNormalizerUtilsService_Factory"),CpqConfiguratorNormalizerUtilsService.\u0275prov=core.Yz7({token:CpqConfiguratorNormalizerUtilsService,factory:CpqConfiguratorNormalizerUtilsService.\u0275fac,providedIn:"root"});class CpqConfiguratorNormalizer{constructor(cpqConfiguratorNormalizerUtilsService,translation){this.cpqConfiguratorNormalizerUtilsService=cpqConfiguratorNormalizerUtilsService,this.translation=translation}convert(source,target){const resultTarget={...target,configId:"",complete:!source.incompleteAttributes?.length,consistent:!(source.invalidMessages?.length||source.failedValidations?.length||source.incompleteMessages?.length||source.errorMessages?.length),totalNumberOfIssues:this.generateTotalNumberOfIssues(source),productCode:source.productSystemId,priceSummary:this.cpqConfiguratorNormalizerUtilsService.convertPriceSummary(source),groups:[],flatGroups:[],owner:spartacus_product_configurator_common.mR.createInitialOwner(),interactionState:{},errorMessages:this.generateErrorMessages(source),warningMessages:this.generateWarningMessages(source),pricingEnabled:!0};return source.tabs?.forEach(tab=>this.convertGroup(tab,source.attributes??[],source.currencyISOCode,resultTarget.groups,resultTarget.flatGroups)),(!resultTarget.groups||0===resultTarget.groups.length)&&this.convertGenericGroup(source.attributes??[],source.incompleteAttributes??[],source.currencyISOCode,resultTarget.groups,resultTarget.flatGroups),resultTarget}generateTotalNumberOfIssues(source){return(source.incompleteAttributes?.length??0)+(source.incompleteMessages?.length??0)+(source.invalidMessages?.length??0)+(source.failedValidations?.length??0)+(source.errorMessages?.length??0)}generateWarningMessages(source){let warnMsgs=[];return warnMsgs=warnMsgs.concat(source.failedValidations??[]),warnMsgs=warnMsgs.concat(source.incompleteMessages??[]),warnMsgs}generateErrorMessages(source){let errorMsgs=[];return errorMsgs=errorMsgs.concat(source.errorMessages??[]),errorMsgs=errorMsgs.concat(source.invalidMessages??[]),errorMsgs}convertGroup(source,sourceAttributes,currency,groupList,flatGroupList){const attributes=[];source.isSelected&&sourceAttributes.forEach(sourceAttribute=>this.convertAttribute(sourceAttribute,source.id,currency,attributes));const group={id:source.id.toString(),name:source.name,description:source.displayName,configurable:!0,complete:!source.isIncomplete,consistent:!0,groupType:Configurator.GroupType.ATTRIBUTE_GROUP,attributes,subGroups:[]};flatGroupList.push(group),groupList.push(group)}convertGenericGroup(sourceAttributes,incompleteAttributes,currency,groupList,flatGroupList){const attributes=[];sourceAttributes.forEach(sourceAttribute=>this.convertAttribute(sourceAttribute,0,currency,attributes));const group={id:"0",name:"_GEN",configurable:!0,complete:0===incompleteAttributes.length,consistent:!0,groupType:Configurator.GroupType.ATTRIBUTE_GROUP,attributes,subGroups:[]};this.translation.translate("configurator.group.general").pipe((0,take.q)(1)).subscribe(generalText=>group.description=generalText),groupList.push(group),flatGroupList.push(group)}convertAttribute(sourceAttribute,groupId,currency,attributeList){const attribute={attrCode:sourceAttribute.stdAttrCode,name:sourceAttribute.pA_ID.toString(),description:sourceAttribute.description,label:this.cpqConfiguratorNormalizerUtilsService.convertAttributeLabel(sourceAttribute),required:sourceAttribute.required,isLineItem:sourceAttribute.isLineItem,uiType:this.convertAttributeType(sourceAttribute),dataType:this.cpqConfiguratorNormalizerUtilsService.convertDataType(sourceAttribute),quantity:Number(sourceAttribute.quantity),groupId:groupId.toString(),userInput:sourceAttribute.userInput,hasConflicts:sourceAttribute.hasConflict,selectedSingleValue:void 0,images:[],visible:!0};if(sourceAttribute.values&&sourceAttribute.displayAs!==Cpq.DisplayAs.INPUT){const values=[];sourceAttribute.values.forEach(value=>this.convertValue(value,sourceAttribute,currency,values)),attribute.values=values,this.setSelectedSingleValue(attribute)}attribute.attributePriceTotal=this.cpqConfiguratorNormalizerUtilsService.calculateAttributePriceTotal(attribute,currency),this.compileAttributeIncomplete(attribute),attributeList.push(attribute)}setSelectedSingleValue(attribute){const values=attribute.values;if(values){const selectedValues=values.map(entry=>entry).filter(entry=>entry.selected);selectedValues&&1===selectedValues.length&&(attribute.selectedSingleValue=selectedValues[0].valueCode)}}convertValueDisplay(sourceValue,sourceAttribute,value){sourceAttribute.displayAs===Cpq.DisplayAs.DROPDOWN&&sourceValue.selected&&0===sourceValue.paV_ID?this.translation.translate("configurator.attribute.dropDownSelectMsg").pipe((0,take.q)(1)).subscribe(text=>value.valueDisplay=text):value.valueDisplay}convertValue(sourceValue,sourceAttribute,currency,values){if(this.hasValueToBeIgnored(sourceAttribute,sourceValue))return;const value={valueCode:sourceValue.paV_ID.toString(),name:sourceValue.valueCode,valueDisplay:sourceValue.valueDisplay,description:sourceValue.description,productSystemId:sourceValue.productSystemId,selected:sourceValue.selected,quantity:this.cpqConfiguratorNormalizerUtilsService.convertQuantity(sourceValue,sourceAttribute),valuePrice:this.cpqConfiguratorNormalizerUtilsService.convertValuePrice(sourceValue,currency),images:[]};this.convertValueDisplay(sourceValue,sourceAttribute,value),value.valuePriceTotal=this.cpqConfiguratorNormalizerUtilsService.calculateValuePriceTotal(value.quantity??1,value.valuePrice),values.push(value)}convertAttributeType(sourceAttribute){const displayAs=sourceAttribute.displayAs,displayAsProduct=!(!sourceAttribute.values||!this.cpqConfiguratorNormalizerUtilsService.hasAnyProducts(sourceAttribute.values));return sourceAttribute.isEnabled||displayAs!==Cpq.DisplayAs.RADIO_BUTTON&&displayAs!==Cpq.DisplayAs.DROPDOWN&&displayAs!==Cpq.DisplayAs.CHECK_BOX&&displayAs!==Cpq.DisplayAs.INPUT?this.findUiTypeFromDisplayType(displayAs,displayAsProduct,sourceAttribute):Configurator.UiType.READ_ONLY}findUiTypeFromDisplayType(displayAs,displayAsProduct,sourceAttribute){let uiType;switch(displayAs){case Cpq.DisplayAs.RADIO_BUTTON:uiType=displayAsProduct?Configurator.UiType.RADIOBUTTON_PRODUCT:uiType=Configurator.UiType.RADIOBUTTON;break;case Cpq.DisplayAs.DROPDOWN:uiType=displayAsProduct?Configurator.UiType.DROPDOWN_PRODUCT:uiType=Configurator.UiType.DROPDOWN;break;case Cpq.DisplayAs.CHECK_BOX:uiType=displayAsProduct?Configurator.UiType.CHECKBOXLIST_PRODUCT:uiType=Configurator.UiType.CHECKBOXLIST;break;case Cpq.DisplayAs.INPUT:uiType=sourceAttribute.dataType===Cpq.DataType.INPUT_STRING?Configurator.UiType.STRING:Configurator.UiType.NOT_IMPLEMENTED;break;default:uiType=Configurator.UiType.NOT_IMPLEMENTED}return uiType}compileAttributeIncomplete(attribute){switch(attribute.incomplete=!1,attribute.uiType){case Configurator.UiType.RADIOBUTTON:case Configurator.UiType.RADIOBUTTON_PRODUCT:case Configurator.UiType.DROPDOWN:case Configurator.UiType.DROPDOWN_PRODUCT:case Configurator.UiType.SINGLE_SELECTION_IMAGE:(!attribute.selectedSingleValue||"0"===attribute.selectedSingleValue)&&(attribute.incomplete=!0);break;case Configurator.UiType.NUMERIC:case Configurator.UiType.STRING:attribute.userInput||(attribute.incomplete=!0);break;case Configurator.UiType.CHECKBOXLIST:case Configurator.UiType.CHECKBOXLIST_PRODUCT:case Configurator.UiType.CHECKBOX:case Configurator.UiType.MULTI_SELECTION_IMAGE:void 0!==attribute.values?.find(value=>value.selected)||(attribute.incomplete=!0)}}hasValueToBeIgnored(attribute,value){const selectedValues=attribute.values?.map(entry=>entry).filter(entry=>entry.selected&&0!==entry.paV_ID);return(attribute.displayAs===Cpq.DisplayAs.DROPDOWN&&attribute.required&&selectedValues&&selectedValues.length>0&&0===value.paV_ID)??!1}}__name(CpqConfiguratorNormalizer,"CpqConfiguratorNormalizer"),CpqConfiguratorNormalizer.\u0275fac=__name(function(t){return new(t||CpqConfiguratorNormalizer)(core.LFG(CpqConfiguratorNormalizerUtilsService),core.LFG(spartacus_core.D7D))},"CpqConfiguratorNormalizer_Factory"),CpqConfiguratorNormalizer.\u0275prov=core.Yz7({token:CpqConfiguratorNormalizer,factory:CpqConfiguratorNormalizer.\u0275fac});class CpqConfiguratorOverviewNormalizer{constructor(cpqConfiguratorNormalizerUtilsService,translation){this.cpqConfiguratorNormalizerUtilsService=cpqConfiguratorNormalizerUtilsService,this.translation=translation,this.NO_OPTION_SELECTED=0}convert(source,target){return{...target,configId:"",productCode:source.productSystemId,priceSummary:this.cpqConfiguratorNormalizerUtilsService.convertPriceSummary(source),groups:source.tabs?.flatMap(tab=>this.convertTab(tab,source.currencyISOCode)).filter(tab=>tab.attributes&&tab.attributes.length>0),totalNumberOfIssues:this.calculateTotalNumberOfIssues(source)}}convertTab(tab,currency){let ovAttributes=[];tab.attributes?.forEach(attr=>{ovAttributes=ovAttributes.concat(this.convertAttribute(attr,currency))});const groupOverview={id:tab.id.toString(),groupDescription:tab.displayName,attributes:ovAttributes};return"0"===groupOverview.id&&this.translation.translate("configurator.group.general").pipe((0,take.q)(1)).subscribe(generalText=>groupOverview.groupDescription=generalText),groupOverview}convertAttribute(attr,currency){const attributeOverviewType=attr?.values&&this.cpqConfiguratorNormalizerUtilsService.hasAnyProducts(attr?.values)?Configurator.AttributeOverviewType.BUNDLE:Configurator.AttributeOverviewType.GENERAL,ovAttr=[];return this.convertAttributeValue(attr,currency).forEach(ovValue=>{ovAttr.push({...ovValue,type:attributeOverviewType,attribute:this.cpqConfiguratorNormalizerUtilsService.convertAttributeLabel(attr),attributeId:attr.stdAttrCode.toString()})}),ovAttr}convertAttributeValue(attr,currency){const ovValues=[];switch(attr.displayAs){case Cpq.DisplayAs.INPUT:attr?.dataType===Cpq.DataType.INPUT_STRING?attr.userInput&&attr.userInput.length>0&&ovValues.push(this.extractValueUserInput(attr,currency)):ovValues.push({attribute:"",value:"NOT_IMPLEMENTED"});break;case Cpq.DisplayAs.RADIO_BUTTON:case Cpq.DisplayAs.DROPDOWN:const selectedValue=attr.values?.find(val=>val.selected&&val.paV_ID!==this.NO_OPTION_SELECTED);selectedValue&&ovValues.push(this.extractValue(selectedValue,attr,currency));break;case Cpq.DisplayAs.CHECK_BOX:attr.values?.filter(val=>val.selected)?.forEach(valueSelected=>{ovValues.push(this.extractValue(valueSelected,attr,currency))});break;default:ovValues.push({attribute:"",value:"NOT_IMPLEMENTED"})}return ovValues}extractValue(valueSelected,attr,currency){const ovValue={attribute:"",value:valueSelected.valueDisplay??valueSelected.paV_ID.toString(),valueId:valueSelected.paV_ID.toString(),productCode:valueSelected.productSystemId,quantity:this.cpqConfiguratorNormalizerUtilsService.convertQuantity(valueSelected,attr),valuePrice:this.cpqConfiguratorNormalizerUtilsService.convertValuePrice(valueSelected,currency)};return ovValue.valuePriceTotal=this.cpqConfiguratorNormalizerUtilsService.calculateValuePriceTotal(ovValue.quantity??1,ovValue.valuePrice),ovValue}extractValueUserInput(attr,currency){const value=attr.values?attr.values[0]:void 0,ovValue={attribute:"",value:attr.userInput??attr.stdAttrCode.toString(),valueId:value?.paV_ID.toString(),quantity:1};return value&&(ovValue.valuePrice=this.cpqConfiguratorNormalizerUtilsService.convertValuePrice(value,currency),ovValue.valuePriceTotal=this.cpqConfiguratorNormalizerUtilsService.calculateValuePriceTotal(ovValue.quantity??1,ovValue.valuePrice)),ovValue}calculateTotalNumberOfIssues(source){return(source.incompleteAttributes?.length??0)+(source.incompleteMessages?.length??0)+(source.invalidMessages?.length??0)+(source.failedValidations?.length??0)+(source.errorMessages?.length??0)}}__name(CpqConfiguratorOverviewNormalizer,"CpqConfiguratorOverviewNormalizer"),CpqConfiguratorOverviewNormalizer.\u0275fac=__name(function(t){return new(t||CpqConfiguratorOverviewNormalizer)(core.LFG(CpqConfiguratorNormalizerUtilsService),core.LFG(spartacus_core.D7D))},"CpqConfiguratorOverviewNormalizer_Factory"),CpqConfiguratorOverviewNormalizer.\u0275prov=core.Yz7({token:CpqConfiguratorOverviewNormalizer,factory:CpqConfiguratorOverviewNormalizer.\u0275fac});class CpqConfiguratorUtils{static getUpdateInformation(attribute){const attributeCode=attribute.attrCode,groupId=attribute.groupId;if(attributeCode&&groupId)return{standardAttributeCode:attributeCode.toString(),tabId:groupId};throw new Error("Attribute code of group id not present: "+JSON.stringify(attribute))}static findFirstChangedAttribute(source){const firstGroup=source.groups[0];if(firstGroup.attributes)return firstGroup.attributes[0];throw new Error("No changed attributes found")}}__name(CpqConfiguratorUtils,"CpqConfiguratorUtils");class CpqConfiguratorSerializer{convert(source){const attribute=CpqConfiguratorUtils.findFirstChangedAttribute(source);let updateAttribute;return updateAttribute=source.updateType===Configurator.UpdateType.ATTRIBUTE_QUANTITY?this.convertQuantity(attribute,source.configId):this.convertAttribute(attribute,source.configId),updateAttribute}convertQuantity(attribute,configId){const updateInformation=CpqConfiguratorUtils.getUpdateInformation(attribute);return{configurationId:configId,standardAttributeCode:updateInformation.standardAttributeCode,changeAttributeValue:{quantity:attribute.quantity},tabId:updateInformation.tabId}}convertAttribute(attribute,configurationId){const updateInformation=CpqConfiguratorUtils.getUpdateInformation(attribute),updateAttribute={configurationId,standardAttributeCode:updateInformation.standardAttributeCode,changeAttributeValue:{},tabId:updateInformation.tabId};return attribute.uiType===Configurator.UiType.DROPDOWN||attribute.uiType===Configurator.UiType.DROPDOWN_PRODUCT||attribute.uiType===Configurator.UiType.RADIOBUTTON||attribute.uiType===Configurator.UiType.RADIOBUTTON_PRODUCT||attribute.uiType===Configurator.UiType.SINGLE_SELECTION_IMAGE?updateAttribute.changeAttributeValue.attributeValueIds=this.processSelectedSingleValue(attribute.selectedSingleValue):attribute.uiType===Configurator.UiType.CHECKBOXLIST||attribute.uiType===Configurator.UiType.CHECKBOXLIST_PRODUCT||attribute.uiType===Configurator.UiType.CHECKBOX||attribute.uiType===Configurator.UiType.MULTI_SELECTION_IMAGE?updateAttribute.changeAttributeValue.attributeValueIds=this.prepareValueIds(attribute):(attribute.uiType===Configurator.UiType.STRING||attribute.uiType===Configurator.UiType.NUMERIC)&&(updateAttribute.changeAttributeValue.userInput=attribute.userInput,updateAttribute.changeAttributeValue?.userInput||(updateAttribute.changeAttributeValue.userInput=" ")),updateAttribute}processSelectedSingleValue(singleValue){let processedValue=singleValue;return processedValue||(processedValue=","),processedValue}prepareValueIds(attribute){let valueIds="";const selectedValues=attribute.values?.filter(value=>value.selected);return selectedValues&&selectedValues.length>0?selectedValues.forEach(value=>{valueIds+=value.valueCode+","}):valueIds=",",valueIds}}__name(CpqConfiguratorSerializer,"CpqConfiguratorSerializer"),CpqConfiguratorSerializer.\u0275fac=__name(function(t){return new(t||CpqConfiguratorSerializer)},"CpqConfiguratorSerializer_Factory"),CpqConfiguratorSerializer.\u0275prov=core.Yz7({token:CpqConfiguratorSerializer,factory:CpqConfiguratorSerializer.\u0275fac});class CpqConfiguratorValueSerializer{convert(source){const attribute=CpqConfiguratorUtils.findFirstChangedAttribute(source);return this.convertAttribute(attribute,source.configId)}convertAttribute(attribute,configurationId){const updateInfo=CpqConfiguratorUtils.getUpdateInformation(attribute),value=this.findFirstChangedValue(attribute);return{configurationId,standardAttributeCode:updateInfo.standardAttributeCode,attributeValueId:value.valueCode,quantity:value.quantity??1,tabId:updateInfo.tabId}}findFirstChangedValue(attribute){if(attribute.values&&attribute.values.length>0)return attribute.values[0];throw new Error("No values present")}}__name(CpqConfiguratorValueSerializer,"CpqConfiguratorValueSerializer"),CpqConfiguratorValueSerializer.\u0275fac=__name(function(t){return new(t||CpqConfiguratorValueSerializer)},"CpqConfiguratorValueSerializer_Factory"),CpqConfiguratorValueSerializer.\u0275prov=core.Yz7({token:CpqConfiguratorValueSerializer,factory:CpqConfiguratorValueSerializer.\u0275fac});const CPQ_CONFIGURATOR_NORMALIZER=new core.OlP("CpqConfiguratorNormalizer"),CPQ_CONFIGURATOR_SERIALIZER=new core.OlP("CpqConfiguratorSerializer"),CPQ_CONFIGURATOR_QUANTITY_SERIALIZER=new core.OlP("CpqConfiguratorValueSerializer"),CPQ_CONFIGURATOR_OVERVIEW_NORMALIZER=new core.OlP("CpqConfiguratorOverviewNormalizer");class CpqConfiguratorEndpointConfig{}__name(CpqConfiguratorEndpointConfig,"CpqConfiguratorEndpointConfig"),CpqConfiguratorEndpointConfig.\u0275fac=__name(function(t){return new(t||CpqConfiguratorEndpointConfig)},"CpqConfiguratorEndpointConfig_Factory"),CpqConfiguratorEndpointConfig.\u0275prov=core.Yz7({token:CpqConfiguratorEndpointConfig,factory:__name(function(t){let r=null;return r=t?new(t||CpqConfiguratorEndpointConfig):core.LFG(spartacus_core.DeH),r},"CpqConfiguratorEndpointConfig_Factory"),providedIn:"root"});class CpqConfiguratorEndpointService{constructor(config){this.config=config,this.CPQ_MARKER_HEADER={headers:new http.WM({[spartacus_product_configurator_rulebased_root.O4]:"x"})}}buildUrl(endpointName,urlParams,queryParams){const endpoints=this.config.backend?.cpq?.endpoints;let endpoint;switch(endpointName){case"configurationInit":endpoint=endpoints?.configurationInit;break;case"configurationDisplay":endpoint=endpoints?.configurationDisplay;break;case"attributeUpdate":endpoint=endpoints?.attributeUpdate;break;case"valueUpdate":endpoint=endpoints?.valueUpdate}endpoint||(endpoint="configurations",console.warn(`${endpointName} endpoint configuration missing for cpq backend, please provide it via key: "backend.cpq.endpoints.${endpointName}"`));let url=this.config.backend?.cpq?.prefix+endpoint;return url=urlParams?spartacus_core.leO.resolve(url,urlParams):url,url=queryParams?this.appendQueryParameters(url,queryParams):url,url}appendQueryParameters(url,parameters){let urlWithParameters=url+"?";return parameters.forEach((param,idx)=>{urlWithParameters=idx>0?urlWithParameters+"&":urlWithParameters,urlWithParameters=`${urlWithParameters}${param.name}=${param.value}`}),urlWithParameters}}__name(CpqConfiguratorEndpointService,"CpqConfiguratorEndpointService"),CpqConfiguratorEndpointService.\u0275fac=__name(function(t){return new(t||CpqConfiguratorEndpointService)(core.LFG(CpqConfiguratorEndpointConfig))},"CpqConfiguratorEndpointService_Factory"),CpqConfiguratorEndpointService.\u0275prov=core.Yz7({token:CpqConfiguratorEndpointService,factory:CpqConfiguratorEndpointService.\u0275fac,providedIn:"root"});class CpqConfiguratorRestService{constructor(http2,converterService,endpointService){this.http=http2,this.converterService=converterService,this.endpointService=endpointService}createConfiguration(productSystemId){return this.callConfigurationInit(productSystemId).pipe((0,switchMap.w)(configCreatedResponse=>this.callConfigurationDisplay(configCreatedResponse.configurationId).pipe(this.converterService.pipeable(CPQ_CONFIGURATOR_NORMALIZER),(0,map.U)(resultConfiguration=>({...resultConfiguration,configId:configCreatedResponse.configurationId})))))}readConfiguration(configId,tabId){return this.callConfigurationDisplay(configId,tabId).pipe(this.converterService.pipeable(CPQ_CONFIGURATOR_NORMALIZER),(0,map.U)(resultConfiguration=>({...resultConfiguration,configId})))}readConfigurationOverview(configId){return this.getConfigurationWithAllTabsAndAttributes(configId).pipe(this.converterService.pipeable(CPQ_CONFIGURATOR_OVERVIEW_NORMALIZER),(0,map.U)(resultConfiguration=>({...resultConfiguration,configId})))}getConfigurationWithAllTabsAndAttributes(configId){return this.callConfigurationDisplay(configId).pipe((0,switchMap.w)(currentTab=>{const tabRequests=[];return currentTab.tabs&&currentTab.tabs.length>0?currentTab.tabs.forEach(tab=>{tab.isSelected?tabRequests.push((0,of.of)(currentTab)):tabRequests.push(this.callConfigurationDisplay(configId,tab.id.toString()))}):tabRequests.push((0,of.of)(currentTab)),(0,forkJoin.D)(tabRequests)}),(0,map.U)(this.mergeTabResults))}mergeTabResults(tabReqResultList){const config={...tabReqResultList[tabReqResultList.length-1]};return config.attributes=void 0,config.tabs=[],tabReqResultList.forEach(tabReqResult=>{let tab;const currentTab=tabReqResult.tabs?.find(tabEl=>tabEl.isSelected);tab=currentTab&&tabReqResult.tabs&&tabReqResult.tabs.length>0?{...currentTab}:{id:0},tab.attributes=tabReqResult.attributes,config.tabs?.push(tab)}),config}updateAttribute(configuration){const updateAttribute=this.converterService.convert(configuration,CPQ_CONFIGURATOR_SERIALIZER);return this.callUpdateAttribute(updateAttribute).pipe((0,switchMap.w)(()=>this.callConfigurationDisplay(configuration.configId,updateAttribute.tabId).pipe(this.converterService.pipeable(CPQ_CONFIGURATOR_NORMALIZER),(0,map.U)(resultConfiguration=>({...resultConfiguration,configId:configuration.configId})))))}updateValueQuantity(configuration){const updateValue=this.converterService.convert(configuration,CPQ_CONFIGURATOR_QUANTITY_SERIALIZER);return this.callUpdateValue(updateValue).pipe((0,switchMap.w)(()=>this.callConfigurationDisplay(configuration.configId,updateValue.tabId).pipe(this.converterService.pipeable(CPQ_CONFIGURATOR_NORMALIZER),(0,map.U)(resultConfiguration=>({...resultConfiguration,configId:configuration.configId})))))}callUpdateValue(updateValue){return this.http.patch(this.endpointService.buildUrl("valueUpdate",{configId:updateValue.configurationId,attributeCode:updateValue.standardAttributeCode,valueCode:updateValue.attributeValueId}),{Quantity:updateValue.quantity},this.endpointService.CPQ_MARKER_HEADER)}callConfigurationInit(productSystemId){return this.http.post(this.endpointService.buildUrl("configurationInit"),{ProductSystemId:productSystemId},this.endpointService.CPQ_MARKER_HEADER)}callConfigurationDisplay(configId,tabId){return this.http.get(this.endpointService.buildUrl("configurationDisplay",{configId},tabId?[{name:"tabId",value:tabId}]:void 0),this.endpointService.CPQ_MARKER_HEADER)}callUpdateAttribute(updateAttribute){return this.http.patch(this.endpointService.buildUrl("attributeUpdate",{configId:updateAttribute.configurationId,attributeCode:updateAttribute.standardAttributeCode}),updateAttribute.changeAttributeValue,this.endpointService.CPQ_MARKER_HEADER)}}__name(CpqConfiguratorRestService,"CpqConfiguratorRestService"),CpqConfiguratorRestService.\u0275fac=__name(function(t){return new(t||CpqConfiguratorRestService)(core.LFG(http.eN),core.LFG(spartacus_core.IXI),core.LFG(CpqConfiguratorEndpointService))},"CpqConfiguratorRestService_Factory"),CpqConfiguratorRestService.\u0275prov=core.Yz7({token:CpqConfiguratorRestService,factory:CpqConfiguratorRestService.\u0275fac,providedIn:"root"});class CpqConfiguratorRestAdapter{constructor(cpqRestService,cpqOccService){this.cpqRestService=cpqRestService,this.cpqOccService=cpqOccService}getConfiguratorType(){return"CLOUDCPQCONFIGURATOR"}createConfiguration(owner){return this.cpqRestService.createConfiguration(owner.id).pipe((0,map.U)(configResponse=>(configResponse.owner=owner,configResponse)))}readConfiguration(configId,groupId,owner){return this.cpqRestService.readConfiguration(configId,groupId).pipe((0,map.U)(configResponse=>(configResponse.owner=owner,configResponse)))}updateConfiguration(configuration){return(configuration.updateType===Configurator.UpdateType.VALUE_QUANTITY?this.cpqRestService.updateValueQuantity:this.cpqRestService.updateAttribute).call(this.cpqRestService,configuration).pipe((0,map.U)(configResponse=>(configResponse.owner=configuration.owner,configResponse)))}addToCart(parameters){return this.cpqOccService.addToCart(parameters)}readConfigurationForCartEntry(parameters){return this.cpqOccService.getConfigIdForCartEntry(parameters).pipe((0,switchMap.w)(configId=>this.cpqRestService.readConfiguration(configId).pipe((0,map.U)(configResponse=>(configResponse.owner=parameters.owner,configResponse)))))}updateConfigurationForCartEntry(parameters){return this.cpqOccService.updateCartEntry(parameters)}readConfigurationForOrderEntry(parameters){return this.cpqOccService.getConfigIdForOrderEntry(parameters).pipe((0,switchMap.w)(configId=>this.cpqRestService.readConfiguration(configId).pipe((0,map.U)(configResponse=>(configResponse.owner=parameters.owner,configResponse)))))}readPriceSummary(configuration){return(0,of.of)(configuration)}getConfigurationOverview(configId){return this.cpqRestService.readConfigurationOverview(configId)}searchVariants(){throw new Error("searchVariants is not supported for the CPQ configurator")}}__name(CpqConfiguratorRestAdapter,"CpqConfiguratorRestAdapter"),CpqConfiguratorRestAdapter.\u0275fac=__name(function(t){return new(t||CpqConfiguratorRestAdapter)(core.LFG(CpqConfiguratorRestService),core.LFG(CpqConfiguratorOccService))},"CpqConfiguratorRestAdapter_Factory"),CpqConfiguratorRestAdapter.\u0275prov=core.Yz7({token:CpqConfiguratorRestAdapter,factory:CpqConfiguratorRestAdapter.\u0275fac});class CpqConfiguratorRestModule{}__name(CpqConfiguratorRestModule,"CpqConfiguratorRestModule"),CpqConfiguratorRestModule.\u0275fac=__name(function(t){return new(t||CpqConfiguratorRestModule)},"CpqConfiguratorRestModule_Factory"),CpqConfiguratorRestModule.\u0275mod=core.oAB({type:CpqConfiguratorRestModule}),CpqConfiguratorRestModule.\u0275inj=core.cJS({providers:[{provide:RulebasedConfiguratorConnector.CONFIGURATOR_ADAPTER_LIST,useClass:CpqConfiguratorRestAdapter,multi:!0},{provide:CPQ_CONFIGURATOR_NORMALIZER,useClass:CpqConfiguratorNormalizer,multi:!0},{provide:CPQ_CONFIGURATOR_SERIALIZER,useClass:CpqConfiguratorSerializer,multi:!0},{provide:CPQ_CONFIGURATOR_QUANTITY_SERIALIZER,useClass:CpqConfiguratorValueSerializer,multi:!0},{provide:CPQ_CONFIGURATOR_OVERVIEW_NORMALIZER,useClass:CpqConfiguratorOverviewNormalizer,multi:!0},(0,spartacus_core.i51)({backend:{cpq:{endpoints:{configurationInit:"configurations",configurationDisplay:"configurations/${configId}/display",attributeUpdate:"configurations/${configId}/attributes/${attributeCode}",valueUpdate:"configurations/${configId}/attributes/${attributeCode}/attributeValues/${valueCode}"},prefix:"/api/configuration/v1/"}}})],imports:[common.ez]});class RulebasedCpqConfiguratorModule{}__name(RulebasedCpqConfiguratorModule,"RulebasedCpqConfiguratorModule"),RulebasedCpqConfiguratorModule.\u0275fac=__name(function(t){return new(t||RulebasedCpqConfiguratorModule)},"RulebasedCpqConfiguratorModule_Factory"),RulebasedCpqConfiguratorModule.\u0275mod=core.oAB({type:RulebasedCpqConfiguratorModule}),RulebasedCpqConfiguratorModule.\u0275inj=core.cJS({imports:[CpqConfiguratorOccModule,CpqConfiguratorRestModule]});const extensions=[];__webpack_require__(988).N.cpq&&extensions.push(RulebasedCpqConfiguratorModule);class RulebasedConfiguratorWrapperModule{}__name(RulebasedConfiguratorWrapperModule,"RulebasedConfiguratorWrapperModule"),RulebasedConfiguratorWrapperModule.\u0275fac=__name(function(t){return new(t||RulebasedConfiguratorWrapperModule)},"RulebasedConfiguratorWrapperModule_Factory"),RulebasedConfiguratorWrapperModule.\u0275mod=core.oAB({type:RulebasedConfiguratorWrapperModule}),RulebasedConfiguratorWrapperModule.\u0275inj=core.cJS({imports:[RulebasedConfiguratorModule,extensions]})},8849:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{D:()=>debounce});var _innerSubscribe__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1177);function debounce(durationSelector){return source=>source.lift(new DebounceOperator(durationSelector))}__name(debounce,"debounce");class DebounceOperator{constructor(durationSelector){this.durationSelector=durationSelector}call(subscriber,source){return source.subscribe(new DebounceSubscriber(subscriber,this.durationSelector))}}__name(DebounceOperator,"DebounceOperator");class DebounceSubscriber extends _innerSubscribe__WEBPACK_IMPORTED_MODULE_0__.Ds{constructor(destination,durationSelector){super(destination),this.durationSelector=durationSelector,this.hasValue=!1}_next(value){try{const result=this.durationSelector.call(this,value);result&&this._tryNext(value,result)}catch(err){this.destination.error(err)}}_complete(){this.emitValue(),this.destination.complete()}_tryNext(value,duration){let subscription=this.durationSubscription;this.value=value,this.hasValue=!0,subscription&&(subscription.unsubscribe(),this.remove(subscription)),subscription=(0,_innerSubscribe__WEBPACK_IMPORTED_MODULE_0__.ft)(duration,new _innerSubscribe__WEBPACK_IMPORTED_MODULE_0__.IY(this)),subscription&&!subscription.closed&&this.add(this.durationSubscription=subscription)}notifyNext(){this.emitValue()}notifyComplete(){this.emitValue()}emitValue(){if(this.hasValue){const value=this.value,subscription=this.durationSubscription;subscription&&(this.durationSubscription=void 0,subscription.unsubscribe(),this.remove(subscription)),this.value=void 0,this.hasValue=!1,super._next(value)}}}__name(DebounceSubscriber,"DebounceSubscriber")},5973:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{$:()=>cartGroup_actions,CQ:()=>CartConnector,Eu:()=>CartVoucherAdapter,F5:()=>multiCartGroup_selectors,F7:()=>isSelectiveCart,Jp:()=>CartBaseCoreModule,N4:()=>MULTI_CART_DATA,Qx:()=>ProductImportInfoService,T6:()=>getCartIdByUserId,YA:()=>CART_VALIDATION_NORMALIZER,YW:()=>CartAdapter,i4:()=>CartValidationGuard,n5:()=>CartValidationAdapter,r_:()=>CartConfigService,vI:()=>CartEntryAdapter,xb:()=>isEmpty});var _angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(4650),_spartacus_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1742),_ngrx_store__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(8555),_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(6789),rxjs_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(4850),rxjs_operators__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(1406),rxjs_operators__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(7221),rxjs_operators__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(1709),rxjs_operators__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(4002),rxjs_operators__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(7545),rxjs_operators__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(7168),rxjs_operators__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(2198),rxjs_operators__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(9184),rxjs_operators__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(2994),rxjs_operators__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(2986),rxjs_operators__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(2313),rxjs_operators__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(5778),rxjs_operators__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(5154),rxjs_operators__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(519),rxjs_operators__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(8849),rxjs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(5254),rxjs__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(1086),rxjs__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(2654),rxjs__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(5409),rxjs__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(6053),rxjs__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(839),rxjs__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(8723),rxjs__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__(8896),_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(5024),tslib__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(655),_spartacus_storefront__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(9764),_spartacus_user_profile_root__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__(2274),_angular_common__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__(6895),_angular_router__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__(610);const MULTI_CART_DATA="[Multi Cart] Multi Cart Data";class CartAddEntry extends _spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.EntityProcessesIncrementAction{constructor(payload){super(MULTI_CART_DATA,payload.cartId),this.payload=payload,this.type="[Cart-entry] Add Entry"}}__name(CartAddEntry,"CartAddEntry");class CartAddEntrySuccess extends _spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.EntityProcessesDecrementAction{constructor(payload){super(MULTI_CART_DATA,payload.cartId),this.payload=payload,this.type="[Cart-entry] Add Entry Success"}}__name(CartAddEntrySuccess,"CartAddEntrySuccess");class CartAddEntryFail extends _spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.EntityProcessesDecrementAction{constructor(payload){super(MULTI_CART_DATA,payload.cartId),this.payload=payload,this.type="[Cart-entry] Add Entry Fail"}}__name(CartAddEntryFail,"CartAddEntryFail");class CartRemoveEntry extends _spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.EntityProcessesIncrementAction{constructor(payload){super(MULTI_CART_DATA,payload.cartId),this.payload=payload,this.type="[Cart-entry] Remove Entry"}}__name(CartRemoveEntry,"CartRemoveEntry");class CartRemoveEntrySuccess extends _spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.EntityProcessesDecrementAction{constructor(payload){super(MULTI_CART_DATA,payload.cartId),this.payload=payload,this.type="[Cart-entry] Remove Entry Success"}}__name(CartRemoveEntrySuccess,"CartRemoveEntrySuccess");class CartRemoveEntryFail extends _spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.EntityProcessesDecrementAction{constructor(payload){super(MULTI_CART_DATA,payload.cartId),this.payload=payload,this.type="[Cart-entry] Remove Entry Fail"}}__name(CartRemoveEntryFail,"CartRemoveEntryFail");class CartUpdateEntry extends _spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.EntityProcessesIncrementAction{constructor(payload){super(MULTI_CART_DATA,payload.cartId),this.payload=payload,this.type="[Cart-entry] Update Entry"}}__name(CartUpdateEntry,"CartUpdateEntry");class CartUpdateEntrySuccess extends _spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.EntityProcessesDecrementAction{constructor(payload){super(MULTI_CART_DATA,payload.cartId),this.payload=payload,this.type="[Cart-entry] Update Entry Success"}}__name(CartUpdateEntrySuccess,"CartUpdateEntrySuccess");class CartUpdateEntryFail extends _spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.EntityProcessesDecrementAction{constructor(payload){super(MULTI_CART_DATA,payload.cartId),this.payload=payload,this.type="[Cart-entry] Update Entry Fail"}}__name(CartUpdateEntryFail,"CartUpdateEntryFail");const CART_ADD_VOUCHER="[Cart-voucher] Add Cart Vouchers",CART_ADD_VOUCHER_SUCCESS="[Cart-voucher] Add Cart Voucher Success",CART_REMOVE_VOUCHER="[Cart-voucher] Remove Cart Voucher";class CartAddVoucher extends _spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.EntityLoadAction{constructor(payload){super(_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.BzF,"addVoucher"),this.payload=payload,this.type=CART_ADD_VOUCHER}}__name(CartAddVoucher,"CartAddVoucher");class CartAddVoucherFail extends _spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.EntityFailAction{constructor(payload){super(_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.BzF,"addVoucher",payload.error),this.payload=payload,this.type="[Cart-voucher] Add Cart Voucher Fail"}}__name(CartAddVoucherFail,"CartAddVoucherFail");class CartAddVoucherSuccess extends _spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.EntitySuccessAction{constructor(payload){super(_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.BzF,"addVoucher"),this.payload=payload,this.type=CART_ADD_VOUCHER_SUCCESS}}__name(CartAddVoucherSuccess,"CartAddVoucherSuccess");class CartResetAddVoucher extends _spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.EntityLoaderResetAction{constructor(){super(_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.BzF,"addVoucher"),this.type="[Cart-voucher] Reset Add Cart Voucher"}}__name(CartResetAddVoucher,"CartResetAddVoucher");class CartRemoveVoucher extends _spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.EntityProcessesIncrementAction{constructor(payload){super(MULTI_CART_DATA,payload.cartId),this.payload=payload,this.type=CART_REMOVE_VOUCHER}}__name(CartRemoveVoucher,"CartRemoveVoucher");class CartRemoveVoucherFail extends _spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.EntityProcessesDecrementAction{constructor(payload){super(MULTI_CART_DATA,payload.cartId),this.payload=payload,this.type="[Cart-voucher] Remove Cart Voucher Fail"}}__name(CartRemoveVoucherFail,"CartRemoveVoucherFail");class CartRemoveVoucherSuccess extends _spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.EntityProcessesDecrementAction{constructor(payload){super(MULTI_CART_DATA,payload.cartId),this.payload=payload,this.type="[Cart-voucher] Remove Cart Voucher Success"}}__name(CartRemoveVoucherSuccess,"CartRemoveVoucherSuccess");const CREATE_CART="[Cart] Create Cart",CREATE_CART_SUCCESS="[Cart] Create Cart Success",LOAD_CART="[Cart] Load Cart",LOAD_CART_SUCCESS="[Cart] Load Cart Success",DELETE_CART="[Cart] Delete Cart";class CreateCart extends _spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.EntityLoadAction{constructor(payload){super(MULTI_CART_DATA,payload.tempCartId),this.payload=payload,this.type=CREATE_CART}}__name(CreateCart,"CreateCart");class CreateCartFail extends _spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.EntityFailAction{constructor(payload){super(MULTI_CART_DATA,payload.tempCartId),this.payload=payload,this.type="[Cart] Create Cart Fail"}}__name(CreateCartFail,"CreateCartFail");class CreateCartSuccess extends _spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.EntitySuccessAction{constructor(payload){super(MULTI_CART_DATA,payload.cartId),this.payload=payload,this.type=CREATE_CART_SUCCESS}}__name(CreateCartSuccess,"CreateCartSuccess");class AddEmailToCart extends _spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.EntityProcessesIncrementAction{constructor(payload){super(MULTI_CART_DATA,payload.cartId),this.payload=payload,this.type="[Cart] Add Email to Cart"}}__name(AddEmailToCart,"AddEmailToCart");class AddEmailToCartFail extends _spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.EntityProcessesDecrementAction{constructor(payload){super(MULTI_CART_DATA,payload.cartId),this.payload=payload,this.type="[Cart] Add Email to Cart Fail"}}__name(AddEmailToCartFail,"AddEmailToCartFail");class AddEmailToCartSuccess extends _spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.EntityProcessesDecrementAction{constructor(payload){super(MULTI_CART_DATA,payload.cartId),this.payload=payload,this.type="[Cart] Add Email to Cart Success"}}__name(AddEmailToCartSuccess,"AddEmailToCartSuccess");class LoadCart extends _spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.EntityLoadAction{constructor(payload){super(MULTI_CART_DATA,payload.cartId),this.payload=payload,this.type=LOAD_CART}}__name(LoadCart,"LoadCart");class LoadCartFail extends _spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.EntityFailAction{constructor(payload){super(MULTI_CART_DATA,payload.cartId,payload.error),this.payload=payload,this.type="[Cart] Load Cart Fail"}}__name(LoadCartFail,"LoadCartFail");class LoadCartSuccess extends _spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.EntitySuccessAction{constructor(payload){super(MULTI_CART_DATA,payload.cartId),this.payload=payload,this.type=LOAD_CART_SUCCESS}}__name(LoadCartSuccess,"LoadCartSuccess");class LoadCartsSuccess extends _spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.EntitySuccessAction{constructor(payload){super(MULTI_CART_DATA,payload.map(cart=>cart?.code??"")),this.payload=payload,this.type="[Cart] Load Carts Success"}}__name(LoadCartsSuccess,"LoadCartsSuccess");class MergeCart{constructor(payload){this.payload=payload,this.type="[Cart] Merge Cart"}}__name(MergeCart,"MergeCart");class MergeCartSuccess extends _spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.EntityRemoveAction{constructor(payload){super(MULTI_CART_DATA,payload.oldCartId),this.payload=payload,this.type="[Cart] Merge Cart Success"}}__name(MergeCartSuccess,"MergeCartSuccess");class ResetCartDetails extends _spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.ProcessesLoaderResetAction{constructor(){super(MULTI_CART_DATA),this.type="[Cart] Reset Cart Details"}}__name(ResetCartDetails,"ResetCartDetails");class RemoveCart extends _spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.EntityRemoveAction{constructor(payload){super(MULTI_CART_DATA,payload.cartId),this.payload=payload,this.type="[Cart] Remove Cart"}}__name(RemoveCart,"RemoveCart");class DeleteCart{constructor(payload){this.payload=payload,this.type=DELETE_CART}}__name(DeleteCart,"DeleteCart");class DeleteCartSuccess extends _spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.EntityRemoveAction{constructor(payload){super(MULTI_CART_DATA,payload.cartId),this.payload=payload,this.type="[Cart] Delete Cart Success"}}__name(DeleteCartSuccess,"DeleteCartSuccess");class DeleteCartFail{constructor(payload){this.payload=payload,this.type="[Cart] Delete Cart Fail"}}__name(DeleteCartFail,"DeleteCartFail");class CartProcessesIncrement extends _spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.EntityProcessesIncrementAction{constructor(payload){super(MULTI_CART_DATA,payload),this.payload=payload,this.type="[Cart] Cart Processes Increment"}}__name(CartProcessesIncrement,"CartProcessesIncrement");class CartProcessesDecrement extends _spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.EntityProcessesDecrementAction{constructor(payload){super(MULTI_CART_DATA,payload),this.payload=payload,this.type="[Cart] Cart Processes Decrement"}}__name(CartProcessesDecrement,"CartProcessesDecrement");class SetActiveCartId{constructor(payload){this.payload=payload,this.type="[Cart] Set Active Cart Id"}}__name(SetActiveCartId,"SetActiveCartId");class ClearCartState extends _spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.EntityRemoveAllAction{constructor(){super(MULTI_CART_DATA),this.type="[Cart] Clear Cart State"}}__name(ClearCartState,"ClearCartState");class SetCartTypeIndex{constructor(payload){this.payload=payload,this.type="[Cart] Set cart type index"}}__name(SetCartTypeIndex,"SetCartTypeIndex");class SetCartData extends _spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.EntitySuccessAction{constructor(payload){super(MULTI_CART_DATA,payload.cartId),this.payload=payload,this.type="[Cart] Set cart data"}}__name(SetCartData,"SetCartData");var cartGroup_actions=Object.freeze({__proto__:null,CART_ADD_ENTRY:"[Cart-entry] Add Entry",CART_ADD_ENTRY_SUCCESS:"[Cart-entry] Add Entry Success",CART_ADD_ENTRY_FAIL:"[Cart-entry] Add Entry Fail",CART_REMOVE_ENTRY:"[Cart-entry] Remove Entry",CART_REMOVE_ENTRY_SUCCESS:"[Cart-entry] Remove Entry Success",CART_REMOVE_ENTRY_FAIL:"[Cart-entry] Remove Entry Fail",CART_UPDATE_ENTRY:"[Cart-entry] Update Entry",CART_UPDATE_ENTRY_SUCCESS:"[Cart-entry] Update Entry Success",CART_UPDATE_ENTRY_FAIL:"[Cart-entry] Update Entry Fail",CartAddEntry,CartAddEntrySuccess,CartAddEntryFail,CartRemoveEntry,CartRemoveEntrySuccess,CartRemoveEntryFail,CartUpdateEntry,CartUpdateEntrySuccess,CartUpdateEntryFail,CART_ADD_VOUCHER,CART_ADD_VOUCHER_FAIL:"[Cart-voucher] Add Cart Voucher Fail",CART_ADD_VOUCHER_SUCCESS,CART_RESET_ADD_VOUCHER:"[Cart-voucher] Reset Add Cart Voucher",CART_REMOVE_VOUCHER,CART_REMOVE_VOUCHER_FAIL:"[Cart-voucher] Remove Cart Voucher Fail",CART_REMOVE_VOUCHER_SUCCESS:"[Cart-voucher] Remove Cart Voucher Success",CartAddVoucher,CartAddVoucherFail,CartAddVoucherSuccess,CartResetAddVoucher,CartRemoveVoucher,CartRemoveVoucherFail,CartRemoveVoucherSuccess,CREATE_CART,CREATE_CART_FAIL:"[Cart] Create Cart Fail",CREATE_CART_SUCCESS,LOAD_CART,LOAD_CART_FAIL:"[Cart] Load Cart Fail",LOAD_CART_SUCCESS,LOAD_CARTS_SUCCESS:"[Cart] Load Carts Success",ADD_EMAIL_TO_CART:"[Cart] Add Email to Cart",ADD_EMAIL_TO_CART_FAIL:"[Cart] Add Email to Cart Fail",ADD_EMAIL_TO_CART_SUCCESS:"[Cart] Add Email to Cart Success",MERGE_CART:"[Cart] Merge Cart",MERGE_CART_SUCCESS:"[Cart] Merge Cart Success",RESET_CART_DETAILS:"[Cart] Reset Cart Details",REMOVE_CART:"[Cart] Remove Cart",DELETE_CART,DELETE_CART_SUCCESS:"[Cart] Delete Cart Success",DELETE_CART_FAIL:"[Cart] Delete Cart Fail",CreateCart,CreateCartFail,CreateCartSuccess,AddEmailToCart,AddEmailToCartFail,AddEmailToCartSuccess,LoadCart,LoadCartFail,LoadCartSuccess,LoadCartsSuccess,MergeCart,MergeCartSuccess,ResetCartDetails,RemoveCart,DeleteCart,DeleteCartSuccess,DeleteCartFail,CART_PROCESSES_INCREMENT:"[Cart] Cart Processes Increment",CART_PROCESSES_DECREMENT:"[Cart] Cart Processes Decrement",SET_ACTIVE_CART_ID:"[Cart] Set Active Cart Id",CLEAR_CART_STATE:"[Cart] Clear Cart State",SET_CART_TYPE_INDEX:"[Cart] Set cart type index",SET_CART_DATA:"[Cart] Set cart data",CartProcessesIncrement,CartProcessesDecrement,SetActiveCartId,ClearCartState,SetCartTypeIndex,SetCartData});class CartEntryAdapter{}__name(CartEntryAdapter,"CartEntryAdapter");class CartEntryConnector{constructor(adapter){this.adapter=adapter}add(userId,cartId,productCode,quantity){return this.adapter.add(userId,cartId,productCode,quantity)}update(userId,cartId,entryNumber,qty,pickupStore){return this.adapter.update(userId,cartId,entryNumber,qty,pickupStore)}remove(userId,cartId,entryNumber){return this.adapter.remove(userId,cartId,entryNumber)}}__name(CartEntryConnector,"CartEntryConnector"),CartEntryConnector.\u0275fac=__name(function(t){return new(t||CartEntryConnector)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(CartEntryAdapter))},"CartEntryConnector_Factory"),CartEntryConnector.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yz7({token:CartEntryConnector,factory:CartEntryConnector.\u0275fac,providedIn:"root"});class CartEntryEffects{constructor(actions$,cartEntryConnector){this.actions$=actions$,this.cartEntryConnector=cartEntryConnector,this.contextChange$=this.actions$.pipe((0,_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.l4)(_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.dO9.CURRENCY_CHANGE,_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.dO9.LANGUAGE_CHANGE)),this.addEntry$=(0,_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.GW)(()=>this.actions$.pipe((0,_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.l4)("[Cart-entry] Add Entry"),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(action=>action.payload),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.b)(payload=>this.cartEntryConnector.add(payload.userId,payload.cartId,payload.productCode,payload.quantity).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(cartModification=>new CartAddEntrySuccess({...payload,...cartModification})),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.K)(error=>(0,rxjs__WEBPACK_IMPORTED_MODULE_6__.D)([new CartAddEntryFail({...payload,error:(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.cxH)(error)}),new LoadCart({cartId:payload.cartId,userId:payload.userId})])))),(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.FM_)(this.contextChange$))),this.removeEntry$=(0,_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.GW)(()=>this.actions$.pipe((0,_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.l4)("[Cart-entry] Remove Entry"),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(action=>action.payload),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.b)(payload=>this.cartEntryConnector.remove(payload.userId,payload.cartId,payload.entryNumber).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(()=>new CartRemoveEntrySuccess({...payload})),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.K)(error=>(0,rxjs__WEBPACK_IMPORTED_MODULE_6__.D)([new CartRemoveEntryFail({...payload,error:(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.cxH)(error)}),new LoadCart({cartId:payload.cartId,userId:payload.userId})])))),(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.FM_)(this.contextChange$))),this.updateEntry$=(0,_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.GW)(()=>this.actions$.pipe((0,_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.l4)("[Cart-entry] Update Entry"),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(action=>action.payload),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.b)(payload=>this.cartEntryConnector.update(payload.userId,payload.cartId,payload.entryNumber,payload.quantity).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(()=>new CartUpdateEntrySuccess({...payload})),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.K)(error=>(0,rxjs__WEBPACK_IMPORTED_MODULE_6__.D)([new CartUpdateEntryFail({...payload,error:(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.cxH)(error)}),new LoadCart({cartId:payload.cartId,userId:payload.userId})])))),(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.FM_)(this.contextChange$)))}}__name(CartEntryEffects,"CartEntryEffects"),CartEntryEffects.\u0275fac=__name(function(t){return new(t||CartEntryEffects)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.eX),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(CartEntryConnector))},"CartEntryEffects_Factory"),CartEntryEffects.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yz7({token:CartEntryEffects,factory:CartEntryEffects.\u0275fac});class CartVoucherAdapter{}__name(CartVoucherAdapter,"CartVoucherAdapter");class CartVoucherConnector{constructor(adapter){this.adapter=adapter}add(userId,cartId,voucherId){return this.adapter.add(userId,cartId,voucherId)}remove(userId,cartId,voucherId){return this.adapter.remove(userId,cartId,voucherId)}}__name(CartVoucherConnector,"CartVoucherConnector"),CartVoucherConnector.\u0275fac=__name(function(t){return new(t||CartVoucherConnector)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(CartVoucherAdapter))},"CartVoucherConnector_Factory"),CartVoucherConnector.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yz7({token:CartVoucherConnector,factory:CartVoucherConnector.\u0275fac,providedIn:"root"});class CartVoucherEffects{constructor(actions$,cartVoucherConnector,messageService){this.actions$=actions$,this.cartVoucherConnector=cartVoucherConnector,this.messageService=messageService,this.addCartVoucher$=(0,_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.GW)(()=>this.actions$.pipe((0,_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.l4)(CART_ADD_VOUCHER),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(action=>action.payload),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.zg)(payload=>this.cartVoucherConnector.add(payload.userId,payload.cartId,payload.voucherId).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(()=>(this.showGlobalMessage("voucher.applyVoucherSuccess",payload.voucherId,_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.xUg.MSG_TYPE_CONFIRMATION),new CartAddVoucherSuccess({...payload}))),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.K)(error=>(0,rxjs__WEBPACK_IMPORTED_MODULE_6__.D)([new CartAddVoucherFail({...payload,error:(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.cxH)(error)}),new CartProcessesDecrement(payload.cartId),new LoadCart({userId:payload.userId,cartId:payload.cartId})])))))),this.removeCartVoucher$=(0,_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.GW)(()=>this.actions$.pipe((0,_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.l4)(CART_REMOVE_VOUCHER),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(action=>action.payload),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.zg)(payload=>this.cartVoucherConnector.remove(payload.userId,payload.cartId,payload.voucherId).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(()=>(this.showGlobalMessage("voucher.removeVoucherSuccess",payload.voucherId,_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.xUg.MSG_TYPE_INFO),new CartRemoveVoucherSuccess({userId:payload.userId,cartId:payload.cartId,voucherId:payload.voucherId}))),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.K)(error=>(0,rxjs__WEBPACK_IMPORTED_MODULE_6__.D)([new CartRemoveVoucherFail({error:(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.cxH)(error),cartId:payload.cartId,userId:payload.userId,voucherId:payload.voucherId}),new LoadCart({userId:payload.userId,cartId:payload.cartId})]))))))}showGlobalMessage(text,param,messageType){this.messageService.add({key:text,params:{voucherCode:param}},messageType)}}function getCartIdByUserId(cart,userId){return userId===_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.Fds?cart?.guid??"":cart?.code??""}function isSelectiveCart(cartId=""){return cartId.startsWith("selectivecart")}function isCartNotFoundError(error){return"notFound"===error.reason&&"cart"===error.subjectType&&!isSelectiveCart(error.subject)}function voucherExceededError(error){return"coupon.already.redeemed"===error.message}function voucherInvalidError(error){return"coupon.invalid.code.provided"===error.message}function isVoucherError(error){return"VoucherOperationError"===error.type}function isCartError(error){return"CartError"===error.type||"CartAddressError"===error.type||"CartEntryError"===error.type||"CartEntryGroupError"===error.type}function isTempCartId(cartId){return cartId.startsWith("temp-")}function isEmpty(cart){return!cart||"object"==typeof cart&&0===Object.keys(cart).length}function isEmail(str){return!!str&&!!str.match(_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.QIJ)}function isJustLoggedIn(userId,previousUserId){return userId!==_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.Fds&&previousUserId!==userId}__name(CartVoucherEffects,"CartVoucherEffects"),CartVoucherEffects.\u0275fac=__name(function(t){return new(t||CartVoucherEffects)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.eX),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(CartVoucherConnector),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.IWp))},"CartVoucherEffects_Factory"),CartVoucherEffects.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yz7({token:CartVoucherEffects,factory:CartVoucherEffects.\u0275fac}),__name(getCartIdByUserId,"getCartIdByUserId"),__name(isSelectiveCart,"isSelectiveCart"),__name(isCartNotFoundError,"isCartNotFoundError"),__name(voucherExceededError,"voucherExceededError"),__name(voucherInvalidError,"voucherInvalidError"),__name(isVoucherError,"isVoucherError"),__name(isCartError,"isCartError"),__name(isTempCartId,"isTempCartId"),__name(isEmpty,"isEmpty"),__name(isEmail,"isEmail"),__name(isJustLoggedIn,"isJustLoggedIn");const getMultiCartState=(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_8__.ZF)("cart"),getMultiCartEntities=(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_8__.P1)(getMultiCartState,state=>state.carts),getCartEntitySelectorFactory=__name(cartId=>(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_8__.P1)(getMultiCartEntities,state=>_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.entityProcessesLoaderStateSelector(state,cartId)),"getCartEntitySelectorFactory"),getCartSelectorFactory=__name(cartId=>(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_8__.P1)(getMultiCartEntities,state=>_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.entityValueSelector(state,cartId)),"getCartSelectorFactory"),getCartIsStableSelectorFactory=__name(cartId=>(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_8__.P1)(getMultiCartEntities,state=>_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.entityIsStableSelector(state,cartId)),"getCartIsStableSelectorFactory"),getCartHasPendingProcessesSelectorFactory=__name(cartId=>(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_8__.P1)(getMultiCartEntities,state=>_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.entityHasPendingProcessesSelector(state,cartId)),"getCartHasPendingProcessesSelectorFactory"),getCartEntriesSelectorFactory=__name(cartId=>(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_8__.P1)(getCartSelectorFactory(cartId),state=>state&&state.entries?state.entries:[]),"getCartEntriesSelectorFactory"),getCartEntrySelectorFactory=__name((cartId,productCode)=>(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_8__.P1)(getCartEntriesSelectorFactory(cartId),state=>state.find(entry=>entry.product?.code===productCode)),"getCartEntrySelectorFactory"),getCartsSelectorFactory=(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_8__.P1)(getMultiCartEntities,state=>Object.keys(state.entities).map(key=>_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.entityValueSelector(state,key))),getCartTypeIndex=(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_8__.P1)(getMultiCartState,state=>state.index),getCartIdByTypeFactory=__name(type=>(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_8__.P1)(getCartTypeIndex,state=>state&&state[type]),"getCartIdByTypeFactory");class CartAdapter{}__name(CartAdapter,"CartAdapter");class CartConnector{constructor(adapter){this.adapter=adapter}loadAll(userId){return this.adapter.loadAll(userId)}load(userId,cartId){return this.adapter.load(userId,cartId)}create(userId,oldCartId,toMergeCartGuid){return this.adapter.create(userId,oldCartId,toMergeCartGuid)}delete(userId,cartId){return this.adapter.delete(userId,cartId)}save(userId,cartId,saveCartName,saveCartDescription){return this.adapter.save(userId,cartId,saveCartName,saveCartDescription)}addEmail(userId,cartId,email){return this.adapter.addEmail(userId,cartId,email)}}__name(CartConnector,"CartConnector"),CartConnector.\u0275fac=__name(function(t){return new(t||CartConnector)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(CartAdapter))},"CartConnector_Factory"),CartConnector.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yz7({token:CartConnector,factory:CartConnector.\u0275fac,providedIn:"root"});class CartEffects{constructor(actions$,cartConnector,store){this.actions$=actions$,this.cartConnector=cartConnector,this.store=store,this.contextChange$=this.actions$.pipe((0,_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.l4)(_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.dO9.CURRENCY_CHANGE,_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.dO9.LANGUAGE_CHANGE)),this.loadCart$=(0,_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.GW)(()=>this.actions$.pipe((0,_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.l4)(LOAD_CART),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(action=>action.payload),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.v)(payload=>payload.cartId),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.zg)(group$=>group$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.w)(payload=>(0,rxjs__WEBPACK_IMPORTED_MODULE_11__.of)(payload).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.M)(this.store.pipe((0,_ngrx_store__WEBPACK_IMPORTED_MODULE_8__.Ys)(getCartHasPendingProcessesSelectorFactory(payload.cartId)))))),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.h)(([_,hasPendingProcesses])=>!hasPendingProcesses),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(([payload])=>payload),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.w)(payload=>this.cartConnector.load(payload.userId,payload.cartId).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.zg)(cart=>{let actions=[];return cart?(actions.push(new LoadCartSuccess({...payload,cart,cartId:getCartIdByUserId(cart,payload.userId)})),payload.cartId===_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.gSv&&actions.push(new RemoveCart({cartId:_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.gSv}))):actions=[new LoadCartFail({...payload,error:{}})],actions}),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.K)(error=>{if(error?.error?.errors){if(error.error.errors.filter(err=>"invalid"===err.reason).length>0)return(0,rxjs__WEBPACK_IMPORTED_MODULE_11__.of)(new LoadCart({...payload}));if(error.error.errors.filter(err=>isCartNotFoundError(err)||"UnknownResourceError"===err.reason).length>0)return(0,rxjs__WEBPACK_IMPORTED_MODULE_11__.of)(new RemoveCart({cartId:payload.cartId}))}return(0,rxjs__WEBPACK_IMPORTED_MODULE_11__.of)(new LoadCartFail({...payload,error:(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.cxH)(error)}))}))))),(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.FM_)(this.contextChange$))),this.createCart$=(0,_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.GW)(()=>this.actions$.pipe((0,_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.l4)(CREATE_CART),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(action=>action.payload),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.zg)(payload=>this.cartConnector.create(payload.userId,payload.oldCartId,payload.toMergeCartGuid).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.w)(cart=>{const conditionalActions=[];return payload.oldCartId&&conditionalActions.push(new MergeCartSuccess({extraData:payload.extraData,userId:payload.userId,tempCartId:payload.tempCartId,cartId:getCartIdByUserId(cart,payload.userId),oldCartId:payload.oldCartId})),[new CreateCartSuccess({...payload,cart,cartId:getCartIdByUserId(cart,payload.userId)}),new RemoveCart({cartId:payload.tempCartId}),...conditionalActions]}),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.K)(error=>(0,rxjs__WEBPACK_IMPORTED_MODULE_11__.of)(new CreateCartFail({...payload,error:(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.cxH)(error)}))))),(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.FM_)(this.contextChange$))),this.mergeCart$=(0,_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.GW)(()=>this.actions$.pipe((0,_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.l4)("[Cart] Merge Cart"),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(action=>action.payload),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.w)(payload=>this.cartConnector.load(payload.userId,_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.gSv).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(currentCart=>{if(currentCart?.code!==payload.cartId)return new CreateCart({userId:payload.userId,oldCartId:payload.cartId,toMergeCartGuid:currentCart?currentCart.guid:void 0,extraData:payload.extraData,tempCartId:payload.tempCartId})}),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.h)(_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.pTN))),(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.FM_)(this.contextChange$))),this.refresh$=(0,_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.GW)(()=>this.actions$.pipe((0,_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.l4)(CART_ADD_VOUCHER_SUCCESS),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(action=>action.payload),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.b)(payload=>(0,rxjs__WEBPACK_IMPORTED_MODULE_6__.D)([new CartProcessesDecrement(payload.cartId),new LoadCart({userId:payload.userId,cartId:payload.cartId})])))),this.refreshWithoutProcesses$=(0,_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.GW)(()=>this.actions$.pipe((0,_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.l4)("[Cart-entry] Add Entry Success","[Cart-entry] Remove Entry Success","[Cart-entry] Update Entry Success","[Cart-voucher] Remove Cart Voucher Success"),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(action=>action.payload),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(payload=>new LoadCart({userId:payload.userId,cartId:payload.cartId})))),this.resetCartDetailsOnSiteContextChange$=(0,_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.GW)(()=>this.actions$.pipe((0,_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.l4)(_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.dO9.LANGUAGE_CHANGE,_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.dO9.CURRENCY_CHANGE),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.zg)(()=>[new ResetCartDetails]))),this.addEmail$=(0,_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.GW)(()=>this.actions$.pipe((0,_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.l4)("[Cart] Add Email to Cart"),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(action=>action.payload),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.zg)(payload=>this.cartConnector.addEmail(payload.userId,payload.cartId,payload.email).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.zg)(()=>[new AddEmailToCartSuccess({...payload}),new LoadCart({userId:payload.userId,cartId:payload.cartId})]),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.K)(error=>(0,rxjs__WEBPACK_IMPORTED_MODULE_6__.D)([new AddEmailToCartFail({...payload,error:(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.cxH)(error)}),new LoadCart({userId:payload.userId,cartId:payload.cartId})])))),(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.FM_)(this.contextChange$))),this.deleteCart$=(0,_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.GW)(()=>this.actions$.pipe((0,_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.l4)(DELETE_CART),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(action=>action.payload),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.zg)(payload=>this.cartConnector.delete(payload.userId,payload.cartId).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(()=>new DeleteCartSuccess({...payload})),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.K)(error=>(0,rxjs__WEBPACK_IMPORTED_MODULE_6__.D)([new DeleteCartFail({...payload,error:(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.cxH)(error)}),new LoadCart({...payload})]))))))}}__name(CartEffects,"CartEffects"),CartEffects.\u0275fac=__name(function(t){return new(t||CartEffects)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.eX),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(CartConnector),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_ngrx_store__WEBPACK_IMPORTED_MODULE_8__.yh))},"CartEffects_Factory"),CartEffects.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yz7({token:CartEffects,factory:CartEffects.\u0275fac});class MultiCartEffects{constructor(actions$){this.actions$=actions$,this.processesIncrement$=this.actions$.pipe((0,_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.l4)(CART_ADD_VOUCHER),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(action=>action.payload),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(payload=>new CartProcessesIncrement(payload.cartId))),this.setSelectiveId$=this.actions$.pipe((0,_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.l4)(LOAD_CART_SUCCESS),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(action=>{switch(action.type){case LOAD_CART_SUCCESS:{const payload=action.payload;if(isSelectiveCart(payload.cartId))return new SetCartTypeIndex({cartType:_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.EI.SELECTIVE,cartId:payload.cartId});break}}}),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.h)(_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.pTN)),this.setActiveCartId$=this.actions$.pipe((0,_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.l4)(LOAD_CART_SUCCESS,LOAD_CART,CREATE_CART_SUCCESS,CREATE_CART,"[Cart] Set Active Cart Id"),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(action=>{switch(action.type){case LOAD_CART:if(action?.payload?.cartId===_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.gSv)return new SetCartTypeIndex({cartType:_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.EI.ACTIVE,cartId:""});break;case LOAD_CART_SUCCESS:if(action?.payload?.extraData?.active)return action.payload?.cart.saveTime?new SetCartTypeIndex({cartType:_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.EI.ACTIVE,cartId:""}):new SetCartTypeIndex({cartType:_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.EI.ACTIVE,cartId:action.meta.entityId});break;case CREATE_CART:if(action?.payload?.extraData?.active)return new SetCartTypeIndex({cartType:_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.EI.ACTIVE,cartId:action.meta.entityId});break;case CREATE_CART_SUCCESS:return new SetCartTypeIndex({cartType:action?.payload?.extraData?.active?_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.EI.ACTIVE:_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.EI.NEW_CREATED,cartId:action.meta.entityId});case"[Cart] Set Active Cart Id":return new SetCartTypeIndex({cartType:_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.EI.ACTIVE,cartId:action.payload})}}),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.h)(_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.pTN))}}__name(MultiCartEffects,"MultiCartEffects"),MultiCartEffects.\u0275fac=__name(function(t){return new(t||MultiCartEffects)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.eX))},"MultiCartEffects_Factory"),MultiCartEffects.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yz7({token:MultiCartEffects,factory:MultiCartEffects.\u0275fac}),(0,tslib__WEBPACK_IMPORTED_MODULE_15__.gn)([(0,_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.Qm)()],MultiCartEffects.prototype,"processesIncrement$",void 0),(0,tslib__WEBPACK_IMPORTED_MODULE_15__.gn)([(0,_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.Qm)()],MultiCartEffects.prototype,"setSelectiveId$",void 0),(0,tslib__WEBPACK_IMPORTED_MODULE_15__.gn)([(0,_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.Qm)()],MultiCartEffects.prototype,"setActiveCartId$",void 0);const effects=[CartEntryEffects,CartVoucherEffects,CartEffects,MultiCartEffects],cartTypeIndexInitialState={[_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.EI.ACTIVE]:""};function cartTypeIndexReducer(state=cartTypeIndexInitialState,action){switch(action.type){case"[Cart] Set cart type index":return{...state,[action.payload.cartType]:action.payload.cartId};case"[Cart] Remove Cart":case"[Cart] Delete Cart Success":return action.payload?.cartId===state[_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.EI.ACTIVE]?{...state,[_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.EI.ACTIVE]:""}:state;case"[Cart] Clear Cart State":return cartTypeIndexInitialState}return state}__name(cartTypeIndexReducer,"cartTypeIndexReducer");function cartEntitiesReducer(state,action){switch(action.type){case"[Cart] Load Carts Success":return action.payload;case LOAD_CART_SUCCESS:case CREATE_CART_SUCCESS:case"[Cart] Set cart data":return action.payload.cart}return state}function clearMultiCartState(reducer){return function(state,action){return action.type===_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.uQL.LOGOUT&&(state=void 0),reducer(state,action)}}__name(cartEntitiesReducer,"cartEntitiesReducer"),__name(clearMultiCartState,"clearMultiCartState");const multiCartMetaReducers=[clearMultiCartState],multiCartReducerToken=new _angular_core__WEBPACK_IMPORTED_MODULE_1__.OlP("MultiCartReducers");function getMultiCartReducers(){return{carts:_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kPG.entityProcessesLoaderReducer(MULTI_CART_DATA,cartEntitiesReducer),index:cartTypeIndexReducer}}__name(getMultiCartReducers,"getMultiCartReducers");const multiCartReducerProvider={provide:multiCartReducerToken,useFactory:getMultiCartReducers};var multiCartGroup_selectors=Object.freeze({__proto__:null,getMultiCartState,getMultiCartEntities,getCartEntitySelectorFactory,getCartSelectorFactory,getCartIsStableSelectorFactory,getCartHasPendingProcessesSelectorFactory,getCartEntriesSelectorFactory,getCartEntrySelectorFactory,getCartsSelectorFactory,getCartTypeIndex,getCartIdByTypeFactory});class MultiCartStatePersistenceService{constructor(statePersistenceService,store,siteContextParamsService){this.statePersistenceService=statePersistenceService,this.store=store,this.siteContextParamsService=siteContextParamsService,this.subscription=new rxjs__WEBPACK_IMPORTED_MODULE_16__.w}initSync(){this.subscription.add(this.statePersistenceService.syncWithStorage({key:"cart",state$:this.getCartState(),context$:this.siteContextParamsService.getValues([_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.iEg]),storageType:_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.iHd.LOCAL_STORAGE,onRead:state=>this.onRead(state)}))}getCartState(){return this.store.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.h)(store=>!!store.cart),(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_8__.Ys)(getMultiCartState),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.h)(state=>!!state),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(state=>state.index),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_17__.g)("Active"),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(indexState=>({active:indexState[_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.EI.ACTIVE]??""})))}onRead(state){this.store.dispatch(new ClearCartState),state?this.store.dispatch(new SetActiveCartId(state.active)):this.store.dispatch(new SetActiveCartId(""))}ngOnDestroy(){this.subscription.unsubscribe()}}function cartStatePersistenceFactory(cartStatePersistenceService,configInit){return __name(()=>configInit.getStable("context").pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_18__.b)(()=>{cartStatePersistenceService.initSync()})).toPromise(),"result")}function uninitializeActiveCartMetaReducerFactory(){return __name(reducer=>(state,action)=>{const newState={...state};return"@ngrx/store/init"===action.type&&(newState.cart={...newState.cart,index:{[_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.EI.ACTIVE]:void 0}}),reducer(newState,action)},"metaReducer")}__name(MultiCartStatePersistenceService,"MultiCartStatePersistenceService"),MultiCartStatePersistenceService.\u0275fac=__name(function(t){return new(t||MultiCartStatePersistenceService)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.WBb),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_ngrx_store__WEBPACK_IMPORTED_MODULE_8__.yh),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.Qnj))},"MultiCartStatePersistenceService_Factory"),MultiCartStatePersistenceService.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yz7({token:MultiCartStatePersistenceService,factory:MultiCartStatePersistenceService.\u0275fac,providedIn:"root"}),__name(cartStatePersistenceFactory,"cartStatePersistenceFactory"),__name(uninitializeActiveCartMetaReducerFactory,"uninitializeActiveCartMetaReducerFactory");class CartPersistenceModule{}__name(CartPersistenceModule,"CartPersistenceModule"),CartPersistenceModule.\u0275fac=__name(function(t){return new(t||CartPersistenceModule)},"CartPersistenceModule_Factory"),CartPersistenceModule.\u0275mod=_angular_core__WEBPACK_IMPORTED_MODULE_1__.oAB({type:CartPersistenceModule}),CartPersistenceModule.\u0275inj=_angular_core__WEBPACK_IMPORTED_MODULE_1__.cJS({providers:[{provide:_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.z4I,useFactory:cartStatePersistenceFactory,deps:[MultiCartStatePersistenceService,_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.yUt],multi:!0},{provide:_ngrx_store__WEBPACK_IMPORTED_MODULE_8__.sr,useFactory:uninitializeActiveCartMetaReducerFactory,multi:!0}]});class CartValidationAdapter{}__name(CartValidationAdapter,"CartValidationAdapter");class CartValidationConnector{constructor(adapter){this.adapter=adapter}validate(cartId,userId){return this.adapter.validate(cartId,userId)}}__name(CartValidationConnector,"CartValidationConnector"),CartValidationConnector.\u0275fac=__name(function(t){return new(t||CartValidationConnector)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(CartValidationAdapter))},"CartValidationConnector_Factory"),CartValidationConnector.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yz7({token:CartValidationConnector,factory:CartValidationConnector.\u0275fac,providedIn:"root"});class CartEventBuilder{constructor(actionsSubject,event,activeCartService,stateEventService){this.actionsSubject=actionsSubject,this.event=event,this.activeCartService=activeCartService,this.stateEventService=stateEventService,this.register()}register(){this.registerCreateCart(),this.registerAddEntry(),this.registerRemoveEntry(),this.registerUpdateEntry(),this.registerDeleteCart(),this.registerAddCartVoucher(),this.registerRemoveCartVoucher(),this.registerMergeCartSuccess()}registerAddEntry(){this.registerMapped({action:"[Cart-entry] Add Entry",event:_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.uP}),this.registerMapped({action:"[Cart-entry] Add Entry Success",event:_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.VD}),this.registerMapped({action:"[Cart-entry] Add Entry Fail",event:_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.K$})}registerRemoveEntry(){this.registerMapped({action:"[Cart-entry] Remove Entry Success",event:_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.A7}),this.registerMapped({action:"[Cart-entry] Remove Entry Fail",event:_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.dC})}registerUpdateEntry(){this.registerMapped({action:"[Cart-entry] Update Entry Success",event:_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.X}),this.registerMapped({action:"[Cart-entry] Update Entry Fail",event:_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.gI})}registerMergeCartSuccess(){this.registerMapped({action:"[Cart] Merge Cart Success",event:_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.pA})}registerCreateCart(){this.stateEventService.register({action:CREATE_CART,event:_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.su}),this.stateEventService.register({action:CREATE_CART_SUCCESS,event:_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.cA}),this.stateEventService.register({action:"[Cart] Create Cart Fail",event:_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.Cj})}registerDeleteCart(){this.stateEventService.register({action:DELETE_CART,event:_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.aY,factory:action=>(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.PjU)(_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.aY,{...action.payload,cartCode:action.payload.cartId})}),this.stateEventService.register({action:"[Cart] Delete Cart Success",event:_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.N0,factory:action=>(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.PjU)(_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.N0,{...action.payload,cartCode:action.payload.cartId})}),this.stateEventService.register({action:"[Cart] Delete Cart Fail",event:_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.Ks,factory:action=>(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.PjU)(_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.Ks,{...action.payload,cartCode:action.payload.cartId})})}registerAddCartVoucher(){this.stateEventService.register({action:CART_ADD_VOUCHER,event:_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.aT}),this.stateEventService.register({action:CART_ADD_VOUCHER_SUCCESS,event:_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.Es}),this.stateEventService.register({action:"[Cart-voucher] Add Cart Voucher Fail",event:_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.re})}registerRemoveCartVoucher(){this.stateEventService.register({action:CART_REMOVE_VOUCHER,event:_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.uX}),this.stateEventService.register({action:"[Cart-voucher] Remove Cart Voucher Success",event:_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.FC}),this.stateEventService.register({action:"[Cart-voucher] Remove Cart Voucher Fail",event:_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.kd})}registerMapped(mapping){const eventStream$=this.getAction(mapping.action).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.w)(action=>(0,rxjs__WEBPACK_IMPORTED_MODULE_11__.of)(action).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.M)(this.activeCartService.getActive(),this.activeCartService.getActiveCartId()))),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.h)(([action,_activeCart,activeCartId])=>action.payload.cartId===activeCartId),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(([action,activeCart])=>(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.PjU)(mapping.event,{...action.payload,cartCode:activeCart.code,entry:action.payload.entry?action.payload.entry:activeCart.entries?.[Number(action.payload.entryNumber)]})));return this.event.register(mapping.event,eventStream$)}getAction(actionType){return this.actionsSubject.pipe((0,_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.l4)(...[].concat(actionType)))}}__name(CartEventBuilder,"CartEventBuilder"),CartEventBuilder.\u0275fac=__name(function(t){return new(t||CartEventBuilder)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_ngrx_store__WEBPACK_IMPORTED_MODULE_8__.UO),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.POd),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.bu),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.vL$))},"CartEventBuilder_Factory"),CartEventBuilder.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yz7({token:CartEventBuilder,factory:CartEventBuilder.\u0275fac,providedIn:"root"});class CartEventModule{constructor(_CartEventBuilder){}}__name(CartEventModule,"CartEventModule"),CartEventModule.\u0275fac=__name(function(t){return new(t||CartEventModule)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(CartEventBuilder))},"CartEventModule_Factory"),CartEventModule.\u0275mod=_angular_core__WEBPACK_IMPORTED_MODULE_1__.oAB({type:CartEventModule}),CartEventModule.\u0275inj=_angular_core__WEBPACK_IMPORTED_MODULE_1__.cJS({});class CartPageEventBuilder{constructor(eventService){this.eventService=eventService,this.register()}register(){this.eventService.register(_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.uB,this.buildCartPageEvent())}buildCartPageEvent(){return this.eventService.get(_spartacus_storefront__WEBPACK_IMPORTED_MODULE_19__.z4w).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.h)(navigationEvent=>"cart"===navigationEvent.semanticRoute),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(navigationEvent=>(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.PjU)(_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.uB,{navigation:navigationEvent})))}}__name(CartPageEventBuilder,"CartPageEventBuilder"),CartPageEventBuilder.\u0275fac=__name(function(t){return new(t||CartPageEventBuilder)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.POd))},"CartPageEventBuilder_Factory"),CartPageEventBuilder.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yz7({token:CartPageEventBuilder,factory:CartPageEventBuilder.\u0275fac,providedIn:"root"});class CartPageEventModule{constructor(_cartPageEventBuilder){}}__name(CartPageEventModule,"CartPageEventModule"),CartPageEventModule.\u0275fac=__name(function(t){return new(t||CartPageEventModule)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(CartPageEventBuilder))},"CartPageEventModule_Factory"),CartPageEventModule.\u0275mod=_angular_core__WEBPACK_IMPORTED_MODULE_1__.oAB({type:CartPageEventModule}),CartPageEventModule.\u0275inj=_angular_core__WEBPACK_IMPORTED_MODULE_1__.cJS({});class ActiveCartService{constructor(multiCartFacade,userIdService){this.multiCartFacade=multiCartFacade,this.userIdService=userIdService,this.subscription=new rxjs__WEBPACK_IMPORTED_MODULE_16__.w,this.activeCartId$=this.userIdService.getUserId().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.q)(1),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_21__.c)(this.multiCartFacade.getCartIdByType(_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.EI.ACTIVE)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.h)(cartId=>void 0!==cartId),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(cartId=>""===cartId?_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.gSv:cartId)),this.cartEntity$=this.activeCartId$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.w)(cartId=>this.multiCartFacade.getCartEntity(cartId))),this.checkInitLoad=void 0,this.initActiveCart(),this.detectUserChange()}initActiveCart(){const cartValue$=this.cartEntity$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(cartEntity=>({cart:cartEntity.value,isStable:!cartEntity.loading&&0===cartEntity.processesCount,loaded:Boolean((cartEntity.error||cartEntity.success)&&!cartEntity.loading)})),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.h)(({isStable,cart})=>isStable||isEmpty(cart))),loading=cartValue$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.M)(this.activeCartId$,this.userIdService.getUserId()),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_18__.b)(([{cart,loaded,isStable},cartId,userId])=>{isStable&&isEmpty(cart)&&!loaded&&!isTempCartId(cartId)&&this.load(cartId,userId)}));this.activeCart$=(0,rxjs__WEBPACK_IMPORTED_MODULE_22__.g)(()=>loading.subscribe(),()=>cartValue$).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(({cart})=>cart||{}),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_23__.x)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_24__.d)({bufferSize:1,refCount:!0}))}detectUserChange(){this.subscription.add(this.userIdService.getUserId().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_25__.G)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.M)(this.activeCartId$)).subscribe(([[previousUserId,userId],cartId])=>{isJustLoggedIn(userId,previousUserId)&&this.loadOrMerge(cartId,userId,previousUserId)}))}getActive(){return this.activeCart$}takeActive(){return this.isStable().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.h)(isStable=>isStable),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.w)(()=>this.getActive()),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.h)(cart=>!!cart),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.q)(1))}getActiveCartId(){return this.activeCart$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.M)(this.userIdService.getUserId()),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(([cart,userId])=>getCartIdByUserId(cart,userId)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_23__.x)())}takeActiveCartId(){return this.isStable().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.h)(isStable=>isStable),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.w)(()=>this.getActiveCartId()),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.h)(cartId=>!!cartId),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.q)(1))}getEntries(){return this.activeCartId$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.w)(cartId=>this.multiCartFacade.getEntries(cartId)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_23__.x)())}getLastEntry(productCode){return this.activeCartId$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.w)(cartId=>this.multiCartFacade.getLastEntry(cartId,productCode)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_23__.x)())}getLoading(){return this.cartEntity$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(cartEntity=>Boolean(cartEntity.loading)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_23__.x)())}isStable(){return this.activeCartId$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.w)(cartId=>this.multiCartFacade.isStable(cartId)))}load(cartId,userId){userId===_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.Fds&&cartId===_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.gSv||this.multiCartFacade.loadCart({userId,cartId,extraData:{active:!0}})}loadOrMerge(cartId,userId,previousUserId){cartId===_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.gSv||previousUserId!==_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.Fds?this.multiCartFacade.loadCart({userId,cartId,extraData:{active:!0}}):Boolean((0,_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.P51)(this.isGuestCart()))?this.guestCartMerge(cartId):this.multiCartFacade.mergeToCurrentCart({userId,cartId,extraData:{active:!0}})}guestCartMerge(cartId){this.getEntries().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.q)(1)).subscribe(entries=>{this.multiCartFacade.deleteCart(cartId,_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.Fds),this.addEntriesGuestMerge(entries)})}addEntriesGuestMerge(cartEntries){const entriesToAdd=cartEntries.map(entry=>({productCode:entry.product?.code??"",quantity:entry.quantity??0}));this.requireLoadedCart(!0).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.M)(this.userIdService.getUserId())).subscribe(([cart,userId])=>{this.multiCartFacade.addEntries(userId,getCartIdByUserId(cart,userId),entriesToAdd)})}isCartCreating(cartState,cartId){return isTempCartId(cartId)&&(cartState.loading||cartState.success||cartState.error)}requireLoadedCart(forGuestMerge=!1){this.checkInitLoad=void 0===this.checkInitLoad;const cartSelector$=(forGuestMerge?this.cartEntity$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.h)(()=>!Boolean((0,_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.P51)(this.isGuestCart())))):this.cartEntity$).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.h)(cartState=>!cartState.loading||!!this.checkInitLoad));return this.activeCartId$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.M)(cartSelector$),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.h)(([cartId,cartState])=>!this.isCartCreating(cartState,cartId)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(([,cartState])=>cartState),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.q)(1),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.M)(this.userIdService.getUserId()),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_18__.b)(([cartState,userId])=>{isEmpty(cartState.value)&&userId!==_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.Fds&&!cartState.loading&&this.load(_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.gSv,userId),this.checkInitLoad=!1}),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_21__.c)(cartSelector$),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.M)(this.userIdService.getUserId()),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.h)(([cartState,userId])=>Boolean(userId===_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.Fds||cartState.success||cartState.error)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.q)(1),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_18__.b)(([cartState,userId])=>{isEmpty(cartState.value)&&this.multiCartFacade.createCart({userId,extraData:{active:!0}})}),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_21__.c)(cartSelector$),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.h)(cartState=>cartState.success||cartState.error),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.M)(this.activeCartId$),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.h)(([cartState,cartId])=>!this.isCartCreating(cartState,cartId)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(([cartState])=>cartState.value),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.h)(cart=>!isEmpty(cart)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.q)(1))}addEntry(productCode,quantity){this.requireLoadedCart().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.M)(this.userIdService.getUserId())).subscribe(([cart,userId])=>{this.multiCartFacade.addEntry(userId,getCartIdByUserId(cart,userId),productCode,quantity)})}removeEntry(entry){this.activeCartId$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.M)(this.userIdService.getUserId()),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.q)(1)).subscribe(([cartId,userId])=>{this.multiCartFacade.removeEntry(userId,cartId,entry.entryNumber)})}updateEntry(entryNumber,quantity){this.activeCartId$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.M)(this.userIdService.getUserId()),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.q)(1)).subscribe(([cartId,userId])=>{this.multiCartFacade.updateEntry(userId,cartId,entryNumber,quantity)})}getEntry(productCode){return this.activeCartId$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.w)(cartId=>this.multiCartFacade.getEntry(cartId,productCode)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_23__.x)())}addEmail(email){this.activeCartId$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.M)(this.userIdService.getUserId()),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.q)(1)).subscribe(([cartId,userId])=>{this.multiCartFacade.assignEmail(cartId,userId,email)})}getAssignedUser(){return this.activeCart$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(cart=>cart.user))}isGuestCart(cart){return cart?(0,rxjs__WEBPACK_IMPORTED_MODULE_11__.of)(this.isCartUserGuest(cart)):this.activeCart$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(activeCart=>this.isCartUserGuest(activeCart)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_23__.x)())}isCartUserGuest(cart){const cartUser=cart.user;return Boolean(cartUser&&(cartUser.name===_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.YI5||isEmail(cartUser.uid?.split("|").slice(1).join("|"))))}addEntries(cartEntries){const entriesToAdd=cartEntries.map(entry=>({productCode:entry.product?.code??"",quantity:entry.quantity??0}));this.requireLoadedCart().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.M)(this.userIdService.getUserId())).subscribe(([cart,userId])=>{cart&&this.multiCartFacade.addEntries(userId,getCartIdByUserId(cart,userId),entriesToAdd)})}reloadActiveCart(){(0,rxjs__WEBPACK_IMPORTED_MODULE_26__.aj)([this.getActiveCartId(),this.userIdService.takeUserId()]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.q)(1),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(([cartId,userId])=>{this.multiCartFacade.loadCart({cartId,userId,extraData:{active:!0}})})).subscribe()}ngOnDestroy(){this.subscription.unsubscribe()}}__name(ActiveCartService,"ActiveCartService"),ActiveCartService.\u0275fac=__name(function(t){return new(t||ActiveCartService)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.WT),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.XBV))},"ActiveCartService_Factory"),ActiveCartService.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yz7({token:ActiveCartService,factory:ActiveCartService.\u0275fac});class CartValidationStateService{constructor(routingService){this.routingService=routingService,this.NAVIGATION_SKIPS=2,this.navigationIdCount=0,this.subscription=new rxjs__WEBPACK_IMPORTED_MODULE_16__.w,this.cartValidationResult$=new rxjs__WEBPACK_IMPORTED_MODULE_27__.t(1),this.checkForValidationResultClear$=this.routingService.getRouterState().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.M)(this.cartValidationResult$),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_18__.b)(([routerState,cartModifications])=>{this.navigationIdCount+this.NAVIGATION_SKIPS<=routerState.navigationId&&cartModifications.length&&(this.cartValidationResult$.next([]),this.navigationIdCount=routerState.navigationId)})),this.setInitialState()}ngOnDestroy(){this.subscription.unsubscribe()}setInitialState(){this.setNavigationIdStep(),this.subscription.add(this.checkForValidationResultClear$.subscribe())}updateValidationResultAndRoutingId(cartModification){this.cartValidationResult$.next(cartModification),this.setNavigationIdStep()}setNavigationIdStep(){this.routingService.getRouterState().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.q)(1)).subscribe(routerState=>this.navigationIdCount=routerState.navigationId)}}__name(CartValidationStateService,"CartValidationStateService"),CartValidationStateService.\u0275fac=__name(function(t){return new(t||CartValidationStateService)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.Znh))},"CartValidationStateService_Factory"),CartValidationStateService.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yz7({token:CartValidationStateService,factory:CartValidationStateService.\u0275fac,providedIn:"root"});class CartValidationService{constructor(cartValidationConnector,command,userIdService,activeCartFacade,cartValidationStateService){this.cartValidationConnector=cartValidationConnector,this.command=command,this.userIdService=userIdService,this.activeCartFacade=activeCartFacade,this.cartValidationStateService=cartValidationStateService,this.validateCartCommand=this.command.create(()=>(0,rxjs__WEBPACK_IMPORTED_MODULE_26__.aj)([this.activeCartFacade.getActiveCartId(),this.userIdService.takeUserId(),this.activeCartFacade.isStable()]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.h)(([_,__,loaded])=>loaded),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.q)(1),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.w)(([cartId,userId])=>this.cartValidationConnector.validate(cartId,userId))),{strategy:_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.flE.CancelPrevious})}validateCart(){return this.validateCartCommand.execute()}getValidationResults(){return this.cartValidationStateService.cartValidationResult$}}__name(CartValidationService,"CartValidationService"),CartValidationService.\u0275fac=__name(function(t){return new(t||CartValidationService)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(CartValidationConnector),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.VDr),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.XBV),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.bu),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(CartValidationStateService))},"CartValidationService_Factory"),CartValidationService.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yz7({token:CartValidationService,factory:CartValidationService.\u0275fac});class CartVoucherService{constructor(store,activeCartFacade,userIdService){this.store=store,this.activeCartFacade=activeCartFacade,this.userIdService=userIdService}addVoucher(voucherId,cartId){this.combineUserAndCartId(cartId).subscribe(([occUserId,cartIdentifier])=>this.store.dispatch(new CartAddVoucher({userId:occUserId,cartId:cartIdentifier,voucherId})))}removeVoucher(voucherId,cartId){this.combineUserAndCartId(cartId).subscribe(([occUserId,cartIdentifier])=>this.store.dispatch(new CartRemoveVoucher({userId:occUserId,cartId:cartIdentifier,voucherId})))}getAddVoucherResultError(){return this.store.pipe((0,_ngrx_store__WEBPACK_IMPORTED_MODULE_8__.Ys)(_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.VkE.getProcessErrorFactory("addVoucher")))}getAddVoucherResultSuccess(){return this.store.pipe((0,_ngrx_store__WEBPACK_IMPORTED_MODULE_8__.Ys)(_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.VkE.getProcessSuccessFactory("addVoucher")))}getAddVoucherResultLoading(){return this.store.pipe((0,_ngrx_store__WEBPACK_IMPORTED_MODULE_8__.Ys)(_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.VkE.getProcessLoadingFactory("addVoucher")))}resetAddVoucherProcessingState(){this.store.dispatch(new CartResetAddVoucher)}combineUserAndCartId(cartId){return cartId?this.userIdService.getUserId().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.q)(1),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(userId=>[userId,cartId])):(0,rxjs__WEBPACK_IMPORTED_MODULE_26__.aj)([this.userIdService.getUserId(),this.activeCartFacade.getActiveCartId()]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.q)(1))}}__name(CartVoucherService,"CartVoucherService"),CartVoucherService.\u0275fac=__name(function(t){return new(t||CartVoucherService)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_ngrx_store__WEBPACK_IMPORTED_MODULE_8__.yh),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.bu),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.XBV))},"CartVoucherService_Factory"),CartVoucherService.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yz7({token:CartVoucherService,factory:CartVoucherService.\u0275fac});class MultiCartService{constructor(store,userIdService){this.store=store,this.userIdService=userIdService}getCart(cartId){return this.store.pipe((0,_ngrx_store__WEBPACK_IMPORTED_MODULE_8__.Ys)(getCartSelectorFactory(cartId)))}getCarts(){return this.store.pipe((0,_ngrx_store__WEBPACK_IMPORTED_MODULE_8__.Ys)(getCartsSelectorFactory))}getCartEntity(cartId){return this.store.pipe((0,_ngrx_store__WEBPACK_IMPORTED_MODULE_8__.Ys)(getCartEntitySelectorFactory(cartId)))}isStable(cartId){return this.store.pipe((0,_ngrx_store__WEBPACK_IMPORTED_MODULE_8__.Ys)(getCartIsStableSelectorFactory(cartId)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_28__.D)(isStable=>isStable?(0,rxjs__WEBPACK_IMPORTED_MODULE_29__.H)(0):rxjs__WEBPACK_IMPORTED_MODULE_30__.E),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_23__.x)())}generateTempCartId(){return`temp-${Math.random().toString(36).substr(2,9)}`}createCart({userId,oldCartId,toMergeCartGuid,extraData}){const tempCartId=this.generateTempCartId();return this.store.dispatch(new CreateCart({extraData,userId,oldCartId,toMergeCartGuid,tempCartId})),this.getCartIdByType(extraData?.active?_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.EI.ACTIVE:_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.EI.NEW_CREATED).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.w)(cartId=>this.getCart(cartId)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.h)(_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.pTN))}mergeToCurrentCart({userId,cartId,extraData}){const tempCartId=this.generateTempCartId();this.store.dispatch(new MergeCart({userId,cartId,extraData,tempCartId}))}loadCart({cartId,userId,extraData}){this.store.dispatch(new LoadCart({userId,cartId,extraData}))}getEntries(cartId){return this.store.pipe((0,_ngrx_store__WEBPACK_IMPORTED_MODULE_8__.Ys)(getCartEntriesSelectorFactory(cartId)))}getLastEntry(cartId,productCode){return this.store.pipe((0,_ngrx_store__WEBPACK_IMPORTED_MODULE_8__.Ys)(getCartEntriesSelectorFactory(cartId)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(entries=>{const filteredEntries=entries.filter(entry=>entry.product?.code===productCode);return filteredEntries?filteredEntries[filteredEntries.length-1]:void 0}))}addEntry(userId,cartId,productCode,quantity){this.store.dispatch(new CartAddEntry({userId,cartId,productCode,quantity}))}addEntries(userId,cartId,products){products.forEach(product=>{this.store.dispatch(new CartAddEntry({userId,cartId,productCode:product.productCode,quantity:product.quantity}))})}removeEntry(userId,cartId,entryNumber){this.store.dispatch(new CartRemoveEntry({userId,cartId,entryNumber:`${entryNumber}`}))}updateEntry(userId,cartId,entryNumber,quantity){quantity>0?this.store.dispatch(new CartUpdateEntry({userId,cartId,entryNumber:`${entryNumber}`,quantity})):this.removeEntry(userId,cartId,entryNumber)}getEntry(cartId,productCode){return this.store.pipe((0,_ngrx_store__WEBPACK_IMPORTED_MODULE_8__.Ys)(getCartEntrySelectorFactory(cartId,productCode)))}assignEmail(cartId,userId,email){this.store.dispatch(new AddEmailToCart({userId,cartId,email}))}removeCart(cartId){this.store.dispatch(new RemoveCart({cartId}))}deleteCart(cartId,userId){this.store.dispatch(new DeleteCart({userId,cartId}))}reloadCart(cartId,extraData){this.userIdService.takeUserId().subscribe(userId=>this.store.dispatch(new LoadCart({userId,cartId,extraData})))}getCartIdByType(cartType){return this.store.pipe((0,_ngrx_store__WEBPACK_IMPORTED_MODULE_8__.Ys)(getCartIdByTypeFactory(cartType)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_23__.x)())}}__name(MultiCartService,"MultiCartService"),MultiCartService.\u0275fac=__name(function(t){return new(t||MultiCartService)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_ngrx_store__WEBPACK_IMPORTED_MODULE_8__.yh),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.XBV))},"MultiCartService_Factory"),MultiCartService.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yz7({token:MultiCartService,factory:MultiCartService.\u0275fac});class SelectiveCartService{constructor(userProfileFacade,multiCartFacade,baseSiteService,userIdService){this.userProfileFacade=userProfileFacade,this.multiCartFacade=multiCartFacade,this.baseSiteService=baseSiteService,this.userIdService=userIdService}getCart(){return this.selectiveCart$||(this.selectiveCart$=(0,rxjs__WEBPACK_IMPORTED_MODULE_26__.aj)([this.getSelectiveCartId(),this.userProfileFacade.get(),this.userIdService.getUserId(),this.baseSiteService.getActive()]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_23__.x)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_18__.b)(([selectiveId,user,userId,activeBaseSite])=>{!Boolean(selectiveId)&&userId!==_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.Fds&&user?.customerId&&this.multiCartFacade.loadCart({userId,cartId:`selectivecart${activeBaseSite}${user.customerId}`})}),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.h)(([selectiveId])=>Boolean(selectiveId)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.w)(([selectiveId])=>this.multiCartFacade.getCart(selectiveId)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_24__.d)({bufferSize:1,refCount:!0}))),this.selectiveCart$}getEntries(){return this.getSelectiveCartId().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.w)(selectiveId=>this.multiCartFacade.getEntries(selectiveId)))}isStable(){return this.getSelectiveCartId().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.w)(selectiveId=>this.multiCartFacade.isStable(selectiveId)))}addEntry(productCode,quantity){this.getSelectiveIdWithUserId().subscribe(([selectiveId,userId])=>{this.multiCartFacade.addEntry(userId,selectiveId,productCode,quantity)})}removeEntry(entry){this.getSelectiveIdWithUserId().subscribe(([selectiveId,userId])=>{this.multiCartFacade.removeEntry(userId,selectiveId,entry.entryNumber)})}updateEntry(entryNumber,quantity){this.getSelectiveIdWithUserId().subscribe(([selectiveId,userId])=>{this.multiCartFacade.updateEntry(userId,selectiveId,entryNumber,quantity)})}getEntry(productCode){return this.getSelectiveCartId().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.w)(selectiveId=>this.multiCartFacade.getEntry(selectiveId,productCode)))}getSelectiveCartId(){return this.multiCartFacade.getCartIdByType(_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.EI.SELECTIVE)}getSelectiveIdWithUserId(){return this.getSelectiveCartId().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_23__.x)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.M)(this.userIdService.getUserId()),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.q)(1))}}__name(SelectiveCartService,"SelectiveCartService"),SelectiveCartService.\u0275fac=__name(function(t){return new(t||SelectiveCartService)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_spartacus_user_profile_root__WEBPACK_IMPORTED_MODULE_31__.aT),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.WT),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.Do$),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.XBV))},"SelectiveCartService_Factory"),SelectiveCartService.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yz7({token:SelectiveCartService,factory:SelectiveCartService.\u0275fac});const facadeProviders=[ActiveCartService,{provide:_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.bu,useExisting:ActiveCartService},CartVoucherService,{provide:_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.LN,useExisting:CartVoucherService},MultiCartService,{provide:_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.WT,useExisting:MultiCartService},SelectiveCartService,{provide:_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.Oo,useExisting:SelectiveCartService},CartValidationService,{provide:_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.mU,useExisting:CartValidationService}];class BadCartRequestHandler extends _spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kck{constructor(){super(...arguments),this.responseStatus=_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.sdw.BAD_REQUEST}getPriority(){return 0}hasMatch(errorResponse){return super.hasMatch(errorResponse)&&this.getErrors(errorResponse).some(isCartError)}handleError(request,response){this.handleCartNotFoundError(request,response),this.handleOtherCartErrors(request,response)}handleCartNotFoundError(_request,response){this.getErrors(response).filter(e=>isCartNotFoundError(e)).forEach(()=>{this.globalMessageService.add({key:"httpHandlers.cartNotFound"},_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.xUg.MSG_TYPE_ERROR)})}handleOtherCartErrors(_request,response){this.getErrors(response).filter(e=>"notFound"!==e.reason||"cart"!==e.subjectType).forEach(error=>{this.globalMessageService.add(error.message?error.message:{key:"httpHandlers.otherCartErrors"},_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.xUg.MSG_TYPE_ERROR)})}getErrors(response){return(response.error?.errors||[]).filter(error=>"JaloObjectNoLongerValidError"!==error.type)}}__name(BadCartRequestHandler,"BadCartRequestHandler"),BadCartRequestHandler.\u0275fac=function(){let \u0275BadCartRequestHandler_BaseFactory;return __name(function(t){return(\u0275BadCartRequestHandler_BaseFactory||(\u0275BadCartRequestHandler_BaseFactory=_angular_core__WEBPACK_IMPORTED_MODULE_1__.n5z(BadCartRequestHandler)))(t||BadCartRequestHandler)},"BadCartRequestHandler_Factory")}(),BadCartRequestHandler.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yz7({token:BadCartRequestHandler,factory:BadCartRequestHandler.\u0275fac,providedIn:"root"});class BadVoucherRequestHandler extends _spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kck{constructor(){super(...arguments),this.responseStatus=_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.sdw.BAD_REQUEST}getPriority(){return 0}hasMatch(errorResponse){return super.hasMatch(errorResponse)&&this.getErrors(errorResponse).some(isVoucherError)}handleError(request,response){this.handleVoucherExceededError(request,response),this.handleVoucherInvalidError(request,response)}handleVoucherExceededError(_request,response){this.getErrors(response).filter(e=>voucherExceededError(e)).forEach(()=>{this.globalMessageService.add({key:"httpHandlers.voucherExceeded"},_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.xUg.MSG_TYPE_ERROR)})}handleVoucherInvalidError(_request,response){this.getErrors(response).filter(e=>voucherInvalidError(e)).forEach(()=>{this.globalMessageService.add({key:"httpHandlers.invalidCodeProvided"},_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.xUg.MSG_TYPE_ERROR)})}getErrors(response){return(response.error?.errors||[]).filter(error=>"JaloObjectNoLongerValidError"!==error.type)}}__name(BadVoucherRequestHandler,"BadVoucherRequestHandler"),BadVoucherRequestHandler.\u0275fac=function(){let \u0275BadVoucherRequestHandler_BaseFactory;return __name(function(t){return(\u0275BadVoucherRequestHandler_BaseFactory||(\u0275BadVoucherRequestHandler_BaseFactory=_angular_core__WEBPACK_IMPORTED_MODULE_1__.n5z(BadVoucherRequestHandler)))(t||BadVoucherRequestHandler)},"BadVoucherRequestHandler_Factory")}(),BadVoucherRequestHandler.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yz7({token:BadVoucherRequestHandler,factory:BadVoucherRequestHandler.\u0275fac,providedIn:"root"});class MultiCartStoreModule{}__name(MultiCartStoreModule,"MultiCartStoreModule"),MultiCartStoreModule.\u0275fac=__name(function(t){return new(t||MultiCartStoreModule)},"MultiCartStoreModule_Factory"),MultiCartStoreModule.\u0275mod=_angular_core__WEBPACK_IMPORTED_MODULE_1__.oAB({type:MultiCartStoreModule}),MultiCartStoreModule.\u0275inj=_angular_core__WEBPACK_IMPORTED_MODULE_1__.cJS({providers:[multiCartReducerProvider],imports:[_angular_common__WEBPACK_IMPORTED_MODULE_32__.ez,_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.vUS,_ngrx_store__WEBPACK_IMPORTED_MODULE_8__.Aw.forFeature("cart",multiCartReducerToken,{metaReducers:multiCartMetaReducers}),_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.sQ.forFeature(effects)]});class CartBaseCoreModule{}__name(CartBaseCoreModule,"CartBaseCoreModule"),CartBaseCoreModule.\u0275fac=__name(function(t){return new(t||CartBaseCoreModule)},"CartBaseCoreModule_Factory"),CartBaseCoreModule.\u0275mod=_angular_core__WEBPACK_IMPORTED_MODULE_1__.oAB({type:CartBaseCoreModule}),CartBaseCoreModule.\u0275inj=_angular_core__WEBPACK_IMPORTED_MODULE_1__.cJS({providers:[CartConnector,CartEntryConnector,CartVoucherConnector,CartValidationConnector,...facadeProviders,{provide:_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kck,useExisting:BadCartRequestHandler,multi:!0},{provide:_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.kck,useExisting:BadVoucherRequestHandler,multi:!0}],imports:[CartEventModule,MultiCartStoreModule,CartPersistenceModule,CartPageEventModule]});const CART_VALIDATION_NORMALIZER=new _angular_core__WEBPACK_IMPORTED_MODULE_1__.OlP("CartValidationNormalizer");class CartConfigService{constructor(config){this.config=config}isSelectiveCartEnabled(){return Boolean(this.config?.cart?.selectiveCart?.enabled)}isCartValidationEnabled(){return Boolean(this.config?.cart?.validation?.enabled)}}__name(CartConfigService,"CartConfigService"),CartConfigService.\u0275fac=__name(function(t){return new(t||CartConfigService)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.qB))},"CartConfigService_Factory"),CartConfigService.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yz7({token:CartConfigService,factory:CartConfigService.\u0275fac,providedIn:"root"});class CartValidationGuard{constructor(cartValidationService,semanticPathService,router,globalMessageService,activeCartService,cartValidationStateService,cartConfigService){this.cartValidationService=cartValidationService,this.semanticPathService=semanticPathService,this.router=router,this.globalMessageService=globalMessageService,this.activeCartService=activeCartService,this.cartValidationStateService=cartValidationStateService,this.cartConfigService=cartConfigService,this.GLOBAL_MESSAGE_TIMEOUT=1e4}canActivate(){return this.cartConfigService.isCartValidationEnabled()?this.cartValidationService.validateCart().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.M)(this.activeCartService.getEntries()),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(([cartModificationList,cartEntries])=>{if(this.cartValidationStateService.updateValidationResultAndRoutingId(cartModificationList.cartModifications??[]),void 0!==cartModificationList.cartModifications&&0!==cartModificationList.cartModifications.length){let validationResultMessage;const modification=cartModificationList.cartModifications[0];return validationResultMessage=1===cartEntries.length&&cartEntries[0].product?.code===modification.entry?.product?.code&&modification.statusCode===_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.v$.NO_STOCK?{key:"validation.cartEntryRemoved",params:{name:modification.entry?.product?.name}}:{key:"validation.cartEntriesChangeDuringCheckout"},this.globalMessageService.add(validationResultMessage,_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.xUg.MSG_TYPE_ERROR,this.GLOBAL_MESSAGE_TIMEOUT),this.activeCartService.reloadActiveCart(),this.router.parseUrl(this.semanticPathService.get("cart")??"")}return!0})):(0,rxjs__WEBPACK_IMPORTED_MODULE_11__.of)(!0)}}__name(CartValidationGuard,"CartValidationGuard"),CartValidationGuard.\u0275fac=__name(function(t){return new(t||CartValidationGuard)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.mU),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.hCH),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_angular_router__WEBPACK_IMPORTED_MODULE_33__.F0),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_spartacus_core__WEBPACK_IMPORTED_MODULE_0__.IWp),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.bu),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(CartValidationStateService),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(CartConfigService))},"CartValidationGuard_Factory"),CartValidationGuard.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yz7({token:CartValidationGuard,factory:CartValidationGuard.\u0275fac,providedIn:"root"});class ProductImportInfoService{constructor(actionsSubject){this.actionsSubject=actionsSubject}getResults(cartId){return this.actionsSubject.pipe((0,_ngrx_effects__WEBPACK_IMPORTED_MODULE_2__.l4)("[Cart-entry] Add Entry Success","[Cart-entry] Add Entry Fail"),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.h)(action=>action.payload.cartId===cartId),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.U)(action=>this.mapMessages(action)))}mapMessages(action){const{productCode}=action.payload;if(action instanceof CartAddEntrySuccess){const{quantity,quantityAdded,entry,statusCode}=action.payload;if(statusCode===_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.QX.LOW_STOCK)return{productCode,statusCode,productName:entry?.product?.name,quantity,quantityAdded};if(statusCode===_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.QX.SUCCESS||statusCode===_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.QX.NO_STOCK)return{productCode,statusCode,productName:entry?.product?.name}}else if(action instanceof CartAddEntryFail){const{error}=action.payload;if("UnknownIdentifierError"===error?.details[0]?.type)return{productCode,statusCode:_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.QX.UNKNOWN_IDENTIFIER}}return(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.X6Q)()&&console.warn("Unrecognized cart add entry action type while mapping messages",action),{productCode,statusCode:_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_14__.QX.UNKNOWN_ERROR}}}__name(ProductImportInfoService,"ProductImportInfoService"),ProductImportInfoService.\u0275fac=__name(function(t){return new(t||ProductImportInfoService)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_ngrx_store__WEBPACK_IMPORTED_MODULE_8__.UO))},"ProductImportInfoService_Factory"),ProductImportInfoService.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yz7({token:ProductImportInfoService,factory:ProductImportInfoService.\u0275fac,providedIn:"root"})}};