"use strict";(self.webpackChunkstorefrontapp=self.webpackChunkstorefrontapp||[]).push([[679],{2679:(Gt,pe,O)=>{O.r(pe),O.d(pe,{OrderModule:()=>Nt});var c=O(4650),nt=O(6978),a=O(8555),o=O(1742),_=O(2994),l=O(4850),z=O(2986),E=O(7545),h=O(7221),R=O(5503),ot=O(591),Oe=O(6053),S=O(1086),M=O(6789),u=O(5024);class he{}let y=(()=>{class e{constructor(r){this.adapter=r}get(r,t){return this.adapter.load(r,t)}getHistory(r,t,s,i){return this.adapter.loadHistory(r,t,s,i)}getConsignmentTracking(r,t,s){return this.adapter.getConsignmentTracking(r,t,s)}cancel(r,t,s){return this.adapter.cancel(r,t,s)}return(r,t){return this.adapter.createReturnRequest(r,t)}getReturnRequestDetail(r,t){return this.adapter.loadReturnRequestDetail(r,t)}getReturnRequestList(r,t,s,i){return this.adapter.loadReturnRequestList(r,t,s,i)}cancelReturnRequest(r,t,s){return this.adapter.cancelReturnRequest(r,t,s)}}return e.\u0275fac=function(r){return new(r||e)(c.LFG(he))},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac}),e})();class Ee{}let Se=(()=>{class e{constructor(r){this.adapter=r}placeOrder(r,t,s){return this.adapter.placeOrder(r,t,s)}}return e.\u0275fac=function(r){return new(r||e)(c.LFG(Ee))},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac}),e})();class Le{}let w=(()=>{class e{constructor(r){this.adapter=r}load(r,t){return this.adapter.load(r,t)}loadReplenishmentDetailsHistory(r,t,s,i,d){return this.adapter.loadReplenishmentDetailsHistory(r,t,s,i,d)}cancelReplenishmentOrder(r,t){return this.adapter.cancelReplenishmentOrder(r,t)}loadHistory(r,t,s,i){return this.adapter.loadHistory(r,t,s,i)}}return e.\u0275fac=function(r){return new(r||e)(c.LFG(Le))},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac}),e})();class Ce{}let fe=(()=>{class e{constructor(r){this.adapter=r}scheduleReplenishmentOrder(r,t,s,i){return this.adapter.scheduleReplenishmentOrder(r,t,s,i)}}return e.\u0275fac=function(r){return new(r||e)(c.LFG(Ce))},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac}),e})();const b="[Order] Load Consignment Tracking",Y="[Order] Load Consignment Tracking Success",V="[Order] Clear Consignment Tracking";class ge{constructor(n){this.payload=n,this.type=b}}class De{constructor(n){this.payload=n,this.type="[Order] Load Consignment Tracking Fail"}}class ve{constructor(n){this.payload=n,this.type=Y}}class _e{constructor(){this.type=V}}const g="cancelOrder",D="cancelReturn",m="cancelReplenishmentOrder",A="[Order] User Orders",U="[Order] Order Return Requests",C="[Order] Return Request Details",T="[Order] User Order Details",F="[Order] User Replenishment Orders",P="[Order] User Replenishment Order Details",Q="[Order] Load Order Details",B="[Order] Load Order Details Success",K="[Order] Cancel Order";class Ie extends o.kPG.LoaderLoadAction{constructor(n){super(T),this.payload=n,this.type=Q}}class Ne extends o.kPG.LoaderFailAction{constructor(n){super(T,n),this.payload=n,this.type="[Order] Load Order Details Fail"}}class Ge extends o.kPG.LoaderSuccessAction{constructor(n){super(T),this.payload=n,this.type=B}}class ke extends o.kPG.LoaderResetAction{constructor(){super(T),this.type="[Order] Clear Order Details"}}class Me extends o.kPG.EntityLoadAction{constructor(n){super(o.BzF,g),this.payload=n,this.type=K}}class we extends o.kPG.EntityFailAction{constructor(n){super(o.BzF,g,n),this.payload=n,this.type="[Order] Cancel Order Fail"}}class qe extends o.kPG.EntitySuccessAction{constructor(){super(o.BzF,g),this.type="[Order] Cancel Order Success"}}class He extends o.kPG.EntityLoaderResetAction{constructor(){super(o.BzF,g),this.type="[Order] Reset Cancel Order Process"}}const W="[Order] Create Order Return Request",X="[Order] Load Order Return Request details",j="[Order] Cancel Order Return Request",J="[Order] Load User Order Return Request List",Z="[Order] Load User Order Return Request List Success";class Xe extends o.kPG.LoaderLoadAction{constructor(n){super(C),this.payload=n,this.type=W}}class je extends o.kPG.LoaderFailAction{constructor(n){super(C,n),this.payload=n,this.type="[Order] Create Order Return Request Fail"}}class Je extends o.kPG.LoaderSuccessAction{constructor(n){super(C),this.payload=n,this.type="[Order] Create Order Return Request Success"}}class Ze extends o.kPG.LoaderLoadAction{constructor(n){super(C),this.payload=n,this.type=X}}class er extends o.kPG.LoaderFailAction{constructor(n){super(C,n),this.payload=n,this.type="[Order] Load Order Return Request details Fail"}}class rr extends o.kPG.LoaderSuccessAction{constructor(n){super(C),this.payload=n,this.type="[Order] Load Order Return Request details Success"}}class tr extends o.kPG.EntityLoadAction{constructor(n){super(o.BzF,D),this.payload=n,this.type=j}}class sr extends o.kPG.EntityFailAction{constructor(n){super(o.BzF,D,n),this.payload=n,this.type="[Order] Cancel Order Return Request Fail"}}class nr extends o.kPG.EntitySuccessAction{constructor(){super(o.BzF,D),this.type="[Order] Cancel Order Return Request Success"}}class or extends o.kPG.LoaderLoadAction{constructor(n){super(U),this.payload=n,this.type=J}}class ir extends o.kPG.LoaderFailAction{constructor(n){super(U,n),this.payload=n,this.type="[Order] Load User Order Return Request List Fail"}}class cr extends o.kPG.LoaderSuccessAction{constructor(n){super(U),this.payload=n,this.type=Z}}class dr extends o.kPG.LoaderResetAction{constructor(){super(C),this.type="[Order] Clear Order Return Request Details"}}class ar extends o.kPG.LoaderResetAction{constructor(){super(U),this.type="[Order] Clear Order Return Request List"}}class ur extends o.kPG.EntityLoaderResetAction{constructor(){super(o.BzF,D),this.type="[Order] Reset Cancel Return Request Process"}}const ee="[Order] Load User Orders",re="[Order] Load User Orders Fail",te="[Order] Load User Orders Success";class Rr extends o.kPG.LoaderLoadAction{constructor(n){super(A),this.payload=n,this.type=ee}}class pr extends o.kPG.LoaderFailAction{constructor(n){super(A,n),this.payload=n,this.type=re}}class Or extends o.kPG.LoaderSuccessAction{constructor(n){super(A),this.payload=n,this.type=te}}class se extends o.kPG.LoaderResetAction{constructor(){super(A),this.type="[Order] Clear User Orders"}}const ne="[Order] Load Replenishment Order Details",oe="[Order] Load Replenishment Order Details Success",ie="[Order] Cancel Replenishment Order",q="[Order] Cancel Replenishment Order Success";class Cr extends o.kPG.LoaderLoadAction{constructor(n){super(P),this.payload=n,this.type=ne}}class fr extends o.kPG.LoaderSuccessAction{constructor(n){super(P),this.payload=n,this.type=oe}}class mr extends o.kPG.LoaderFailAction{constructor(n){super(P,n),this.payload=n,this.type="[Order] Load Replenishment Order Details Fail"}}class gr extends o.kPG.LoaderResetAction{constructor(){super(P),this.type="[Order] Clear Replenishment Order Details"}}class Dr extends o.kPG.EntityLoadAction{constructor(n){super(o.BzF,m),this.payload=n,this.type=ie}}class vr extends o.kPG.EntitySuccessAction{constructor(n){super(o.BzF,m),this.payload=n,this.type=q}}class _r extends o.kPG.EntityFailAction{constructor(n){super(o.BzF,m,n),this.payload=n,this.type="[Order] Cancel Replenishment Order Fail"}}class yr extends o.kPG.EntityLoaderResetAction{constructor(){super(o.BzF,m),this.type="[Order] Clear Cancel Replenishment Order"}}const ce="[Order] Load User Replenishment Orders",de="[Order] Load User Replenishment Orders Success";class Tr extends o.kPG.LoaderLoadAction{constructor(n){super(F),this.payload=n,this.type=ce}}class Fr extends o.kPG.LoaderFailAction{constructor(n){super(F,n),this.payload=n,this.type="[Order] Load User Replenishment Orders Fail"}}class Pr extends o.kPG.LoaderSuccessAction{constructor(n){super(F),this.payload=n,this.type=de}}class Ir extends o.kPG.LoaderResetAction{constructor(){super(F),this.type="[Order] Clear User Replenishment Orders"}}const f=(0,a.ZF)("order"),Nr=(0,a.P1)(f,e=>e.consignmentTracking),Gr=(0,a.P1)(Nr,e=>e.tracking),kr=(0,a.P1)(f,e=>e.orderDetail),Mr=(0,a.P1)(kr,e=>o.kPG.loaderValueSelector(e)),H=(0,a.P1)(f,e=>e.orderReturn),wr=(0,a.P1)(H,e=>o.kPG.loaderValueSelector(e)),qr=(0,a.P1)(H,e=>o.kPG.loaderLoadingSelector(e)),Hr=(0,a.P1)(H,e=>o.kPG.loaderSuccessSelector(e)&&!o.kPG.loaderLoadingSelector(e)),ae=(0,a.P1)(f,e=>e.orderReturnList),x=((0,a.P1)(ae,e=>o.kPG.loaderValueSelector(e)),(0,a.P1)(f,e=>e.orders)),xr=(0,a.P1)(x,e=>o.kPG.loaderSuccessSelector(e)),I=((0,a.P1)(x,e=>o.kPG.loaderValueSelector(e)),(0,a.P1)(f,e=>e.replenishmentOrder)),$r=(0,a.P1)(I,e=>o.kPG.loaderValueSelector(e)),zr=(0,a.P1)(I,e=>o.kPG.loaderLoadingSelector(e)),br=(0,a.P1)(I,e=>o.kPG.loaderSuccessSelector(e)),Yr=(0,a.P1)(I,e=>o.kPG.loaderErrorSelector(e)),v=(0,a.P1)(f,e=>e.replenishmentOrders),Vr=((0,a.P1)(v,e=>o.kPG.loaderValueSelector(e)),(0,a.P1)(v,e=>o.kPG.loaderLoadingSelector(e))),Qr=(0,a.P1)(v,e=>o.kPG.loaderErrorSelector(e)),Br=(0,a.P1)(v,e=>o.kPG.loaderSuccessSelector(e));let Kr=(()=>{class e{constructor(r,t,s,i){this.store=r,this.processStateStore=t,this.userIdService=s,this.routingService=i}getOrderDetails(){return this.store.pipe((0,a.Ys)(Mr))}loadOrderDetails(r){this.userIdService.takeUserId().subscribe(t=>{this.store.dispatch(new Ie({userId:t,orderCode:r}))})}clearOrderDetails(){this.store.dispatch(new ke)}getOrderHistoryList(r){return this.store.pipe((0,a.Ys)(x),(0,_.b)(t=>{t.loading||t.success||t.error||this.loadOrderList(r)}),(0,l.U)(t=>t.value))}getOrderHistoryListLoaded(){return this.store.pipe((0,a.Ys)(xr))}loadOrderList(r,t,s){this.userIdService.takeUserId(!0).subscribe(i=>{let d;this.routingService.getRouterState().pipe((0,z.q)(1)).subscribe(p=>{d=p?.state?.params?.replenishmentOrderCode}).unsubscribe(),this.store.dispatch(new Rr({userId:i,pageSize:r,currentPage:t,sort:s,replenishmentOrderCode:d}))},()=>{})}clearOrderList(){this.store.dispatch(new se)}getConsignmentTracking(){return this.store.pipe((0,a.Ys)(Gr))}loadConsignmentTracking(r,t){this.userIdService.takeUserId().subscribe(s=>{this.store.dispatch(new ge({userId:s,orderCode:r,consignmentCode:t}))})}clearConsignmentTracking(){this.store.dispatch(new _e)}cancelOrder(r,t){this.userIdService.takeUserId().subscribe(s=>{this.store.dispatch(new Me({userId:s,orderCode:r,cancelRequestInput:t}))})}getCancelOrderLoading(){return this.processStateStore.pipe((0,a.Ys)(o.VkE.getProcessLoadingFactory(g)))}getCancelOrderSuccess(){return this.processStateStore.pipe((0,a.Ys)(o.VkE.getProcessSuccessFactory(g)))}resetCancelOrderProcessState(){return this.store.dispatch(new He)}}return e.\u0275fac=function(r){return new(r||e)(c.LFG(a.yh),c.LFG(a.yh),c.LFG(o.XBV),c.LFG(o.Znh))},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac}),e})(),Wr=(()=>{class e{constructor(r,t,s){this.store=r,this.processStateStore=t,this.userIdService=s}createOrderReturnRequest(r){this.userIdService.takeUserId().subscribe(t=>{this.store.dispatch(new Xe({userId:t,returnRequestInput:r}))})}getOrderReturnRequest(){return this.store.pipe((0,a.Ys)(wr))}getOrderReturnRequestList(r){return this.store.pipe((0,a.Ys)(ae),(0,_.b)(t=>{t.loading||t.success||t.error||this.loadOrderReturnRequestList(r)}),(0,l.U)(t=>t.value))}loadOrderReturnRequestDetail(r){this.userIdService.takeUserId().subscribe(t=>{this.store.dispatch(new Ze({userId:t,returnRequestCode:r}))})}loadOrderReturnRequestList(r,t,s){this.userIdService.takeUserId(!0).subscribe(i=>{this.store.dispatch(new or({userId:i,pageSize:r,currentPage:t,sort:s}))},()=>{})}clearOrderReturnRequestList(){this.store.dispatch(new ar)}getReturnRequestLoading(){return this.store.pipe((0,a.Ys)(qr))}getReturnRequestSuccess(){return this.store.pipe((0,a.Ys)(Hr))}clearOrderReturnRequestDetail(){this.store.dispatch(new dr)}cancelOrderReturnRequest(r,t){this.userIdService.takeUserId().subscribe(s=>{this.store.dispatch(new tr({userId:s,returnRequestCode:r,returnRequestModification:t}))})}getCancelReturnRequestLoading(){return this.processStateStore.pipe((0,a.Ys)(o.VkE.getProcessLoadingFactory(D)))}getCancelReturnRequestSuccess(){return this.processStateStore.pipe((0,a.Ys)(o.VkE.getProcessSuccessFactory(D)))}resetCancelReturnRequestProcessState(){return this.store.dispatch(new ur)}}return e.\u0275fac=function(r){return new(r||e)(c.LFG(a.yh),c.LFG(a.yh),c.LFG(o.XBV))},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac}),e})(),Xr=(()=>{class e{constructor(r,t,s,i,d){this.activeCartFacade=r,this.userIdService=t,this.commandService=s,this.orderConnector=i,this.eventService=d,this.placedOrder$=new ot.X(void 0),this.placeOrderCommand=this.commandService.create(p=>this.checkoutPreconditions().pipe((0,E.w)(([$,G])=>this.orderConnector.placeOrder($,G,p).pipe((0,_.b)(k=>{this.placedOrder$.next(k),this.eventService.dispatch({userId:$,cartId:G,cartCode:G,order:k},R.uZ)})))),{strategy:o.flE.CancelPrevious})}checkoutPreconditions(){return(0,Oe.aj)([this.userIdService.takeUserId(),this.activeCartFacade.takeActiveCartId(),this.activeCartFacade.isGuestCart()]).pipe((0,z.q)(1),(0,l.U)(([r,t,s])=>{if(!r||!t||r===o.Fds&&!s)throw new Error("Checkout conditions not met");return[r,t]}))}placeOrder(r){return this.placeOrderCommand.execute(r)}getOrderDetails(){return this.placedOrder$.asObservable()}clearPlacedOrder(){this.placedOrder$.next(void 0)}setPlacedOrder(r){this.placedOrder$.next(r)}}return e.\u0275fac=function(r){return new(r||e)(c.LFG(M.bu),c.LFG(o.XBV),c.LFG(o.VDr),c.LFG(Se),c.LFG(o.POd))},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac}),e})(),jr=(()=>{class e{constructor(r,t,s){this.store=r,this.processStateStore=t,this.userIdService=s}loadReplenishmentOrderDetails(r){this.userIdService.takeUserId(!0).subscribe(t=>{this.store.dispatch(new Cr({userId:t,replenishmentOrderCode:r}))},()=>{})}getReplenishmentOrderDetails(){return this.store.pipe((0,a.Ys)($r))}getReplenishmentOrderDetailsLoading(){return this.store.pipe((0,a.Ys)(zr))}getReplenishmentOrderDetailsSuccess(){return this.store.pipe((0,a.Ys)(br))}getReplenishmentOrderDetailsError(){return this.store.pipe((0,a.Ys)(Yr))}clearReplenishmentOrderDetails(){this.store.dispatch(new gr)}cancelReplenishmentOrder(r){this.userIdService.takeUserId(!0).subscribe(t=>{this.store.dispatch(new Dr({userId:t,replenishmentOrderCode:r}))},()=>{})}getCancelReplenishmentOrderLoading(){return this.processStateStore.pipe((0,a.Ys)(o.VkE.getProcessLoadingFactory(m)))}getCancelReplenishmentOrderSuccess(){return this.processStateStore.pipe((0,a.Ys)(o.VkE.getProcessSuccessFactory(m)))}getCancelReplenishmentOrderError(){return this.processStateStore.pipe((0,a.Ys)(o.VkE.getProcessErrorFactory(m)))}clearCancelReplenishmentOrderProcessState(){this.store.dispatch(new yr)}getReplenishmentOrderHistoryList(r){return this.store.pipe((0,a.Ys)(v),(0,_.b)(t=>{t.loading||t.success||t.error||this.loadReplenishmentOrderList(r)}),(0,l.U)(t=>t.value))}getReplenishmentOrderHistoryListLoading(){return this.store.pipe((0,a.Ys)(Vr))}getReplenishmentOrderHistoryListError(){return this.store.pipe((0,a.Ys)(Qr))}getReplenishmentOrderHistoryListSuccess(){return this.store.pipe((0,a.Ys)(Br))}loadReplenishmentOrderList(r,t,s){this.userIdService.takeUserId(!0).subscribe(i=>{this.store.dispatch(new Tr({userId:i,pageSize:r,currentPage:t,sort:s}))},()=>{})}clearReplenishmentOrderList(){this.store.dispatch(new Ir)}}return e.\u0275fac=function(r){return new(r||e)(c.LFG(a.yh),c.LFG(a.yh),c.LFG(o.XBV))},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac}),e})(),Jr=(()=>{class e{constructor(r,t,s,i,d,p){this.activeCartFacade=r,this.userIdService=t,this.commandService=s,this.scheduledReplenishmentOrderConnector=i,this.eventService=d,this.orderFacade=p,this.scheduleReplenishmentOrderCommand=this.commandService.create(({form:$,termsChecked:G})=>this.checkoutPreconditions().pipe((0,E.w)(([k,Re])=>this.scheduledReplenishmentOrderConnector.scheduleReplenishmentOrder(Re,$,G,k).pipe((0,_.b)(st=>{this.orderFacade.setPlacedOrder(st),this.eventService.dispatch({userId:k,cartId:Re,cartCode:Re,replenishmentOrder:st},R.oL)})))),{strategy:o.flE.CancelPrevious})}checkoutPreconditions(){return(0,Oe.aj)([this.userIdService.takeUserId(),this.activeCartFacade.takeActiveCartId(),this.activeCartFacade.isGuestCart()]).pipe((0,z.q)(1),(0,l.U)(([r,t,s])=>{if(!r||!t||r===o.Fds&&!s)throw new Error("Order conditions not met");return[r,t]}))}scheduleReplenishmentOrder(r,t){return this.scheduleReplenishmentOrderCommand.execute({termsChecked:t,form:r})}}return e.\u0275fac=function(r){return new(r||e)(c.LFG(M.bu),c.LFG(o.XBV),c.LFG(o.VDr),c.LFG(fe),c.LFG(o.POd),c.LFG(R.Vh))},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac}),e})();const at=[Wr,{provide:R.U1,useExisting:Wr},Kr,{provide:R.Kr,useExisting:Kr},jr,{provide:R.kp,useExisting:jr},Jr,{provide:R.wT,useExisting:Jr},Xr,{provide:R.Vh,useExisting:Xr}],ut=[(()=>{class e{constructor(r,t,s){this.actions$=r,this.orderConnector=t,this.replenishmentOrderConnector=s,this.loadUserOrders$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(ee),(0,l.U)(i=>i.payload),(0,E.w)(i=>(Boolean(i.replenishmentOrderCode)?this.replenishmentOrderConnector.loadReplenishmentDetailsHistory(i.userId,i.replenishmentOrderCode??"",i.pageSize,i.currentPage,i.sort):this.orderConnector.getHistory(i.userId,i.pageSize,i.currentPage,i.sort)).pipe((0,l.U)(d=>new Or(d)),(0,h.K)(d=>(0,S.of)(new pr((0,o.cxH)(d)))))))),this.resetUserOrders$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(o.dO9.LANGUAGE_CHANGE),(0,l.U)(()=>new se)))}}return e.\u0275fac=function(r){return new(r||e)(c.LFG(u.eX),c.LFG(y),c.LFG(w))},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac}),e})(),(()=>{class e{constructor(r,t,s){this.actions$=r,this.orderConnector=t,this.globalMessageService=s,this.loadOrderDetails$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(Q),(0,l.U)(i=>i.payload),(0,E.w)(i=>this.orderConnector.get(i.userId,i.orderCode).pipe((0,l.U)(d=>new Ge(d)),(0,h.K)(d=>(0,S.of)(new Ne((0,o.cxH)(d)))))))),this.cancelOrder$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(K),(0,l.U)(i=>i.payload),(0,E.w)(i=>this.orderConnector.cancel(i.userId,i.orderCode,i.cancelRequestInput).pipe((0,l.U)(()=>new qe),(0,h.K)(d=>(d.error?.errors.forEach(p=>this.globalMessageService.add(p.message,o.xUg.MSG_TYPE_ERROR)),(0,S.of)(new we((0,o.cxH)(d)))))))))}}return e.\u0275fac=function(r){return new(r||e)(c.LFG(u.eX),c.LFG(y),c.LFG(o.IWp))},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac}),e})(),(()=>{class e{constructor(r,t){this.actions$=r,this.orderConnector=t,this.loadConsignmentTracking$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(b),(0,l.U)(s=>s.payload),(0,E.w)(s=>this.orderConnector.getConsignmentTracking(s.orderCode,s.consignmentCode,s.userId).pipe((0,l.U)(i=>new ve(i)),(0,h.K)(i=>(0,S.of)(new De((0,o.cxH)(i))))))))}}return e.\u0275fac=function(r){return new(r||e)(c.LFG(u.eX),c.LFG(y))},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac}),e})(),(()=>{class e{constructor(r,t){this.actions$=r,this.orderConnector=t,this.createReturnRequest$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(W),(0,l.U)(s=>s.payload),(0,E.w)(s=>this.orderConnector.return(s.userId,s.returnRequestInput).pipe((0,l.U)(i=>new Je(i)),(0,h.K)(i=>(0,S.of)(new je((0,o.cxH)(i)))))))),this.loadReturnRequest$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(X),(0,l.U)(s=>s.payload),(0,E.w)(s=>this.orderConnector.getReturnRequestDetail(s.userId,s.returnRequestCode).pipe((0,l.U)(i=>new rr(i)),(0,h.K)(i=>(0,S.of)(new er((0,o.cxH)(i)))))))),this.cancelReturnRequest$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(j),(0,l.U)(s=>s.payload),(0,E.w)(s=>this.orderConnector.cancelReturnRequest(s.userId,s.returnRequestCode,s.returnRequestModification).pipe((0,l.U)(()=>new nr),(0,h.K)(i=>(0,S.of)(new sr((0,o.cxH)(i)))))))),this.loadReturnRequestList$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(J),(0,l.U)(s=>s.payload),(0,E.w)(s=>this.orderConnector.getReturnRequestList(s.userId,s.pageSize,s.currentPage,s.sort).pipe((0,l.U)(i=>new cr(i)),(0,h.K)(i=>(0,S.of)(new ir((0,o.cxH)(i))))))))}}return e.\u0275fac=function(r){return new(r||e)(c.LFG(u.eX),c.LFG(y))},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac}),e})(),(()=>{class e{constructor(r,t,s){this.actions$=r,this.replenishmentOrderConnector=t,this.globalMessageService=s,this.loadReplenishmentOrderDetails$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(ne),(0,l.U)(i=>i.payload),(0,E.w)(i=>this.replenishmentOrderConnector.load(i.userId,i.replenishmentOrderCode).pipe((0,l.U)(d=>new fr(d)),(0,h.K)(d=>(0,S.of)(new mr((0,o.cxH)(d)))))))),this.cancelReplenishmentOrder$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(ie),(0,l.U)(i=>i.payload),(0,E.w)(i=>this.replenishmentOrderConnector.cancelReplenishmentOrder(i.userId,i.replenishmentOrderCode).pipe((0,l.U)(d=>new vr(d)),(0,h.K)(d=>(d?.error?.errors.forEach(p=>this.globalMessageService.add(p.message,o.xUg.MSG_TYPE_ERROR)),(0,S.of)(new _r((0,o.cxH)(d)))))))))}}return e.\u0275fac=function(r){return new(r||e)(c.LFG(u.eX),c.LFG(w),c.LFG(o.IWp))},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac}),e})(),(()=>{class e{constructor(r,t){this.actions$=r,this.replenishmentOrderConnector=t,this.loadUserReplenishmentOrders$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(ce),(0,l.U)(s=>s.payload),(0,E.w)(s=>this.replenishmentOrderConnector.loadHistory(s.userId,s.pageSize,s.currentPage,s.sort).pipe((0,l.U)(i=>new Pr(i)),(0,h.K)(i=>(0,S.of)(new Fr((0,o.cxH)(i))))))))}}return e.\u0275fac=function(r){return new(r||e)(c.LFG(u.eX),c.LFG(w))},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac}),e})()],Zr={tracking:{}};function lt(e=Zr,n){switch(n.type){case Y:return{tracking:n.payload};case V:return Zr}return e}const Rt={};function pt(e=Rt,n){return n.type===B?n.payload:e}const et={returnRequests:[],pagination:{},sorts:[]};function Ot(e=et,n){return n.type===Z?n.payload?n.payload:et:e}const ue={orders:[],pagination:{},sorts:[]};function ht(e=ue,n){switch(n.type){case te:return n.payload?n.payload:ue;case re:return ue}return e}const rt={};function Et(e=rt,n){switch(n.type){case oe:case q:return n.payload?n.payload:rt;default:return e}}const le={replenishmentOrders:[],pagination:{},sorts:[]};function St(e=le,n){switch(n.type){case de:return n.payload?n.payload:le;case q:{const r=n.payload,t=[...e.replenishmentOrders??[]],s=t.findIndex(i=>i.replenishmentOrderCode===r.replenishmentOrderCode);return-1===s?le:(t[s]={...r},{...e,replenishmentOrders:t})}}return e}const tt=new c.OlP("OrderReducers"),Ct={provide:tt,useFactory:function Lt(){return{orders:o.kPG.loaderReducer(A,ht),orderDetail:o.kPG.loaderReducer(T,pt),replenishmentOrders:o.kPG.loaderReducer(F,St),orderReturn:o.kPG.loaderReducer(C),orderReturnList:o.kPG.loaderReducer(U,Ot),consignmentTracking:lt,replenishmentOrder:o.kPG.loaderReducer(P,Et)}}};let ft=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({providers:[Ct],imports:[u.sQ.forFeature(ut),a.Aw.forFeature("order",tt)]}),e})(),mt=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({providers:[...at,y,w,Se,fe],imports:[ft]}),e})();var L=O(529),N=O(1737),gt=O(6895);let Dt=(()=>{class e{constructor(r){this.converter=r}convert(r,t){return void 0===t&&(t={...r}),r.entries&&(t.entries=r.entries.map(s=>this.convertOrderEntry(s,r.code,r.appliedProductPromotions))),r.consignments&&(t.consignments=r.consignments.map(s=>({...s,entries:s.entries?.map(i=>({...i,orderEntry:this.convertOrderEntry(i.orderEntry,r.code,r.appliedProductPromotions)}))}))),r.unconsignedEntries&&(t.unconsignedEntries=r.unconsignedEntries.map(s=>this.convertOrderEntry(s,r.code,r.appliedProductPromotions))),t}convertOrderEntry(r,t,s){return{...r,product:this.converter.convert(r?.product,o.jrf),orderCode:t,promotions:this.converter.convert({item:r,promotions:s},M.Cx)}}}return e.\u0275fac=function(r){return new(r||e)(c.LFG(o.IXI))},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),vt=(()=>{class e{constructor(r){this.converter=r}convert(r,t){return void 0===t&&(t={...r}),r.entries&&(t.entries=r.entries.map(s=>({...s,product:this.converter.convert(s.product,o.jrf),promotions:this.converter.convert({item:s,promotions:r.appliedProductPromotions},M.Cx)}))),t}}return e.\u0275fac=function(r){return new(r||e)(c.LFG(o.IXI))},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),_t=(()=>{class e{constructor(r){this.converter=r}convert(r,t){return void 0===t&&(t={...r}),r.returnEntries&&(t.returnEntries=r.returnEntries.map(s=>({...s,orderEntry:this.convertOrderEntry(s.orderEntry)}))),t}convertOrderEntry(r){return{...r,product:this.converter.convert(r?.product,o.jrf)}}}return e.\u0275fac=function(r){return new(r||e)(c.LFG(o.IXI))},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),yt=(()=>{class e{convert(r,t){return void 0===t&&(t={...r}),r.replenishmentStartDate&&(t.replenishmentStartDate=this.convertDate(r.replenishmentStartDate)),t}convertDate(r){return`${r}T${(new Date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hourCycle:"h23"})}:00${o.IMh.getLocalTimezoneOffset()}`}}return e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),At=(()=>{class e{constructor(r,t,s){this.http=r,this.occEndpoints=t,this.converter=s}load(r,t){const s=this.occEndpoints.buildUrl("orderDetail",{urlParams:{userId:r,orderId:t}});let i=new L.WM;return r===o.Fds&&(i=o.Fox.createHeader(o._Re,!0,i)),this.http.get(s,{headers:i}).pipe(this.converter.pipeable(R.YA))}loadHistory(r,t,s,i){const d={};t&&(d.pageSize=t.toString()),s&&(d.currentPage=s.toString()),i&&(d.sort=i.toString());const p=this.occEndpoints.buildUrl("orderHistory",{urlParams:{userId:r},queryParams:d});return this.http.get(p).pipe(this.converter.pipeable(R.Rc))}getConsignmentTracking(r,t,s=o.zyp){const i=this.occEndpoints.buildUrl("consignmentTracking",{urlParams:{userId:s,orderCode:r,consignmentCode:t}});return this.http.get(i).pipe(this.converter.pipeable(R.m1))}cancel(r,t,s){const i=this.occEndpoints.buildUrl("cancelOrder",{urlParams:{userId:r,orderId:t}}),d=new L.WM({"Content-Type":"application/json"});return this.http.post(i,s,{headers:d}).pipe((0,h.K)(p=>(0,N._)(p)))}createReturnRequest(r,t){const s=this.occEndpoints.buildUrl("returnOrder",{urlParams:{userId:r}}),i=new L.WM({"Content-Type":"application/json"});return t=this.converter.convert(t,R.Nz),this.http.post(s,t,{headers:i}).pipe((0,h.K)(d=>(0,N._)(d)),this.converter.pipeable(R.Ge))}loadReturnRequestList(r,t,s,i){const d={};t&&(d.pageSize=t.toString()),s&&(d.currentPage=s.toString()),i&&(d.sort=i.toString());const p=this.occEndpoints.buildUrl("orderReturns",{urlParams:{userId:r},queryParams:d});return this.http.get(p).pipe(this.converter.pipeable(R.SL))}loadReturnRequestDetail(r,t){const s=this.occEndpoints.buildUrl("orderReturnDetail",{urlParams:{userId:r,returnRequestCode:t}});return this.http.get(s).pipe(this.converter.pipeable(R.Ge))}cancelReturnRequest(r,t,s){const i=this.occEndpoints.buildUrl("cancelReturn",{urlParams:{userId:r,returnRequestCode:t}}),d=new L.WM({"Content-Type":"application/json"});return this.http.patch(i,s,{headers:d}).pipe((0,h.K)(p=>(0,N._)(p)))}}return e.\u0275fac=function(r){return new(r||e)(c.LFG(L.eN),c.LFG(o.Lz0),c.LFG(o.IXI))},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac}),e})(),Ut=(()=>{class e{constructor(r,t,s){this.http=r,this.occEndpoints=t,this.converter=s}placeOrder(r,t,s){let i=new L.WM({"Content-Type":"application/x-www-form-urlencoded"});return r===o.Fds&&(i=o.Fox.createHeader(o._Re,!0,i)),this.http.post(this.getPlaceOrderEndpoint(r,t,s.toString()),{},{headers:i}).pipe((0,h.K)(d=>(0,N._)((0,o.cxH)(d))),(0,o.twT)({shouldRetry:o.Pzz}),this.converter.pipeable(R.YA))}getPlaceOrderEndpoint(r,t,s){return this.occEndpoints.buildUrl("placeOrder",{urlParams:{userId:r},queryParams:{cartId:t,termsChecked:s}})}}return e.\u0275fac=function(r){return new(r||e)(c.LFG(L.eN),c.LFG(o.Lz0),c.LFG(o.IXI))},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac}),e})(),Tt=(()=>{class e{constructor(r,t,s){this.http=r,this.occEndpoints=t,this.converter=s}load(r,t){return this.http.get(this.occEndpoints.buildUrl("replenishmentOrderDetails",{urlParams:{userId:r,replenishmentOrderCode:t}})).pipe(this.converter.pipeable(R.JD))}loadReplenishmentDetailsHistory(r,t,s,i,d){const p={};return s&&(p.pageSize=s.toString()),i&&(p.currentPage=i.toString()),d&&(p.sort=d.toString()),this.http.get(this.occEndpoints.buildUrl("replenishmentOrderDetailsHistory",{urlParams:{userId:r,replenishmentOrderCode:t},queryParams:p})).pipe(this.converter.pipeable(R.Rc))}cancelReplenishmentOrder(r,t){const s=(new L.WM).set("Content-Type","application/json");return this.http.patch(this.occEndpoints.buildUrl("cancelReplenishmentOrder",{urlParams:{userId:r,replenishmentOrderCode:t}}),{},{headers:s}).pipe(this.converter.pipeable(R.JD))}loadHistory(r,t,s,i){const d={};t&&(d.pageSize=t.toString()),s&&(d.currentPage=s.toString()),i&&(d.sort=i.toString());const p=this.occEndpoints.buildUrl("replenishmentOrderHistory",{urlParams:{userId:r},queryParams:d});return this.http.get(p).pipe(this.converter.pipeable(R.HN))}}return e.\u0275fac=function(r){return new(r||e)(c.LFG(L.eN),c.LFG(o.Lz0),c.LFG(o.IXI))},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac}),e})(),Ft=(()=>{class e{constructor(r,t,s){this.http=r,this.occEndpoints=t,this.converter=s}scheduleReplenishmentOrder(r,t,s,i){t=this.converter.convert(t,R.dC);const d=(new L.WM).set("Content-Type","application/json");return this.http.post(this.getScheduleReplenishmentOrderEndpoint(i,r,s.toString()),t,{headers:d}).pipe((0,h.K)(p=>(0,N._)((0,o.cxH)(p))),(0,o.twT)({shouldRetry:o.Pzz}),this.converter.pipeable(R.JD))}getScheduleReplenishmentOrderEndpoint(r,t,s){return this.occEndpoints.buildUrl("scheduleReplenishmentOrder",{urlParams:{userId:r},queryParams:{cartId:t,termsChecked:s}})}}return e.\u0275fac=function(r){return new(r||e)(c.LFG(L.eN),c.LFG(o.Lz0),c.LFG(o.IXI))},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac}),e})();const Pt={backend:{occ:{endpoints:{orderHistory:"users/${userId}/orders",orderDetail:"users/${userId}/orders/${orderId}?fields=FULL",consignmentTracking:"users/${userId}/orders/${orderCode}/consignments/${consignmentCode}/tracking",cancelOrder:"users/${userId}/orders/${orderId}/cancellation",returnOrder:"users/${userId}/orderReturns?fields=BASIC,returnEntries(BASIC,refundAmount(formattedValue),orderEntry(basePrice(formattedValue),product(name,code,baseOptions,images(DEFAULT,galleryIndex)))),deliveryCost(formattedValue),totalPrice(formattedValue),subTotal(formattedValue)",orderReturns:"users/${userId}/orderReturns?fields=BASIC",orderReturnDetail:"users/${userId}/orderReturns/${returnRequestCode}?fields=BASIC,returnEntries(BASIC,refundAmount(formattedValue),orderEntry(basePrice(formattedValue),product(name,code,baseOptions,images(DEFAULT,galleryIndex)))),deliveryCost(formattedValue),totalPrice(formattedValue),subTotal(formattedValue)",cancelReturn:"users/${userId}/orderReturns/${returnRequestCode}",replenishmentOrderDetails:"users/${userId}/replenishmentOrders/${replenishmentOrderCode}?fields=FULL,costCenter(FULL),purchaseOrderNumber,paymentType,user",replenishmentOrderDetailsHistory:"users/${userId}/replenishmentOrders/${replenishmentOrderCode}/orders",cancelReplenishmentOrder:"users/${userId}/replenishmentOrders/${replenishmentOrderCode}?fields=FULL,costCenter(FULL),purchaseOrderNumber,paymentType,user",replenishmentOrderHistory:"users/${userId}/replenishmentOrders?fields=FULL,replenishmentOrders(FULL, purchaseOrderNumber)",placeOrder:"users/${userId}/orders?fields=FULL"}}}};let It=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({providers:[(0,o.i51)(Pt),{provide:he,useClass:At},{provide:Le,useClass:Tt},{provide:Ee,useClass:Ut},{provide:Ce,useClass:Ft},{provide:R.Ge,useExisting:_t,multi:!0},{provide:R.YA,useExisting:Dt,multi:!0},{provide:R.JD,useExisting:vt,multi:!0},{provide:R.dC,useExisting:yt,multi:!0}],imports:[gt.ez]}),e})(),Nt=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[mt,It,nt.FR]}),e})()}}]);