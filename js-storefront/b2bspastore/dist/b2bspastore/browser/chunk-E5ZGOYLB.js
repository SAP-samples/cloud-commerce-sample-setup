import{c as B}from"./chunk-GJRLBUEG.js";import{c as ie}from"./chunk-FLUWA7EM.js";import{a as w,b as $,e as j,i as re,j as oe}from"./chunk-FAW5SCOQ.js";import"./chunk-APA5RVE3.js";import{C as ne,P as U}from"./chunk-OM5F6SG5.js";import{La as Zt,Mb as ee,Nb as F,fb as te,ia as zt,ja as Qt,sa as qt,va as Jt,ya as Kt,za as Xt}from"./chunk-F5NBEN52.js";import{Da as Lt,Db as Tt,Ea as X,Eb as u,Ee as O,Fa as Z,Fb as wt,Fc as bt,Fd as jt,Gb as x,Hb as ot,I as E,Ka as Et,Mf as Vt,N as D,Nb as Ft,Nf as Gt,O as yt,Pb as st,Qe as Nt,R as vt,Rd as T,Sa as s,Ta as tt,Td as Bt,V as z,Vb as d,Wb as m,Xd as dt,Ze as kt,_b as at,bb as h,cd as pt,db as l,dd as Mt,df as Rt,ee as Ht,ef as Pt,ia as _,jb as p,jd as S,kb as c,kd as Dt,ke as mt,la as Q,lb as St,ld as W,lg as ht,mb as et,md as Ot,mg as Yt,n as gt,na as q,nb as it,ob as Wt,pb as nt,qa as J,r as M,ra as C,rb as rt,re as ut,sb as f,sc as ct,ta as y,tc as lt,ua as Ct,v,vd as Ut,w as _t,xd as $t,ya as K,yc as At,za as L}from"./chunk-Q7YDE2H2.js";var fe=["cx-wish-list-item",""],ae=e=>({cxRoute:"product",params:e});function Ie(e,t){if(e&1&&(p(0,"div",13)(1,"a",14),d(2,"cxUrl"),u(3),c()()),e&2){let r=f();s(),l("routerLink",m(2,2,st(4,ae,r.cartEntry.product))),s(2),wt(r.cartEntry.product==null?null:r.cartEntry.product.name)}}function xe(e,t){if(e&1&&(p(0,"div",15),u(1),d(2,"cxTranslate"),c()),e&2){let r=f();s(),ot(" ",m(2,2,"cartItems.id")," ",r.cartEntry.product==null?null:r.cartEntry.product.code," ")}}function ge(e,t){if(e&1&&(p(0,"div",19),u(1),c()),e&2){let r=f().$implicit;s(),ot(" ",r.name,": ",r.value," ")}}function _e(e,t){if(e&1&&(p(0,"div",17),h(1,ge,2,2,"div",18),c()),e&2){let r=t.$implicit;s(),l("ngIf",r.name&&r.value)}}function ye(e,t){if(e&1&&(et(0),h(1,_e,2,1,"div",16),it()),e&2){let r=f();s(),l("ngForOf",r.cartEntry.product==null||r.cartEntry.product.baseOptions[0]==null||r.cartEntry.product.baseOptions[0].selected==null?null:r.cartEntry.product.baseOptions[0].selected.variantOptionQualifiers)}}function ve(e,t){if(e&1&&(p(0,"div",23),u(1),c()),e&2){let r=f(2);s(),x(" ",r.cartEntry.basePrice==null?null:r.cartEntry.basePrice.formattedValue," ")}}function Ce(e,t){if(e&1&&(p(0,"td",20)(1,"div",21),u(2),d(3,"cxTranslate"),c(),h(4,ve,2,1,"div",22),c()),e&2){let r=f();s(2),x(" ",m(3,2,"cartItems.itemPrice")," "),s(2),l("ngIf",r.cartEntry.basePrice)}}function Le(e,t){e&1&&Wt(0,24)}function Ee(e,t){e&1&&(p(0,"span",25),u(1),d(2,"cxTranslate"),c()),e&2&&(s(),x(" ",m(2,1,"addToCart.outOfStock")," "))}function Se(e,t){if(e&1){let r=nt();p(0,"button",26),d(1,"cxTranslate"),rt("click",function(){X(r);let n=f();return Z(n.removeEntry(n.cartEntry))}),u(2),d(3,"cxTranslate"),c()}if(e&2){let r=f();l("cxAtMessage",m(1,3,"wishlist.itemRemoved"))("disabled",r.isLoading),s(2),x(" ",m(3,5,"common.remove")," ")}}function We(e,t){if(e&1){let r=nt();p(0,"tr",11),d(1,"async"),rt("remove",function(n){X(r);let o=f(3);return Z(o.removeEntry(n))}),c()}if(e&2){let r=t.$implicit,i=f(3);l("cartEntry",r)("isLoading",m(1,2,i.loading$))}}function Te(e,t){if(e&1&&(p(0,"table",3)(1,"caption",4),u(2),d(3,"cxTranslate"),c(),p(4,"thead")(5,"tr",5)(6,"th",6),u(7),d(8,"cxTranslate"),c(),p(9,"th",7),u(10),d(11,"cxTranslate"),c(),p(12,"th",8),u(13),d(14,"cxTranslate"),c()()(),p(15,"tbody",9),h(16,We,2,4,"tr",10),c()()),e&2){let r=f().ngIf;s(2),x(" ",m(3,5,"wishlist.caption")," "),s(5),x(" ",m(8,7,"cartItems.description")," "),s(3),x(" ",m(11,9,"cartItems.itemPrice")," "),s(3),x(" ",m(14,11,"cartItems.actions")," "),s(3),l("ngForOf",r==null?null:r.entries)}}function we(e,t){if(e&1&&(et(0),h(1,Te,17,13,"table",2),it()),e&2){let r=t.ngIf;f();let i=Tt(3);s(),l("ngIf",(r==null||r.entries==null?null:r.entries.length)>0)("ngIfElse",i)}}function Fe(e,t){e&1&&(p(0,"p",14),u(1),d(2,"cxTranslate"),c()),e&2&&(s(),x(" ",m(2,1,"wishlist.empty")," "))}function Ae(e,t){e&1&&(p(0,"h2"),u(1),d(2,"cxTranslate"),c()),e&2&&(s(),x(" ",m(2,1,"wishlist.empty")," "))}function be(e,t){e&1&&h(0,Fe,3,3,"p",12)(1,Ae,3,3,"h2",13),e&2&&(l("cxFeature","a11yEmptyWishlistHeading"),s(),l("cxFeature","!a11yEmptyWishlistHeading"))}var Me=(()=>{let t=class t{constructor(i){this.productListItemContextSource=i,this.isLoading=!1,this.remove=new Et,Pt("a11yCartItemsLinksStyles")}ngOnChanges(i){i?.cartEntry&&this.productListItemContextSource.product$.next(this.cartEntry.product)}removeEntry(i){this.remove.emit(i)}};t.\u0275fac=function(n){return new(n||t)(tt(F))},t.\u0275cmp=K({type:t,selectors:[["","cx-wish-list-item",""],["cx-wish-list-item"]],inputs:{isLoading:"isLoading",cartEntry:"cartEntry"},outputs:{remove:"remove"},features:[Ft([F,{provide:ee,useExisting:F}]),Lt],attrs:fe,decls:15,vars:12,consts:[["outOfStock",""],["role","cell"],[1,"cx-table-item-container"],["tabindex","-1",3,"routerLink"],["format","thumbnail",3,"container"],[1,"cx-info"],["class","cx-name",4,"ngIf"],["class","cx-code",4,"ngIf"],[4,"ngIf"],["role","cell","class","cx-price",4,"ngIf"],["role","cell",1,"cx-actions"],["cxInnerComponentsHost","",4,"ngIf"],["class","link cx-action-link cx-remove-btn",3,"cxAtMessage","disabled","click",4,"ngIf"],[1,"cx-name"],[1,"cx-link",3,"routerLink"],[1,"cx-code"],["class","cx-property",4,"ngFor","ngForOf"],[1,"cx-property"],["class","cx-label",4,"ngIf"],[1,"cx-label"],["role","cell",1,"cx-price"],[1,"cx-mobile-header"],["class","cx-value",4,"ngIf"],[1,"cx-value"],["cxInnerComponentsHost",""],[1,"cx-out-of-stock"],[1,"link","cx-action-link","cx-remove-btn",3,"click","cxAtMessage","disabled"]],template:function(n,o){n&1&&(p(0,"td",1)(1,"div",2)(2,"a",3),d(3,"cxUrl"),St(4,"cx-media",4),c(),p(5,"div",5),h(6,Ie,4,6,"div",6)(7,xe,3,4,"div",7),c()(),h(8,ye,2,1,"ng-container",8),c(),h(9,Ce,5,4,"td",9),p(10,"td",10),h(11,Le,1,0,"ng-container",11)(12,Ee,3,3,"ng-template",null,0,at)(14,Se,4,7,"button",12),c()),n&2&&(s(2),l("routerLink",m(3,8,st(10,ae,o.cartEntry.product))),s(2),l("container",o.cartEntry.product==null||o.cartEntry.product.images==null?null:o.cartEntry.product.images.PRIMARY),s(2),l("ngIf",o.cartEntry.product==null?null:o.cartEntry.product.name),s(),l("ngIf",o.cartEntry.product==null?null:o.cartEntry.product.code),s(),l("ngIf",o.cartEntry.product==null||o.cartEntry.product.baseOptions==null?null:o.cartEntry.product.baseOptions.length),s(),l("ngIf",o.cartEntry.basePrice),s(2),l("ngIf",o.cartEntry.updateable),s(3),l("ngIf",o.cartEntry.updateable))},dependencies:[qt,ct,lt,Kt,zt,Ut,ht,Vt],encapsulation:2,changeDetection:0});let e=t;return e})(),De=(()=>{let t=class t{constructor(i){this.wishListFacade=i,this.wishList$=this.wishListFacade.getWishList(),this.loading$=this.wishListFacade.getWishListLoading()}removeEntry(i){this.wishListFacade.removeEntry(i)}};t.\u0275fac=function(n){return new(n||t)(tt(B))},t.\u0275cmp=K({type:t,selectors:[["cx-wish-list"]],decls:4,vars:3,consts:[["emptyWishList",""],[4,"ngIf"],["role","table",4,"ngIf","ngIfElse"],["role","table"],[1,"cx-visually-hidden"],["role","row",1,"cx-item-list-header","cx-wish-list-header"],["role","columnheader",1,"cx-item-list-desc"],["role","columnheader",1,"cx-item-list-price"],["role","columnheader",1,"cx-item-list-actions"],[1,"cx-item-list-items"],["cx-wish-list-item","","role","row","class","cx-item-list-row cx-wish-list-item-row",3,"cartEntry","isLoading","remove",4,"ngFor","ngForOf"],["cx-wish-list-item","","role","row",1,"cx-item-list-row","cx-wish-list-item-row",3,"remove","cartEntry","isLoading"],["class","cx-empty-wish-list",4,"cxFeature"],[4,"cxFeature"],[1,"cx-empty-wish-list"]],template:function(n,o){n&1&&(h(0,we,2,2,"ng-container",1),d(1,"async"),h(2,be,2,2,"ng-template",null,0,at)),n&2&&l("ngIf",m(1,1,o.wishList$))},dependencies:[ct,lt,kt,Me,At,ht],encapsulation:2});let e=t;return e})(),ce=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=L({type:t}),t.\u0275inj=C({providers:[jt({cmsComponents:{WishListComponent:{component:De,data:{composition:{inner:["ProductAddToCartComponent"]}},guards:[Nt]}}})],imports:[Jt,bt,Yt,Zt,Xt,Qt,$t,te,Gt,Rt]});let e=t;return e})();var pe="[Wish List] Create Wish List",Oe="[Wish List] Create Wish List Fail",A="[Wish List] Create Wish List Success",de="[Wish List] Load Wish List",b="[Wish List] Load Wish List Success",Ue="[Wish List] Load Wish List Fail",H=class{constructor(t){this.payload=t,this.type=pe}},ft=class extends T.EntitySuccessAction{constructor(t){super(w,t.cartId),this.payload=t,this.type=A}},It=class extends T.EntityFailAction{constructor(t){super(w,t.cartId,t.error),this.payload=t,this.type=Oe}},xt=class extends T.EntityLoadAction{constructor(t){super(w,t.cartId),this.payload=t,this.type=de}},N=class extends T.EntitySuccessAction{constructor(t){super(w,t.cartId),this.payload=t,this.type=b}},k=class extends T.EntityFailAction{constructor(t){super(w,t.cartId,t.error),this.payload=t,this.type=Ue}};function $e(e){return`wishlist${e}`}var le=(()=>{let t=class t{constructor(i,n,o,R){this.store=i,this.userAccountFacade=n,this.multiCartFacade=o,this.userIdService=R}createWishList(i,n,o){this.store.dispatch(new H({userId:i,name:n,description:o}))}getWishList(){return _t([this.getWishListId(),this.userAccountFacade.get(),this.userIdService.getUserId()]).pipe(z(),Q(([i,n,o])=>{!i&&o!==Bt&&n?.customerId&&this.loadWishList(o,n.customerId)}),E(([i])=>!!i),_(([i])=>this.multiCartFacade.getCart(i)))}loadWishList(i,n){this.store.dispatch(new xt({userId:i,cartId:$e(n)}))}addEntry(i){this.getWishListIdWithUserId().subscribe(([n,o])=>this.multiCartFacade.addEntry(o,n,i,1))}removeEntry(i){this.getWishListIdWithUserId().subscribe(([n,o])=>this.multiCartFacade.removeEntry(o,n,i.entryNumber))}getWishListLoading(){return this.getWishListId().pipe(_(i=>this.multiCartFacade.isStable(i).pipe(v(n=>!n))))}getWishListId(){return this.multiCartFacade.getCartIdByType(U.WISH_LIST)}getWishListIdWithUserId(){return this.getWishListId().pipe(z(),q(this.userIdService.getUserId(),this.userAccountFacade.get()),Q(([i,n,o])=>{!i&&o?.customerId&&this.loadWishList(n,o.customerId)}),E(([i])=>!!i),v(([i,n])=>[i,n]),vt(1))}};t.\u0275fac=function(n){return new(n||t)(y(pt),y(ie),y(ne),y(dt))},t.\u0275prov=J({token:t,factory:t.\u0275fac});let e=t;return e})(),je=[le,{provide:B,useExisting:le}],Be=(()=>{let t=class t{constructor(i,n,o,R){this.actions$=i,this.cartConnector=n,this.userIdService=o,this.store=R,this.logger=Ct(Ht),this.createWishList$=S(()=>this.actions$.pipe(W(pe),v(a=>a.payload),_(a=>this.cartConnector.create(a.userId).pipe(_(g=>this.cartConnector.save(a.userId,g.code??"",a.name,a.description).pipe(_(I=>[new ft({cart:I,cartId:j(I,a.userId)})]),D(I=>M([new It({cartId:g.code??"",error:O(I,this.logger)})])))))))),this.loadWishList$=S(()=>this.actions$.pipe(W(de),v(a=>a.payload),yt(a=>{let{userId:g,cartId:I}=a;return this.cartConnector.loadAll(g).pipe(_(P=>{let V=I,G=P.find(ue=>ue.name===V),Y=[];return Y.push(G?new N({cart:G,cartId:j(G,g)}):new H({userId:g,name:V})),Y.push(new $.RemoveCart({cartId:V})),Y}),D(P=>M([new k({cartId:I,error:O(P,this.logger)})])))}))),this.resetWishList$=S(()=>this.actions$.pipe(W(ut.LANGUAGE_CHANGE,ut.CURRENCY_CHANGE),q(this.userIdService.getUserId(),this.store.pipe(E(a=>!!a.cart),Mt(oe.getCartIdByTypeFactory(U.WISH_LIST)))),_(([,a,g])=>g?this.cartConnector.load(a,g).pipe(_(I=>[new N({cart:I??{},cartId:j(I,a)})]),D(I=>M([new k({cartId:g,error:O(I,this.logger)})]))):gt))),this.setWishListId$=S(()=>this.actions$.pipe(W(A,b),v(a=>{switch(a.type){case A:case b:return new $.SetCartTypeIndex({cartType:U.WISH_LIST,cartId:a.meta.entityId})}}),E(mt))),this.setWishListData$=S(()=>this.actions$.pipe(W(A,b),v(a=>{switch(a.type){case A:case b:return new $.SetCartData({cart:a.payload.cart,cartId:a.payload.cartId})}}),E(mt)))}};t.\u0275fac=function(n){return new(n||t)(y(Dt),y(re),y(dt),y(pt))},t.\u0275prov=J({token:t,factory:t.\u0275fac});let e=t;return e})(),He=[Be],Ne=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=L({type:t}),t.\u0275inj=C({imports:[Ot.forFeature(He)]});let e=t;return e})(),me=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=L({type:t}),t.\u0275inj=C({providers:[...je],imports:[Ne]});let e=t;return e})();var vi=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=L({type:t}),t.\u0275inj=C({imports:[ce,me]});let e=t;return e})();export{vi as WishListModule};
